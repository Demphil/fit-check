(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function bI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vy={exports:{}},sf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function v2(){if(eb)return sf;eb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,r){var l=null;if(r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:r}}return sf.Fragment=e,sf.jsx=n,sf.jsxs=n,sf}var tb;function _2(){return tb||(tb=1,Vy.exports=v2()),Vy.exports}var P=_2(),Ly={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function T2(){if(nb)return ke;nb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function S(G){return G===null||typeof G!="object"?null:(G=E&&G[E]||G["@@iterator"],typeof G=="function"?G:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,R={};function V(G,oe,de){this.props=G,this.context=oe,this.refs=R,this.updater=de||A}V.prototype.isReactComponent={},V.prototype.setState=function(G,oe){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,oe,"setState")},V.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function O(){}O.prototype=V.prototype;function F(G,oe,de){this.props=G,this.context=oe,this.refs=R,this.updater=de||A}var H=F.prototype=new O;H.constructor=F,x(H,V.prototype),H.isPureReactComponent=!0;var Y=Array.isArray;function Z(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function k(G,oe,de){var pe=de.ref;return{$$typeof:t,type:G,key:oe,ref:pe!==void 0?pe:null,props:de}}function U(G,oe){return k(G.type,oe,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function B(G){var oe={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(de){return oe[de]})}var L=/\/+/g;function Ae(G,oe){return typeof G=="object"&&G!==null&&G.key!=null?B(""+G.key):oe.toString(36)}function Se(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Z,Z):(G.status="pending",G.then(function(oe){G.status==="pending"&&(G.status="fulfilled",G.value=oe)},function(oe){G.status==="pending"&&(G.status="rejected",G.reason=oe)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function j(G,oe,de,pe,Ie){var Ne=typeof G;(Ne==="undefined"||Ne==="boolean")&&(G=null);var $e=!1;if(G===null)$e=!0;else switch(Ne){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(G.$$typeof){case t:case e:$e=!0;break;case p:return $e=G._init,j($e(G._payload),oe,de,pe,Ie)}}if($e)return Ie=Ie(G),$e=pe===""?"."+Ae(G,0):pe,Y(Ie)?(de="",$e!=null&&(de=$e.replace(L,"$&/")+"/"),j(Ie,oe,de,"",function(Qs){return Qs})):Ie!=null&&(z(Ie)&&(Ie=U(Ie,de+(Ie.key==null||G&&G.key===Ie.key?"":(""+Ie.key).replace(L,"$&/")+"/")+$e)),oe.push(Ie)),1;$e=0;var kt=pe===""?".":pe+":";if(Y(G))for(var yt=0;yt<G.length;yt++)pe=G[yt],Ne=kt+Ae(pe,yt),$e+=j(pe,oe,de,Ne,Ie);else if(yt=S(G),typeof yt=="function")for(G=yt.call(G),yt=0;!(pe=G.next()).done;)pe=pe.value,Ne=kt+Ae(pe,yt++),$e+=j(pe,oe,de,Ne,Ie);else if(Ne==="object"){if(typeof G.then=="function")return j(Se(G),oe,de,pe,Ie);throw oe=String(G),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return $e}function le(G,oe,de){if(G==null)return G;var pe=[],Ie=0;return j(G,pe,"","",function(Ne){return oe.call(de,Ne,Ie++)}),pe}function he(G){if(G._status===-1){var oe=G._result;oe=oe(),oe.then(function(de){(G._status===0||G._status===-1)&&(G._status=1,G._result=de)},function(de){(G._status===0||G._status===-1)&&(G._status=2,G._result=de)}),G._status===-1&&(G._status=0,G._result=oe)}if(G._status===1)return G._result.default;throw G._result}var Me=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},qe={map:le,forEach:function(G,oe,de){le(G,function(){oe.apply(this,arguments)},de)},count:function(G){var oe=0;return le(G,function(){oe++}),oe},toArray:function(G){return le(G,function(oe){return oe})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return ke.Activity=_,ke.Children=qe,ke.Component=V,ke.Fragment=n,ke.Profiler=s,ke.PureComponent=F,ke.StrictMode=i,ke.Suspense=f,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ke.__COMPILER_RUNTIME={__proto__:null,c:function(G){return D.H.useMemoCache(G)}},ke.cache=function(G){return function(){return G.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(G,oe,de){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var pe=x({},G.props),Ie=G.key;if(oe!=null)for(Ne in oe.key!==void 0&&(Ie=""+oe.key),oe)!M.call(oe,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&oe.ref===void 0||(pe[Ne]=oe[Ne]);var Ne=arguments.length-2;if(Ne===1)pe.children=de;else if(1<Ne){for(var $e=Array(Ne),kt=0;kt<Ne;kt++)$e[kt]=arguments[kt+2];pe.children=$e}return k(G.type,Ie,pe)},ke.createContext=function(G){return G={$$typeof:l,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:r,_context:G},G},ke.createElement=function(G,oe,de){var pe,Ie={},Ne=null;if(oe!=null)for(pe in oe.key!==void 0&&(Ne=""+oe.key),oe)M.call(oe,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ie[pe]=oe[pe]);var $e=arguments.length-2;if($e===1)Ie.children=de;else if(1<$e){for(var kt=Array($e),yt=0;yt<$e;yt++)kt[yt]=arguments[yt+2];Ie.children=kt}if(G&&G.defaultProps)for(pe in $e=G.defaultProps,$e)Ie[pe]===void 0&&(Ie[pe]=$e[pe]);return k(G,Ne,Ie)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(G){return{$$typeof:c,render:G}},ke.isValidElement=z,ke.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:he}},ke.memo=function(G,oe){return{$$typeof:d,type:G,compare:oe===void 0?null:oe}},ke.startTransition=function(G){var oe=D.T,de={};D.T=de;try{var pe=G(),Ie=D.S;Ie!==null&&Ie(de,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Z,Me)}catch(Ne){Me(Ne)}finally{oe!==null&&de.types!==null&&(oe.types=de.types),D.T=oe}},ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ke.use=function(G){return D.H.use(G)},ke.useActionState=function(G,oe,de){return D.H.useActionState(G,oe,de)},ke.useCallback=function(G,oe){return D.H.useCallback(G,oe)},ke.useContext=function(G){return D.H.useContext(G)},ke.useDebugValue=function(){},ke.useDeferredValue=function(G,oe){return D.H.useDeferredValue(G,oe)},ke.useEffect=function(G,oe){return D.H.useEffect(G,oe)},ke.useEffectEvent=function(G){return D.H.useEffectEvent(G)},ke.useId=function(){return D.H.useId()},ke.useImperativeHandle=function(G,oe,de){return D.H.useImperativeHandle(G,oe,de)},ke.useInsertionEffect=function(G,oe){return D.H.useInsertionEffect(G,oe)},ke.useLayoutEffect=function(G,oe){return D.H.useLayoutEffect(G,oe)},ke.useMemo=function(G,oe){return D.H.useMemo(G,oe)},ke.useOptimistic=function(G,oe){return D.H.useOptimistic(G,oe)},ke.useReducer=function(G,oe,de){return D.H.useReducer(G,oe,de)},ke.useRef=function(G){return D.H.useRef(G)},ke.useState=function(G){return D.H.useState(G)},ke.useSyncExternalStore=function(G,oe,de){return D.H.useSyncExternalStore(G,oe,de)},ke.useTransition=function(){return D.H.useTransition()},ke.version="19.2.0",ke}var ib;function q_(){return ib||(ib=1,Ly.exports=T2()),Ly.exports}var ie=q_();const CI=bI(ie);var Oy={exports:{}},of={},Uy={exports:{}},zy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function E2(){return sb||(sb=1,(function(t){function e(j,le){var he=j.length;j.push(le);e:for(;0<he;){var Me=he-1>>>1,qe=j[Me];if(0<s(qe,le))j[Me]=le,j[he]=qe,he=Me;else break e}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var le=j[0],he=j.pop();if(he!==le){j[0]=he;e:for(var Me=0,qe=j.length,G=qe>>>1;Me<G;){var oe=2*(Me+1)-1,de=j[oe],pe=oe+1,Ie=j[pe];if(0>s(de,he))pe<qe&&0>s(Ie,de)?(j[Me]=Ie,j[pe]=he,Me=pe):(j[Me]=de,j[oe]=he,Me=oe);else if(pe<qe&&0>s(Ie,he))j[Me]=Ie,j[pe]=he,Me=pe;else break e}}return le}function s(j,le){var he=j.sortIndex-le.sortIndex;return he!==0?he:j.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],p=1,_=null,E=3,S=!1,A=!1,x=!1,R=!1,V=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function H(j){for(var le=n(d);le!==null;){if(le.callback===null)i(d);else if(le.startTime<=j)i(d),le.sortIndex=le.expirationTime,e(f,le);else break;le=n(d)}}function Y(j){if(x=!1,H(j),!A)if(n(f)!==null)A=!0,Z||(Z=!0,B());else{var le=n(d);le!==null&&Se(Y,le.startTime-j)}}var Z=!1,D=-1,M=5,k=-1;function U(){return R?!0:!(t.unstable_now()-k<M)}function z(){if(R=!1,Z){var j=t.unstable_now();k=j;var le=!0;try{e:{A=!1,x&&(x=!1,O(D),D=-1),S=!0;var he=E;try{t:{for(H(j),_=n(f);_!==null&&!(_.expirationTime>j&&U());){var Me=_.callback;if(typeof Me=="function"){_.callback=null,E=_.priorityLevel;var qe=Me(_.expirationTime<=j);if(j=t.unstable_now(),typeof qe=="function"){_.callback=qe,H(j),le=!0;break t}_===n(f)&&i(f),H(j)}else i(f);_=n(f)}if(_!==null)le=!0;else{var G=n(d);G!==null&&Se(Y,G.startTime-j),le=!1}}break e}finally{_=null,E=he,S=!1}le=void 0}}finally{le?B():Z=!1}}}var B;if(typeof F=="function")B=function(){F(z)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Ae=L.port2;L.port1.onmessage=z,B=function(){Ae.postMessage(null)}}else B=function(){V(z,0)};function Se(j,le){D=V(function(){j(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(j){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var he=E;E=le;try{return j()}finally{E=he}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(j,le){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var he=E;E=j;try{return le()}finally{E=he}},t.unstable_scheduleCallback=function(j,le,he){var Me=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Me+he:Me):he=Me,j){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=he+qe,j={id:p++,callback:le,priorityLevel:j,startTime:he,expirationTime:qe,sortIndex:-1},he>Me?(j.sortIndex=he,e(d,j),n(f)===null&&j===n(d)&&(x?(O(D),D=-1):x=!0,Se(Y,he-Me))):(j.sortIndex=qe,e(f,j),A||S||(A=!0,Z||(Z=!0,B()))),j},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(j){var le=E;return function(){var he=E;E=le;try{return j.apply(this,arguments)}finally{E=he}}}})(zy)),zy}var ob;function w2(){return ob||(ob=1,Uy.exports=E2()),Uy.exports}var By={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function S2(){if(rb)return bn;rb=1;var t=q_();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(f,d,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:f,containerInfo:d,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(f,d,null,p)},bn.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},bn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,_=c(p,d.crossOrigin),E=typeof d.integrity=="string"?d.integrity:void 0,S=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:S}):p==="script"&&i.d.X(f,{crossOrigin:_,integrity:E,fetchPriority:S,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},bn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},bn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,_=c(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},bn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,d){return f(d)},bn.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},bn.useFormStatus=function(){return l.H.useHostTransitionStatus()},bn.version="19.2.0",bn}var ab;function b2(){if(ab)return By.exports;ab=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),By.exports=S2(),By.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function C2(){if(lb)return of;lb=1;var t=w2(),e=q_(),n=b2();function i(o){var a="https://react.dev/errors/"+o;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var a=o,u=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(u=a.return),o=a.return;while(o)}return a.tag===3?u:null}function l(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function c(o){if(o.tag===31){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function f(o){if(r(o)!==o)throw Error(i(188))}function d(o){var a=o.alternate;if(!a){if(a=r(o),a===null)throw Error(i(188));return a!==o?null:o}for(var u=o,h=a;;){var v=u.return;if(v===null)break;var T=v.alternate;if(T===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===u)return f(v),o;if(T===h)return f(v),a;T=T.sibling}throw Error(i(188))}if(u.return!==h.return)u=v,h=T;else{for(var b=!1,I=v.child;I;){if(I===u){b=!0,u=v,h=T;break}if(I===h){b=!0,h=v,u=T;break}I=I.sibling}if(!b){for(I=T.child;I;){if(I===u){b=!0,u=T,h=v;break}if(I===h){b=!0,h=T,u=v;break}I=I.sibling}if(!b)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?o:a}function p(o){var a=o.tag;if(a===5||a===26||a===27||a===6)return o;for(o=o.child;o!==null;){if(a=p(o),a!==null)return a;o=o.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),F=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var L=Symbol.for("react.client.reference");function Ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===L?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case V:return"Profiler";case R:return"StrictMode";case Y:return"Suspense";case Z:return"SuspenseList";case k:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case F:return o.displayName||"Context";case O:return(o._context.displayName||"Context")+".Consumer";case H:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return a=o.displayName||null,a!==null?a:Ae(o.type)||"Memo";case M:a=o._payload,o=o._init;try{return Ae(o(a))}catch{}}return null}var Se=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Me=[],qe=-1;function G(o){return{current:o}}function oe(o){0>qe||(o.current=Me[qe],Me[qe]=null,qe--)}function de(o,a){qe++,Me[qe]=o.current,o.current=a}var pe=G(null),Ie=G(null),Ne=G(null),$e=G(null);function kt(o,a){switch(de(Ne,a),de(Ie,o),de(pe,null),a.nodeType){case 9:case 11:o=(o=a.documentElement)&&(o=o.namespaceURI)?SS(o):0;break;default:if(o=a.tagName,a=a.namespaceURI)a=SS(a),o=bS(a,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}oe(pe),de(pe,o)}function yt(){oe(pe),oe(Ie),oe(Ne)}function Qs(o){o.memoizedState!==null&&de($e,o);var a=pe.current,u=bS(a,o.type);a!==u&&(de(Ie,o),de(pe,u))}function No(o){Ie.current===o&&(oe(pe),oe(Ie)),$e.current===o&&(oe($e),Zc._currentValue=he)}var ko,Vo;function ti(o){if(ko===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ko=a&&a[1]||"",Vo=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ko+o+Vo}var Kr=!1;function vi(o,a){if(!o||Kr)return"";Kr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(te){var X=te}Reflect.construct(o,[],re)}else{try{re.call()}catch(te){X=te}o.call(re.prototype)}}else{try{throw Error()}catch(te){X=te}(re=o())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(te){if(te&&X&&typeof te.stack=="string")return[te.stack,X.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=h.DetermineComponentFrameRoot(),b=T[0],I=T[1];if(b&&I){var q=b.split(`
`),Q=I.split(`
`);for(v=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(h===q.length||v===Q.length)for(h=q.length-1,v=Q.length-1;1<=h&&0<=v&&q[h]!==Q[v];)v--;for(;1<=h&&0<=v;h--,v--)if(q[h]!==Q[v]){if(h!==1||v!==1)do if(h--,v--,0>v||q[h]!==Q[v]){var ne=`
`+q[h].replace(" at new "," at ");return o.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",o.displayName)),ne}while(1<=h&&0<=v);break}}}finally{Kr=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?ti(u):""}function Jr(o,a){switch(o.tag){case 26:case 27:case 5:return ti(o.type);case 16:return ti("Lazy");case 13:return o.child!==a&&a!==null?ti("Suspense Fallback"):ti("Suspense");case 19:return ti("SuspenseList");case 0:case 15:return vi(o.type,!1);case 11:return vi(o.type.render,!1);case 1:return vi(o.type,!0);case 31:return ti("Activity");default:return""}}function Wr(o){try{var a="",u=null;do a+=Jr(o,u),u=o,o=o.return;while(o);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var It=Object.prototype.hasOwnProperty,Vt=t.unstable_scheduleCallback,ve=t.unstable_cancelCallback,Be=t.unstable_shouldYield,et=t.unstable_requestPaint,Fe=t.unstable_now,Gt=t.unstable_getCurrentPriorityLevel,_i=t.unstable_ImmediatePriority,Bn=t.unstable_UserBlockingPriority,fs=t.unstable_NormalPriority,Qr=t.unstable_LowPriority,ll=t.unstable_IdlePriority,Lo=t.log,hd=t.unstable_setDisableYieldValue,Fi=null,hn=null;function Ti(o){if(typeof Lo=="function"&&hd(o),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Fi,o)}catch{}}var Lt=Math.clz32?Math.clz32:md,pd=Math.log,ul=Math.LN2;function md(o){return o>>>=0,o===0?32:31-(pd(o)/ul|0)|0}var ds=256,Xr=262144,Ht=4194304;function hs(o){var a=o&42;if(a!==0)return a;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ps(o,a,u){var h=o.pendingLanes;if(h===0)return 0;var v=0,T=o.suspendedLanes,b=o.pingedLanes;o=o.warmLanes;var I=h&134217727;return I!==0?(h=I&~T,h!==0?v=hs(h):(b&=I,b!==0?v=hs(b):u||(u=I&~o,u!==0&&(v=hs(u))))):(I=h&~T,I!==0?v=hs(I):b!==0?v=hs(b):u||(u=h&~o,u!==0&&(v=hs(u)))),v===0?0:a!==0&&a!==v&&(a&T)===0&&(T=v&-v,u=a&-a,T>=u||T===32&&(u&4194048)!==0)?a:v}function qi(o,a){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&a)===0}function zm(o,a){switch(o){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(){var o=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),o}function ms(o){for(var a=[],u=0;31>u;u++)a.push(o);return a}function jr(o,a){o.pendingLanes|=a,a!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Bm(o,a,u,h,v,T){var b=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var I=o.entanglements,q=o.expirationTimes,Q=o.hiddenUpdates;for(u=b&~u;0<u;){var ne=31-Lt(u),re=1<<ne;I[ne]=0,q[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var te=X[ne];te!==null&&(te.lane&=-536870913)}u&=~re}h!==0&&Zr(o,h,0),T!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=T&~(b&~a))}function Zr(o,a,u){o.pendingLanes|=a,o.suspendedLanes&=~a;var h=31-Lt(a);o.entangledLanes|=a,o.entanglements[h]=o.entanglements[h]|1073741824|u&261930}function sc(o,a){var u=o.entangledLanes|=a;for(o=o.entanglements;u;){var h=31-Lt(u),v=1<<h;v&a|o[h]&a&&(o[h]|=a),u&=~v}}function oc(o,a){var u=a&-a;return u=(u&42)!==0?1:ea(u),(u&(o.suspendedLanes|a))!==0?0:u}function ea(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Xs(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function yd(){var o=le.p;return o!==0?o:(o=window.event,o===void 0?32:KS(o.type))}function Gi(o,a){var u=le.p;try{return le.p=o,a()}finally{le.p=u}}var Hi=Math.random().toString(36).slice(2),$t="__reactFiber$"+Hi,ln="__reactProps$"+Hi,gs="__reactContainer$"+Hi,cl="__reactEvents$"+Hi,Fm="__reactListeners$"+Hi,vd="__reactHandles$"+Hi,_d="__reactResources$"+Hi,ys="__reactMarker$"+Hi;function fl(o){delete o[$t],delete o[ln],delete o[cl],delete o[Fm],delete o[vd]}function vs(o){var a=o[$t];if(a)return a;for(var u=o.parentNode;u;){if(a=u[gs]||u[$t]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(o=PS(o);o!==null;){if(u=o[$t])return u;o=PS(o)}return a}o=u,u=o.parentNode}return null}function Ei(o){if(o=o[$t]||o[gs]){var a=o.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return o}return null}function ni(o){var a=o.tag;if(a===5||a===26||a===27||a===6)return o.stateNode;throw Error(i(33))}function _s(o){var a=o[_d];return a||(a=o[_d]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(o){o[ys]=!0}var rc=new Set,ac={};function Ts(o,a){Es(o,a),Es(o+"Capture",a)}function Es(o,a){for(ac[o]=a,o=0;o<a.length;o++)rc.add(a[o])}var lc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uc={},cc={};function Td(o){return It.call(cc,o)?!0:It.call(uc,o)?!1:lc.test(o)?cc[o]=!0:(uc[o]=!0,!1)}function dl(o,a,u){if(Td(a))if(u===null)o.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){o.removeAttribute(a);return}}o.setAttribute(a,""+u)}}function ii(o,a,u){if(u===null)o.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(a);return}o.setAttribute(a,""+u)}}function Kt(o,a,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(a,u,""+h)}}function un(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Oo(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function fc(o,a,u){var h=Object.getOwnPropertyDescriptor(o.constructor.prototype,a);if(!o.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,T=h.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return v.call(this)},set:function(b){u=""+b,T.call(this,b)}}),Object.defineProperty(o,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function lt(o){if(!o._valueTracker){var a=Oo(o)?"checked":"value";o._valueTracker=fc(o,a,""+o[a])}}function ta(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return o&&(h=Oo(o)?o.checked?"true":"false":o.value),o=h,o!==u?(a.setValue(o),!0):!1}function ws(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var na=/[\n"\\]/g;function $n(o){return o.replace(na,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function hl(o,a,u,h,v,T,b,I){o.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?o.type=b:o.removeAttribute("type"),a!=null?b==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+un(a)):o.value!==""+un(a)&&(o.value=""+un(a)):b!=="submit"&&b!=="reset"||o.removeAttribute("value"),a!=null?dc(o,b,un(a)):u!=null?dc(o,b,un(u)):h!=null&&o.removeAttribute("value"),v==null&&T!=null&&(o.defaultChecked=!!T),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+un(I):o.removeAttribute("name")}function Ed(o,a,u,h,v,T,b,I){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),a!=null||u!=null){if(!(T!=="submit"&&T!=="reset"||a!=null)){lt(o);return}u=u!=null?""+un(u):"",a=a!=null?""+un(a):u,I||a===o.value||(o.value=a),o.defaultValue=a}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,o.checked=I?o.checked:!!h,o.defaultChecked=!!h,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.name=b),lt(o)}function dc(o,a,u){a==="number"&&ws(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function Uo(o,a,u,h){if(o=o.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<o.length;u++)v=a.hasOwnProperty("$"+o[u].value),o[u].selected!==v&&(o[u].selected=v),v&&h&&(o[u].defaultSelected=!0)}else{for(u=""+un(u),a=null,v=0;v<o.length;v++){if(o[v].value===u){o[v].selected=!0,h&&(o[v].defaultSelected=!0);return}a!==null||o[v].disabled||(a=o[v])}a!==null&&(a.selected=!0)}}function wd(o,a,u){if(a!=null&&(a=""+un(a),a!==o.value&&(o.value=a),u==null)){o.defaultValue!==a&&(o.defaultValue=a);return}o.defaultValue=u!=null?""+un(u):""}function zo(o,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(Se(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=un(a),o.defaultValue=u,h=o.textContent,h===u&&h!==""&&h!==null&&(o.value=h),lt(o)}function Yn(o,a){if(a){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=a;return}}o.textContent=a}var Sd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hc(o,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?o.setProperty(a,""):a==="float"?o.cssFloat="":o[a]="":h?o.setProperty(a,u):typeof u!="number"||u===0||Sd.has(a)?a==="float"?o.cssFloat=u:o[a]=(""+u).trim():o[a]=u+"px"}function pc(o,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(o=o.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="");for(var v in a)h=a[v],a.hasOwnProperty(v)&&u[v]!==h&&hc(o,v,h)}else for(var T in a)a.hasOwnProperty(T)&&hc(o,T,a[T])}function pl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(o){return Bo.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function $i(){}var mc=null;function wi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Fo=null,Ss=null;function ia(o){var a=Ei(o);if(a&&(o=a.stateNode)){var u=o[ln]||null;e:switch(o=a.stateNode,a.type){case"input":if(hl(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==o&&h.form===o.form){var v=h[ln]||null;if(!v)throw Error(i(90));hl(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===o.form&&ta(h)}break e;case"textarea":wd(o,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Uo(o,!!u.multiple,a,!1)}}}var gl=!1;function qo(o,a,u){if(gl)return o(a,u);gl=!0;try{var h=o(a);return h}finally{if(gl=!1,(Fo!==null||Ss!==null)&&(yh(),Fo&&(a=Fo,o=Ss,Ss=Fo=null,ia(a),o)))for(a=0;a<o.length;a++)ia(o[a])}}function Yi(o,a){var u=o.stateNode;if(u===null)return null;var h=u[ln]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sa=!1;if(Si)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){sa=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{sa=!1}var bs=null,gc=null,oa=null;function yc(){if(oa)return oa;var o,a=gc,u=a.length,h,v="value"in bs?bs.value:bs.textContent,T=v.length;for(o=0;o<u&&a[o]===v[o];o++);var b=u-o;for(h=1;h<=b&&a[u-h]===v[T-h];h++);return oa=v.slice(o,1<h?1-h:void 0)}function ra(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function js(){return!0}function Ki(){return!1}function pn(o){function a(u,h,v,T,b){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=T,this.target=b,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(u=o[I],this[I]=u?u(T):T[I]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?js:Ki,this.isPropagationStopped=Ki,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),a}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cs=pn(Zs),Go=_({},Zs,{view:0,detail:0}),vc=pn(Go),Ho,yl,As,vl=_({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$o,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==As&&(As&&o.type==="mousemove"?(Ho=o.screenX-As.screenX,yl=o.screenY-As.screenY):yl=Ho=0,As=o),Ho)},movementY:function(o){return"movementY"in o?o.movementY:yl}}),_c=pn(vl),aa=_({},vl,{dataTransfer:0}),Cd=pn(aa),Ad=_({},Go,{relatedTarget:0}),la=pn(Ad),Tc=_({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),xd=pn(Tc),_l=_({},Zs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Rd=pn(_l),Id=_({},Zs,{data:0}),xs=pn(Id),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=Dd[o])?!!a[o]:!1}function $o(){return Nd}var Fn=_({},Go,{key:function(o){if(o.key){var a=Md[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=ra(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Pd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$o,charCode:function(o){return o.type==="keypress"?ra(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ra(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),kd=pn(Fn),Vd=_({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eo=pn(Vd),g=_({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$o}),w=pn(g),C=_({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=pn(C),J=_({},vl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=pn(J),ce=_({},Zs,{newState:0,oldState:0}),Le=pn(ce),Ot=[9,13,27,32],ot=Si&&"CompositionEvent"in window,bt=null;Si&&"documentMode"in document&&(bt=document.documentMode);var bi=Si&&"TextEvent"in window&&!bt,Rs=Si&&(!ot||bt&&8<bt&&11>=bt),Ji=" ",Wi=!1;function ua(o,a){switch(o){case"keyup":return Ot.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tl(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var El=!1;function qN(o,a){switch(o){case"compositionend":return Tl(a);case"keypress":return a.which!==32?null:(Wi=!0,Ji);case"textInput":return o=a.data,o===Ji&&Wi?null:o;default:return null}}function GN(o,a){if(El)return o==="compositionend"||!ot&&ua(o,a)?(o=yc(),oa=gc=bs=null,El=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Rs&&a.locale!=="ko"?null:a.data;default:return null}}var HN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kT(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!HN[o.type]:a==="textarea"}function VT(o,a,u,h){Fo?Ss?Ss.push(h):Ss=[h]:Fo=h,a=bh(a,"onChange"),0<a.length&&(u=new Cs("onChange","change",null,u,h),o.push({event:u,listeners:a}))}var Ec=null,wc=null;function $N(o){yS(o,0)}function Ld(o){var a=ni(o);if(ta(a))return o}function LT(o,a){if(o==="change")return a}var OT=!1;if(Si){var qm;if(Si){var Gm="oninput"in document;if(!Gm){var UT=document.createElement("div");UT.setAttribute("oninput","return;"),Gm=typeof UT.oninput=="function"}qm=Gm}else qm=!1;OT=qm&&(!document.documentMode||9<document.documentMode)}function zT(){Ec&&(Ec.detachEvent("onpropertychange",BT),wc=Ec=null)}function BT(o){if(o.propertyName==="value"&&Ld(wc)){var a=[];VT(a,wc,o,wi(o)),qo($N,a)}}function YN(o,a,u){o==="focusin"?(zT(),Ec=a,wc=u,Ec.attachEvent("onpropertychange",BT)):o==="focusout"&&zT()}function KN(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ld(wc)}function JN(o,a){if(o==="click")return Ld(a)}function WN(o,a){if(o==="input"||o==="change")return Ld(a)}function QN(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var si=typeof Object.is=="function"?Object.is:QN;function Sc(o,a){if(si(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var u=Object.keys(o),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!It.call(a,v)||!si(o[v],a[v]))return!1}return!0}function FT(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function qT(o,a){var u=FT(o);o=0;for(var h;u;){if(u.nodeType===3){if(h=o+u.textContent.length,o<=a&&h>=a)return{node:u,offset:a-o};o=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=FT(u)}}function GT(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?GT(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function HT(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var a=ws(o.document);a instanceof o.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)o=a.contentWindow;else break;a=ws(o.document)}return a}function Hm(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}var XN=Si&&"documentMode"in document&&11>=document.documentMode,wl=null,$m=null,bc=null,Ym=!1;function $T(o,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ym||wl==null||wl!==ws(h)||(h=wl,"selectionStart"in h&&Hm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),bc&&Sc(bc,h)||(bc=h,h=bh($m,"onSelect"),0<h.length&&(a=new Cs("onSelect","select",null,a,u),o.push({event:a,listeners:h}),a.target=wl)))}function ca(o,a){var u={};return u[o.toLowerCase()]=a.toLowerCase(),u["Webkit"+o]="webkit"+a,u["Moz"+o]="moz"+a,u}var Sl={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},Km={},YT={};Si&&(YT=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function fa(o){if(Km[o])return Km[o];if(!Sl[o])return o;var a=Sl[o],u;for(u in a)if(a.hasOwnProperty(u)&&u in YT)return Km[o]=a[u];return o}var KT=fa("animationend"),JT=fa("animationiteration"),WT=fa("animationstart"),jN=fa("transitionrun"),ZN=fa("transitionstart"),ek=fa("transitioncancel"),QT=fa("transitionend"),XT=new Map,Jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jm.push("scrollEnd");function Qi(o,a){XT.set(o,a),Ts(a,[o])}var Od=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ci=[],bl=0,Wm=0;function Ud(){for(var o=bl,a=Wm=bl=0;a<o;){var u=Ci[a];Ci[a++]=null;var h=Ci[a];Ci[a++]=null;var v=Ci[a];Ci[a++]=null;var T=Ci[a];if(Ci[a++]=null,h!==null&&v!==null){var b=h.pending;b===null?v.next=v:(v.next=b.next,b.next=v),h.pending=v}T!==0&&jT(u,v,T)}}function zd(o,a,u,h){Ci[bl++]=o,Ci[bl++]=a,Ci[bl++]=u,Ci[bl++]=h,Wm|=h,o.lanes|=h,o=o.alternate,o!==null&&(o.lanes|=h)}function Qm(o,a,u,h){return zd(o,a,u,h),Bd(o)}function da(o,a){return zd(o,null,null,a),Bd(o)}function jT(o,a,u){o.lanes|=u;var h=o.alternate;h!==null&&(h.lanes|=u);for(var v=!1,T=o.return;T!==null;)T.childLanes|=u,h=T.alternate,h!==null&&(h.childLanes|=u),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(v=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,v&&a!==null&&(v=31-Lt(u),o=T.hiddenUpdates,h=o[v],h===null?o[v]=[a]:h.push(a),a.lane=u|536870912),T):null}function Bd(o){if(50<Yc)throw Yc=0,oy=null,Error(i(185));for(var a=o.return;a!==null;)o=a,a=o.return;return o.tag===3?o.stateNode:null}var Cl={};function tk(o,a,u,h){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(o,a,u,h){return new tk(o,a,u,h)}function Xm(o){return o=o.prototype,!(!o||!o.isReactComponent)}function to(o,a){var u=o.alternate;return u===null?(u=oi(o.tag,a,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=a,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,a=o.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function ZT(o,a){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=a,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,a=u.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),o}function Fd(o,a,u,h,v,T){var b=0;if(h=o,typeof o=="function")Xm(o)&&(b=1);else if(typeof o=="string")b=r2(o,u,pe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case k:return o=oi(31,u,a,v),o.elementType=k,o.lanes=T,o;case x:return ha(u.children,v,T,a);case R:b=8,v|=24;break;case V:return o=oi(12,u,a,v|2),o.elementType=V,o.lanes=T,o;case Y:return o=oi(13,u,a,v),o.elementType=Y,o.lanes=T,o;case Z:return o=oi(19,u,a,v),o.elementType=Z,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:b=10;break e;case O:b=9;break e;case H:b=11;break e;case D:b=14;break e;case M:b=16,h=null;break e}b=29,u=Error(i(130,o===null?"null":typeof o,"")),h=null}return a=oi(b,u,a,v),a.elementType=o,a.type=h,a.lanes=T,a}function ha(o,a,u,h){return o=oi(7,o,h,a),o.lanes=u,o}function jm(o,a,u){return o=oi(6,o,null,a),o.lanes=u,o}function eE(o){var a=oi(18,null,null,0);return a.stateNode=o,a}function Zm(o,a,u){return a=oi(4,o.children!==null?o.children:[],o.key,a),a.lanes=u,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}var tE=new WeakMap;function Ai(o,a){if(typeof o=="object"&&o!==null){var u=tE.get(o);return u!==void 0?u:(a={value:o,source:a,stack:Wr(a)},tE.set(o,a),a)}return{value:o,source:a,stack:Wr(a)}}var Al=[],xl=0,qd=null,Cc=0,xi=[],Ri=0,Yo=null,Is=1,Ms="";function no(o,a){Al[xl++]=Cc,Al[xl++]=qd,qd=o,Cc=a}function nE(o,a,u){xi[Ri++]=Is,xi[Ri++]=Ms,xi[Ri++]=Yo,Yo=o;var h=Is;o=Ms;var v=32-Lt(h)-1;h&=~(1<<v),u+=1;var T=32-Lt(a)+v;if(30<T){var b=v-v%5;T=(h&(1<<b)-1).toString(32),h>>=b,v-=b,Is=1<<32-Lt(a)+v|u<<v|h,Ms=T+o}else Is=1<<T|u<<v|h,Ms=o}function eg(o){o.return!==null&&(no(o,1),nE(o,1,0))}function tg(o){for(;o===qd;)qd=Al[--xl],Al[xl]=null,Cc=Al[--xl],Al[xl]=null;for(;o===Yo;)Yo=xi[--Ri],xi[Ri]=null,Ms=xi[--Ri],xi[Ri]=null,Is=xi[--Ri],xi[Ri]=null}function iE(o,a){xi[Ri++]=Is,xi[Ri++]=Ms,xi[Ri++]=Yo,Is=a.id,Ms=a.overflow,Yo=o}var mn=null,vt=null,je=!1,Ko=null,Ii=!1,ng=Error(i(519));function Jo(o){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ac(Ai(a,o)),ng}function sE(o){var a=o.stateNode,u=o.type,h=o.memoizedProps;switch(a[$t]=o,a[ln]=h,u){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(u=0;u<Jc.length;u++)He(Jc[u],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),Ed(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),zo(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||ES(a.textContent,u)?(h.popover!=null&&(He("beforetoggle",a),He("toggle",a)),h.onScroll!=null&&He("scroll",a),h.onScrollEnd!=null&&He("scrollend",a),h.onClick!=null&&(a.onclick=$i),a=!0):a=!1,a||Jo(o,!0)}function oE(o){for(mn=o.return;mn;)switch(mn.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:mn=mn.return}}function Rl(o){if(o!==mn)return!1;if(!je)return oE(o),je=!0,!1;var a=o.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||Ty(o.type,o.memoizedProps)),u=!u),u&&vt&&Jo(o),oE(o),a===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));vt=MS(o)}else if(a===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));vt=MS(o)}else a===27?(a=vt,lr(o.type)?(o=Cy,Cy=null,vt=o):vt=a):vt=mn?Pi(o.stateNode.nextSibling):null;return!0}function pa(){vt=mn=null,je=!1}function ig(){var o=Ko;return o!==null&&(Qn===null?Qn=o:Qn.push.apply(Qn,o),Ko=null),o}function Ac(o){Ko===null?Ko=[o]:Ko.push(o)}var sg=G(null),ma=null,io=null;function Wo(o,a,u){de(sg,a._currentValue),a._currentValue=u}function so(o){o._currentValue=sg.current,oe(sg)}function og(o,a,u){for(;o!==null;){var h=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),o===u)break;o=o.return}}function rg(o,a,u,h){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var T=v.dependencies;if(T!==null){var b=v.child;T=T.firstContext;e:for(;T!==null;){var I=T;T=v;for(var q=0;q<a.length;q++)if(I.context===a[q]){T.lanes|=u,I=T.alternate,I!==null&&(I.lanes|=u),og(T.return,u,o),h||(b=null);break e}T=I.next}}else if(v.tag===18){if(b=v.return,b===null)throw Error(i(341));b.lanes|=u,T=b.alternate,T!==null&&(T.lanes|=u),og(b,u,o),b=null}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===o){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}}function Il(o,a,u,h){o=null;for(var v=a,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var b=v.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var I=v.type;si(v.pendingProps.value,b.value)||(o!==null?o.push(I):o=[I])}}else if(v===$e.current){if(b=v.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Zc):o=[Zc])}v=v.return}o!==null&&rg(a,o,u,h),a.flags|=262144}function Gd(o){for(o=o.firstContext;o!==null;){if(!si(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ga(o){ma=o,io=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function gn(o){return rE(ma,o)}function Hd(o,a){return ma===null&&ga(o),rE(o,a)}function rE(o,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},io===null){if(o===null)throw Error(i(308));io=a,o.dependencies={lanes:0,firstContext:a},o.flags|=524288}else io=io.next=a;return u}var nk=typeof AbortController<"u"?AbortController:function(){var o=[],a=this.signal={aborted:!1,addEventListener:function(u,h){o.push(h)}};this.abort=function(){a.aborted=!0,o.forEach(function(u){return u()})}},ik=t.unstable_scheduleCallback,sk=t.unstable_NormalPriority,Jt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ag(){return{controller:new nk,data:new Map,refCount:0}}function xc(o){o.refCount--,o.refCount===0&&ik(sk,function(){o.controller.abort()})}var Rc=null,lg=0,Ml=0,Pl=null;function ok(o,a){if(Rc===null){var u=Rc=[];lg=0,Ml=fy(),Pl={status:"pending",value:void 0,then:function(h){u.push(h)}}}return lg++,a.then(aE,aE),a}function aE(){if(--lg===0&&Rc!==null){Pl!==null&&(Pl.status="fulfilled");var o=Rc;Rc=null,Ml=0,Pl=null;for(var a=0;a<o.length;a++)(0,o[a])()}}function rk(o,a){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return o.then(function(){h.status="fulfilled",h.value=a;for(var v=0;v<u.length;v++)(0,u[v])(a)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var lE=j.S;j.S=function(o,a){$w=Fe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ok(o,a),lE!==null&&lE(o,a)};var ya=G(null);function ug(){var o=ya.current;return o!==null?o:gt.pooledCache}function $d(o,a){a===null?de(ya,ya.current):de(ya,a.pool)}function uE(){var o=ug();return o===null?null:{parent:Jt._currentValue,pool:o}}var Dl=Error(i(460)),cg=Error(i(474)),Yd=Error(i(542)),Kd={then:function(){}};function cE(o){return o=o.status,o==="fulfilled"||o==="rejected"}function fE(o,a,u){switch(u=o[u],u===void 0?o.push(a):u!==a&&(a.then($i,$i),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw o=a.reason,hE(o),o;default:if(typeof a.status=="string")a.then($i,$i);else{if(o=gt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=a,o.status="pending",o.then(function(h){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=h}},function(h){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw o=a.reason,hE(o),o}throw _a=a,Dl}}function va(o){try{var a=o._init;return a(o._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_a=u,Dl):u}}var _a=null;function dE(){if(_a===null)throw Error(i(459));var o=_a;return _a=null,o}function hE(o){if(o===Dl||o===Yd)throw Error(i(483))}var Nl=null,Ic=0;function Jd(o){var a=Ic;return Ic+=1,Nl===null&&(Nl=[]),fE(Nl,o,a)}function Mc(o,a){a=a.props.ref,o.ref=a!==void 0?a:null}function Wd(o,a){throw a.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(a),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o)))}function pE(o){function a(K,$){if(o){var W=K.deletions;W===null?(K.deletions=[$],K.flags|=16):W.push($)}}function u(K,$){if(!o)return null;for(;$!==null;)a(K,$),$=$.sibling;return null}function h(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function v(K,$){return K=to(K,$),K.index=0,K.sibling=null,K}function T(K,$,W){return K.index=W,o?(W=K.alternate,W!==null?(W=W.index,W<$?(K.flags|=67108866,$):W):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function b(K){return o&&K.alternate===null&&(K.flags|=67108866),K}function I(K,$,W,se){return $===null||$.tag!==6?($=jm(W,K.mode,se),$.return=K,$):($=v($,W),$.return=K,$)}function q(K,$,W,se){var Ee=W.type;return Ee===x?ne(K,$,W.props.children,se,W.key):$!==null&&($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&va(Ee)===$.type)?($=v($,W.props),Mc($,W),$.return=K,$):($=Fd(W.type,W.key,W.props,null,K.mode,se),Mc($,W),$.return=K,$)}function Q(K,$,W,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==W.containerInfo||$.stateNode.implementation!==W.implementation?($=Zm(W,K.mode,se),$.return=K,$):($=v($,W.children||[]),$.return=K,$)}function ne(K,$,W,se,Ee){return $===null||$.tag!==7?($=ha(W,K.mode,se,Ee),$.return=K,$):($=v($,W),$.return=K,$)}function re(K,$,W){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=jm(""+$,K.mode,W),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return W=Fd($.type,$.key,$.props,null,K.mode,W),Mc(W,$),W.return=K,W;case A:return $=Zm($,K.mode,W),$.return=K,$;case M:return $=va($),re(K,$,W)}if(Se($)||B($))return $=ha($,K.mode,W,null),$.return=K,$;if(typeof $.then=="function")return re(K,Jd($),W);if($.$$typeof===F)return re(K,Hd(K,$),W);Wd(K,$)}return null}function X(K,$,W,se){var Ee=$!==null?$.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ee!==null?null:I(K,$,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return W.key===Ee?q(K,$,W,se):null;case A:return W.key===Ee?Q(K,$,W,se):null;case M:return W=va(W),X(K,$,W,se)}if(Se(W)||B(W))return Ee!==null?null:ne(K,$,W,se,null);if(typeof W.then=="function")return X(K,$,Jd(W),se);if(W.$$typeof===F)return X(K,$,Hd(K,W),se);Wd(K,W)}return null}function te(K,$,W,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return K=K.get(W)||null,I($,K,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return K=K.get(se.key===null?W:se.key)||null,q($,K,se,Ee);case A:return K=K.get(se.key===null?W:se.key)||null,Q($,K,se,Ee);case M:return se=va(se),te(K,$,W,se,Ee)}if(Se(se)||B(se))return K=K.get(W)||null,ne($,K,se,Ee,null);if(typeof se.then=="function")return te(K,$,W,Jd(se),Ee);if(se.$$typeof===F)return te(K,$,W,Hd($,se),Ee);Wd($,se)}return null}function ge(K,$,W,se){for(var Ee=null,tt=null,_e=$,Ue=$=0,Ke=null;_e!==null&&Ue<W.length;Ue++){_e.index>Ue?(Ke=_e,_e=null):Ke=_e.sibling;var nt=X(K,_e,W[Ue],se);if(nt===null){_e===null&&(_e=Ke);break}o&&_e&&nt.alternate===null&&a(K,_e),$=T(nt,$,Ue),tt===null?Ee=nt:tt.sibling=nt,tt=nt,_e=Ke}if(Ue===W.length)return u(K,_e),je&&no(K,Ue),Ee;if(_e===null){for(;Ue<W.length;Ue++)_e=re(K,W[Ue],se),_e!==null&&($=T(_e,$,Ue),tt===null?Ee=_e:tt.sibling=_e,tt=_e);return je&&no(K,Ue),Ee}for(_e=h(_e);Ue<W.length;Ue++)Ke=te(_e,K,Ue,W[Ue],se),Ke!==null&&(o&&Ke.alternate!==null&&_e.delete(Ke.key===null?Ue:Ke.key),$=T(Ke,$,Ue),tt===null?Ee=Ke:tt.sibling=Ke,tt=Ke);return o&&_e.forEach(function(hr){return a(K,hr)}),je&&no(K,Ue),Ee}function Ce(K,$,W,se){if(W==null)throw Error(i(151));for(var Ee=null,tt=null,_e=$,Ue=$=0,Ke=null,nt=W.next();_e!==null&&!nt.done;Ue++,nt=W.next()){_e.index>Ue?(Ke=_e,_e=null):Ke=_e.sibling;var hr=X(K,_e,nt.value,se);if(hr===null){_e===null&&(_e=Ke);break}o&&_e&&hr.alternate===null&&a(K,_e),$=T(hr,$,Ue),tt===null?Ee=hr:tt.sibling=hr,tt=hr,_e=Ke}if(nt.done)return u(K,_e),je&&no(K,Ue),Ee;if(_e===null){for(;!nt.done;Ue++,nt=W.next())nt=re(K,nt.value,se),nt!==null&&($=T(nt,$,Ue),tt===null?Ee=nt:tt.sibling=nt,tt=nt);return je&&no(K,Ue),Ee}for(_e=h(_e);!nt.done;Ue++,nt=W.next())nt=te(_e,K,Ue,nt.value,se),nt!==null&&(o&&nt.alternate!==null&&_e.delete(nt.key===null?Ue:nt.key),$=T(nt,$,Ue),tt===null?Ee=nt:tt.sibling=nt,tt=nt);return o&&_e.forEach(function(y2){return a(K,y2)}),je&&no(K,Ue),Ee}function pt(K,$,W,se){if(typeof W=="object"&&W!==null&&W.type===x&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case S:e:{for(var Ee=W.key;$!==null;){if($.key===Ee){if(Ee=W.type,Ee===x){if($.tag===7){u(K,$.sibling),se=v($,W.props.children),se.return=K,K=se;break e}}else if($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&va(Ee)===$.type){u(K,$.sibling),se=v($,W.props),Mc(se,W),se.return=K,K=se;break e}u(K,$);break}else a(K,$);$=$.sibling}W.type===x?(se=ha(W.props.children,K.mode,se,W.key),se.return=K,K=se):(se=Fd(W.type,W.key,W.props,null,K.mode,se),Mc(se,W),se.return=K,K=se)}return b(K);case A:e:{for(Ee=W.key;$!==null;){if($.key===Ee)if($.tag===4&&$.stateNode.containerInfo===W.containerInfo&&$.stateNode.implementation===W.implementation){u(K,$.sibling),se=v($,W.children||[]),se.return=K,K=se;break e}else{u(K,$);break}else a(K,$);$=$.sibling}se=Zm(W,K.mode,se),se.return=K,K=se}return b(K);case M:return W=va(W),pt(K,$,W,se)}if(Se(W))return ge(K,$,W,se);if(B(W)){if(Ee=B(W),typeof Ee!="function")throw Error(i(150));return W=Ee.call(W),Ce(K,$,W,se)}if(typeof W.then=="function")return pt(K,$,Jd(W),se);if(W.$$typeof===F)return pt(K,$,Hd(K,W),se);Wd(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,$!==null&&$.tag===6?(u(K,$.sibling),se=v($,W),se.return=K,K=se):(u(K,$),se=jm(W,K.mode,se),se.return=K,K=se),b(K)):u(K,$)}return function(K,$,W,se){try{Ic=0;var Ee=pt(K,$,W,se);return Nl=null,Ee}catch(_e){if(_e===Dl||_e===Yd)throw _e;var tt=oi(29,_e,null,K.mode);return tt.lanes=se,tt.return=K,tt}finally{}}}var Ta=pE(!0),mE=pE(!1),Qo=!1;function fg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dg(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Xo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function jo(o,a,u){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(rt&2)!==0){var v=h.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),h.pending=a,a=Bd(o),jT(o,null,u),a}return zd(o,h,a,u),Bd(o)}function Pc(o,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=o.pendingLanes,u|=h,a.lanes=u,sc(o,u)}}function hg(o,a){var u=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var b={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};T===null?v=T=b:T=T.next=b,u=u.next}while(u!==null);T===null?v=T=a:T=T.next=a}else v=T=a;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:h.shared,callbacks:h.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=a:o.next=a,u.lastBaseUpdate=a}var pg=!1;function Dc(){if(pg){var o=Pl;if(o!==null)throw o}}function Nc(o,a,u,h){pg=!1;var v=o.updateQueue;Qo=!1;var T=v.firstBaseUpdate,b=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var q=I,Q=q.next;q.next=null,b===null?T=Q:b.next=Q,b=q;var ne=o.alternate;ne!==null&&(ne=ne.updateQueue,I=ne.lastBaseUpdate,I!==b&&(I===null?ne.firstBaseUpdate=Q:I.next=Q,ne.lastBaseUpdate=q))}if(T!==null){var re=v.baseState;b=0,ne=Q=q=null,I=T;do{var X=I.lane&-536870913,te=X!==I.lane;if(te?(Ye&X)===X:(h&X)===X){X!==0&&X===Ml&&(pg=!0),ne!==null&&(ne=ne.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ge=o,Ce=I;X=a;var pt=u;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){re=ge.call(pt,re,X);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,X=typeof ge=="function"?ge.call(pt,re,X):ge,X==null)break e;re=_({},re,X);break e;case 2:Qo=!0}}X=I.callback,X!==null&&(o.flags|=64,te&&(o.flags|=8192),te=v.callbacks,te===null?v.callbacks=[X]:te.push(X))}else te={lane:X,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ne===null?(Q=ne=te,q=re):ne=ne.next=te,b|=X;if(I=I.next,I===null){if(I=v.shared.pending,I===null)break;te=I,I=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);ne===null&&(q=re),v.baseState=q,v.firstBaseUpdate=Q,v.lastBaseUpdate=ne,T===null&&(v.shared.lanes=0),ir|=b,o.lanes=b,o.memoizedState=re}}function gE(o,a){if(typeof o!="function")throw Error(i(191,o));o.call(a)}function yE(o,a){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)gE(u[o],a)}var kl=G(null),Qd=G(0);function vE(o,a){o=po,de(Qd,o),de(kl,a),po=o|a.baseLanes}function mg(){de(Qd,po),de(kl,kl.current)}function gg(){po=Qd.current,oe(kl),oe(Qd)}var ri=G(null),Mi=null;function Zo(o){var a=o.alternate;de(Ut,Ut.current&1),de(ri,o),Mi===null&&(a===null||kl.current!==null||a.memoizedState!==null)&&(Mi=o)}function yg(o){de(Ut,Ut.current),de(ri,o),Mi===null&&(Mi=o)}function _E(o){o.tag===22?(de(Ut,Ut.current),de(ri,o),Mi===null&&(Mi=o)):er()}function er(){de(Ut,Ut.current),de(ri,ri.current)}function ai(o){oe(ri),Mi===o&&(Mi=null),oe(Ut)}var Ut=G(0);function Xd(o){for(var a=o;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Sy(u)||by(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var oo=0,Oe=null,dt=null,Wt=null,jd=!1,Vl=!1,Ea=!1,Zd=0,kc=0,Ll=null,ak=0;function Mt(){throw Error(i(321))}function vg(o,a){if(a===null)return!1;for(var u=0;u<a.length&&u<o.length;u++)if(!si(o[u],a[u]))return!1;return!0}function _g(o,a,u,h,v,T){return oo=T,Oe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=o===null||o.memoizedState===null?nw:kg,Ea=!1,T=u(h,v),Ea=!1,Vl&&(T=EE(a,u,h,v)),TE(o),T}function TE(o){j.H=Oc;var a=dt!==null&&dt.next!==null;if(oo=0,Wt=dt=Oe=null,jd=!1,kc=0,Ll=null,a)throw Error(i(300));o===null||Qt||(o=o.dependencies,o!==null&&Gd(o)&&(Qt=!0))}function EE(o,a,u,h){Oe=o;var v=0;do{if(Vl&&(Ll=null),kc=0,Vl=!1,25<=v)throw Error(i(301));if(v+=1,Wt=dt=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}j.H=iw,T=a(u,h)}while(Vl);return T}function lk(){var o=j.H,a=o.useState()[0];return a=typeof a.then=="function"?Vc(a):a,o=o.useState()[0],(dt!==null?dt.memoizedState:null)!==o&&(Oe.flags|=1024),a}function Tg(){var o=Zd!==0;return Zd=0,o}function Eg(o,a,u){a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~u}function wg(o){if(jd){for(o=o.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}jd=!1}oo=0,Wt=dt=Oe=null,Vl=!1,kc=Zd=0,Ll=null}function qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Oe.memoizedState=Wt=o:Wt=Wt.next=o,Wt}function zt(){if(dt===null){var o=Oe.alternate;o=o!==null?o.memoizedState:null}else o=dt.next;var a=Wt===null?Oe.memoizedState:Wt.next;if(a!==null)Wt=a,dt=o;else{if(o===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));dt=o,o={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Wt===null?Oe.memoizedState=Wt=o:Wt=Wt.next=o}return Wt}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vc(o){var a=kc;return kc+=1,Ll===null&&(Ll=[]),o=fE(Ll,o,a),a=Oe,(Wt===null?a.memoizedState:Wt.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?nw:kg),o}function th(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Vc(o);if(o.$$typeof===F)return gn(o)}throw Error(i(438,String(o)))}function Sg(o){var a=null,u=Oe.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Oe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=eh(),Oe.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(o),h=0;h<o;h++)u[h]=U;return a.index++,u}function ro(o,a){return typeof a=="function"?a(o):a}function nh(o){var a=zt();return bg(a,dt,o)}function bg(o,a,u){var h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var v=o.baseQueue,T=h.pending;if(T!==null){if(v!==null){var b=v.next;v.next=T.next,T.next=b}a.baseQueue=v=T,h.pending=null}if(T=o.baseState,v===null)o.memoizedState=T;else{a=v.next;var I=b=null,q=null,Q=a,ne=!1;do{var re=Q.lane&-536870913;if(re!==Q.lane?(Ye&re)===re:(oo&re)===re){var X=Q.revertLane;if(X===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),re===Ml&&(ne=!0);else if((oo&X)===X){Q=Q.next,X===Ml&&(ne=!0);continue}else re={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(I=q=re,b=T):q=q.next=re,Oe.lanes|=X,ir|=X;re=Q.action,Ea&&u(T,re),T=Q.hasEagerState?Q.eagerState:u(T,re)}else X={lane:re,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(I=q=X,b=T):q=q.next=X,Oe.lanes|=re,ir|=re;Q=Q.next}while(Q!==null&&Q!==a);if(q===null?b=T:q.next=I,!si(T,o.memoizedState)&&(Qt=!0,ne&&(u=Pl,u!==null)))throw u;o.memoizedState=T,o.baseState=b,o.baseQueue=q,h.lastRenderedState=T}return v===null&&(h.lanes=0),[o.memoizedState,h.dispatch]}function Cg(o){var a=zt(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var h=u.dispatch,v=u.pending,T=a.memoizedState;if(v!==null){u.pending=null;var b=v=v.next;do T=o(T,b.action),b=b.next;while(b!==v);si(T,a.memoizedState)||(Qt=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),u.lastRenderedState=T}return[T,h]}function wE(o,a,u){var h=Oe,v=zt(),T=je;if(T){if(u===void 0)throw Error(i(407));u=u()}else u=a();var b=!si((dt||v).memoizedState,u);if(b&&(v.memoizedState=u,Qt=!0),v=v.queue,Rg(CE.bind(null,h,v,o),[o]),v.getSnapshot!==a||b||Wt!==null&&Wt.memoizedState.tag&1){if(h.flags|=2048,Ol(9,{destroy:void 0},bE.bind(null,h,v,u,a),null),gt===null)throw Error(i(349));T||(oo&127)!==0||SE(h,a,u)}return u}function SE(o,a,u){o.flags|=16384,o={getSnapshot:a,value:u},a=Oe.updateQueue,a===null?(a=eh(),Oe.updateQueue=a,a.stores=[o]):(u=a.stores,u===null?a.stores=[o]:u.push(o))}function bE(o,a,u,h){a.value=u,a.getSnapshot=h,AE(a)&&xE(o)}function CE(o,a,u){return u(function(){AE(a)&&xE(o)})}function AE(o){var a=o.getSnapshot;o=o.value;try{var u=a();return!si(o,u)}catch{return!0}}function xE(o){var a=da(o,2);a!==null&&Xn(a,o,2)}function Ag(o){var a=qn();if(typeof o=="function"){var u=o;if(o=u(),Ea){Ti(!0);try{u()}finally{Ti(!1)}}}return a.memoizedState=a.baseState=o,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:o},a}function RE(o,a,u,h){return o.baseState=u,bg(o,dt,typeof h=="function"?h:ro)}function uk(o,a,u,h,v){if(oh(o))throw Error(i(485));if(o=a.action,o!==null){var T={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){T.listeners.push(b)}};j.T!==null?u(!0):T.isTransition=!1,h(T),u=a.pending,u===null?(T.next=a.pending=T,IE(a,T)):(T.next=u.next,a.pending=u.next=T)}}function IE(o,a){var u=a.action,h=a.payload,v=o.state;if(a.isTransition){var T=j.T,b={};j.T=b;try{var I=u(v,h),q=j.S;q!==null&&q(b,I),ME(o,a,I)}catch(Q){xg(o,a,Q)}finally{T!==null&&b.types!==null&&(T.types=b.types),j.T=T}}else try{T=u(v,h),ME(o,a,T)}catch(Q){xg(o,a,Q)}}function ME(o,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){PE(o,a,h)},function(h){return xg(o,a,h)}):PE(o,a,u)}function PE(o,a,u){a.status="fulfilled",a.value=u,DE(a),o.state=u,a=o.pending,a!==null&&(u=a.next,u===a?o.pending=null:(u=u.next,a.next=u,IE(o,u)))}function xg(o,a,u){var h=o.pending;if(o.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,DE(a),a=a.next;while(a!==h)}o.action=null}function DE(o){o=o.listeners;for(var a=0;a<o.length;a++)(0,o[a])()}function NE(o,a){return a}function kE(o,a){if(je){var u=gt.formState;if(u!==null){e:{var h=Oe;if(je){if(vt){t:{for(var v=vt,T=Ii;v.nodeType!==8;){if(!T){v=null;break t}if(v=Pi(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){vt=Pi(v.nextSibling),h=v.data==="F!";break e}}Jo(h)}h=!1}h&&(a=u[0])}}return u=qn(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NE,lastRenderedState:a},u.queue=h,u=ZE.bind(null,Oe,h),h.dispatch=u,h=Ag(!1),T=Ng.bind(null,Oe,!1,h.queue),h=qn(),v={state:a,dispatch:null,action:o,pending:null},h.queue=v,u=uk.bind(null,Oe,v,T,u),v.dispatch=u,h.memoizedState=o,[a,u,!1]}function VE(o){var a=zt();return LE(a,dt,o)}function LE(o,a,u){if(a=bg(o,a,NE)[0],o=nh(ro)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Vc(a)}catch(b){throw b===Dl?Yd:b}else h=a;a=zt();var v=a.queue,T=v.dispatch;return u!==a.memoizedState&&(Oe.flags|=2048,Ol(9,{destroy:void 0},ck.bind(null,v,u),null)),[h,T,o]}function ck(o,a){o.action=a}function OE(o){var a=zt(),u=dt;if(u!==null)return LE(a,u,o);zt(),a=a.memoizedState,u=zt();var h=u.queue.dispatch;return u.memoizedState=o,[a,h,!1]}function Ol(o,a,u,h){return o={tag:o,create:u,deps:h,inst:a,next:null},a=Oe.updateQueue,a===null&&(a=eh(),Oe.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=o.next=o:(h=u.next,u.next=o,o.next=h,a.lastEffect=o),o}function UE(){return zt().memoizedState}function ih(o,a,u,h){var v=qn();Oe.flags|=o,v.memoizedState=Ol(1|a,{destroy:void 0},u,h===void 0?null:h)}function sh(o,a,u,h){var v=zt();h=h===void 0?null:h;var T=v.memoizedState.inst;dt!==null&&h!==null&&vg(h,dt.memoizedState.deps)?v.memoizedState=Ol(a,T,u,h):(Oe.flags|=o,v.memoizedState=Ol(1|a,T,u,h))}function zE(o,a){ih(8390656,8,o,a)}function Rg(o,a){sh(2048,8,o,a)}function fk(o){Oe.flags|=4;var a=Oe.updateQueue;if(a===null)a=eh(),Oe.updateQueue=a,a.events=[o];else{var u=a.events;u===null?a.events=[o]:u.push(o)}}function BE(o){var a=zt().memoizedState;return fk({ref:a,nextImpl:o}),function(){if((rt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function FE(o,a){return sh(4,2,o,a)}function qE(o,a){return sh(4,4,o,a)}function GE(o,a){if(typeof a=="function"){o=o();var u=a(o);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function HE(o,a,u){u=u!=null?u.concat([o]):null,sh(4,4,GE.bind(null,a,o),u)}function Ig(){}function $E(o,a){var u=zt();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&vg(a,h[1])?h[0]:(u.memoizedState=[o,a],o)}function YE(o,a){var u=zt();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&vg(a,h[1]))return h[0];if(h=o(),Ea){Ti(!0);try{o()}finally{Ti(!1)}}return u.memoizedState=[h,a],h}function Mg(o,a,u){return u===void 0||(oo&1073741824)!==0&&(Ye&261930)===0?o.memoizedState=a:(o.memoizedState=u,o=Kw(),Oe.lanes|=o,ir|=o,u)}function KE(o,a,u,h){return si(u,a)?u:kl.current!==null?(o=Mg(o,u,h),si(o,a)||(Qt=!0),o):(oo&42)===0||(oo&1073741824)!==0&&(Ye&261930)===0?(Qt=!0,o.memoizedState=u):(o=Kw(),Oe.lanes|=o,ir|=o,a)}function JE(o,a,u,h,v){var T=le.p;le.p=T!==0&&8>T?T:8;var b=j.T,I={};j.T=I,Ng(o,!1,a,u);try{var q=v(),Q=j.S;if(Q!==null&&Q(I,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ne=rk(q,h);Lc(o,a,ne,ci(o))}else Lc(o,a,h,ci(o))}catch(re){Lc(o,a,{then:function(){},status:"rejected",reason:re},ci())}finally{le.p=T,b!==null&&I.types!==null&&(b.types=I.types),j.T=b}}function dk(){}function Pg(o,a,u,h){if(o.tag!==5)throw Error(i(476));var v=WE(o).queue;JE(o,v,a,he,u===null?dk:function(){return QE(o),u(h)})}function WE(o){var a=o.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:he},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:u},next:null},o.memoizedState=a,o=o.alternate,o!==null&&(o.memoizedState=a),a}function QE(o){var a=WE(o);a.next===null&&(a=o.alternate.memoizedState),Lc(o,a.next.queue,{},ci())}function Dg(){return gn(Zc)}function XE(){return zt().memoizedState}function jE(){return zt().memoizedState}function hk(o){for(var a=o.return;a!==null;){switch(a.tag){case 24:case 3:var u=ci();o=Xo(u);var h=jo(a,o,u);h!==null&&(Xn(h,a,u),Pc(h,a,u)),a={cache:ag()},o.payload=a;return}a=a.return}}function pk(o,a,u){var h=ci();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},oh(o)?ew(a,u):(u=Qm(o,a,u,h),u!==null&&(Xn(u,o,h),tw(u,a,h)))}function ZE(o,a,u){var h=ci();Lc(o,a,u,h)}function Lc(o,a,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(oh(o))ew(a,v);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var b=a.lastRenderedState,I=T(b,u);if(v.hasEagerState=!0,v.eagerState=I,si(I,b))return zd(o,a,v,0),gt===null&&Ud(),!1}catch{}finally{}if(u=Qm(o,a,v,h),u!==null)return Xn(u,o,h),tw(u,a,h),!0}return!1}function Ng(o,a,u,h){if(h={lane:2,revertLane:fy(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},oh(o)){if(a)throw Error(i(479))}else a=Qm(o,u,h,2),a!==null&&Xn(a,o,2)}function oh(o){var a=o.alternate;return o===Oe||a!==null&&a===Oe}function ew(o,a){Vl=jd=!0;var u=o.pending;u===null?a.next=a:(a.next=u.next,u.next=a),o.pending=a}function tw(o,a,u){if((u&4194048)!==0){var h=a.lanes;h&=o.pendingLanes,u|=h,a.lanes=u,sc(o,u)}}var Oc={readContext:gn,use:th,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Oc.useEffectEvent=Mt;var nw={readContext:gn,use:th,useCallback:function(o,a){return qn().memoizedState=[o,a===void 0?null:a],o},useContext:gn,useEffect:zE,useImperativeHandle:function(o,a,u){u=u!=null?u.concat([o]):null,ih(4194308,4,GE.bind(null,a,o),u)},useLayoutEffect:function(o,a){return ih(4194308,4,o,a)},useInsertionEffect:function(o,a){ih(4,2,o,a)},useMemo:function(o,a){var u=qn();a=a===void 0?null:a;var h=o();if(Ea){Ti(!0);try{o()}finally{Ti(!1)}}return u.memoizedState=[h,a],h},useReducer:function(o,a,u){var h=qn();if(u!==void 0){var v=u(a);if(Ea){Ti(!0);try{u(a)}finally{Ti(!1)}}}else v=a;return h.memoizedState=h.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},h.queue=o,o=o.dispatch=pk.bind(null,Oe,o),[h.memoizedState,o]},useRef:function(o){var a=qn();return o={current:o},a.memoizedState=o},useState:function(o){o=Ag(o);var a=o.queue,u=ZE.bind(null,Oe,a);return a.dispatch=u,[o.memoizedState,u]},useDebugValue:Ig,useDeferredValue:function(o,a){var u=qn();return Mg(u,o,a)},useTransition:function(){var o=Ag(!1);return o=JE.bind(null,Oe,o.queue,!0,!1),qn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,a,u){var h=Oe,v=qn();if(je){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),gt===null)throw Error(i(349));(Ye&127)!==0||SE(h,a,u)}v.memoizedState=u;var T={value:u,getSnapshot:a};return v.queue=T,zE(CE.bind(null,h,T,o),[o]),h.flags|=2048,Ol(9,{destroy:void 0},bE.bind(null,h,T,u,a),null),u},useId:function(){var o=qn(),a=gt.identifierPrefix;if(je){var u=Ms,h=Is;u=(h&~(1<<32-Lt(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Zd++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=ak++,a="_"+a+"r_"+u.toString(32)+"_";return o.memoizedState=a},useHostTransitionStatus:Dg,useFormState:kE,useActionState:kE,useOptimistic:function(o){var a=qn();a.memoizedState=a.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Ng.bind(null,Oe,!0,u),u.dispatch=a,[o,a]},useMemoCache:Sg,useCacheRefresh:function(){return qn().memoizedState=hk.bind(null,Oe)},useEffectEvent:function(o){var a=qn(),u={impl:o};return a.memoizedState=u,function(){if((rt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},kg={readContext:gn,use:th,useCallback:$E,useContext:gn,useEffect:Rg,useImperativeHandle:HE,useInsertionEffect:FE,useLayoutEffect:qE,useMemo:YE,useReducer:nh,useRef:UE,useState:function(){return nh(ro)},useDebugValue:Ig,useDeferredValue:function(o,a){var u=zt();return KE(u,dt.memoizedState,o,a)},useTransition:function(){var o=nh(ro)[0],a=zt().memoizedState;return[typeof o=="boolean"?o:Vc(o),a]},useSyncExternalStore:wE,useId:XE,useHostTransitionStatus:Dg,useFormState:VE,useActionState:VE,useOptimistic:function(o,a){var u=zt();return RE(u,dt,o,a)},useMemoCache:Sg,useCacheRefresh:jE};kg.useEffectEvent=BE;var iw={readContext:gn,use:th,useCallback:$E,useContext:gn,useEffect:Rg,useImperativeHandle:HE,useInsertionEffect:FE,useLayoutEffect:qE,useMemo:YE,useReducer:Cg,useRef:UE,useState:function(){return Cg(ro)},useDebugValue:Ig,useDeferredValue:function(o,a){var u=zt();return dt===null?Mg(u,o,a):KE(u,dt.memoizedState,o,a)},useTransition:function(){var o=Cg(ro)[0],a=zt().memoizedState;return[typeof o=="boolean"?o:Vc(o),a]},useSyncExternalStore:wE,useId:XE,useHostTransitionStatus:Dg,useFormState:OE,useActionState:OE,useOptimistic:function(o,a){var u=zt();return dt!==null?RE(u,dt,o,a):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:Sg,useCacheRefresh:jE};iw.useEffectEvent=BE;function Vg(o,a,u,h){a=o.memoizedState,u=u(h,a),u=u==null?a:_({},a,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var Lg={enqueueSetState:function(o,a,u){o=o._reactInternals;var h=ci(),v=Xo(h);v.payload=a,u!=null&&(v.callback=u),a=jo(o,v,h),a!==null&&(Xn(a,o,h),Pc(a,o,h))},enqueueReplaceState:function(o,a,u){o=o._reactInternals;var h=ci(),v=Xo(h);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=jo(o,v,h),a!==null&&(Xn(a,o,h),Pc(a,o,h))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var u=ci(),h=Xo(u);h.tag=2,a!=null&&(h.callback=a),a=jo(o,h,u),a!==null&&(Xn(a,o,u),Pc(a,o,u))}};function sw(o,a,u,h,v,T,b){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,T,b):a.prototype&&a.prototype.isPureReactComponent?!Sc(u,h)||!Sc(v,T):!0}function ow(o,a,u,h){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==o&&Lg.enqueueReplaceState(a,a.state,null)}function wa(o,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(o=o.defaultProps){u===a&&(u=_({},u));for(var v in o)u[v]===void 0&&(u[v]=o[v])}return u}function rw(o){Od(o)}function aw(o){console.error(o)}function lw(o){Od(o)}function rh(o,a){try{var u=o.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function uw(o,a,u){try{var h=o.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Og(o,a,u){return u=Xo(u),u.tag=3,u.payload={element:null},u.callback=function(){rh(o,a)},u}function cw(o){return o=Xo(o),o.tag=3,o}function fw(o,a,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var T=h.value;o.payload=function(){return v(T)},o.callback=function(){uw(a,u,h)}}var b=u.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(o.callback=function(){uw(a,u,h),typeof v!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function mk(o,a,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&Il(a,u,v,!0),u=ri.current,u!==null){switch(u.tag){case 31:case 13:return Mi===null?vh():u.alternate===null&&Pt===0&&(Pt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===Kd?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),ly(o,h,v)),!1;case 22:return u.flags|=65536,h===Kd?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),ly(o,h,v)),!1}throw Error(i(435,u.tag))}return ly(o,h,v),vh(),!1}if(je)return a=ri.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,h!==ng&&(o=Error(i(422),{cause:h}),Ac(Ai(o,u)))):(h!==ng&&(a=Error(i(423),{cause:h}),Ac(Ai(a,u))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,h=Ai(h,u),v=Og(o.stateNode,h,v),hg(o,v),Pt!==4&&(Pt=2)),!1;var T=Error(i(520),{cause:h});if(T=Ai(T,u),$c===null?$c=[T]:$c.push(T),Pt!==4&&(Pt=2),a===null)return!0;h=Ai(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,o=v&-v,u.lanes|=o,o=Og(u.stateNode,h,o),hg(u,o),!1;case 1:if(a=u.type,T=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(sr===null||!sr.has(T))))return u.flags|=65536,v&=-v,u.lanes|=v,v=cw(v),fw(v,o,u,h),hg(u,v),!1}u=u.return}while(u!==null);return!1}var Ug=Error(i(461)),Qt=!1;function yn(o,a,u,h){a.child=o===null?mE(a,null,u,h):Ta(a,o.child,u,h)}function dw(o,a,u,h,v){u=u.render;var T=a.ref;if("ref"in h){var b={};for(var I in h)I!=="ref"&&(b[I]=h[I])}else b=h;return ga(a),h=_g(o,a,u,b,T,v),I=Tg(),o!==null&&!Qt?(Eg(o,a,v),ao(o,a,v)):(je&&I&&eg(a),a.flags|=1,yn(o,a,h,v),a.child)}function hw(o,a,u,h,v){if(o===null){var T=u.type;return typeof T=="function"&&!Xm(T)&&T.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=T,pw(o,a,T,h,v)):(o=Fd(u.type,null,h,a,a.mode,v),o.ref=a.ref,o.return=a,a.child=o)}if(T=o.child,!Yg(o,v)){var b=T.memoizedProps;if(u=u.compare,u=u!==null?u:Sc,u(b,h)&&o.ref===a.ref)return ao(o,a,v)}return a.flags|=1,o=to(T,h),o.ref=a.ref,o.return=a,a.child=o}function pw(o,a,u,h,v){if(o!==null){var T=o.memoizedProps;if(Sc(T,h)&&o.ref===a.ref)if(Qt=!1,a.pendingProps=h=T,Yg(o,v))(o.flags&131072)!==0&&(Qt=!0);else return a.lanes=o.lanes,ao(o,a,v)}return zg(o,a,u,h,v)}function mw(o,a,u,h){var v=h.children,T=o!==null?o.memoizedState:null;if(o===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(T=T!==null?T.baseLanes|u:u,o!==null){for(h=a.child=o.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~T}else h=0,a.child=null;return gw(o,a,T,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},o!==null&&$d(a,T!==null?T.cachePool:null),T!==null?vE(a,T):mg(),_E(a);else return h=a.lanes=536870912,gw(o,a,T!==null?T.baseLanes|u:u,u,h)}else T!==null?($d(a,T.cachePool),vE(a,T),er(),a.memoizedState=null):(o!==null&&$d(a,null),mg(),er());return yn(o,a,v,u),a.child}function Uc(o,a){return o!==null&&o.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function gw(o,a,u,h,v){var T=ug();return T=T===null?null:{parent:Jt._currentValue,pool:T},a.memoizedState={baseLanes:u,cachePool:T},o!==null&&$d(a,null),mg(),_E(a),o!==null&&Il(o,a,h,!0),a.childLanes=v,null}function ah(o,a){return a=uh({mode:a.mode,children:a.children},o.mode),a.ref=o.ref,o.child=a,a.return=o,a}function yw(o,a,u){return Ta(a,o.child,null,u),o=ah(a,a.pendingProps),o.flags|=2,ai(a),a.memoizedState=null,o}function gk(o,a,u){var h=a.pendingProps,v=(a.flags&128)!==0;if(a.flags&=-129,o===null){if(je){if(h.mode==="hidden")return o=ah(a,h),a.lanes=536870912,Uc(null,o);if(yg(a),(o=vt)?(o=IS(o,Ii),o=o!==null&&o.data==="&"?o:null,o!==null&&(a.memoizedState={dehydrated:o,treeContext:Yo!==null?{id:Is,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},u=eE(o),u.return=a,a.child=u,mn=a,vt=null)):o=null,o===null)throw Jo(a);return a.lanes=536870912,null}return ah(a,h)}var T=o.memoizedState;if(T!==null){var b=T.dehydrated;if(yg(a),v)if(a.flags&256)a.flags&=-257,a=yw(o,a,u);else if(a.memoizedState!==null)a.child=o.child,a.flags|=128,a=null;else throw Error(i(558));else if(Qt||Il(o,a,u,!1),v=(u&o.childLanes)!==0,Qt||v){if(h=gt,h!==null&&(b=oc(h,u),b!==0&&b!==T.retryLane))throw T.retryLane=b,da(o,b),Xn(h,o,b),Ug;vh(),a=yw(o,a,u)}else o=T.treeContext,vt=Pi(b.nextSibling),mn=a,je=!0,Ko=null,Ii=!1,o!==null&&iE(a,o),a=ah(a,h),a.flags|=4096;return a}return o=to(o.child,{mode:h.mode,children:h.children}),o.ref=a.ref,a.child=o,o.return=a,o}function lh(o,a){var u=a.ref;if(u===null)o!==null&&o.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(o===null||o.ref!==u)&&(a.flags|=4194816)}}function zg(o,a,u,h,v){return ga(a),u=_g(o,a,u,h,void 0,v),h=Tg(),o!==null&&!Qt?(Eg(o,a,v),ao(o,a,v)):(je&&h&&eg(a),a.flags|=1,yn(o,a,u,v),a.child)}function vw(o,a,u,h,v,T){return ga(a),a.updateQueue=null,u=EE(a,h,u,v),TE(o),h=Tg(),o!==null&&!Qt?(Eg(o,a,T),ao(o,a,T)):(je&&h&&eg(a),a.flags|=1,yn(o,a,u,T),a.child)}function _w(o,a,u,h,v){if(ga(a),a.stateNode===null){var T=Cl,b=u.contextType;typeof b=="object"&&b!==null&&(T=gn(b)),T=new u(h,T),a.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Lg,a.stateNode=T,T._reactInternals=a,T=a.stateNode,T.props=h,T.state=a.memoizedState,T.refs={},fg(a),b=u.contextType,T.context=typeof b=="object"&&b!==null?gn(b):Cl,T.state=a.memoizedState,b=u.getDerivedStateFromProps,typeof b=="function"&&(Vg(a,u,b,h),T.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(b=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),b!==T.state&&Lg.enqueueReplaceState(T,T.state,null),Nc(a,h,T,v),Dc(),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(o===null){T=a.stateNode;var I=a.memoizedProps,q=wa(u,I);T.props=q;var Q=T.context,ne=u.contextType;b=Cl,typeof ne=="object"&&ne!==null&&(b=gn(ne));var re=u.getDerivedStateFromProps;ne=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I||Q!==b)&&ow(a,T,h,b),Qo=!1;var X=a.memoizedState;T.state=X,Nc(a,h,T,v),Dc(),Q=a.memoizedState,I||X!==Q||Qo?(typeof re=="function"&&(Vg(a,u,re,h),Q=a.memoizedState),(q=Qo||sw(a,u,q,h,X,Q,b))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Q),T.props=h,T.state=Q,T.context=b,h=q):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{T=a.stateNode,dg(o,a),b=a.memoizedProps,ne=wa(u,b),T.props=ne,re=a.pendingProps,X=T.context,Q=u.contextType,q=Cl,typeof Q=="object"&&Q!==null&&(q=gn(Q)),I=u.getDerivedStateFromProps,(Q=typeof I=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b!==re||X!==q)&&ow(a,T,h,q),Qo=!1,X=a.memoizedState,T.state=X,Nc(a,h,T,v),Dc();var te=a.memoizedState;b!==re||X!==te||Qo||o!==null&&o.dependencies!==null&&Gd(o.dependencies)?(typeof I=="function"&&(Vg(a,u,I,h),te=a.memoizedState),(ne=Qo||sw(a,u,ne,h,X,te,q)||o!==null&&o.dependencies!==null&&Gd(o.dependencies))?(Q||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,te,q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,te,q)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||b===o.memoizedProps&&X===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||b===o.memoizedProps&&X===o.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=te),T.props=h,T.state=te,T.context=q,h=ne):(typeof T.componentDidUpdate!="function"||b===o.memoizedProps&&X===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||b===o.memoizedProps&&X===o.memoizedState||(a.flags|=1024),h=!1)}return T=h,lh(o,a),h=(a.flags&128)!==0,T||h?(T=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:T.render(),a.flags|=1,o!==null&&h?(a.child=Ta(a,o.child,null,v),a.child=Ta(a,null,u,v)):yn(o,a,u,v),a.memoizedState=T.state,o=a.child):o=ao(o,a,v),o}function Tw(o,a,u,h){return pa(),a.flags|=256,yn(o,a,u,h),a.child}var Bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fg(o){return{baseLanes:o,cachePool:uE()}}function qg(o,a,u){return o=o!==null?o.childLanes&~u:0,a&&(o|=ui),o}function Ew(o,a,u){var h=a.pendingProps,v=!1,T=(a.flags&128)!==0,b;if((b=T)||(b=o!==null&&o.memoizedState===null?!1:(Ut.current&2)!==0),b&&(v=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,o===null){if(je){if(v?Zo(a):er(),(o=vt)?(o=IS(o,Ii),o=o!==null&&o.data!=="&"?o:null,o!==null&&(a.memoizedState={dehydrated:o,treeContext:Yo!==null?{id:Is,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},u=eE(o),u.return=a,a.child=u,mn=a,vt=null)):o=null,o===null)throw Jo(a);return by(o)?a.lanes=32:a.lanes=536870912,null}var I=h.children;return h=h.fallback,v?(er(),v=a.mode,I=uh({mode:"hidden",children:I},v),h=ha(h,v,u,null),I.return=a,h.return=a,I.sibling=h,a.child=I,h=a.child,h.memoizedState=Fg(u),h.childLanes=qg(o,b,u),a.memoizedState=Bg,Uc(null,h)):(Zo(a),Gg(a,I))}var q=o.memoizedState;if(q!==null&&(I=q.dehydrated,I!==null)){if(T)a.flags&256?(Zo(a),a.flags&=-257,a=Hg(o,a,u)):a.memoizedState!==null?(er(),a.child=o.child,a.flags|=128,a=null):(er(),I=h.fallback,v=a.mode,h=uh({mode:"visible",children:h.children},v),I=ha(I,v,u,null),I.flags|=2,h.return=a,I.return=a,h.sibling=I,a.child=h,Ta(a,o.child,null,u),h=a.child,h.memoizedState=Fg(u),h.childLanes=qg(o,b,u),a.memoizedState=Bg,a=Uc(null,h));else if(Zo(a),by(I)){if(b=I.nextSibling&&I.nextSibling.dataset,b)var Q=b.dgst;b=Q,h=Error(i(419)),h.stack="",h.digest=b,Ac({value:h,source:null,stack:null}),a=Hg(o,a,u)}else if(Qt||Il(o,a,u,!1),b=(u&o.childLanes)!==0,Qt||b){if(b=gt,b!==null&&(h=oc(b,u),h!==0&&h!==q.retryLane))throw q.retryLane=h,da(o,h),Xn(b,o,h),Ug;Sy(I)||vh(),a=Hg(o,a,u)}else Sy(I)?(a.flags|=192,a.child=o.child,a=null):(o=q.treeContext,vt=Pi(I.nextSibling),mn=a,je=!0,Ko=null,Ii=!1,o!==null&&iE(a,o),a=Gg(a,h.children),a.flags|=4096);return a}return v?(er(),I=h.fallback,v=a.mode,q=o.child,Q=q.sibling,h=to(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,Q!==null?I=to(Q,I):(I=ha(I,v,u,null),I.flags|=2),I.return=a,h.return=a,h.sibling=I,a.child=h,Uc(null,h),h=a.child,I=o.child.memoizedState,I===null?I=Fg(u):(v=I.cachePool,v!==null?(q=Jt._currentValue,v=v.parent!==q?{parent:q,pool:q}:v):v=uE(),I={baseLanes:I.baseLanes|u,cachePool:v}),h.memoizedState=I,h.childLanes=qg(o,b,u),a.memoizedState=Bg,Uc(o.child,h)):(Zo(a),u=o.child,o=u.sibling,u=to(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,o!==null&&(b=a.deletions,b===null?(a.deletions=[o],a.flags|=16):b.push(o)),a.child=u,a.memoizedState=null,u)}function Gg(o,a){return a=uh({mode:"visible",children:a},o.mode),a.return=o,o.child=a}function uh(o,a){return o=oi(22,o,null,a),o.lanes=0,o}function Hg(o,a,u){return Ta(a,o.child,null,u),o=Gg(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function ww(o,a,u){o.lanes|=a;var h=o.alternate;h!==null&&(h.lanes|=a),og(o.return,a,u)}function $g(o,a,u,h,v,T){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:T}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=u,b.tailMode=v,b.treeForkCount=T)}function Sw(o,a,u){var h=a.pendingProps,v=h.revealOrder,T=h.tail;h=h.children;var b=Ut.current,I=(b&2)!==0;if(I?(b=b&1|2,a.flags|=128):b&=1,de(Ut,b),yn(o,a,h,u),h=je?Cc:0,!I&&o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ww(o,u,a);else if(o.tag===19)ww(o,u,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(u=a.child,v=null;u!==null;)o=u.alternate,o!==null&&Xd(o)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),$g(a,!1,v,u,T,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(o=v.alternate,o!==null&&Xd(o)===null){a.child=v;break}o=v.sibling,v.sibling=u,u=v,v=o}$g(a,!0,u,null,T,h);break;case"together":$g(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ao(o,a,u){if(o!==null&&(a.dependencies=o.dependencies),ir|=a.lanes,(u&a.childLanes)===0)if(o!==null){if(Il(o,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(o!==null&&a.child!==o.child)throw Error(i(153));if(a.child!==null){for(o=a.child,u=to(o,o.pendingProps),a.child=u,u.return=a;o.sibling!==null;)o=o.sibling,u=u.sibling=to(o,o.pendingProps),u.return=a;u.sibling=null}return a.child}function Yg(o,a){return(o.lanes&a)!==0?!0:(o=o.dependencies,!!(o!==null&&Gd(o)))}function yk(o,a,u){switch(a.tag){case 3:kt(a,a.stateNode.containerInfo),Wo(a,Jt,o.memoizedState.cache),pa();break;case 27:case 5:Qs(a);break;case 4:kt(a,a.stateNode.containerInfo);break;case 10:Wo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,yg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Zo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Ew(o,a,u):(Zo(a),o=ao(o,a,u),o!==null?o.sibling:null);Zo(a);break;case 19:var v=(o.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(Il(o,a,u,!1),h=(u&a.childLanes)!==0),v){if(h)return Sw(o,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),de(Ut,Ut.current),h)break;return null;case 22:return a.lanes=0,mw(o,a,u,a.pendingProps);case 24:Wo(a,Jt,o.memoizedState.cache)}return ao(o,a,u)}function bw(o,a,u){if(o!==null)if(o.memoizedProps!==a.pendingProps)Qt=!0;else{if(!Yg(o,u)&&(a.flags&128)===0)return Qt=!1,yk(o,a,u);Qt=(o.flags&131072)!==0}else Qt=!1,je&&(a.flags&1048576)!==0&&nE(a,Cc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(o=va(a.elementType),a.type=o,typeof o=="function")Xm(o)?(h=wa(o,h),a.tag=1,a=_w(null,a,o,h,u)):(a.tag=0,a=zg(null,a,o,h,u));else{if(o!=null){var v=o.$$typeof;if(v===H){a.tag=11,a=dw(null,a,o,h,u);break e}else if(v===D){a.tag=14,a=hw(null,a,o,h,u);break e}}throw a=Ae(o)||o,Error(i(306,a,""))}}return a;case 0:return zg(o,a,a.type,a.pendingProps,u);case 1:return h=a.type,v=wa(h,a.pendingProps),_w(o,a,h,v,u);case 3:e:{if(kt(a,a.stateNode.containerInfo),o===null)throw Error(i(387));h=a.pendingProps;var T=a.memoizedState;v=T.element,dg(o,a),Nc(a,h,null,u);var b=a.memoizedState;if(h=b.cache,Wo(a,Jt,h),h!==T.cache&&rg(a,[Jt],u,!0),Dc(),h=b.element,T.isDehydrated)if(T={element:h,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){a=Tw(o,a,h,u);break e}else if(h!==v){v=Ai(Error(i(424)),a),Ac(v),a=Tw(o,a,h,u);break e}else{switch(o=a.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(vt=Pi(o.firstChild),mn=a,je=!0,Ko=null,Ii=!0,u=mE(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(pa(),h===v){a=ao(o,a,u);break e}yn(o,a,h,u)}a=a.child}return a;case 26:return lh(o,a),o===null?(u=VS(a.type,null,a.pendingProps,null))?a.memoizedState=u:je||(u=a.type,o=a.pendingProps,h=Ch(Ne.current).createElement(u),h[$t]=a,h[ln]=o,vn(h,u,o),Yt(h),a.stateNode=h):a.memoizedState=VS(a.type,o.memoizedProps,a.pendingProps,o.memoizedState),null;case 27:return Qs(a),o===null&&je&&(h=a.stateNode=DS(a.type,a.pendingProps,Ne.current),mn=a,Ii=!0,v=vt,lr(a.type)?(Cy=v,vt=Pi(h.firstChild)):vt=v),yn(o,a,a.pendingProps.children,u),lh(o,a),o===null&&(a.flags|=4194304),a.child;case 5:return o===null&&je&&((v=h=vt)&&(h=Kk(h,a.type,a.pendingProps,Ii),h!==null?(a.stateNode=h,mn=a,vt=Pi(h.firstChild),Ii=!1,v=!0):v=!1),v||Jo(a)),Qs(a),v=a.type,T=a.pendingProps,b=o!==null?o.memoizedProps:null,h=T.children,Ty(v,T)?h=null:b!==null&&Ty(v,b)&&(a.flags|=32),a.memoizedState!==null&&(v=_g(o,a,lk,null,null,u),Zc._currentValue=v),lh(o,a),yn(o,a,h,u),a.child;case 6:return o===null&&je&&((o=u=vt)&&(u=Jk(u,a.pendingProps,Ii),u!==null?(a.stateNode=u,mn=a,vt=null,o=!0):o=!1),o||Jo(a)),null;case 13:return Ew(o,a,u);case 4:return kt(a,a.stateNode.containerInfo),h=a.pendingProps,o===null?a.child=Ta(a,null,h,u):yn(o,a,h,u),a.child;case 11:return dw(o,a,a.type,a.pendingProps,u);case 7:return yn(o,a,a.pendingProps,u),a.child;case 8:return yn(o,a,a.pendingProps.children,u),a.child;case 12:return yn(o,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,Wo(a,a.type,h.value),yn(o,a,h.children,u),a.child;case 9:return v=a.type._context,h=a.pendingProps.children,ga(a),v=gn(v),h=h(v),a.flags|=1,yn(o,a,h,u),a.child;case 14:return hw(o,a,a.type,a.pendingProps,u);case 15:return pw(o,a,a.type,a.pendingProps,u);case 19:return Sw(o,a,u);case 31:return gk(o,a,u);case 22:return mw(o,a,u,a.pendingProps);case 24:return ga(a),h=gn(Jt),o===null?(v=ug(),v===null&&(v=gt,T=ag(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=u),v=T),a.memoizedState={parent:h,cache:v},fg(a),Wo(a,Jt,v)):((o.lanes&u)!==0&&(dg(o,a),Nc(a,null,null,u),Dc()),v=o.memoizedState,T=a.memoizedState,v.parent!==h?(v={parent:h,cache:h},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),Wo(a,Jt,h)):(h=T.cache,Wo(a,Jt,h),h!==v.cache&&rg(a,[Jt],u,!0))),yn(o,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function lo(o){o.flags|=4}function Kg(o,a,u,h,v){if((a=(o.mode&32)!==0)&&(a=!1),a){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(Xw())o.flags|=8192;else throw _a=Kd,cg}else o.flags&=-16777217}function Cw(o,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!BS(a))if(Xw())o.flags|=8192;else throw _a=Kd,cg}function ch(o,a){a!==null&&(o.flags|=4),o.flags&16384&&(a=o.tag!==22?gd():536870912,o.lanes|=a,Fl|=a)}function zc(o,a){if(!je)switch(o.tailMode){case"hidden":a=o.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function _t(o){var a=o.alternate!==null&&o.alternate.child===o.child,u=0,h=0;if(a)for(var v=o.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=h,o.childLanes=u,a}function vk(o,a,u){var h=a.pendingProps;switch(tg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(a),null;case 1:return _t(a),null;case 3:return u=a.stateNode,h=null,o!==null&&(h=o.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),so(Jt),yt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(Rl(a)?lo(a):o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ig())),_t(a),null;case 26:var v=a.type,T=a.memoizedState;return o===null?(lo(a),T!==null?(_t(a),Cw(a,T)):(_t(a),Kg(a,v,null,h,u))):T?T!==o.memoizedState?(lo(a),_t(a),Cw(a,T)):(_t(a),a.flags&=-16777217):(o=o.memoizedProps,o!==h&&lo(a),_t(a),Kg(a,v,o,h,u)),null;case 27:if(No(a),u=Ne.current,v=a.type,o!==null&&a.stateNode!=null)o.memoizedProps!==h&&lo(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return _t(a),null}o=pe.current,Rl(a)?sE(a):(o=DS(v,h,u),a.stateNode=o,lo(a))}return _t(a),null;case 5:if(No(a),v=a.type,o!==null&&a.stateNode!=null)o.memoizedProps!==h&&lo(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return _t(a),null}if(T=pe.current,Rl(a))sE(a);else{var b=Ch(Ne.current);switch(T){case 1:T=b.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=b.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=b.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof h.is=="string"?b.createElement("select",{is:h.is}):b.createElement("select"),h.multiple?T.multiple=!0:h.size&&(T.size=h.size);break;default:T=typeof h.is=="string"?b.createElement(v,{is:h.is}):b.createElement(v)}}T[$t]=a,T[ln]=h;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)T.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=T;e:switch(vn(T,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&lo(a)}}return _t(a),Kg(a,a.type,o===null?null:o.memoizedProps,a.pendingProps,u),null;case 6:if(o&&a.stateNode!=null)o.memoizedProps!==h&&lo(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(o=Ne.current,Rl(a)){if(o=a.stateNode,u=a.memoizedProps,h=null,v=mn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}o[$t]=a,o=!!(o.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||ES(o.nodeValue,u)),o||Jo(a,!0)}else o=Ch(o).createTextNode(h),o[$t]=a,a.stateNode=o}return _t(a),null;case 31:if(u=a.memoizedState,o===null||o.memoizedState!==null){if(h=Rl(a),u!==null){if(o===null){if(!h)throw Error(i(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[$t]=a}else pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_t(a),o=!1}else u=ig(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=u),o=!0;if(!o)return a.flags&256?(ai(a),a):(ai(a),null);if((a.flags&128)!==0)throw Error(i(558))}return _t(a),null;case 13:if(h=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Rl(a),h!==null&&h.dehydrated!==null){if(o===null){if(!v)throw Error(i(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[$t]=a}else pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_t(a),v=!1}else v=ig(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(ai(a),a):(ai(a),null)}return ai(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,o=o!==null&&o.memoizedState!==null,u&&(h=a.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),T=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(T=h.memoizedState.cachePool.pool),T!==v&&(h.flags|=2048)),u!==o&&u&&(a.child.flags|=8192),ch(a,a.updateQueue),_t(a),null);case 4:return yt(),o===null&&my(a.stateNode.containerInfo),_t(a),null;case 10:return so(a.type),_t(a),null;case 19:if(oe(Ut),h=a.memoizedState,h===null)return _t(a),null;if(v=(a.flags&128)!==0,T=h.rendering,T===null)if(v)zc(h,!1);else{if(Pt!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(T=Xd(o),T!==null){for(a.flags|=128,zc(h,!1),o=T.updateQueue,a.updateQueue=o,ch(a,o),a.subtreeFlags=0,o=u,u=a.child;u!==null;)ZT(u,o),u=u.sibling;return de(Ut,Ut.current&1|2),je&&no(a,h.treeForkCount),a.child}o=o.sibling}h.tail!==null&&Fe()>mh&&(a.flags|=128,v=!0,zc(h,!1),a.lanes=4194304)}else{if(!v)if(o=Xd(T),o!==null){if(a.flags|=128,v=!0,o=o.updateQueue,a.updateQueue=o,ch(a,o),zc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!T.alternate&&!je)return _t(a),null}else 2*Fe()-h.renderingStartTime>mh&&u!==536870912&&(a.flags|=128,v=!0,zc(h,!1),a.lanes=4194304);h.isBackwards?(T.sibling=a.child,a.child=T):(o=h.last,o!==null?o.sibling=T:a.child=T,h.last=T)}return h.tail!==null?(o=h.tail,h.rendering=o,h.tail=o.sibling,h.renderingStartTime=Fe(),o.sibling=null,u=Ut.current,de(Ut,v?u&1|2:u&1),je&&no(a,h.treeForkCount),o):(_t(a),null);case 22:case 23:return ai(a),gg(),h=a.memoizedState!==null,o!==null?o.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(_t(a),a.subtreeFlags&6&&(a.flags|=8192)):_t(a),u=a.updateQueue,u!==null&&ch(a,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),o!==null&&oe(ya),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),so(Jt),_t(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function _k(o,a){switch(tg(a),a.tag){case 1:return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return so(Jt),yt(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 26:case 27:case 5:return No(a),null;case 31:if(a.memoizedState!==null){if(ai(a),a.alternate===null)throw Error(i(340));pa()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 13:if(ai(a),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(i(340));pa()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return oe(Ut),null;case 4:return yt(),null;case 10:return so(a.type),null;case 22:case 23:return ai(a),gg(),o!==null&&oe(ya),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 24:return so(Jt),null;case 25:return null;default:return null}}function Aw(o,a){switch(tg(a),a.tag){case 3:so(Jt),yt();break;case 26:case 27:case 5:No(a);break;case 4:yt();break;case 31:a.memoizedState!==null&&ai(a);break;case 13:ai(a);break;case 19:oe(Ut);break;case 10:so(a.type);break;case 22:case 23:ai(a),gg(),o!==null&&oe(ya);break;case 24:so(Jt)}}function Bc(o,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&o)===o){h=void 0;var T=u.create,b=u.inst;h=T(),b.destroy=h}u=u.next}while(u!==v)}}catch(I){ct(a,a.return,I)}}function tr(o,a,u){try{var h=a.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var T=v.next;h=T;do{if((h.tag&o)===o){var b=h.inst,I=b.destroy;if(I!==void 0){b.destroy=void 0,v=a;var q=u,Q=I;try{Q()}catch(ne){ct(v,q,ne)}}}h=h.next}while(h!==T)}}catch(ne){ct(a,a.return,ne)}}function xw(o){var a=o.updateQueue;if(a!==null){var u=o.stateNode;try{yE(a,u)}catch(h){ct(o,o.return,h)}}}function Rw(o,a,u){u.props=wa(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(h){ct(o,a,h)}}function Fc(o,a){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var h=o.stateNode;break;case 30:h=o.stateNode;break;default:h=o.stateNode}typeof u=="function"?o.refCleanup=u(h):u.current=h}}catch(v){ct(o,a,v)}}function Ps(o,a){var u=o.ref,h=o.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){ct(o,a,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){ct(o,a,v)}else u.current=null}function Iw(o){var a=o.type,u=o.memoizedProps,h=o.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){ct(o,o.return,v)}}function Jg(o,a,u){try{var h=o.stateNode;Fk(h,o.type,u,a),h[ln]=a}catch(v){ct(o,o.return,v)}}function Mw(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&lr(o.type)||o.tag===4}function Wg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Mw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&lr(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Qg(o,a,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(o),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=$i));else if(h!==4&&(h===27&&lr(o.type)&&(u=o.stateNode,a=null),o=o.child,o!==null))for(Qg(o,a,u),o=o.sibling;o!==null;)Qg(o,a,u),o=o.sibling}function fh(o,a,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,a?u.insertBefore(o,a):u.appendChild(o);else if(h!==4&&(h===27&&lr(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(fh(o,a,u),o=o.sibling;o!==null;)fh(o,a,u),o=o.sibling}function Pw(o){var a=o.stateNode,u=o.memoizedProps;try{for(var h=o.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);vn(a,h,u),a[$t]=o,a[ln]=u}catch(T){ct(o,o.return,T)}}var uo=!1,Xt=!1,Xg=!1,Dw=typeof WeakSet=="function"?WeakSet:Set,cn=null;function Tk(o,a){if(o=o.containerInfo,vy=Dh,o=HT(o),Hm(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,T=h.focusNode;h=h.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break e}var b=0,I=-1,q=-1,Q=0,ne=0,re=o,X=null;t:for(;;){for(var te;re!==u||v!==0&&re.nodeType!==3||(I=b+v),re!==T||h!==0&&re.nodeType!==3||(q=b+h),re.nodeType===3&&(b+=re.nodeValue.length),(te=re.firstChild)!==null;)X=re,re=te;for(;;){if(re===o)break t;if(X===u&&++Q===v&&(I=b),X===T&&++ne===h&&(q=b),(te=re.nextSibling)!==null)break;re=X,X=re.parentNode}re=te}u=I===-1||q===-1?null:{start:I,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(_y={focusedElem:o,selectionRange:u},Dh=!1,cn=a;cn!==null;)if(a=cn,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,cn=o;else for(;cn!==null;){switch(a=cn,T=a.alternate,o=a.flags,a.tag){case 0:if((o&4)!==0&&(o=a.updateQueue,o=o!==null?o.events:null,o!==null))for(u=0;u<o.length;u++)v=o[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,u=a,v=T.memoizedProps,T=T.memoizedState,h=u.stateNode;try{var ge=wa(u.type,v);o=h.getSnapshotBeforeUpdate(ge,T),h.__reactInternalSnapshotBeforeUpdate=o}catch(Ce){ct(u,u.return,Ce)}}break;case 3:if((o&1024)!==0){if(o=a.stateNode.containerInfo,u=o.nodeType,u===9)wy(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":wy(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=a.sibling,o!==null){o.return=a.return,cn=o;break}cn=a.return}}function Nw(o,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:fo(o,u),h&4&&Bc(5,u);break;case 1:if(fo(o,u),h&4)if(o=u.stateNode,a===null)try{o.componentDidMount()}catch(b){ct(u,u.return,b)}else{var v=wa(u.type,a.memoizedProps);a=a.memoizedState;try{o.componentDidUpdate(v,a,o.__reactInternalSnapshotBeforeUpdate)}catch(b){ct(u,u.return,b)}}h&64&&xw(u),h&512&&Fc(u,u.return);break;case 3:if(fo(o,u),h&64&&(o=u.updateQueue,o!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{yE(o,a)}catch(b){ct(u,u.return,b)}}break;case 27:a===null&&h&4&&Pw(u);case 26:case 5:fo(o,u),a===null&&h&4&&Iw(u),h&512&&Fc(u,u.return);break;case 12:fo(o,u);break;case 31:fo(o,u),h&4&&Lw(o,u);break;case 13:fo(o,u),h&4&&Ow(o,u),h&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=Ik.bind(null,u),Wk(o,u))));break;case 22:if(h=u.memoizedState!==null||uo,!h){a=a!==null&&a.memoizedState!==null||Xt,v=uo;var T=Xt;uo=h,(Xt=a)&&!T?ho(o,u,(u.subtreeFlags&8772)!==0):fo(o,u),uo=v,Xt=T}break;case 30:break;default:fo(o,u)}}function kw(o){var a=o.alternate;a!==null&&(o.alternate=null,kw(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&fl(a)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ct=null,Kn=!1;function co(o,a,u){for(u=u.child;u!==null;)Vw(o,a,u),u=u.sibling}function Vw(o,a,u){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Fi,u)}catch{}switch(u.tag){case 26:Xt||Ps(u,a),co(o,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Xt||Ps(u,a);var h=Ct,v=Kn;lr(u.type)&&(Ct=u.stateNode,Kn=!1),co(o,a,u),Qc(u.stateNode),Ct=h,Kn=v;break;case 5:Xt||Ps(u,a);case 6:if(h=Ct,v=Kn,Ct=null,co(o,a,u),Ct=h,Kn=v,Ct!==null)if(Kn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(u.stateNode)}catch(T){ct(u,a,T)}else try{Ct.removeChild(u.stateNode)}catch(T){ct(u,a,T)}break;case 18:Ct!==null&&(Kn?(o=Ct,xS(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),Wl(o)):xS(Ct,u.stateNode));break;case 4:h=Ct,v=Kn,Ct=u.stateNode.containerInfo,Kn=!0,co(o,a,u),Ct=h,Kn=v;break;case 0:case 11:case 14:case 15:tr(2,u,a),Xt||tr(4,u,a),co(o,a,u);break;case 1:Xt||(Ps(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Rw(u,a,h)),co(o,a,u);break;case 21:co(o,a,u);break;case 22:Xt=(h=Xt)||u.memoizedState!==null,co(o,a,u),Xt=h;break;default:co(o,a,u)}}function Lw(o,a){if(a.memoizedState===null&&(o=a.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Wl(o)}catch(u){ct(a,a.return,u)}}}function Ow(o,a){if(a.memoizedState===null&&(o=a.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Wl(o)}catch(u){ct(a,a.return,u)}}function Ek(o){switch(o.tag){case 31:case 13:case 19:var a=o.stateNode;return a===null&&(a=o.stateNode=new Dw),a;case 22:return o=o.stateNode,a=o._retryCache,a===null&&(a=o._retryCache=new Dw),a;default:throw Error(i(435,o.tag))}}function dh(o,a){var u=Ek(o);a.forEach(function(h){if(!u.has(h)){u.add(h);var v=Mk.bind(null,o,h);h.then(v,v)}})}function Jn(o,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],T=o,b=a,I=b;e:for(;I!==null;){switch(I.tag){case 27:if(lr(I.type)){Ct=I.stateNode,Kn=!1;break e}break;case 5:Ct=I.stateNode,Kn=!1;break e;case 3:case 4:Ct=I.stateNode.containerInfo,Kn=!0;break e}I=I.return}if(Ct===null)throw Error(i(160));Vw(T,b,v),Ct=null,Kn=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Uw(a,o),a=a.sibling}var Xi=null;function Uw(o,a){var u=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Jn(a,o),Wn(o),h&4&&(tr(3,o,o.return),Bc(3,o),tr(5,o,o.return));break;case 1:Jn(a,o),Wn(o),h&512&&(Xt||u===null||Ps(u,u.return)),h&64&&uo&&(o=o.updateQueue,o!==null&&(h=o.callbacks,h!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Xi;if(Jn(a,o),Wn(o),h&512&&(Xt||u===null||Ps(u,u.return)),h&4){var T=u!==null?u.memoizedState:null;if(h=o.memoizedState,u===null)if(h===null)if(o.stateNode===null){e:{h=o.type,u=o.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":T=v.getElementsByTagName("title")[0],(!T||T[ys]||T[$t]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(h),v.head.insertBefore(T,v.querySelector("head > title"))),vn(T,h,u),T[$t]=o,Yt(T),h=T;break e;case"link":var b=US("link","href",v).get(h+(u.href||""));if(b){for(var I=0;I<b.length;I++)if(T=b[I],T.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&T.getAttribute("rel")===(u.rel==null?null:u.rel)&&T.getAttribute("title")===(u.title==null?null:u.title)&&T.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){b.splice(I,1);break t}}T=v.createElement(h),vn(T,h,u),v.head.appendChild(T);break;case"meta":if(b=US("meta","content",v).get(h+(u.content||""))){for(I=0;I<b.length;I++)if(T=b[I],T.getAttribute("content")===(u.content==null?null:""+u.content)&&T.getAttribute("name")===(u.name==null?null:u.name)&&T.getAttribute("property")===(u.property==null?null:u.property)&&T.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&T.getAttribute("charset")===(u.charSet==null?null:u.charSet)){b.splice(I,1);break t}}T=v.createElement(h),vn(T,h,u),v.head.appendChild(T);break;default:throw Error(i(468,h))}T[$t]=o,Yt(T),h=T}o.stateNode=h}else zS(v,o.type,o.stateNode);else o.stateNode=OS(v,h,o.memoizedProps);else T!==h?(T===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):T.count--,h===null?zS(v,o.type,o.stateNode):OS(v,h,o.memoizedProps)):h===null&&o.stateNode!==null&&Jg(o,o.memoizedProps,u.memoizedProps)}break;case 27:Jn(a,o),Wn(o),h&512&&(Xt||u===null||Ps(u,u.return)),u!==null&&h&4&&Jg(o,o.memoizedProps,u.memoizedProps);break;case 5:if(Jn(a,o),Wn(o),h&512&&(Xt||u===null||Ps(u,u.return)),o.flags&32){v=o.stateNode;try{Yn(v,"")}catch(ge){ct(o,o.return,ge)}}h&4&&o.stateNode!=null&&(v=o.memoizedProps,Jg(o,v,u!==null?u.memoizedProps:v)),h&1024&&(Xg=!0);break;case 6:if(Jn(a,o),Wn(o),h&4){if(o.stateNode===null)throw Error(i(162));h=o.memoizedProps,u=o.stateNode;try{u.nodeValue=h}catch(ge){ct(o,o.return,ge)}}break;case 3:if(Rh=null,v=Xi,Xi=Ah(a.containerInfo),Jn(a,o),Xi=v,Wn(o),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Wl(a.containerInfo)}catch(ge){ct(o,o.return,ge)}Xg&&(Xg=!1,zw(o));break;case 4:h=Xi,Xi=Ah(o.stateNode.containerInfo),Jn(a,o),Wn(o),Xi=h;break;case 12:Jn(a,o),Wn(o);break;case 31:Jn(a,o),Wn(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,dh(o,h)));break;case 13:Jn(a,o),Wn(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ph=Fe()),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,dh(o,h)));break;case 22:v=o.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,Q=uo,ne=Xt;if(uo=Q||v,Xt=ne||q,Jn(a,o),Xt=ne,uo=Q,Wn(o),h&8192)e:for(a=o.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(u===null||q||uo||Xt||Sa(o)),u=null,a=o;;){if(a.tag===5||a.tag===26){if(u===null){q=u=a;try{if(T=q.stateNode,v)b=T.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{I=q.stateNode;var re=q.memoizedProps.style,X=re!=null&&re.hasOwnProperty("display")?re.display:null;I.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ge){ct(q,q.return,ge)}}}else if(a.tag===6){if(u===null){q=a;try{q.stateNode.nodeValue=v?"":q.memoizedProps}catch(ge){ct(q,q.return,ge)}}}else if(a.tag===18){if(u===null){q=a;try{var te=q.stateNode;v?RS(te,!0):RS(q.stateNode,!1)}catch(ge){ct(q,q.return,ge)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===o)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=o.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,dh(o,u))));break;case 19:Jn(a,o),Wn(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,dh(o,h)));break;case 30:break;case 21:break;default:Jn(a,o),Wn(o)}}function Wn(o){var a=o.flags;if(a&2){try{for(var u,h=o.return;h!==null;){if(Mw(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,T=Wg(o);fh(o,T,v);break;case 5:var b=u.stateNode;u.flags&32&&(Yn(b,""),u.flags&=-33);var I=Wg(o);fh(o,I,b);break;case 3:case 4:var q=u.stateNode.containerInfo,Q=Wg(o);Qg(o,Q,q);break;default:throw Error(i(161))}}catch(ne){ct(o,o.return,ne)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function zw(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var a=o;zw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),o=o.sibling}}function fo(o,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Nw(o,a.alternate,a),a=a.sibling}function Sa(o){for(o=o.child;o!==null;){var a=o;switch(a.tag){case 0:case 11:case 14:case 15:tr(4,a,a.return),Sa(a);break;case 1:Ps(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Rw(a,a.return,u),Sa(a);break;case 27:Qc(a.stateNode);case 26:case 5:Ps(a,a.return),Sa(a);break;case 22:a.memoizedState===null&&Sa(a);break;case 30:Sa(a);break;default:Sa(a)}o=o.sibling}}function ho(o,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,v=o,T=a,b=T.flags;switch(T.tag){case 0:case 11:case 15:ho(v,T,u),Bc(4,T);break;case 1:if(ho(v,T,u),h=T,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){ct(h,h.return,Q)}if(h=T,v=h.updateQueue,v!==null){var I=h.stateNode;try{var q=v.shared.hiddenCallbacks;if(q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<q.length;v++)gE(q[v],I)}catch(Q){ct(h,h.return,Q)}}u&&b&64&&xw(T),Fc(T,T.return);break;case 27:Pw(T);case 26:case 5:ho(v,T,u),u&&h===null&&b&4&&Iw(T),Fc(T,T.return);break;case 12:ho(v,T,u);break;case 31:ho(v,T,u),u&&b&4&&Lw(v,T);break;case 13:ho(v,T,u),u&&b&4&&Ow(v,T);break;case 22:T.memoizedState===null&&ho(v,T,u),Fc(T,T.return);break;case 30:break;default:ho(v,T,u)}a=a.sibling}}function jg(o,a){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&xc(u))}function Zg(o,a){o=null,a.alternate!==null&&(o=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==o&&(a.refCount++,o!=null&&xc(o))}function ji(o,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bw(o,a,u,h),a=a.sibling}function Bw(o,a,u,h){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ji(o,a,u,h),v&2048&&Bc(9,a);break;case 1:ji(o,a,u,h);break;case 3:ji(o,a,u,h),v&2048&&(o=null,a.alternate!==null&&(o=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==o&&(a.refCount++,o!=null&&xc(o)));break;case 12:if(v&2048){ji(o,a,u,h),o=a.stateNode;try{var T=a.memoizedProps,b=T.id,I=T.onPostCommit;typeof I=="function"&&I(b,a.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(q){ct(a,a.return,q)}}else ji(o,a,u,h);break;case 31:ji(o,a,u,h);break;case 13:ji(o,a,u,h);break;case 23:break;case 22:T=a.stateNode,b=a.alternate,a.memoizedState!==null?T._visibility&2?ji(o,a,u,h):qc(o,a):T._visibility&2?ji(o,a,u,h):(T._visibility|=2,Ul(o,a,u,h,(a.subtreeFlags&10256)!==0||!1)),v&2048&&jg(b,a);break;case 24:ji(o,a,u,h),v&2048&&Zg(a.alternate,a);break;default:ji(o,a,u,h)}}function Ul(o,a,u,h,v){for(v=v&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var T=o,b=a,I=u,q=h,Q=b.flags;switch(b.tag){case 0:case 11:case 15:Ul(T,b,I,q,v),Bc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Ul(T,b,I,q,v):qc(T,b):(ne._visibility|=2,Ul(T,b,I,q,v)),v&&Q&2048&&jg(b.alternate,b);break;case 24:Ul(T,b,I,q,v),v&&Q&2048&&Zg(b.alternate,b);break;default:Ul(T,b,I,q,v)}a=a.sibling}}function qc(o,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=o,h=a,v=h.flags;switch(h.tag){case 22:qc(u,h),v&2048&&jg(h.alternate,h);break;case 24:qc(u,h),v&2048&&Zg(h.alternate,h);break;default:qc(u,h)}a=a.sibling}}var Gc=8192;function zl(o,a,u){if(o.subtreeFlags&Gc)for(o=o.child;o!==null;)Fw(o,a,u),o=o.sibling}function Fw(o,a,u){switch(o.tag){case 26:zl(o,a,u),o.flags&Gc&&o.memoizedState!==null&&a2(u,Xi,o.memoizedState,o.memoizedProps);break;case 5:zl(o,a,u);break;case 3:case 4:var h=Xi;Xi=Ah(o.stateNode.containerInfo),zl(o,a,u),Xi=h;break;case 22:o.memoizedState===null&&(h=o.alternate,h!==null&&h.memoizedState!==null?(h=Gc,Gc=16777216,zl(o,a,u),Gc=h):zl(o,a,u));break;default:zl(o,a,u)}}function qw(o){var a=o.alternate;if(a!==null&&(o=a.child,o!==null)){a.child=null;do a=o.sibling,o.sibling=null,o=a;while(o!==null)}}function Hc(o){var a=o.deletions;if((o.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];cn=h,Hw(h,o)}qw(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Gw(o),o=o.sibling}function Gw(o){switch(o.tag){case 0:case 11:case 15:Hc(o),o.flags&2048&&tr(9,o,o.return);break;case 3:Hc(o);break;case 12:Hc(o);break;case 22:var a=o.stateNode;o.memoizedState!==null&&a._visibility&2&&(o.return===null||o.return.tag!==13)?(a._visibility&=-3,hh(o)):Hc(o);break;default:Hc(o)}}function hh(o){var a=o.deletions;if((o.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];cn=h,Hw(h,o)}qw(o)}for(o=o.child;o!==null;){switch(a=o,a.tag){case 0:case 11:case 15:tr(8,a,a.return),hh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,hh(a));break;default:hh(a)}o=o.sibling}}function Hw(o,a){for(;cn!==null;){var u=cn;switch(u.tag){case 0:case 11:case 15:tr(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:xc(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,cn=h;else e:for(u=o;cn!==null;){h=cn;var v=h.sibling,T=h.return;if(kw(h),h===u){cn=null;break e}if(v!==null){v.return=T,cn=v;break e}cn=T}}}var wk={getCacheForType:function(o){var a=gn(Jt),u=a.data.get(o);return u===void 0&&(u=o(),a.data.set(o,u)),u},cacheSignal:function(){return gn(Jt).controller.signal}},Sk=typeof WeakMap=="function"?WeakMap:Map,rt=0,gt=null,Ge=null,Ye=0,ut=0,li=null,nr=!1,Bl=!1,ey=!1,po=0,Pt=0,ir=0,ba=0,ty=0,ui=0,Fl=0,$c=null,Qn=null,ny=!1,ph=0,$w=0,mh=1/0,gh=null,sr=null,nn=0,or=null,ql=null,mo=0,iy=0,sy=null,Yw=null,Yc=0,oy=null;function ci(){return(rt&2)!==0&&Ye!==0?Ye&-Ye:j.T!==null?fy():yd()}function Kw(){if(ui===0)if((Ye&536870912)===0||je){var o=Xr;Xr<<=1,(Xr&3932160)===0&&(Xr=262144),ui=o}else ui=536870912;return o=ri.current,o!==null&&(o.flags|=32),ui}function Xn(o,a,u){(o===gt&&(ut===2||ut===9)||o.cancelPendingCommit!==null)&&(Gl(o,0),rr(o,Ye,ui,!1)),jr(o,u),((rt&2)===0||o!==gt)&&(o===gt&&((rt&2)===0&&(ba|=u),Pt===4&&rr(o,Ye,ui,!1)),Ds(o))}function Jw(o,a,u){if((rt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&o.expiredLanes)===0||qi(o,a),v=h?Ak(o,a):ay(o,a,!0),T=h;do{if(v===0){Bl&&!h&&rr(o,a,0,!1);break}else{if(u=o.current.alternate,T&&!bk(u)){v=ay(o,a,!1),T=!1;continue}if(v===2){if(T=a,o.errorRecoveryDisabledLanes&T)var b=0;else b=o.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var I=o;v=$c;var q=I.current.memoizedState.isDehydrated;if(q&&(Gl(I,b).flags|=256),b=ay(I,b,!1),b!==2){if(ey&&!q){I.errorRecoveryDisabledLanes|=T,ba|=T,v=4;break e}T=Qn,Qn=v,T!==null&&(Qn===null?Qn=T:Qn.push.apply(Qn,T))}v=b}if(T=!1,v!==2)continue}}if(v===1){Gl(o,0),rr(o,a,0,!0);break}e:{switch(h=o,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:rr(h,a,ui,!nr);break e;case 2:Qn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(v=ph+300-Fe(),10<v)){if(rr(h,a,ui,!nr),ps(h,0,!0)!==0)break e;mo=a,h.timeoutHandle=CS(Ww.bind(null,h,u,Qn,gh,ny,a,ui,ba,Fl,nr,T,"Throttled",-0,0),v);break e}Ww(h,u,Qn,gh,ny,a,ui,ba,Fl,nr,T,null,-0,0)}}break}while(!0);Ds(o)}function Ww(o,a,u,h,v,T,b,I,q,Q,ne,re,X,te){if(o.timeoutHandle=-1,re=a.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$i},Fw(a,T,re);var ge=(T&62914560)===T?ph-Fe():(T&4194048)===T?$w-Fe():0;if(ge=l2(re,ge),ge!==null){mo=T,o.cancelPendingCommit=ge(iS.bind(null,o,a,T,u,h,v,b,I,q,ne,re,null,X,te)),rr(o,T,b,!Q);return}}iS(o,a,T,u,h,v,b,I,q)}function bk(o){for(var a=o;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],T=v.getSnapshot;v=v.value;try{if(!si(T(),v))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function rr(o,a,u,h){a&=~ty,a&=~ba,o.suspendedLanes|=a,o.pingedLanes&=~a,h&&(o.warmLanes|=a),h=o.expirationTimes;for(var v=a;0<v;){var T=31-Lt(v),b=1<<T;h[T]=-1,v&=~b}u!==0&&Zr(o,u,a)}function yh(){return(rt&6)===0?(Kc(0),!1):!0}function ry(){if(Ge!==null){if(ut===0)var o=Ge.return;else o=Ge,io=ma=null,wg(o),Nl=null,Ic=0,o=Ge;for(;o!==null;)Aw(o.alternate,o),o=o.return;Ge=null}}function Gl(o,a){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,Hk(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),mo=0,ry(),gt=o,Ge=u=to(o.current,null),Ye=a,ut=0,li=null,nr=!1,Bl=qi(o,a),ey=!1,Fl=ui=ty=ba=ir=Pt=0,Qn=$c=null,ny=!1,(a&8)!==0&&(a|=a&32);var h=o.entangledLanes;if(h!==0)for(o=o.entanglements,h&=a;0<h;){var v=31-Lt(h),T=1<<v;a|=o[v],h&=~T}return po=a,Ud(),u}function Qw(o,a){Oe=null,j.H=Oc,a===Dl||a===Yd?(a=dE(),ut=3):a===cg?(a=dE(),ut=4):ut=a===Ug?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,li=a,Ge===null&&(Pt=1,rh(o,Ai(a,o.current)))}function Xw(){var o=ri.current;return o===null?!0:(Ye&4194048)===Ye?Mi===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?o===Mi:!1}function jw(){var o=j.H;return j.H=Oc,o===null?Oc:o}function Zw(){var o=j.A;return j.A=wk,o}function vh(){Pt=4,nr||(Ye&4194048)!==Ye&&ri.current!==null||(Bl=!0),(ir&134217727)===0&&(ba&134217727)===0||gt===null||rr(gt,Ye,ui,!1)}function ay(o,a,u){var h=rt;rt|=2;var v=jw(),T=Zw();(gt!==o||Ye!==a)&&(gh=null,Gl(o,a)),a=!1;var b=Pt;e:do try{if(ut!==0&&Ge!==null){var I=Ge,q=li;switch(ut){case 8:ry(),b=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(a=!0);var Q=ut;if(ut=0,li=null,Hl(o,I,q,Q),u&&Bl){b=0;break e}break;default:Q=ut,ut=0,li=null,Hl(o,I,q,Q)}}Ck(),b=Pt;break}catch(ne){Qw(o,ne)}while(!0);return a&&o.shellSuspendCounter++,io=ma=null,rt=h,j.H=v,j.A=T,Ge===null&&(gt=null,Ye=0,Ud()),b}function Ck(){for(;Ge!==null;)eS(Ge)}function Ak(o,a){var u=rt;rt|=2;var h=jw(),v=Zw();gt!==o||Ye!==a?(gh=null,mh=Fe()+500,Gl(o,a)):Bl=qi(o,a);e:do try{if(ut!==0&&Ge!==null){a=Ge;var T=li;t:switch(ut){case 1:ut=0,li=null,Hl(o,a,T,1);break;case 2:case 9:if(cE(T)){ut=0,li=null,tS(a);break}a=function(){ut!==2&&ut!==9||gt!==o||(ut=7),Ds(o)},T.then(a,a);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:cE(T)?(ut=0,li=null,tS(a)):(ut=0,li=null,Hl(o,a,T,7));break;case 5:var b=null;switch(Ge.tag){case 26:b=Ge.memoizedState;case 5:case 27:var I=Ge;if(b?BS(b):I.stateNode.complete){ut=0,li=null;var q=I.sibling;if(q!==null)Ge=q;else{var Q=I.return;Q!==null?(Ge=Q,_h(Q)):Ge=null}break t}}ut=0,li=null,Hl(o,a,T,5);break;case 6:ut=0,li=null,Hl(o,a,T,6);break;case 8:ry(),Pt=6;break e;default:throw Error(i(462))}}xk();break}catch(ne){Qw(o,ne)}while(!0);return io=ma=null,j.H=h,j.A=v,rt=u,Ge!==null?0:(gt=null,Ye=0,Ud(),Pt)}function xk(){for(;Ge!==null&&!Be();)eS(Ge)}function eS(o){var a=bw(o.alternate,o,po);o.memoizedProps=o.pendingProps,a===null?_h(o):Ge=a}function tS(o){var a=o,u=a.alternate;switch(a.tag){case 15:case 0:a=vw(u,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=vw(u,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:wg(a);default:Aw(u,a),a=Ge=ZT(a,po),a=bw(u,a,po)}o.memoizedProps=o.pendingProps,a===null?_h(o):Ge=a}function Hl(o,a,u,h){io=ma=null,wg(a),Nl=null,Ic=0;var v=a.return;try{if(mk(o,v,a,u,Ye)){Pt=1,rh(o,Ai(u,o.current)),Ge=null;return}}catch(T){if(v!==null)throw Ge=v,T;Pt=1,rh(o,Ai(u,o.current)),Ge=null;return}a.flags&32768?(je||h===1?o=!0:Bl||(Ye&536870912)!==0?o=!1:(nr=o=!0,(h===2||h===9||h===3||h===6)&&(h=ri.current,h!==null&&h.tag===13&&(h.flags|=16384))),nS(a,o)):_h(a)}function _h(o){var a=o;do{if((a.flags&32768)!==0){nS(a,nr);return}o=a.return;var u=vk(a.alternate,a,po);if(u!==null){Ge=u;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=o}while(a!==null);Pt===0&&(Pt=5)}function nS(o,a){do{var u=_k(o.alternate,o);if(u!==null){u.flags&=32767,Ge=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(o=o.sibling,o!==null)){Ge=o;return}Ge=o=u}while(o!==null);Pt=6,Ge=null}function iS(o,a,u,h,v,T,b,I,q){o.cancelPendingCommit=null;do Th();while(nn!==0);if((rt&6)!==0)throw Error(i(327));if(a!==null){if(a===o.current)throw Error(i(177));if(T=a.lanes|a.childLanes,T|=Wm,Bm(o,u,T,b,I,q),o===gt&&(Ge=gt=null,Ye=0),ql=a,or=o,mo=u,iy=T,sy=v,Yw=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Pk(fs,function(){return lS(),null})):(o.callbackNode=null,o.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=j.T,j.T=null,v=le.p,le.p=2,b=rt,rt|=4;try{Tk(o,a,u)}finally{rt=b,le.p=v,j.T=h}}nn=1,sS(),oS(),rS()}}function sS(){if(nn===1){nn=0;var o=or,a=ql,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=j.T,j.T=null;var h=le.p;le.p=2;var v=rt;rt|=4;try{Uw(a,o);var T=_y,b=HT(o.containerInfo),I=T.focusedElem,q=T.selectionRange;if(b!==I&&I&&I.ownerDocument&&GT(I.ownerDocument.documentElement,I)){if(q!==null&&Hm(I)){var Q=q.start,ne=q.end;if(ne===void 0&&(ne=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(ne,I.value.length);else{var re=I.ownerDocument||document,X=re&&re.defaultView||window;if(X.getSelection){var te=X.getSelection(),ge=I.textContent.length,Ce=Math.min(q.start,ge),pt=q.end===void 0?Ce:Math.min(q.end,ge);!te.extend&&Ce>pt&&(b=pt,pt=Ce,Ce=b);var K=qT(I,Ce),$=qT(I,pt);if(K&&$&&(te.rangeCount!==1||te.anchorNode!==K.node||te.anchorOffset!==K.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var W=re.createRange();W.setStart(K.node,K.offset),te.removeAllRanges(),Ce>pt?(te.addRange(W),te.extend($.node,$.offset)):(W.setEnd($.node,$.offset),te.addRange(W))}}}}for(re=[],te=I;te=te.parentNode;)te.nodeType===1&&re.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<re.length;I++){var se=re[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Dh=!!vy,_y=vy=null}finally{rt=v,le.p=h,j.T=u}}o.current=a,nn=2}}function oS(){if(nn===2){nn=0;var o=or,a=ql,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=j.T,j.T=null;var h=le.p;le.p=2;var v=rt;rt|=4;try{Nw(o,a.alternate,a)}finally{rt=v,le.p=h,j.T=u}}nn=3}}function rS(){if(nn===4||nn===3){nn=0,et();var o=or,a=ql,u=mo,h=Yw;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?nn=5:(nn=0,ql=or=null,aS(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(sr=null),Xs(u),a=a.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Fi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=j.T,v=le.p,le.p=2,j.T=null;try{for(var T=o.onRecoverableError,b=0;b<h.length;b++){var I=h[b];T(I.value,{componentStack:I.stack})}}finally{j.T=a,le.p=v}}(mo&3)!==0&&Th(),Ds(o),v=o.pendingLanes,(u&261930)!==0&&(v&42)!==0?o===oy?Yc++:(Yc=0,oy=o):Yc=0,Kc(0)}}function aS(o,a){(o.pooledCacheLanes&=a)===0&&(a=o.pooledCache,a!=null&&(o.pooledCache=null,xc(a)))}function Th(){return sS(),oS(),rS(),lS()}function lS(){if(nn!==5)return!1;var o=or,a=iy;iy=0;var u=Xs(mo),h=j.T,v=le.p;try{le.p=32>u?32:u,j.T=null,u=sy,sy=null;var T=or,b=mo;if(nn=0,ql=or=null,mo=0,(rt&6)!==0)throw Error(i(331));var I=rt;if(rt|=4,Gw(T.current),Bw(T,T.current,b,u),rt=I,Kc(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Fi,T)}catch{}return!0}finally{le.p=v,j.T=h,aS(o,a)}}function uS(o,a,u){a=Ai(u,a),a=Og(o.stateNode,a,2),o=jo(o,a,2),o!==null&&(jr(o,2),Ds(o))}function ct(o,a,u){if(o.tag===3)uS(o,o,u);else for(;a!==null;){if(a.tag===3){uS(a,o,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(sr===null||!sr.has(h))){o=Ai(u,o),u=cw(2),h=jo(a,u,2),h!==null&&(fw(u,h,a,o),jr(h,2),Ds(h));break}}a=a.return}}function ly(o,a,u){var h=o.pingCache;if(h===null){h=o.pingCache=new Sk;var v=new Set;h.set(a,v)}else v=h.get(a),v===void 0&&(v=new Set,h.set(a,v));v.has(u)||(ey=!0,v.add(u),o=Rk.bind(null,o,a,u),a.then(o,o))}function Rk(o,a,u){var h=o.pingCache;h!==null&&h.delete(a),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,gt===o&&(Ye&u)===u&&(Pt===4||Pt===3&&(Ye&62914560)===Ye&&300>Fe()-ph?(rt&2)===0&&Gl(o,0):ty|=u,Fl===Ye&&(Fl=0)),Ds(o)}function cS(o,a){a===0&&(a=gd()),o=da(o,a),o!==null&&(jr(o,a),Ds(o))}function Ik(o){var a=o.memoizedState,u=0;a!==null&&(u=a.retryLane),cS(o,u)}function Mk(o,a){var u=0;switch(o.tag){case 31:case 13:var h=o.stateNode,v=o.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=o.stateNode;break;case 22:h=o.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),cS(o,u)}function Pk(o,a){return Vt(o,a)}var Eh=null,$l=null,uy=!1,wh=!1,cy=!1,ar=0;function Ds(o){o!==$l&&o.next===null&&($l===null?Eh=$l=o:$l=$l.next=o),wh=!0,uy||(uy=!0,Nk())}function Kc(o,a){if(!cy&&wh){cy=!0;do for(var u=!1,h=Eh;h!==null;){if(o!==0){var v=h.pendingLanes;if(v===0)var T=0;else{var b=h.suspendedLanes,I=h.pingedLanes;T=(1<<31-Lt(42|o)+1)-1,T&=v&~(b&~I),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(u=!0,pS(h,T))}else T=Ye,T=ps(h,h===gt?T:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(T&3)===0||qi(h,T)||(u=!0,pS(h,T));h=h.next}while(u);cy=!1}}function Dk(){fS()}function fS(){wh=uy=!1;var o=0;ar!==0&&Gk()&&(o=ar);for(var a=Fe(),u=null,h=Eh;h!==null;){var v=h.next,T=dS(h,a);T===0?(h.next=null,u===null?Eh=v:u.next=v,v===null&&($l=u)):(u=h,(o!==0||(T&3)!==0)&&(wh=!0)),h=v}nn!==0&&nn!==5||Kc(o),ar!==0&&(ar=0)}function dS(o,a){for(var u=o.suspendedLanes,h=o.pingedLanes,v=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var b=31-Lt(T),I=1<<b,q=v[b];q===-1?((I&u)===0||(I&h)!==0)&&(v[b]=zm(I,a)):q<=a&&(o.expiredLanes|=I),T&=~I}if(a=gt,u=Ye,u=ps(o,o===a?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h=o.callbackNode,u===0||o===a&&(ut===2||ut===9)||o.cancelPendingCommit!==null)return h!==null&&h!==null&&ve(h),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||qi(o,u)){if(a=u&-u,a===o.callbackPriority)return a;switch(h!==null&&ve(h),Xs(u)){case 2:case 8:u=Bn;break;case 32:u=fs;break;case 268435456:u=ll;break;default:u=fs}return h=hS.bind(null,o),u=Vt(u,h),o.callbackPriority=a,o.callbackNode=u,a}return h!==null&&h!==null&&ve(h),o.callbackPriority=2,o.callbackNode=null,2}function hS(o,a){if(nn!==0&&nn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(Th()&&o.callbackNode!==u)return null;var h=Ye;return h=ps(o,o===gt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h===0?null:(Jw(o,h,a),dS(o,Fe()),o.callbackNode!=null&&o.callbackNode===u?hS.bind(null,o):null)}function pS(o,a){if(Th())return null;Jw(o,a,!0)}function Nk(){$k(function(){(rt&6)!==0?Vt(_i,Dk):fS()})}function fy(){if(ar===0){var o=Ml;o===0&&(o=ds,ds<<=1,(ds&261888)===0&&(ds=256)),ar=o}return ar}function mS(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ml(""+o)}function gS(o,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,o.id&&u.setAttribute("form",o.id),a.parentNode.insertBefore(u,a),o=new FormData(o),u.parentNode.removeChild(u),o}function kk(o,a,u,h,v){if(a==="submit"&&u&&u.stateNode===v){var T=mS((v[ln]||null).action),b=h.submitter;b&&(a=(a=b[ln]||null)?mS(a.formAction):b.getAttribute("formAction"),a!==null&&(T=a,b=null));var I=new Cs("action","action",null,h,v);o.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ar!==0){var q=b?gS(v,b):new FormData(v);Pg(u,{pending:!0,data:q,method:v.method,action:T},null,q)}}else typeof T=="function"&&(I.preventDefault(),q=b?gS(v,b):new FormData(v),Pg(u,{pending:!0,data:q,method:v.method,action:T},T,q))},currentTarget:v}]})}}for(var dy=0;dy<Jm.length;dy++){var hy=Jm[dy],Vk=hy.toLowerCase(),Lk=hy[0].toUpperCase()+hy.slice(1);Qi(Vk,"on"+Lk)}Qi(KT,"onAnimationEnd"),Qi(JT,"onAnimationIteration"),Qi(WT,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(jN,"onTransitionRun"),Qi(ZN,"onTransitionStart"),Qi(ek,"onTransitionCancel"),Qi(QT,"onTransitionEnd"),Es("onMouseEnter",["mouseout","mouseover"]),Es("onMouseLeave",["mouseout","mouseover"]),Es("onPointerEnter",["pointerout","pointerover"]),Es("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ok=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jc));function yS(o,a){a=(a&4)!==0;for(var u=0;u<o.length;u++){var h=o[u],v=h.event;h=h.listeners;e:{var T=void 0;if(a)for(var b=h.length-1;0<=b;b--){var I=h[b],q=I.instance,Q=I.currentTarget;if(I=I.listener,q!==T&&v.isPropagationStopped())break e;T=I,v.currentTarget=Q;try{T(v)}catch(ne){Od(ne)}v.currentTarget=null,T=q}else for(b=0;b<h.length;b++){if(I=h[b],q=I.instance,Q=I.currentTarget,I=I.listener,q!==T&&v.isPropagationStopped())break e;T=I,v.currentTarget=Q;try{T(v)}catch(ne){Od(ne)}v.currentTarget=null,T=q}}}}function He(o,a){var u=a[cl];u===void 0&&(u=a[cl]=new Set);var h=o+"__bubble";u.has(h)||(vS(a,o,2,!1),u.add(h))}function py(o,a,u){var h=0;a&&(h|=4),vS(u,o,h,a)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function my(o){if(!o[Sh]){o[Sh]=!0,rc.forEach(function(u){u!=="selectionchange"&&(Ok.has(u)||py(u,!1,o),py(u,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[Sh]||(a[Sh]=!0,py("selectionchange",!1,a))}}function vS(o,a,u,h){switch(KS(a)){case 2:var v=f2;break;case 8:v=d2;break;default:v=My}u=v.bind(null,a,u,o),v=void 0,!sa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),h?v!==void 0?o.addEventListener(a,u,{capture:!0,passive:v}):o.addEventListener(a,u,!0):v!==void 0?o.addEventListener(a,u,{passive:v}):o.addEventListener(a,u,!1)}function gy(o,a,u,h,v){var T=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var I=h.stateNode.containerInfo;if(I===v)break;if(b===4)for(b=h.return;b!==null;){var q=b.tag;if((q===3||q===4)&&b.stateNode.containerInfo===v)return;b=b.return}for(;I!==null;){if(b=vs(I),b===null)return;if(q=b.tag,q===5||q===6||q===26||q===27){h=T=b;continue e}I=I.parentNode}}h=h.return}qo(function(){var Q=T,ne=wi(u),re=[];e:{var X=XT.get(o);if(X!==void 0){var te=Cs,ge=o;switch(o){case"keypress":if(ra(u)===0)break e;case"keydown":case"keyup":te=kd;break;case"focusin":ge="focus",te=la;break;case"focusout":ge="blur",te=la;break;case"beforeblur":case"afterblur":te=la;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=_c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=w;break;case KT:case JT:case WT:te=xd;break;case QT:te=N;break;case"scroll":case"scrollend":te=vc;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=eo;break;case"toggle":case"beforetoggle":te=Le}var Ce=(a&4)!==0,pt=!Ce&&(o==="scroll"||o==="scrollend"),K=Ce?X!==null?X+"Capture":null:X;Ce=[];for(var $=Q,W;$!==null;){var se=$;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||K===null||(se=Yi($,K),se!=null&&Ce.push(Wc($,se,W))),pt)break;$=$.return}0<Ce.length&&(X=new te(X,ge,null,u,ne),re.push({event:X,listeners:Ce}))}}if((a&7)===0){e:{if(X=o==="mouseover"||o==="pointerover",te=o==="mouseout"||o==="pointerout",X&&u!==mc&&(ge=u.relatedTarget||u.fromElement)&&(vs(ge)||ge[gs]))break e;if((te||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,te?(ge=u.relatedTarget||u.toElement,te=Q,ge=ge?vs(ge):null,ge!==null&&(pt=r(ge),Ce=ge.tag,ge!==pt||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(te=null,ge=Q),te!==ge)){if(Ce=_c,se="onMouseLeave",K="onMouseEnter",$="mouse",(o==="pointerout"||o==="pointerover")&&(Ce=eo,se="onPointerLeave",K="onPointerEnter",$="pointer"),pt=te==null?X:ni(te),W=ge==null?X:ni(ge),X=new Ce(se,$+"leave",te,u,ne),X.target=pt,X.relatedTarget=W,se=null,vs(ne)===Q&&(Ce=new Ce(K,$+"enter",ge,u,ne),Ce.target=W,Ce.relatedTarget=pt,se=Ce),pt=se,te&&ge)t:{for(Ce=Uk,K=te,$=ge,W=0,se=K;se;se=Ce(se))W++;se=0;for(var Ee=$;Ee;Ee=Ce(Ee))se++;for(;0<W-se;)K=Ce(K),W--;for(;0<se-W;)$=Ce($),se--;for(;W--;){if(K===$||$!==null&&K===$.alternate){Ce=K;break t}K=Ce(K),$=Ce($)}Ce=null}else Ce=null;te!==null&&_S(re,X,te,Ce,!1),ge!==null&&pt!==null&&_S(re,pt,ge,Ce,!0)}}e:{if(X=Q?ni(Q):window,te=X.nodeName&&X.nodeName.toLowerCase(),te==="select"||te==="input"&&X.type==="file")var tt=LT;else if(kT(X))if(OT)tt=WN;else{tt=KN;var _e=YN}else te=X.nodeName,!te||te.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&pl(Q.elementType)&&(tt=LT):tt=JN;if(tt&&(tt=tt(o,Q))){VT(re,tt,u,ne);break e}_e&&_e(o,X,Q),o==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&dc(X,"number",X.value)}switch(_e=Q?ni(Q):window,o){case"focusin":(kT(_e)||_e.contentEditable==="true")&&(wl=_e,$m=Q,bc=null);break;case"focusout":bc=$m=wl=null;break;case"mousedown":Ym=!0;break;case"contextmenu":case"mouseup":case"dragend":Ym=!1,$T(re,u,ne);break;case"selectionchange":if(XN)break;case"keydown":case"keyup":$T(re,u,ne)}var Ue;if(ot)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else El?ua(o,u)&&(Ke="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ke="onCompositionStart");Ke&&(Rs&&u.locale!=="ko"&&(El||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&El&&(Ue=yc()):(bs=ne,gc="value"in bs?bs.value:bs.textContent,El=!0)),_e=bh(Q,Ke),0<_e.length&&(Ke=new xs(Ke,o,null,u,ne),re.push({event:Ke,listeners:_e}),Ue?Ke.data=Ue:(Ue=Tl(u),Ue!==null&&(Ke.data=Ue)))),(Ue=bi?qN(o,u):GN(o,u))&&(Ke=bh(Q,"onBeforeInput"),0<Ke.length&&(_e=new xs("onBeforeInput","beforeinput",null,u,ne),re.push({event:_e,listeners:Ke}),_e.data=Ue)),kk(re,o,Q,u,ne)}yS(re,a)})}function Wc(o,a,u){return{instance:o,listener:a,currentTarget:u}}function bh(o,a){for(var u=a+"Capture",h=[];o!==null;){var v=o,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Yi(o,u),v!=null&&h.unshift(Wc(o,v,T)),v=Yi(o,a),v!=null&&h.push(Wc(o,v,T))),o.tag===3)return h;o=o.return}return[]}function Uk(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function _S(o,a,u,h,v){for(var T=a._reactName,b=[];u!==null&&u!==h;){var I=u,q=I.alternate,Q=I.stateNode;if(I=I.tag,q!==null&&q===h)break;I!==5&&I!==26&&I!==27||Q===null||(q=Q,v?(Q=Yi(u,T),Q!=null&&b.unshift(Wc(u,Q,q))):v||(Q=Yi(u,T),Q!=null&&b.push(Wc(u,Q,q)))),u=u.return}b.length!==0&&o.push({event:a,listeners:b})}var zk=/\r\n?/g,Bk=/\u0000|\uFFFD/g;function TS(o){return(typeof o=="string"?o:""+o).replace(zk,`
`).replace(Bk,"")}function ES(o,a){return a=TS(a),TS(o)===a}function ht(o,a,u,h,v,T){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Yn(o,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Yn(o,""+h);break;case"className":ii(o,"class",h);break;case"tabIndex":ii(o,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(o,u,h);break;case"style":pc(o,h,T);break;case"data":if(a!=="object"){ii(o,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){o.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=ml(""+h),o.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(u==="formAction"?(a!=="input"&&ht(o,a,"name",v.name,v,null),ht(o,a,"formEncType",v.formEncType,v,null),ht(o,a,"formMethod",v.formMethod,v,null),ht(o,a,"formTarget",v.formTarget,v,null)):(ht(o,a,"encType",v.encType,v,null),ht(o,a,"method",v.method,v,null),ht(o,a,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=ml(""+h),o.setAttribute(u,h);break;case"onClick":h!=null&&(o.onclick=$i);break;case"onScroll":h!=null&&He("scroll",o);break;case"onScrollEnd":h!=null&&He("scrollend",o);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=u}}break;case"multiple":o.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":o.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){o.removeAttribute("xlink:href");break}u=ml(""+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""+h):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":h===!0?o.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,h):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?o.setAttribute(u,h):o.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?o.removeAttribute(u):o.setAttribute(u,h);break;case"popover":He("beforetoggle",o),He("toggle",o),dl(o,"popover",h);break;case"xlinkActuate":Kt(o,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Kt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Kt(o,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Kt(o,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Kt(o,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Kt(o,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Kt(o,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Kt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Kt(o,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":dl(o,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=bd.get(u)||u,dl(o,u,h))}}function yy(o,a,u,h,v,T){switch(u){case"style":pc(o,h,T);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(i(60));o.innerHTML=u}}break;case"children":typeof h=="string"?Yn(o,h):(typeof h=="number"||typeof h=="bigint")&&Yn(o,""+h);break;case"onScroll":h!=null&&He("scroll",o);break;case"onScrollEnd":h!=null&&He("scrollend",o);break;case"onClick":h!=null&&(o.onclick=$i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ac.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),a=u.slice(2,v?u.length-7:void 0),T=o[ln]||null,T=T!=null?T[u]:null,typeof T=="function"&&o.removeEventListener(a,T,v),typeof h=="function")){typeof T!="function"&&T!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(a,h,v);break e}u in o?o[u]=h:h===!0?o.setAttribute(u,""):dl(o,u,h)}}}function vn(o,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",o),He("load",o);var h=!1,v=!1,T;for(T in u)if(u.hasOwnProperty(T)){var b=u[T];if(b!=null)switch(T){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(o,a,T,b,u,null)}}v&&ht(o,a,"srcSet",u.srcSet,u,null),h&&ht(o,a,"src",u.src,u,null);return;case"input":He("invalid",o);var I=T=b=v=null,q=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var ne=u[h];if(ne!=null)switch(h){case"name":v=ne;break;case"type":b=ne;break;case"checked":q=ne;break;case"defaultChecked":Q=ne;break;case"value":T=ne;break;case"defaultValue":I=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ht(o,a,h,ne,u,null)}}Ed(o,T,I,q,Q,b,v,!1);return;case"select":He("invalid",o),h=b=T=null;for(v in u)if(u.hasOwnProperty(v)&&(I=u[v],I!=null))switch(v){case"value":T=I;break;case"defaultValue":b=I;break;case"multiple":h=I;default:ht(o,a,v,I,u,null)}a=T,u=b,o.multiple=!!h,a!=null?Uo(o,!!h,a,!1):u!=null&&Uo(o,!!h,u,!0);return;case"textarea":He("invalid",o),T=v=h=null;for(b in u)if(u.hasOwnProperty(b)&&(I=u[b],I!=null))switch(b){case"value":h=I;break;case"defaultValue":v=I;break;case"children":T=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ht(o,a,b,I,u,null)}zo(o,h,v,T);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(h=u[q],h!=null))switch(q){case"selected":o.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ht(o,a,q,h,u,null)}return;case"dialog":He("beforetoggle",o),He("toggle",o),He("cancel",o),He("close",o);break;case"iframe":case"object":He("load",o);break;case"video":case"audio":for(h=0;h<Jc.length;h++)He(Jc[h],o);break;case"image":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"embed":case"source":case"link":He("error",o),He("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(o,a,Q,h,u,null)}return;default:if(pl(a)){for(ne in u)u.hasOwnProperty(ne)&&(h=u[ne],h!==void 0&&yy(o,a,ne,h,u,void 0));return}}for(I in u)u.hasOwnProperty(I)&&(h=u[I],h!=null&&ht(o,a,I,h,u,null))}function Fk(o,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,b=null,I=null,q=null,Q=null,ne=null;for(te in u){var re=u[te];if(u.hasOwnProperty(te)&&re!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":q=re;default:h.hasOwnProperty(te)||ht(o,a,te,null,h,re)}}for(var X in h){var te=h[X];if(re=u[X],h.hasOwnProperty(X)&&(te!=null||re!=null))switch(X){case"type":T=te;break;case"name":v=te;break;case"checked":Q=te;break;case"defaultChecked":ne=te;break;case"value":b=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:te!==re&&ht(o,a,X,te,h,re)}}hl(o,b,I,q,Q,ne,T,v);return;case"select":te=b=I=X=null;for(T in u)if(q=u[T],u.hasOwnProperty(T)&&q!=null)switch(T){case"value":break;case"multiple":te=q;default:h.hasOwnProperty(T)||ht(o,a,T,null,h,q)}for(v in h)if(T=h[v],q=u[v],h.hasOwnProperty(v)&&(T!=null||q!=null))switch(v){case"value":X=T;break;case"defaultValue":I=T;break;case"multiple":b=T;default:T!==q&&ht(o,a,v,T,h,q)}a=I,u=b,h=te,X!=null?Uo(o,!!u,X,!1):!!h!=!!u&&(a!=null?Uo(o,!!u,a,!0):Uo(o,!!u,u?[]:"",!1));return;case"textarea":te=X=null;for(I in u)if(v=u[I],u.hasOwnProperty(I)&&v!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ht(o,a,I,null,h,v)}for(b in h)if(v=h[b],T=u[b],h.hasOwnProperty(b)&&(v!=null||T!=null))switch(b){case"value":X=v;break;case"defaultValue":te=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&ht(o,a,b,v,h,T)}wd(o,X,te);return;case"option":for(var ge in u)if(X=u[ge],u.hasOwnProperty(ge)&&X!=null&&!h.hasOwnProperty(ge))switch(ge){case"selected":o.selected=!1;break;default:ht(o,a,ge,null,h,X)}for(q in h)if(X=h[q],te=u[q],h.hasOwnProperty(q)&&X!==te&&(X!=null||te!=null))switch(q){case"selected":o.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ht(o,a,q,X,h,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in u)X=u[Ce],u.hasOwnProperty(Ce)&&X!=null&&!h.hasOwnProperty(Ce)&&ht(o,a,Ce,null,h,X);for(Q in h)if(X=h[Q],te=u[Q],h.hasOwnProperty(Q)&&X!==te&&(X!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:ht(o,a,Q,X,h,te)}return;default:if(pl(a)){for(var pt in u)X=u[pt],u.hasOwnProperty(pt)&&X!==void 0&&!h.hasOwnProperty(pt)&&yy(o,a,pt,void 0,h,X);for(ne in h)X=h[ne],te=u[ne],!h.hasOwnProperty(ne)||X===te||X===void 0&&te===void 0||yy(o,a,ne,X,h,te);return}}for(var K in u)X=u[K],u.hasOwnProperty(K)&&X!=null&&!h.hasOwnProperty(K)&&ht(o,a,K,null,h,X);for(re in h)X=h[re],te=u[re],!h.hasOwnProperty(re)||X===te||X==null&&te==null||ht(o,a,re,X,h,te)}function wS(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qk(){if(typeof performance.getEntriesByType=="function"){for(var o=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],T=v.transferSize,b=v.initiatorType,I=v.duration;if(T&&I&&wS(b)){for(b=0,I=v.responseEnd,h+=1;h<u.length;h++){var q=u[h],Q=q.startTime;if(Q>I)break;var ne=q.transferSize,re=q.initiatorType;ne&&wS(re)&&(q=q.responseEnd,b+=ne*(q<I?1:(I-Q)/(q-Q)))}if(--h,a+=8*(T+b)/(v.duration/1e3),o++,10<o)break}}if(0<o)return a/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var vy=null,_y=null;function Ch(o){return o.nodeType===9?o:o.ownerDocument}function SS(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bS(o,a){if(o===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&a==="foreignObject"?0:o}function Ty(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ey=null;function Gk(){var o=window.event;return o&&o.type==="popstate"?o===Ey?!1:(Ey=o,!0):(Ey=null,!1)}var CS=typeof setTimeout=="function"?setTimeout:void 0,Hk=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,$k=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(o){return AS.resolve(null).then(o).catch(Yk)}:CS;function Yk(o){setTimeout(function(){throw o})}function lr(o){return o==="head"}function xS(o,a){var u=a,h=0;do{var v=u.nextSibling;if(o.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){o.removeChild(v),Wl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Qc(o.ownerDocument.documentElement);else if(u==="head"){u=o.ownerDocument.head,Qc(u);for(var T=u.firstChild;T;){var b=T.nextSibling,I=T.nodeName;T[ys]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&T.rel.toLowerCase()==="stylesheet"||u.removeChild(T),T=b}}else u==="body"&&Qc(o.ownerDocument.body);u=v}while(u);Wl(a)}function RS(o,a){var u=o;o=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(o===0)break;o--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||o++;u=h}while(u)}function wy(o){var a=o.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":wy(u),fl(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function Kk(o,a,u,h){for(;o.nodeType===1;){var v=u;if(o.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(h){if(!o[ys])switch(a){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(a==="input"&&o.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Pi(o.nextSibling),o===null)break}return null}function Jk(o,a,u){if(a==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Pi(o.nextSibling),o===null))return null;return o}function IS(o,a){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!a||(o=Pi(o.nextSibling),o===null))return null;return o}function Sy(o){return o.data==="$?"||o.data==="$~"}function by(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Wk(o,a){var u=o.ownerDocument;if(o.data==="$~")o._reactRetry=a;else if(o.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),o._reactRetry=h}}function Pi(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return o}var Cy=null;function MS(o){o=o.nextSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"||u==="/&"){if(a===0)return Pi(o.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}o=o.nextSibling}return null}function PS(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return o;a--}else u!=="/$"&&u!=="/&"||a++}o=o.previousSibling}return null}function DS(o,a,u){switch(a=Ch(u),o){case"html":if(o=a.documentElement,!o)throw Error(i(452));return o;case"head":if(o=a.head,!o)throw Error(i(453));return o;case"body":if(o=a.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Qc(o){for(var a=o.attributes;a.length;)o.removeAttributeNode(a[0]);fl(o)}var Di=new Map,NS=new Set;function Ah(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var go=le.d;le.d={f:Qk,r:Xk,D:jk,C:Zk,L:e2,m:t2,X:i2,S:n2,M:s2};function Qk(){var o=go.f(),a=yh();return o||a}function Xk(o){var a=Ei(o);a!==null&&a.tag===5&&a.type==="form"?QE(a):go.r(o)}var Yl=typeof document>"u"?null:document;function kS(o,a,u){var h=Yl;if(h&&typeof a=="string"&&a){var v=$n(a);v='link[rel="'+o+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),NS.has(v)||(NS.add(v),o={rel:o,crossOrigin:u,href:a},h.querySelector(v)===null&&(a=h.createElement("link"),vn(a,"link",o),Yt(a),h.head.appendChild(a)))}}function jk(o){go.D(o),kS("dns-prefetch",o,null)}function Zk(o,a){go.C(o,a),kS("preconnect",o,a)}function e2(o,a,u){go.L(o,a,u);var h=Yl;if(h&&o&&a){var v='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+$n(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+$n(u.imageSizes)+'"]')):v+='[href="'+$n(o)+'"]';var T=v;switch(a){case"style":T=Kl(o);break;case"script":T=Jl(o)}Di.has(T)||(o=_({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:o,as:a},u),Di.set(T,o),h.querySelector(v)!==null||a==="style"&&h.querySelector(Xc(T))||a==="script"&&h.querySelector(jc(T))||(a=h.createElement("link"),vn(a,"link",o),Yt(a),h.head.appendChild(a)))}}function t2(o,a){go.m(o,a);var u=Yl;if(u&&o){var h=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+$n(h)+'"][href="'+$n(o)+'"]',T=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Jl(o)}if(!Di.has(T)&&(o=_({rel:"modulepreload",href:o},a),Di.set(T,o),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(jc(T)))return}h=u.createElement("link"),vn(h,"link",o),Yt(h),u.head.appendChild(h)}}}function n2(o,a,u){go.S(o,a,u);var h=Yl;if(h&&o){var v=_s(h).hoistableStyles,T=Kl(o);a=a||"default";var b=v.get(T);if(!b){var I={loading:0,preload:null};if(b=h.querySelector(Xc(T)))I.loading=5;else{o=_({rel:"stylesheet",href:o,"data-precedence":a},u),(u=Di.get(T))&&Ay(o,u);var q=b=h.createElement("link");Yt(q),vn(q,"link",o),q._p=new Promise(function(Q,ne){q.onload=Q,q.onerror=ne}),q.addEventListener("load",function(){I.loading|=1}),q.addEventListener("error",function(){I.loading|=2}),I.loading|=4,xh(b,a,h)}b={type:"stylesheet",instance:b,count:1,state:I},v.set(T,b)}}}function i2(o,a){go.X(o,a);var u=Yl;if(u&&o){var h=_s(u).hoistableScripts,v=Jl(o),T=h.get(v);T||(T=u.querySelector(jc(v)),T||(o=_({src:o,async:!0},a),(a=Di.get(v))&&xy(o,a),T=u.createElement("script"),Yt(T),vn(T,"link",o),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},h.set(v,T))}}function s2(o,a){go.M(o,a);var u=Yl;if(u&&o){var h=_s(u).hoistableScripts,v=Jl(o),T=h.get(v);T||(T=u.querySelector(jc(v)),T||(o=_({src:o,async:!0,type:"module"},a),(a=Di.get(v))&&xy(o,a),T=u.createElement("script"),Yt(T),vn(T,"link",o),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},h.set(v,T))}}function VS(o,a,u,h){var v=(v=Ne.current)?Ah(v):null;if(!v)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Kl(u.href),u=_s(v).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=Kl(u.href);var T=_s(v).hoistableStyles,b=T.get(o);if(b||(v=v.ownerDocument||v,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,b),(T=v.querySelector(Xc(o)))&&!T._p&&(b.instance=T,b.state.loading=5),Di.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Di.set(o,u),T||o2(v,o,u,b.state))),a&&h===null)throw Error(i(528,""));return b}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Jl(u),u=_s(v).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Kl(o){return'href="'+$n(o)+'"'}function Xc(o){return'link[rel="stylesheet"]['+o+"]"}function LS(o){return _({},o,{"data-precedence":o.precedence,precedence:null})}function o2(o,a,u,h){o.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=o.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),vn(a,"link",u),Yt(a),o.head.appendChild(a))}function Jl(o){return'[src="'+$n(o)+'"]'}function jc(o){return"script[async]"+o}function OS(o,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=o.querySelector('style[data-href~="'+$n(u.href)+'"]');if(h)return a.instance=h,Yt(h),h;var v=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(o.ownerDocument||o).createElement("style"),Yt(h),vn(h,"style",v),xh(h,u.precedence,o),a.instance=h;case"stylesheet":v=Kl(u.href);var T=o.querySelector(Xc(v));if(T)return a.state.loading|=4,a.instance=T,Yt(T),T;h=LS(u),(v=Di.get(v))&&Ay(h,v),T=(o.ownerDocument||o).createElement("link"),Yt(T);var b=T;return b._p=new Promise(function(I,q){b.onload=I,b.onerror=q}),vn(T,"link",h),a.state.loading|=4,xh(T,u.precedence,o),a.instance=T;case"script":return T=Jl(u.src),(v=o.querySelector(jc(T)))?(a.instance=v,Yt(v),v):(h=u,(v=Di.get(T))&&(h=_({},u),xy(h,v)),o=o.ownerDocument||o,v=o.createElement("script"),Yt(v),vn(v,"link",h),o.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,xh(h,u.precedence,o));return a.instance}function xh(o,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,T=v,b=0;b<h.length;b++){var I=h[b];if(I.dataset.precedence===a)T=I;else if(T!==v)break}T?T.parentNode.insertBefore(o,T.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(o,a.firstChild))}function Ay(o,a){o.crossOrigin==null&&(o.crossOrigin=a.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=a.referrerPolicy),o.title==null&&(o.title=a.title)}function xy(o,a){o.crossOrigin==null&&(o.crossOrigin=a.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=a.referrerPolicy),o.integrity==null&&(o.integrity=a.integrity)}var Rh=null;function US(o,a,u){if(Rh===null){var h=new Map,v=Rh=new Map;v.set(u,h)}else v=Rh,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(o))return h;for(h.set(o,null),u=u.getElementsByTagName(o),v=0;v<u.length;v++){var T=u[v];if(!(T[ys]||T[$t]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var b=T.getAttribute(a)||"";b=o+b;var I=h.get(b);I?I.push(T):h.set(b,[T])}}return h}function zS(o,a,u){o=o.ownerDocument||o,o.head.insertBefore(u,a==="title"?o.querySelector("head > title"):null)}function r2(o,a,u){if(u===1||a.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return o=a.disabled,typeof a.precedence=="string"&&o==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function BS(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function a2(o,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Kl(h.href),T=a.querySelector(Xc(v));if(T){a=T._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(o.count++,o=Ih.bind(o),a.then(o,o)),u.state.loading|=4,u.instance=T,Yt(T);return}T=a.ownerDocument||a,h=LS(h),(v=Di.get(v))&&Ay(h,v),T=T.createElement("link"),Yt(T);var b=T;b._p=new Promise(function(I,q){b.onload=I,b.onerror=q}),vn(T,"link",h),u.instance=T}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(o.count++,u=Ih.bind(o),a.addEventListener("load",u),a.addEventListener("error",u))}}var Ry=0;function l2(o,a){return o.stylesheets&&o.count===0&&Ph(o,o.stylesheets),0<o.count||0<o.imgCount?function(u){var h=setTimeout(function(){if(o.stylesheets&&Ph(o,o.stylesheets),o.unsuspend){var T=o.unsuspend;o.unsuspend=null,T()}},6e4+a);0<o.imgBytes&&Ry===0&&(Ry=62500*qk());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Ph(o,o.stylesheets),o.unsuspend)){var T=o.unsuspend;o.unsuspend=null,T()}},(o.imgBytes>Ry?50:800)+a);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Ih(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Mh=null;function Ph(o,a){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Mh=new Map,a.forEach(u2,o),Mh=null,Ih.call(o))}function u2(o,a){if(!(a.state.loading&4)){var u=Mh.get(o);if(u)var h=u.get(null);else{u=new Map,Mh.set(o,u);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var b=v[T];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(u.set(b.dataset.precedence,b),h=b)}h&&u.set(null,h)}v=a.instance,b=v.getAttribute("data-precedence"),T=u.get(b)||h,T===h&&u.set(null,v),u.set(b,v),this.count++,h=Ih.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),T?T.parentNode.insertBefore(v,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),a.state.loading|=4}}var Zc={$$typeof:F,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function c2(o,a,u,h,v,T,b,I,q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.hiddenUpdates=ms(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function FS(o,a,u,h,v,T,b,I,q,Q,ne,re){return o=new c2(o,a,u,b,q,Q,ne,re,I),a=1,T===!0&&(a|=24),T=oi(3,null,null,a),o.current=T,T.stateNode=o,a=ag(),a.refCount++,o.pooledCache=a,a.refCount++,T.memoizedState={element:h,isDehydrated:u,cache:a},fg(T),o}function qS(o){return o?(o=Cl,o):Cl}function GS(o,a,u,h,v,T){v=qS(v),h.context===null?h.context=v:h.pendingContext=v,h=Xo(a),h.payload={element:u},T=T===void 0?null:T,T!==null&&(h.callback=T),u=jo(o,h,a),u!==null&&(Xn(u,o,a),Pc(u,o,a))}function HS(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<a?u:a}}function Iy(o,a){HS(o,a),(o=o.alternate)&&HS(o,a)}function $S(o){if(o.tag===13||o.tag===31){var a=da(o,67108864);a!==null&&Xn(a,o,67108864),Iy(o,67108864)}}function YS(o){if(o.tag===13||o.tag===31){var a=ci();a=ea(a);var u=da(o,a);u!==null&&Xn(u,o,a),Iy(o,a)}}var Dh=!0;function f2(o,a,u,h){var v=j.T;j.T=null;var T=le.p;try{le.p=2,My(o,a,u,h)}finally{le.p=T,j.T=v}}function d2(o,a,u,h){var v=j.T;j.T=null;var T=le.p;try{le.p=8,My(o,a,u,h)}finally{le.p=T,j.T=v}}function My(o,a,u,h){if(Dh){var v=Py(h);if(v===null)gy(o,a,h,Nh,u),JS(o,h);else if(p2(v,o,a,u,h))h.stopPropagation();else if(JS(o,h),a&4&&-1<h2.indexOf(o)){for(;v!==null;){var T=Ei(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var b=hs(T.pendingLanes);if(b!==0){var I=T;for(I.pendingLanes|=2,I.entangledLanes|=2;b;){var q=1<<31-Lt(b);I.entanglements[1]|=q,b&=~q}Ds(T),(rt&6)===0&&(mh=Fe()+500,Kc(0))}}break;case 31:case 13:I=da(T,2),I!==null&&Xn(I,T,2),yh(),Iy(T,2)}if(T=Py(h),T===null&&gy(o,a,h,Nh,u),T===v)break;v=T}v!==null&&h.stopPropagation()}else gy(o,a,h,null,u)}}function Py(o){return o=wi(o),Dy(o)}var Nh=null;function Dy(o){if(Nh=null,o=vs(o),o!==null){var a=r(o);if(a===null)o=null;else{var u=a.tag;if(u===13){if(o=l(a),o!==null)return o;o=null}else if(u===31){if(o=c(a),o!==null)return o;o=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return Nh=o,null}function KS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case _i:return 2;case Bn:return 8;case fs:case Qr:return 32;case ll:return 268435456;default:return 32}default:return 32}}var Ny=!1,ur=null,cr=null,fr=null,ef=new Map,tf=new Map,dr=[],h2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JS(o,a){switch(o){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ef.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":tf.delete(a.pointerId)}}function nf(o,a,u,h,v,T){return o===null||o.nativeEvent!==T?(o={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:T,targetContainers:[v]},a!==null&&(a=Ei(a),a!==null&&$S(a)),o):(o.eventSystemFlags|=h,a=o.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),o)}function p2(o,a,u,h,v){switch(a){case"focusin":return ur=nf(ur,o,a,u,h,v),!0;case"dragenter":return cr=nf(cr,o,a,u,h,v),!0;case"mouseover":return fr=nf(fr,o,a,u,h,v),!0;case"pointerover":var T=v.pointerId;return ef.set(T,nf(ef.get(T)||null,o,a,u,h,v)),!0;case"gotpointercapture":return T=v.pointerId,tf.set(T,nf(tf.get(T)||null,o,a,u,h,v)),!0}return!1}function WS(o){var a=vs(o.target);if(a!==null){var u=r(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){o.blockedOn=a,Gi(o.priority,function(){YS(u)});return}}else if(a===31){if(a=c(u),a!==null){o.blockedOn=a,Gi(o.priority,function(){YS(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function kh(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var u=Py(o.nativeEvent);if(u===null){u=o.nativeEvent;var h=new u.constructor(u.type,u);mc=h,u.target.dispatchEvent(h),mc=null}else return a=Ei(u),a!==null&&$S(a),o.blockedOn=u,!1;a.shift()}return!0}function QS(o,a,u){kh(o)&&u.delete(a)}function m2(){Ny=!1,ur!==null&&kh(ur)&&(ur=null),cr!==null&&kh(cr)&&(cr=null),fr!==null&&kh(fr)&&(fr=null),ef.forEach(QS),tf.forEach(QS)}function Vh(o,a){o.blockedOn===a&&(o.blockedOn=null,Ny||(Ny=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,m2)))}var Lh=null;function XS(o){Lh!==o&&(Lh=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lh===o&&(Lh=null);for(var a=0;a<o.length;a+=3){var u=o[a],h=o[a+1],v=o[a+2];if(typeof h!="function"){if(Dy(h||u)===null)continue;break}var T=Ei(u);T!==null&&(o.splice(a,3),a-=3,Pg(T,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Wl(o){function a(q){return Vh(q,o)}ur!==null&&Vh(ur,o),cr!==null&&Vh(cr,o),fr!==null&&Vh(fr,o),ef.forEach(a),tf.forEach(a);for(var u=0;u<dr.length;u++){var h=dr[u];h.blockedOn===o&&(h.blockedOn=null)}for(;0<dr.length&&(u=dr[0],u.blockedOn===null);)WS(u),u.blockedOn===null&&dr.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],T=u[h+1],b=v[ln]||null;if(typeof T=="function")b||XS(u);else if(b){var I=null;if(T&&T.hasAttribute("formAction")){if(v=T,b=T[ln]||null)I=b.formAction;else if(Dy(v)!==null)continue}else I=b.action;typeof I=="function"?u[h+1]=I:(u.splice(h,3),h-=3),XS(u)}}}function jS(){function o(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(b){return v=b})},focusReset:"manual",scroll:"manual"})}function a(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),v!==null&&(v(),v=null)}}}function ky(o){this._internalRoot=o}Oh.prototype.render=ky.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=ci();GS(u,h,o,a,null,null)},Oh.prototype.unmount=ky.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;GS(o.current,2,null,o,null,null),yh(),a[gs]=null}};function Oh(o){this._internalRoot=o}Oh.prototype.unstable_scheduleHydration=function(o){if(o){var a=yd();o={blockedOn:null,target:o,priority:a};for(var u=0;u<dr.length&&a!==0&&a<dr[u].priority;u++);dr.splice(u,0,o),u===0&&WS(o)}};var ZS=e.version;if(ZS!=="19.2.0")throw Error(i(527,ZS,"19.2.0"));le.findDOMNode=function(o){var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(a),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var g2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{Fi=Uh.inject(g2),hn=Uh}catch{}}return of.createRoot=function(o,a){if(!s(o))throw Error(i(299));var u=!1,h="",v=rw,T=aw,b=lw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=FS(o,1,!1,null,null,u,h,null,v,T,b,jS),o[gs]=a.current,my(o),new ky(a)},of.hydrateRoot=function(o,a,u){if(!s(o))throw Error(i(299));var h=!1,v="",T=rw,b=aw,I=lw,q=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(I=u.onRecoverableError),u.formState!==void 0&&(q=u.formState)),a=FS(o,1,!0,a,u??null,h,v,q,T,b,I,jS),a.context=qS(null),u=a.current,h=ci(),h=ea(h),v=Xo(h),v.callback=null,jo(u,v,h),u=h,a.current.lanes=u,jr(a,u),Ds(a),o[gs]=a.current,my(o),new Oh(a)},of.version="19.2.0",of}var ub;function A2(){if(ub)return Oy.exports;ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Oy.exports=C2(),Oy.exports}var x2=A2();const R2=bI(x2),G_=ie.createContext({});function sm(t){const e=ie.useRef(null);return e.current===null&&(e.current=t()),e.current}const om=ie.createContext(null),H_=ie.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class I2 extends ie.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function M2({children:t,isPresent:e}){const n=ie.useId(),i=ie.useRef(null),s=ie.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=ie.useContext(H_);return ie.useInsertionEffect(()=>{const{width:l,height:c,top:f,left:d}=s.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return r&&(p.nonce=r),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${f}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),P.jsx(I2,{isPresent:e,childRef:i,sizeRef:s,children:ie.cloneElement(t,{ref:i})})}const P2=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:l})=>{const c=sm(D2),f=ie.useId(),d=ie.useCallback(_=>{c.set(_,!0);for(const E of c.values())if(!E)return;i&&i()},[c,i]),p=ie.useMemo(()=>({id:f,initial:e,isPresent:n,custom:s,onExitComplete:d,register:_=>(c.set(_,!1),()=>c.delete(_))}),r?[Math.random(),d]:[n,d]);return ie.useMemo(()=>{c.forEach((_,E)=>c.set(E,!1))},[n]),ie.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=P.jsx(M2,{isPresent:n,children:t})),P.jsx(om.Provider,{value:p,children:t})};function D2(){return new Map}function AI(t=!0){const e=ie.useContext(om);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,r=ie.useId();ie.useEffect(()=>{t&&s(r)},[t]);const l=ie.useCallback(()=>t&&i&&i(r),[r,i,t]);return!n&&i?[!1,l]:[!0]}const zh=t=>t.key||"";function cb(t){const e=[];return ie.Children.forEach(t,n=>{ie.isValidElement(n)&&e.push(n)}),e}const $_=typeof window<"u",Y_=$_?ie.useLayoutEffect:ie.useEffect,os=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:l=!1})=>{const[c,f]=AI(l),d=ie.useMemo(()=>cb(t),[t]),p=l&&!c?[]:d.map(zh),_=ie.useRef(!0),E=ie.useRef(d),S=sm(()=>new Map),[A,x]=ie.useState(d),[R,V]=ie.useState(d);Y_(()=>{_.current=!1,E.current=d;for(let H=0;H<R.length;H++){const Y=zh(R[H]);p.includes(Y)?S.delete(Y):S.get(Y)!==!0&&S.set(Y,!1)}},[R,p.length,p.join("-")]);const O=[];if(d!==A){let H=[...d];for(let Y=0;Y<R.length;Y++){const Z=R[Y],D=zh(Z);p.includes(D)||(H.splice(Y,0,Z),O.push(Z))}r==="wait"&&O.length&&(H=O),V(cb(H)),x(d);return}const{forceRender:F}=ie.useContext(G_);return P.jsx(P.Fragment,{children:R.map(H=>{const Y=zh(H),Z=l&&!c?!1:d===R||p.includes(Y),D=()=>{if(S.has(Y))S.set(Y,!0);else return;let M=!0;S.forEach(k=>{k||(M=!1)}),M&&(F==null||F(),V(E.current),l&&(f==null||f()),i&&i())};return P.jsx(P2,{isPresent:Z,initial:!_.current||n?void 0:!1,custom:Z?void 0:e,presenceAffectsLayout:s,mode:r,onExitComplete:Z?void 0:D,children:H},Y)})})},pi=t=>t;let xI=pi;function K_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Iu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},So=t=>t*1e3,bo=t=>t/1e3,N2={useManualTiming:!1};function k2(t){let e=new Set,n=new Set,i=!1,s=!1;const r=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){r.has(d)&&(f.schedule(d),t()),d(l)}const f={schedule:(d,p=!1,_=!1)=>{const S=_&&i?e:n;return p&&r.add(d),S.has(d)||S.add(d),d},cancel:d=>{n.delete(d),r.delete(d)},process:d=>{if(l=d,i){s=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,s&&(s=!1,f.process(d))}};return f}const Bh=["read","resolveKeyframes","update","preRender","render","postRender"],V2=40;function RI(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,l=Bh.reduce((V,O)=>(V[O]=k2(r),V),{}),{read:c,resolveKeyframes:f,update:d,preRender:p,render:_,postRender:E}=l,S=()=>{const V=performance.now();n=!1,s.delta=i?1e3/60:Math.max(Math.min(V-s.timestamp,V2),1),s.timestamp=V,s.isProcessing=!0,c.process(s),f.process(s),d.process(s),p.process(s),_.process(s),E.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(S))},A=()=>{n=!0,i=!0,s.isProcessing||t(S)};return{schedule:Bh.reduce((V,O)=>{const F=l[O];return V[O]=(H,Y=!1,Z=!1)=>(n||A(),F.schedule(H,Y,Z)),V},{}),cancel:V=>{for(let O=0;O<Bh.length;O++)l[Bh[O]].cancel(V)},state:s,steps:l}}const{schedule:St,cancel:Nr,state:_n,steps:Fy}=RI(typeof requestAnimationFrame<"u"?requestAnimationFrame:pi,!0),II=ie.createContext({strict:!1}),fb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mu={};for(const t in fb)Mu[t]={isEnabled:e=>fb[t].some(n=>!!e[n])};function L2(t){for(const e in t)Mu[e]={...Mu[e],...t[e]}}const O2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||O2.has(t)}let MI=t=>!wp(t);function U2(t){t&&(MI=e=>e.startsWith("on")?!wp(e):t(e))}try{U2(require("@emotion/is-prop-valid").default)}catch{}function z2(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(MI(s)||n===!0&&wp(s)||!e&&!wp(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}function B2(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const rm=ie.createContext({});function Pf(t){return typeof t=="string"||Array.isArray(t)}function am(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const J_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],W_=["initial",...J_];function lm(t){return am(t.animate)||W_.some(e=>Pf(t[e]))}function PI(t){return!!(lm(t)||t.variants)}function F2(t,e){if(lm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Pf(n)?n:void 0,animate:Pf(i)?i:void 0}}return t.inherit!==!1?e:{}}function q2(t){const{initial:e,animate:n}=F2(t,ie.useContext(rm));return ie.useMemo(()=>({initial:e,animate:n}),[db(e),db(n)])}function db(t){return Array.isArray(t)?t.join(" "):t}const G2=Symbol.for("motionComponentSymbol");function ou(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function H2(t,e,n){return ie.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ou(n)&&(n.current=i))},[e])}const Q_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$2="framerAppearId",DI="data-"+Q_($2),{schedule:X_}=RI(queueMicrotask,!1),NI=ie.createContext({});function Y2(t,e,n,i,s){var r,l;const{visualElement:c}=ie.useContext(rm),f=ie.useContext(II),d=ie.useContext(om),p=ie.useContext(H_).reducedMotion,_=ie.useRef(null);i=i||f.renderer,!_.current&&i&&(_.current=i(t,{visualState:e,parent:c,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const E=_.current,S=ie.useContext(NI);E&&!E.projection&&s&&(E.type==="html"||E.type==="svg")&&K2(_.current,n,s,S);const A=ie.useRef(!1);ie.useInsertionEffect(()=>{E&&A.current&&E.update(n,d)});const x=n[DI],R=ie.useRef(!!x&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,x))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,x)));return Y_(()=>{E&&(A.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),X_.render(E.render),R.current&&E.animationState&&E.animationState.animateChanges())}),ie.useEffect(()=>{E&&(!R.current&&E.animationState&&E.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)===null||V===void 0||V.call(window,x)}),R.current=!1))}),E}function K2(t,e,n,i){const{layoutId:s,layout:r,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kI(t.parent)),t.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!l||c&&ou(c),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:d})}function kI(t){if(t)return t.options.allowProjection!==!1?t.projection:kI(t.parent)}function J2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:s}){var r,l;t&&L2(t);function c(d,p){let _;const E={...ie.useContext(H_),...d,layoutId:W2(d)},{isStatic:S}=E,A=q2(d),x=i(d,S);if(!S&&$_){Q2();const R=X2(E);_=R.MeasureLayout,A.visualElement=Y2(s,x,E,e,R.ProjectionNode)}return P.jsxs(rm.Provider,{value:A,children:[_&&A.visualElement?P.jsx(_,{visualElement:A.visualElement,...E}):null,n(s,d,H2(x,A.visualElement,p),x,S,A.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${(l=(r=s.displayName)!==null&&r!==void 0?r:s.name)!==null&&l!==void 0?l:""})`}`;const f=ie.forwardRef(c);return f[G2]=s,f}function W2({layoutId:t}){const e=ie.useContext(G_).id;return e&&t!==void 0?e+"-"+t:t}function Q2(t,e){ie.useContext(II).strict}function X2(t){const{drag:e,layout:n}=Mu;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const j2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function j_(t){return typeof t!="string"||t.includes("-")?!1:!!(j2.indexOf(t)>-1||/[A-Z]/u.test(t))}function hb(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Z_(t,e,n,i){if(typeof e=="function"){const[s,r]=hb(i);e=e(n!==void 0?n:t.custom,s,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,r]=hb(i);e=e(n!==void 0?n:t.custom,s,r)}return e}const kv=t=>Array.isArray(t),Z2=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),eV=t=>kv(t)?t[t.length-1]||0:t,Mn=t=>!!(t&&t.getVelocity);function sp(t){const e=Mn(t)?t.get():t;return Z2(e)?e.toValue():e}function tV({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,s,r){const l={latestValues:nV(i,s,r,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const VI=t=>(e,n)=>{const i=ie.useContext(rm),s=ie.useContext(om),r=()=>tV(t,e,i,s);return n?r():sm(r)};function nV(t,e,n,i){const s={},r=i(t,{});for(const E in r)s[E]=sp(r[E]);let{initial:l,animate:c}=t;const f=lm(t),d=PI(t);e&&d&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const _=p?c:l;if(_&&typeof _!="boolean"&&!am(_)){const E=Array.isArray(_)?_:[_];for(let S=0;S<E.length;S++){const A=Z_(t,E[S]);if(A){const{transitionEnd:x,transition:R,...V}=A;for(const O in V){let F=V[O];if(Array.isArray(F)){const H=p?F.length-1:0;F=F[H]}F!==null&&(s[O]=F)}for(const O in x)s[O]=x[O]}}}return s}const $u=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],il=new Set($u),LI=t=>e=>typeof e=="string"&&e.startsWith(t),OI=LI("--"),iV=LI("var(--"),e0=t=>iV(t)?sV.test(t.split("/*")[0].trim()):!1,sV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,UI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ao=(t,e,n)=>n>e?e:n<t?t:n,Yu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Df={...Yu,transform:t=>Ao(0,1,t)},Fh={...Yu,default:1},Xf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),yr=Xf("deg"),Ls=Xf("%"),xe=Xf("px"),oV=Xf("vh"),rV=Xf("vw"),pb={...Ls,parse:t=>Ls.parse(t)/100,transform:t=>Ls.transform(t*100)},aV={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},lV={rotate:yr,rotateX:yr,rotateY:yr,rotateZ:yr,scale:Fh,scaleX:Fh,scaleY:Fh,scaleZ:Fh,skew:yr,skewX:yr,skewY:yr,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:Df,originX:pb,originY:pb,originZ:xe},mb={...Yu,transform:Math.round},t0={...aV,...lV,zIndex:mb,size:xe,fillOpacity:Df,strokeOpacity:Df,numOctaves:mb},uV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cV=$u.length;function fV(t,e,n){let i="",s=!0;for(let r=0;r<cV;r++){const l=$u[r],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const d=UI(c,t0[l]);if(!f){s=!1;const p=uV[l]||l;i+=`${p}(${d}) `}n&&(e[l]=d)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function n0(t,e,n){const{style:i,vars:s,transformOrigin:r}=t;let l=!1,c=!1;for(const f in e){const d=e[f];if(il.has(f)){l=!0;continue}else if(OI(f)){s[f]=d;continue}else{const p=UI(d,t0[f]);f.startsWith("origin")?(c=!0,r[f]=p):i[f]=p}}if(e.transform||(l||n?i.transform=fV(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:p=0}=r;i.transformOrigin=`${f} ${d} ${p}`}}const dV={offset:"stroke-dashoffset",array:"stroke-dasharray"},hV={offset:"strokeDashoffset",array:"strokeDasharray"};function pV(t,e,n=1,i=0,s=!0){t.pathLength=1;const r=s?dV:hV;t[r.offset]=xe.transform(-i);const l=xe.transform(e),c=xe.transform(n);t[r.array]=`${l} ${c}`}function gb(t,e,n){return typeof t=="string"?t:xe.transform(e+n*t)}function mV(t,e,n){const i=gb(e,t.x,t.width),s=gb(n,t.y,t.height);return`${i} ${s}`}function i0(t,{attrX:e,attrY:n,attrScale:i,originX:s,originY:r,pathLength:l,pathSpacing:c=1,pathOffset:f=0,...d},p,_){if(n0(t,d,_),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:S,dimensions:A}=t;E.transform&&(A&&(S.transform=E.transform),delete E.transform),A&&(s!==void 0||r!==void 0||S.transform)&&(S.transformOrigin=mV(A,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),l!==void 0&&pV(E,l,c,f,!1)}const s0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),zI=()=>({...s0(),attrs:{}}),o0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function BI(t,{style:e,vars:n},i,s){Object.assign(t.style,e,s&&s.getProjectionStyles(i));for(const r in n)t.style.setProperty(r,n[r])}const FI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qI(t,e,n,i){BI(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(FI.has(s)?s:Q_(s),e.attrs[s])}const Sp={};function gV(t){Object.assign(Sp,t)}function GI(t,{layout:e,layoutId:n}){return il.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Sp[t]||t==="opacity")}function r0(t,e,n){var i;const{style:s}=t,r={};for(const l in s)(Mn(s[l])||e.style&&Mn(e.style[l])||GI(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[l]=s[l]);return r}function HI(t,e,n){const i=r0(t,e,n);for(const s in t)if(Mn(t[s])||Mn(e[s])){const r=$u.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=t[s]}return i}function yV(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const yb=["x","y","width","height","cx","cy","r"],vV={useVisualState:VI({scrapeMotionValuesFromProps:HI,createRenderState:zI,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:s})=>{if(!n)return;let r=!!t.drag;if(!r){for(const c in s)if(il.has(c)){r=!0;break}}if(!r)return;let l=!e;if(e)for(let c=0;c<yb.length;c++){const f=yb[c];t[f]!==e[f]&&(l=!0)}l&&St.read(()=>{yV(n,i),St.render(()=>{i0(i,s,o0(n.tagName),t.transformTemplate),qI(n,i)})})}})},_V={useVisualState:VI({scrapeMotionValuesFromProps:r0,createRenderState:s0})};function $I(t,e,n){for(const i in e)!Mn(e[i])&&!GI(i,n)&&(t[i]=e[i])}function TV({transformTemplate:t},e){return ie.useMemo(()=>{const n=s0();return n0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function EV(t,e){const n=t.style||{},i={};return $I(i,n,t),Object.assign(i,TV(t,e)),i}function wV(t,e){const n={},i=EV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function SV(t,e,n,i){const s=ie.useMemo(()=>{const r=zI();return i0(r,e,o0(i),t.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};$I(r,t.style,t),s.style={...r,...s.style}}return s}function bV(t=!1){return(n,i,s,{latestValues:r},l)=>{const f=(j_(n)?SV:wV)(i,r,l,n),d=z2(i,typeof n=="string",t),p=n!==ie.Fragment?{...d,...f,ref:s}:{},{children:_}=i,E=ie.useMemo(()=>Mn(_)?_.get():_,[_]);return ie.createElement(n,{...p,children:E})}}function CV(t,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...j_(i)?vV:_V,preloadedFeatures:t,useRender:bV(s),createVisualElement:e,Component:i};return J2(l)}}function YI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function um(t,e,n){const i=t.getProps();return Z_(i,e,n!==void 0?n:i.custom,t)}const AV=K_(()=>window.ScrollTimeline!==void 0);class xV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(s=>{if(AV()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{i.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class RV extends xV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function a0(t,e){return t?t[e]||t.default||t:void 0}const Vv=2e4;function KI(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Vv;)e+=n,i=t.next(e);return e>=Vv?1/0:e}function l0(t){return typeof t=="function"}function vb(t,e){t.timeline=e,t.onfinish=null}const u0=t=>Array.isArray(t)&&typeof t[0]=="number",IV={linearEasing:void 0};function MV(t,e){const n=K_(t);return()=>{var i;return(i=IV[e])!==null&&i!==void 0?i:n()}}const bp=MV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),JI=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let r=0;r<s;r++)i+=t(Iu(0,s-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function WI(t){return!!(typeof t=="function"&&bp()||!t||typeof t=="string"&&(t in Lv||bp())||u0(t)||Array.isArray(t)&&t.every(WI))}const ff=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Lv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ff([0,.65,.55,1]),circOut:ff([.55,0,1,.45]),backIn:ff([.31,.01,.66,-.59]),backOut:ff([.33,1.53,.69,.99])};function QI(t,e){if(t)return typeof t=="function"&&bp()?JI(t,e):u0(t)?ff(t):Array.isArray(t)?t.map(n=>QI(n,e)||Lv.easeOut):Lv[t]}const Zi={x:!1,y:!1};function XI(){return Zi.x||Zi.y}function PV(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const r=(i=void 0)!==null&&i!==void 0?i:s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function jI(t,e){const n=PV(t),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[n,s,()=>i.abort()]}function _b(t){return e=>{e.pointerType==="touch"||XI()||t(e)}}function DV(t,e,n={}){const[i,s,r]=jI(t,n),l=_b(c=>{const{target:f}=c,d=e(c);if(typeof d!="function"||!f)return;const p=_b(_=>{d(_),f.removeEventListener("pointerleave",p)});f.addEventListener("pointerleave",p,s)});return i.forEach(c=>{c.addEventListener("pointerenter",l,s)}),r}const ZI=(t,e)=>e?t===e?!0:ZI(t,e.parentElement):!1,c0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,NV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kV(t){return NV.has(t.tagName)||t.tabIndex!==-1}const df=new WeakSet;function Tb(t){return e=>{e.key==="Enter"&&t(e)}}function qy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const VV=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Tb(()=>{if(df.has(n))return;qy(n,"down");const s=Tb(()=>{qy(n,"up")}),r=()=>qy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Eb(t){return c0(t)&&!XI()}function LV(t,e,n={}){const[i,s,r]=jI(t,n),l=c=>{const f=c.currentTarget;if(!Eb(c)||df.has(f))return;df.add(f);const d=e(c),p=(S,A)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",E),!(!Eb(S)||!df.has(f))&&(df.delete(f),typeof d=="function"&&d(S,{success:A}))},_=S=>{p(S,n.useGlobalTarget||ZI(f,S.target))},E=S=>{p(S,!1)};window.addEventListener("pointerup",_,s),window.addEventListener("pointercancel",E,s)};return i.forEach(c=>{!kV(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),c.addEventListener("focus",d=>VV(d,s),s)}),r}function OV(t){return t==="x"||t==="y"?Zi[t]?null:(Zi[t]=!0,()=>{Zi[t]=!1}):Zi.x||Zi.y?null:(Zi.x=Zi.y=!0,()=>{Zi.x=Zi.y=!1})}const eM=new Set(["width","height","top","left","right","bottom",...$u]);let op;function UV(){op=void 0}const Os={now:()=>(op===void 0&&Os.set(_n.isProcessing||N2.useManualTiming?_n.timestamp:performance.now()),op),set:t=>{op=t,queueMicrotask(UV)}};function f0(t,e){t.indexOf(e)===-1&&t.push(e)}function d0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class h0{constructor(){this.subscriptions=[]}add(e){return f0(this.subscriptions,e),()=>d0(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let r=0;r<s;r++){const l=this.subscriptions[r];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function tM(t,e){return e?t*(1e3/e):0}const wb=30,zV=t=>!isNaN(parseFloat(t));class BV{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Os.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Os.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=zV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new h0);const i=this.events[e].add(n);return e==="change"?()=>{i(),St.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Os.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wb);return tM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nf(t,e){return new BV(t,e)}function FV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nf(n))}function p0(t,e){const n=um(t,e);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const l in r){const c=eV(r[l]);FV(t,l,c)}}function qV(t){return!!(Mn(t)&&t.add)}function Ov(t,e){const n=t.getValue("willChange");if(qV(n))return n.add(e)}function nM(t){return t.props[DI]}const iM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,GV=1e-7,HV=12;function $V(t,e,n,i,s){let r,l,c=0;do l=e+(n-e)/2,r=iM(l,i,s)-t,r>0?n=l:e=l;while(Math.abs(r)>GV&&++c<HV);return l}function jf(t,e,n,i){if(t===e&&n===i)return pi;const s=r=>$V(r,0,1,t,n);return r=>r===0||r===1?r:iM(s(r),e,i)}const sM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oM=t=>e=>1-t(1-e),rM=jf(.33,1.53,.69,.99),m0=oM(rM),aM=sM(m0),lM=t=>(t*=2)<1?.5*m0(t):.5*(2-Math.pow(2,-10*(t-1))),g0=t=>1-Math.sin(Math.acos(t)),uM=oM(g0),cM=sM(g0),fM=t=>/^0[^.\s]+$/u.test(t);function YV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fM(t):!0}const _f=t=>Math.round(t*1e5)/1e5,y0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KV(t){return t==null}const JV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,v0=(t,e)=>n=>!!(typeof n=="string"&&JV.test(n)&&n.startsWith(t)||e&&!KV(n)&&Object.prototype.hasOwnProperty.call(n,e)),dM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,r,l,c]=i.match(y0);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},WV=t=>Ao(0,255,t),Gy={...Yu,transform:t=>Math.round(WV(t))},Va={test:v0("rgb","red"),parse:dM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Gy.transform(t)+", "+Gy.transform(e)+", "+Gy.transform(n)+", "+_f(Df.transform(i))+")"};function QV(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Uv={test:v0("#"),parse:QV,transform:Va.transform},ru={test:v0("hsl","hue"),parse:dM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ls.transform(_f(e))+", "+Ls.transform(_f(n))+", "+_f(Df.transform(i))+")"},An={test:t=>Va.test(t)||Uv.test(t)||ru.test(t),parse:t=>Va.test(t)?Va.parse(t):ru.test(t)?ru.parse(t):Uv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Va.transform(t):ru.transform(t)},XV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(y0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(XV))===null||n===void 0?void 0:n.length)||0)>0}const hM="number",pM="color",ZV="var",eL="var(",Sb="${}",tL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kf(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=e.replace(tL,f=>(An.test(f)?(i.color.push(r),s.push(pM),n.push(An.parse(f))):f.startsWith(eL)?(i.var.push(r),s.push(ZV),n.push(f)):(i.number.push(r),s.push(hM),n.push(parseFloat(f))),++r,Sb)).split(Sb);return{values:n,split:c,indexes:i,types:s}}function mM(t){return kf(t).values}function gM(t){const{split:e,types:n}=kf(t),i=e.length;return s=>{let r="";for(let l=0;l<i;l++)if(r+=e[l],s[l]!==void 0){const c=n[l];c===hM?r+=_f(s[l]):c===pM?r+=An.transform(s[l]):r+=s[l]}return r}}const nL=t=>typeof t=="number"?0:t;function iL(t){const e=mM(t);return gM(t)(e.map(nL))}const kr={test:jV,parse:mM,createTransformer:gM,getAnimatableNone:iL},sL=new Set(["brightness","contrast","saturate","opacity"]);function oL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(y0)||[];if(!i)return t;const s=n.replace(i,"");let r=sL.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const rL=/\b([a-z-]*)\(.*?\)/gu,zv={...kr,getAnimatableNone:t=>{const e=t.match(rL);return e?e.map(oL).join(" "):t}},aL={...t0,color:An,backgroundColor:An,outlineColor:An,fill:An,stroke:An,borderColor:An,borderTopColor:An,borderRightColor:An,borderBottomColor:An,borderLeftColor:An,filter:zv,WebkitFilter:zv},_0=t=>aL[t];function yM(t,e){let n=_0(t);return n!==zv&&(n=kr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lL=new Set(["auto","none","0"]);function uL(t,e,n){let i=0,s;for(;i<t.length&&!s;){const r=t[i];typeof r=="string"&&!lL.has(r)&&kf(r).values.length&&(s=t[i]),i++}if(s&&n)for(const r of e)t[r]=yM(n,s)}const bb=t=>t===Yu||t===xe,Cb=(t,e)=>parseFloat(t.split(", ")[e]),Ab=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return Cb(s[1],e);{const r=i.match(/^matrix\((.+)\)$/u);return r?Cb(r[1],t):0}},cL=new Set(["x","y","z"]),fL=$u.filter(t=>!cL.has(t));function dL(t){const e=[];return fL.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Pu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ab(4,13),y:Ab(5,14)};Pu.translateX=Pu.x;Pu.translateY=Pu.y;const qa=new Set;let Bv=!1,Fv=!1;function vM(){if(Fv){const t=Array.from(qa).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=dL(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,l])=>{var c;(c=i.getValue(r))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Fv=!1,Bv=!1,qa.forEach(t=>t.complete()),qa.clear()}function _M(){qa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fv=!0)})}function hL(){_M(),vM()}class T0{constructor(e,n,i,s,r,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(qa.add(this),Bv||(Bv=!0,St.read(_M),St.resolveKeyframes(vM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const f=i.readValue(n,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,qa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const TM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),pL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mL(t){const e=pL.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function EM(t,e,n=1){const[i,s]=mL(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const l=r.trim();return TM(l)?parseFloat(l):l}return e0(s)?EM(s,e,n+1):s}const wM=t=>e=>e.test(t),gL={test:t=>t==="auto",parse:t=>t},SM=[Yu,xe,Ls,yr,rV,oV,gL],xb=t=>SM.find(wM(t));class bM extends T0{constructor(e,n,i,s,r){super(e,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),e0(d))){const p=EM(d,n.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!eM.has(i)||e.length!==2)return;const[s,r]=e,l=xb(s),c=xb(r);if(l!==c)if(bb(l)&&bb(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)YV(e[s])&&i.push(s);i.length&&uL(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const r=n.getValue(i);r&&r.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=Pu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,d])=>{n.getValue(f).set(d)}),this.resolveNoneKeyframes()}}const Rb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(kr.test(t)||t==="0")&&!t.startsWith("url("));function yL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function vL(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],l=Rb(s,e),c=Rb(r,e);return!l||!c?!1:yL(t)||(n==="spring"||l0(n))&&i}const _L=t=>t!==null;function cm(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(_L),r=e&&n!=="loop"&&e%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const TL=40;class CM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Os.now(),this.options={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>TL?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&hL(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Os.now(),this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:l,onComplete:c,onUpdate:f,isGenerator:d}=this.options;if(!d&&!vL(e,i,s,r))if(l)this.options.duration=0;else{f&&f(cm(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const xt=(t,e,n)=>t+(e-t)*n;function Hy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function EL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,r=0,l=0;if(!e)s=r=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=Hy(f,c,t+1/3),r=Hy(f,c,t),l=Hy(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(l*255),alpha:i}}function Cp(t,e){return n=>n>0?e:t}const $y=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},wL=[Uv,Va,ru],SL=t=>wL.find(e=>e.test(t));function Ib(t){const e=SL(t);if(!e)return!1;let n=e.parse(t);return e===ru&&(n=EL(n)),n}const Mb=(t,e)=>{const n=Ib(t),i=Ib(e);if(!n||!i)return Cp(t,e);const s={...n};return r=>(s.red=$y(n.red,i.red,r),s.green=$y(n.green,i.green,r),s.blue=$y(n.blue,i.blue,r),s.alpha=xt(n.alpha,i.alpha,r),Va.transform(s))},bL=(t,e)=>n=>e(t(n)),Zf=(...t)=>t.reduce(bL),qv=new Set(["none","hidden"]);function CL(t,e){return qv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function AL(t,e){return n=>xt(t,e,n)}function E0(t){return typeof t=="number"?AL:typeof t=="string"?e0(t)?Cp:An.test(t)?Mb:IL:Array.isArray(t)?AM:typeof t=="object"?An.test(t)?Mb:xL:Cp}function AM(t,e){const n=[...t],i=n.length,s=t.map((r,l)=>E0(r)(r,e[l]));return r=>{for(let l=0;l<i;l++)n[l]=s[l](r);return n}}function xL(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=E0(t[s])(t[s],e[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function RL(t,e){var n;const i=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const l=e.types[r],c=t.indexes[l][s[l]],f=(n=t.values[c])!==null&&n!==void 0?n:0;i[r]=f,s[l]++}return i}const IL=(t,e)=>{const n=kr.createTransformer(e),i=kf(t),s=kf(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?qv.has(t)&&!s.values.length||qv.has(e)&&!i.values.length?CL(t,e):Zf(AM(RL(i,s),s.values),n):Cp(t,e)};function xM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xt(t,e,n):E0(t)(t,e)}const ML=5;function RM(t,e,n){const i=Math.max(e-ML,0);return tM(n-t(i),e-i)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yy=.001;function PL({duration:t=Nt.duration,bounce:e=Nt.bounce,velocity:n=Nt.velocity,mass:i=Nt.mass}){let s,r,l=1-e;l=Ao(Nt.minDamping,Nt.maxDamping,l),t=Ao(Nt.minDuration,Nt.maxDuration,bo(t)),l<1?(s=d=>{const p=d*l,_=p*t,E=p-n,S=Gv(d,l),A=Math.exp(-_);return Yy-E/S*A},r=d=>{const _=d*l*t,E=_*n+n,S=Math.pow(l,2)*Math.pow(d,2)*t,A=Math.exp(-_),x=Gv(Math.pow(d,2),l);return(-s(d)+Yy>0?-1:1)*((E-S)*A)/x}):(s=d=>{const p=Math.exp(-d*t),_=(d-n)*t+1;return-Yy+p*_},r=d=>{const p=Math.exp(-d*t),_=(n-d)*(t*t);return p*_});const c=5/t,f=NL(s,r,c);if(t=So(t),isNaN(f))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:t};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:t}}}const DL=12;function NL(t,e,n){let i=n;for(let s=1;s<DL;s++)i=i-t(i)/e(i);return i}function Gv(t,e){return t*Math.sqrt(1-e*e)}const kL=["duration","bounce"],VL=["stiffness","damping","mass"];function Pb(t,e){return e.some(n=>t[n]!==void 0)}function LL(t){let e={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...t};if(!Pb(t,VL)&&Pb(t,kL))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*Ao(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Nt.mass,stiffness:s,damping:r}}else{const n=PL(t);e={...e,...n,mass:Nt.mass},e.isResolvedFromDuration=!0}return e}function IM(t=Nt.visualDuration,e=Nt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:r},{stiffness:f,damping:d,mass:p,duration:_,velocity:E,isResolvedFromDuration:S}=LL({...n,velocity:-bo(n.velocity||0)}),A=E||0,x=d/(2*Math.sqrt(f*p)),R=l-r,V=bo(Math.sqrt(f/p)),O=Math.abs(R)<5;i||(i=O?Nt.restSpeed.granular:Nt.restSpeed.default),s||(s=O?Nt.restDelta.granular:Nt.restDelta.default);let F;if(x<1){const Y=Gv(V,x);F=Z=>{const D=Math.exp(-x*V*Z);return l-D*((A+x*V*R)/Y*Math.sin(Y*Z)+R*Math.cos(Y*Z))}}else if(x===1)F=Y=>l-Math.exp(-V*Y)*(R+(A+V*R)*Y);else{const Y=V*Math.sqrt(x*x-1);F=Z=>{const D=Math.exp(-x*V*Z),M=Math.min(Y*Z,300);return l-D*((A+x*V*R)*Math.sinh(M)+Y*R*Math.cosh(M))/Y}}const H={calculatedDuration:S&&_||null,next:Y=>{const Z=F(Y);if(S)c.done=Y>=_;else{let D=0;x<1&&(D=Y===0?So(A):RM(F,Y,Z));const M=Math.abs(D)<=i,k=Math.abs(l-Z)<=s;c.done=M&&k}return c.value=c.done?l:Z,c},toString:()=>{const Y=Math.min(KI(H),Vv),Z=JI(D=>H.next(Y*D).value,Y,30);return Y+"ms "+Z}};return H}function Db({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:l,min:c,max:f,restDelta:d=.5,restSpeed:p}){const _=t[0],E={done:!1,value:_},S=M=>c!==void 0&&M<c||f!==void 0&&M>f,A=M=>c===void 0?f:f===void 0||Math.abs(c-M)<Math.abs(f-M)?c:f;let x=n*e;const R=_+x,V=l===void 0?R:l(R);V!==R&&(x=V-_);const O=M=>-x*Math.exp(-M/i),F=M=>V+O(M),H=M=>{const k=O(M),U=F(M);E.done=Math.abs(k)<=d,E.value=E.done?V:U};let Y,Z;const D=M=>{S(E.value)&&(Y=M,Z=IM({keyframes:[E.value,A(E.value)],velocity:RM(F,M,E.value),damping:s,stiffness:r,restDelta:d,restSpeed:p}))};return D(0),{calculatedDuration:null,next:M=>{let k=!1;return!Z&&Y===void 0&&(k=!0,H(M),D(M)),Y!==void 0&&M>=Y?Z.next(M-Y):(!k&&H(M),E)}}}const OL=jf(.42,0,1,1),UL=jf(0,0,.58,1),MM=jf(.42,0,.58,1),zL=t=>Array.isArray(t)&&typeof t[0]!="number",BL={linear:pi,easeIn:OL,easeInOut:MM,easeOut:UL,circIn:g0,circInOut:cM,circOut:uM,backIn:m0,backInOut:aM,backOut:rM,anticipate:lM},Nb=t=>{if(u0(t)){xI(t.length===4);const[e,n,i,s]=t;return jf(e,n,i,s)}else if(typeof t=="string")return BL[t];return t};function FL(t,e,n){const i=[],s=n||xM,r=t.length-1;for(let l=0;l<r;l++){let c=s(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||pi:e;c=Zf(f,c)}i.push(c)}return i}function qL(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const r=t.length;if(xI(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=FL(e,i,s),f=c.length,d=p=>{if(l&&p<t[0])return e[0];let _=0;if(f>1)for(;_<t.length-2&&!(p<t[_+1]);_++);const E=Iu(t[_],t[_+1],p);return c[_](E)};return n?p=>d(Ao(t[0],t[r-1],p)):d}function GL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=Iu(0,e,i);t.push(xt(n,1,s))}}function HL(t){const e=[0];return GL(e,t.length-1),e}function $L(t,e){return t.map(n=>n*e)}function YL(t,e){return t.map(()=>e||MM).splice(0,t.length-1)}function Ap({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=zL(i)?i.map(Nb):Nb(i),r={done:!1,value:e[0]},l=$L(n&&n.length===e.length?n:HL(e),t),c=qL(l,e,{ease:Array.isArray(s)?s:YL(e,s)});return{calculatedDuration:t,next:f=>(r.value=c(f),r.done=f>=t,r)}}const KL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>St.update(e,!0),stop:()=>Nr(e),now:()=>_n.isProcessing?_n.timestamp:Os.now()}},JL={decay:Db,inertia:Db,tween:Ap,keyframes:Ap,spring:IM},WL=t=>t/100;class w0 extends CM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:i,element:s,keyframes:r}=this.options,l=(s==null?void 0:s.KeyframeResolver)||T0,c=(f,d)=>this.onKeyframesResolved(f,d);this.resolver=new l(r,c,n,i,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:l=0}=this.options,c=l0(n)?n:JL[n]||Ap;let f,d;c!==Ap&&typeof e[0]!="number"&&(f=Zf(WL,xM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});r==="mirror"&&(d=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=KI(p));const{calculatedDuration:_}=p,E=_+s,S=E*(i+1)-s;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:f,calculatedDuration:_,resolvedDuration:E,totalDuration:S}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:M}=this.options;return{done:!0,value:M[M.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:f,calculatedDuration:d,totalDuration:p,resolvedDuration:_}=i;if(this.startTime===null)return r.next(0);const{delay:E,repeat:S,repeatType:A,repeatDelay:x,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const V=this.currentTime-E*(this.speed>=0?1:-1),O=this.speed>=0?V<0:V>p;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,H=r;if(S){const M=Math.min(this.currentTime,p)/_;let k=Math.floor(M),U=M%1;!U&&M>=1&&(U=1),U===1&&k--,k=Math.min(k,S+1),!!(k%2)&&(A==="reverse"?(U=1-U,x&&(U-=x/_)):A==="mirror"&&(H=l)),F=Ao(0,1,U)*_}const Y=O?{done:!1,value:f[0]}:H.next(F);c&&(Y.value=c(Y.value));let{done:Z}=Y;!O&&d!==null&&(Z=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return D&&s!==void 0&&(Y.value=cm(f,this.options,s)),R&&R(Y.value),D&&this.finish(),Y}get duration(){const{resolved:e}=this;return e?bo(e.calculatedDuration):0}get time(){return bo(this.currentTime)}set time(e){e=So(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=bo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=KL,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const QL=new Set(["opacity","clipPath","filter","transform"]);function XL(t,e,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:l="loop",ease:c="easeInOut",times:f}={}){const d={[e]:n};f&&(d.offset=f);const p=QI(c,s);return Array.isArray(p)&&(d.easing=p),t.animate(d,{delay:i,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:r+1,direction:l==="reverse"?"alternate":"normal"})}const jL=K_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xp=10,ZL=2e4;function eO(t){return l0(t.type)||t.type==="spring"||!WI(t.ease)}function tO(t,e){const n=new w0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const s=[];let r=0;for(;!i.done&&r<ZL;)i=n.sample(r),s.push(i.value),r+=xp;return{times:void 0,keyframes:s,duration:r-xp,ease:"linear"}}const PM={anticipate:lM,backInOut:aM,circInOut:cM};function nO(t){return t in PM}class kb extends CM{constructor(e){super(e);const{name:n,motionValue:i,element:s,keyframes:r}=this.options;this.resolver=new bM(r,(l,c)=>this.onKeyframesResolved(l,c),n,i,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:s,ease:r,type:l,motionValue:c,name:f,startTime:d}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof r=="string"&&bp()&&nO(r)&&(r=PM[r]),eO(this.options)){const{onComplete:_,onUpdate:E,motionValue:S,element:A,...x}=this.options,R=tO(e,x);e=R.keyframes,e.length===1&&(e[1]=e[0]),i=R.duration,s=R.times,r=R.ease,l="keyframes"}const p=XL(c.owner.current,f,e,{...this.options,duration:i,times:s,ease:r});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(vb(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:_}=this.options;c.set(cm(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:s,type:l,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return bo(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return bo(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=So(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return pi;const{animation:i}=n;vb(i,e)}return pi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:s,type:r,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:_,element:E,...S}=this.options,A=new w0({...S,keyframes:i,duration:s,type:r,ease:l,times:c,isGenerator:!0}),x=So(this.time);d.setWithVelocity(A.sample(x-xp).value,A.sample(x).value,xp)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:s,repeatType:r,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=n.owner.getProps();return jL()&&i&&QL.has(i)&&!f&&!d&&!s&&r!=="mirror"&&l!==0&&c!=="inertia"}}const iO={type:"spring",stiffness:500,damping:25,restSpeed:10},sO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oO={type:"keyframes",duration:.8},rO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aO=(t,{keyframes:e})=>e.length>2?oO:il.has(t)?t.startsWith("scale")?sO(e[1]):iO:rO;function lO({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:l,repeatDelay:c,from:f,elapsed:d,...p}){return!!Object.keys(p).length}const S0=(t,e,n,i={},s,r)=>l=>{const c=a0(i,t)||{},f=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-So(f);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:E=>{e.set(E),c.onUpdate&&c.onUpdate(E)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:r?void 0:s};lO(c)||(p={...p,...aO(t,p)}),p.duration&&(p.duration=So(p.duration)),p.repeatDelay&&(p.repeatDelay=So(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let _=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(_=!0)),_&&!r&&e.get()!==void 0){const E=cm(p.keyframes,c);if(E!==void 0)return St.update(()=>{p.onUpdate(E),p.onComplete()}),new RV([])}return!r&&kb.supports(p)?new kb(p):new w0(p)};function uO({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function DM(t,e,{delay:n=0,transitionOverride:i,type:s}={}){var r;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=e;i&&(l=i);const d=[],p=s&&t.animationState&&t.animationState.getState()[s];for(const _ in f){const E=t.getValue(_,(r=t.latestValues[_])!==null&&r!==void 0?r:null),S=f[_];if(S===void 0||p&&uO(p,_))continue;const A={delay:n,...a0(l||{},_)};let x=!1;if(window.MotionHandoffAnimation){const V=nM(t);if(V){const O=window.MotionHandoffAnimation(V,_,St);O!==null&&(A.startTime=O,x=!0)}}Ov(t,_),E.start(S0(_,E,S,t.shouldReduceMotion&&eM.has(_)?{type:!1}:A,t,x));const R=E.animation;R&&d.push(R)}return c&&Promise.all(d).then(()=>{St.update(()=>{c&&p0(t,c)})}),d}function Hv(t,e,n={}){var i;const s=um(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const l=s?()=>Promise.all(DM(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:_,staggerDirection:E}=r;return cO(t,e,p+d,_,E,n)}:()=>Promise.resolve(),{when:f}=r;if(f){const[d,p]=f==="beforeChildren"?[l,c]:[c,l];return d().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function cO(t,e,n=0,i=0,s=1,r){const l=[],c=(t.variantChildren.size-1)*i,f=s===1?(d=0)=>d*i:(d=0)=>c-d*i;return Array.from(t.variantChildren).sort(fO).forEach((d,p)=>{d.notify("AnimationStart",e),l.push(Hv(d,e,{...r,delay:n+f(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(l)}function fO(t,e){return t.sortNodePosition(e)}function NM(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Hv(t,r,n));i=Promise.all(s)}else if(typeof e=="string")i=Hv(t,e,n);else{const s=typeof e=="function"?um(t,e,n.custom):e;i=Promise.all(DM(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const dO=W_.length;function kM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?kM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<dO;n++){const i=W_[n],s=t.props[i];(Pf(s)||s===!1)&&(e[i]=s)}return e}const hO=[...J_].reverse(),pO=J_.length;function mO(t){return e=>Promise.all(e.map(({animation:n,options:i})=>NM(t,n,i)))}function gO(t){let e=mO(t),n=Vb(),i=!0;const s=f=>(d,p)=>{var _;const E=um(t,p,f==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(E){const{transition:S,transitionEnd:A,...x}=E;d={...d,...x,...A}}return d};function r(f){e=f(t)}function l(f){const{props:d}=t,p=kM(t.parent)||{},_=[],E=new Set;let S={},A=1/0;for(let R=0;R<pO;R++){const V=hO[R],O=n[V],F=d[V]!==void 0?d[V]:p[V],H=Pf(F),Y=V===f?O.isActive:null;Y===!1&&(A=R);let Z=F===p[V]&&F!==d[V]&&H;if(Z&&i&&t.manuallyAnimateOnMount&&(Z=!1),O.protectedKeys={...S},!O.isActive&&Y===null||!F&&!O.prevProp||am(F)||typeof F=="boolean")continue;const D=yO(O.prevProp,F);let M=D||V===f&&O.isActive&&!Z&&H||R>A&&H,k=!1;const U=Array.isArray(F)?F:[F];let z=U.reduce(s(V),{});Y===!1&&(z={});const{prevResolvedValues:B={}}=O,L={...B,...z},Ae=le=>{M=!0,E.has(le)&&(k=!0,E.delete(le)),O.needsAnimating[le]=!0;const he=t.getValue(le);he&&(he.liveStyle=!1)};for(const le in L){const he=z[le],Me=B[le];if(S.hasOwnProperty(le))continue;let qe=!1;kv(he)&&kv(Me)?qe=!YI(he,Me):qe=he!==Me,qe?he!=null?Ae(le):E.add(le):he!==void 0&&E.has(le)?Ae(le):O.protectedKeys[le]=!0}O.prevProp=F,O.prevResolvedValues=z,O.isActive&&(S={...S,...z}),i&&t.blockInitialAnimation&&(M=!1),M&&(!(Z&&D)||k)&&_.push(...U.map(le=>({animation:le,options:{type:V}})))}if(E.size){const R={};E.forEach(V=>{const O=t.getBaseTarget(V),F=t.getValue(V);F&&(F.liveStyle=!0),R[V]=O??null}),_.push({animation:R})}let x=!!_.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(_):Promise.resolve()}function c(f,d){var p;if(n[f].isActive===d)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(E=>{var S;return(S=E.animationState)===null||S===void 0?void 0:S.setActive(f,d)}),n[f].isActive=d;const _=l(f);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:l,setActive:c,setAnimateFunction:r,getState:()=>n,reset:()=>{n=Vb(),i=!0}}}function yO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YI(e,t):!1}function Ca(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vb(){return{animate:Ca(!0),whileInView:Ca(),whileHover:Ca(),whileTap:Ca(),whileDrag:Ca(),whileFocus:Ca(),exit:Ca()}}class Gr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vO extends Gr{constructor(e){super(e),e.animationState||(e.animationState=gO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();am(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _O=0;class TO extends Gr{constructor(){super(...arguments),this.id=_O++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const EO={animation:{Feature:vO},exit:{Feature:TO}};function Vf(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ed(t){return{point:{x:t.pageX,y:t.pageY}}}const wO=t=>e=>c0(e)&&t(e,ed(e));function Tf(t,e,n,i){return Vf(t,e,wO(n),i)}const Lb=(t,e)=>Math.abs(t-e);function SO(t,e){const n=Lb(t.x,e.x),i=Lb(t.y,e.y);return Math.sqrt(n**2+i**2)}class VM{constructor(e,n,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jy(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,S=SO(_.offset,{x:0,y:0})>=3;if(!E&&!S)return;const{point:A}=_,{timestamp:x}=_n;this.history.push({...A,timestamp:x});const{onStart:R,onMove:V}=this.handlers;E||(R&&R(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Ky(E,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:S,onSessionEnd:A,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Jy(_.type==="pointercancel"?this.lastMoveEventInfo:Ky(E,this.transformPagePoint),this.history);this.startEvent&&S&&S(_,R),A&&A(_,R)},!c0(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.contextWindow=s||window;const l=ed(e),c=Ky(l,this.transformPagePoint),{point:f}=c,{timestamp:d}=_n;this.history=[{...f,timestamp:d}];const{onSessionStart:p}=n;p&&p(e,Jy(c,this.history)),this.removeListeners=Zf(Tf(this.contextWindow,"pointermove",this.handlePointerMove),Tf(this.contextWindow,"pointerup",this.handlePointerUp),Tf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nr(this.updatePoint)}}function Ky(t,e){return e?{point:e(t.point)}:t}function Ob(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jy({point:t},e){return{point:t,delta:Ob(t,LM(e)),offset:Ob(t,bO(e)),velocity:CO(e,.1)}}function bO(t){return t[0]}function LM(t){return t[t.length-1]}function CO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=LM(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>So(e)));)n--;if(!i)return{x:0,y:0};const r=bo(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const l={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const OM=1e-4,AO=1-OM,xO=1+OM,UM=.01,RO=0-UM,IO=0+UM;function gi(t){return t.max-t.min}function MO(t,e,n){return Math.abs(t-e)<=n}function Ub(t,e,n,i=.5){t.origin=i,t.originPoint=xt(e.min,e.max,t.origin),t.scale=gi(n)/gi(e),t.translate=xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=AO&&t.scale<=xO||isNaN(t.scale))&&(t.scale=1),(t.translate>=RO&&t.translate<=IO||isNaN(t.translate))&&(t.translate=0)}function Ef(t,e,n,i){Ub(t.x,e.x,n.x,i?i.originX:void 0),Ub(t.y,e.y,n.y,i?i.originY:void 0)}function zb(t,e,n){t.min=n.min+e.min,t.max=t.min+gi(e)}function PO(t,e,n){zb(t.x,e.x,n.x),zb(t.y,e.y,n.y)}function Bb(t,e,n){t.min=e.min-n.min,t.max=t.min+gi(e)}function wf(t,e,n){Bb(t.x,e.x,n.x),Bb(t.y,e.y,n.y)}function DO(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?xt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?xt(n,t,i.max):Math.min(t,n)),t}function Fb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function NO(t,{top:e,left:n,bottom:i,right:s}){return{x:Fb(t.x,n,s),y:Fb(t.y,e,i)}}function qb(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function kO(t,e){return{x:qb(t.x,e.x),y:qb(t.y,e.y)}}function VO(t,e){let n=.5;const i=gi(t),s=gi(e);return s>i?n=Iu(e.min,e.max-i,t.min):i>s&&(n=Iu(t.min,t.max-s,e.min)),Ao(0,1,n)}function LO(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $v=.35;function OO(t=$v){return t===!1?t=0:t===!0&&(t=$v),{x:Gb(t,"left","right"),y:Gb(t,"top","bottom")}}function Gb(t,e,n){return{min:Hb(t,e),max:Hb(t,n)}}function Hb(t,e){return typeof t=="number"?t:t[e]||0}const $b=()=>({translate:0,scale:1,origin:0,originPoint:0}),au=()=>({x:$b(),y:$b()}),Yb=()=>({min:0,max:0}),Bt=()=>({x:Yb(),y:Yb()});function Vi(t){return[t("x"),t("y")]}function zM({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function UO({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zO(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Wy(t){return t===void 0||t===1}function Yv({scale:t,scaleX:e,scaleY:n}){return!Wy(t)||!Wy(e)||!Wy(n)}function Pa(t){return Yv(t)||BM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BM(t){return Kb(t.x)||Kb(t.y)}function Kb(t){return t&&t!=="0%"}function Rp(t,e,n){const i=t-n,s=e*i;return n+s}function Jb(t,e,n,i,s){return s!==void 0&&(t=Rp(t,s,i)),Rp(t,n,i)+e}function Kv(t,e=0,n=1,i,s){t.min=Jb(t.min,e,n,i,s),t.max=Jb(t.max,e,n,i,s)}function FM(t,{x:e,y:n}){Kv(t.x,e.translate,e.scale,e.originPoint),Kv(t.y,n.translate,n.scale,n.originPoint)}const Wb=.999999999999,Qb=1.0000000000001;function BO(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let r,l;for(let c=0;c<s;c++){r=n[c],l=r.projectionDelta;const{visualElement:f}=r.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&uu(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,FM(t,l)),i&&Pa(r.latestValues)&&uu(t,r.latestValues))}e.x<Qb&&e.x>Wb&&(e.x=1),e.y<Qb&&e.y>Wb&&(e.y=1)}function lu(t,e){t.min=t.min+e,t.max=t.max+e}function Xb(t,e,n,i,s=.5){const r=xt(t.min,t.max,s);Kv(t,e,n,r,i)}function uu(t,e){Xb(t.x,e.x,e.scaleX,e.scale,e.originX),Xb(t.y,e.y,e.scaleY,e.scale,e.originY)}function qM(t,e){return zM(zO(t.getBoundingClientRect(),e))}function FO(t,e,n){const i=qM(t,n),{scroll:s}=e;return s&&(lu(i.x,s.offset.x),lu(i.y,s.offset.y)),i}const GM=({current:t})=>t?t.ownerDocument.defaultView:null,qO=new WeakMap;class GO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ed(p).point)},r=(p,_)=>{const{drag:E,dragPropagation:S,onDragStart:A}=this.getProps();if(E&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OV(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vi(R=>{let V=this.getAxisMotionValue(R).get()||0;if(Ls.test(V)){const{projection:O}=this.visualElement;if(O&&O.layout){const F=O.layout.layoutBox[R];F&&(V=gi(F)*(parseFloat(V)/100))}}this.originPoint[R]=V}),A&&St.postRender(()=>A(p,_)),Ov(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(p,_)=>{const{dragPropagation:E,dragDirectionLock:S,onDirectionLock:A,onDrag:x}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:R}=_;if(S&&this.currentDirection===null){this.currentDirection=HO(R),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,R),this.updateAxis("y",_.point,R),this.visualElement.render(),x&&x(p,_)},c=(p,_)=>this.stop(p,_),f=()=>Vi(p=>{var _;return this.getAnimationState(p)==="paused"&&((_=this.getAxisMotionValue(p).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new VM(e,{onSessionStart:s,onStart:r,onMove:l,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:GM(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&St.postRender(()=>r(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!qh(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=DO(l,this.constraints[e],this.elastic[e])),r.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;n&&ou(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=NO(s.layoutBox,n):this.constraints=!1,this.elastic=OO(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Vi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=LO(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ou(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=FO(i,s.root,this.visualElement.getTransformPagePoint());let l=kO(s.layout.layoutBox,r);if(n){const c=n(UO(l));this.hasMutatedConstraints=!!c,c&&(l=zM(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=Vi(p=>{if(!qh(p,n,this.currentDirection))return;let _=f&&f[p]||{};l&&(_={min:0,max:0});const E=s?200:1e6,S=s?40:1e7,A={type:"inertia",velocity:i?e[p]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...r,..._};return this.startAxisValueAnimation(p,A)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Ov(this.visualElement,e),i.start(S0(e,i,0,n,this.visualElement,!1))}stopAnimation(){Vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Vi(n=>{const{drag:i}=this.getProps();if(!qh(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];r.set(e[n]-xt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ou(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Vi(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();s[l]=VO({min:f,max:f},this.constraints[l])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Vi(l=>{if(!qh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];c.set(xt(f,d,s[l]))})}addListeners(){if(!this.visualElement.current)return;qO.set(this.visualElement,this);const e=this.visualElement.current,n=Tf(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();ou(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),St.read(i);const l=Vf(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Vi(p=>{const _=this.getAxisMotionValue(p);_&&(this.originPoint[p]+=f[p].translate,_.set(_.get()+f[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),r(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:l=$v,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:l,dragMomentum:c}}}function qh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function HO(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $O extends Gr{constructor(e){super(e),this.removeGroupControls=pi,this.removeListeners=pi,this.controls=new GO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pi}unmount(){this.removeGroupControls(),this.removeListeners()}}const jb=t=>(e,n)=>{t&&St.postRender(()=>t(e,n))};class YO extends Gr{constructor(){super(...arguments),this.removePointerDownListener=pi}onPointerDown(e){this.session=new VM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:jb(e),onStart:jb(n),onMove:i,onEnd:(r,l)=>{delete this.session,s&&St.postRender(()=>s(r,l))}}}mount(){this.removePointerDownListener=Tf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const rf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(xe.test(t))t=parseFloat(t);else return t;const n=Zb(t,e.target.x),i=Zb(t,e.target.y);return`${n}% ${i}%`}},KO={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=kr.parse(t);if(s.length>5)return i;const r=kr.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=f;const d=xt(c,f,.5);return typeof s[2+l]=="number"&&(s[2+l]/=d),typeof s[3+l]=="number"&&(s[3+l]/=d),r(s)}};class JO extends ie.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;gV(WO),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),rp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,l=i.projection;return l&&(l.isPresent=r,s||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?l.promote():l.relegate()||St.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),X_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HM(t){const[e,n]=AI(),i=ie.useContext(G_);return P.jsx(JO,{...t,layoutGroup:i,switchLayoutGroup:ie.useContext(NI),isPresent:e,safeToRemove:n})}const WO={borderRadius:{...rf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rf,borderTopRightRadius:rf,borderBottomLeftRadius:rf,borderBottomRightRadius:rf,boxShadow:KO};function QO(t,e,n){const i=Mn(t)?t:Nf(t);return i.start(S0("",i,e,n)),i.animation}function XO(t){return t instanceof SVGElement&&t.tagName!=="svg"}const jO=(t,e)=>t.depth-e.depth;class ZO{constructor(){this.children=[],this.isDirty=!1}add(e){f0(this.children,e),this.isDirty=!0}remove(e){d0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jO),this.isDirty=!1,this.children.forEach(e)}}function eU(t,e){const n=Os.now(),i=({timestamp:s})=>{const r=s-n;r>=e&&(Nr(i),t(r-e))};return St.read(i,!0),()=>Nr(i)}const $M=["TopLeft","TopRight","BottomLeft","BottomRight"],tU=$M.length,eC=t=>typeof t=="string"?parseFloat(t):t,tC=t=>typeof t=="number"||xe.test(t);function nU(t,e,n,i,s,r){s?(t.opacity=xt(0,n.opacity!==void 0?n.opacity:1,iU(i)),t.opacityExit=xt(e.opacity!==void 0?e.opacity:1,0,sU(i))):r&&(t.opacity=xt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<tU;l++){const c=`border${$M[l]}Radius`;let f=nC(e,c),d=nC(n,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||tC(f)===tC(d)?(t[c]=Math.max(xt(eC(f),eC(d),i),0),(Ls.test(d)||Ls.test(f))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=xt(e.rotate||0,n.rotate||0,i))}function nC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iU=YM(0,.5,uM),sU=YM(.5,.95,pi);function YM(t,e,n){return i=>i<t?0:i>e?1:n(Iu(t,e,i))}function iC(t,e){t.min=e.min,t.max=e.max}function Ni(t,e){iC(t.x,e.x),iC(t.y,e.y)}function sC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function oC(t,e,n,i,s){return t-=e,t=Rp(t,1/n,i),s!==void 0&&(t=Rp(t,1/s,i)),t}function oU(t,e=0,n=1,i=.5,s,r=t,l=t){if(Ls.test(e)&&(e=parseFloat(e),e=xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=xt(r.min,r.max,i);t===r&&(c-=e),t.min=oC(t.min,e,n,c,s),t.max=oC(t.max,e,n,c,s)}function rC(t,e,[n,i,s],r,l){oU(t,e[n],e[i],e[s],e.scale,r,l)}const rU=["x","scaleX","originX"],aU=["y","scaleY","originY"];function aC(t,e,n,i){rC(t.x,e,rU,n?n.x:void 0,i?i.x:void 0),rC(t.y,e,aU,n?n.y:void 0,i?i.y:void 0)}function lC(t){return t.translate===0&&t.scale===1}function KM(t){return lC(t.x)&&lC(t.y)}function uC(t,e){return t.min===e.min&&t.max===e.max}function lU(t,e){return uC(t.x,e.x)&&uC(t.y,e.y)}function cC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function JM(t,e){return cC(t.x,e.x)&&cC(t.y,e.y)}function fC(t){return gi(t.x)/gi(t.y)}function dC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uU{constructor(){this.members=[]}add(e){f0(this.members,e),e.scheduleRender()}remove(e){if(d0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cU(t,e,n){let i="";const s=t.x.translate/e.x,r=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((s||r||l)&&(i=`translate3d(${s}px, ${r}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:p,rotateX:_,rotateY:E,skewX:S,skewY:A}=n;d&&(i=`perspective(${d}px) ${i}`),p&&(i+=`rotate(${p}deg) `),_&&(i+=`rotateX(${_}deg) `),E&&(i+=`rotateY(${E}deg) `),S&&(i+=`skewX(${S}deg) `),A&&(i+=`skewY(${A}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(i+=`scale(${c}, ${f})`),i||"none"}const Da={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},hf=typeof window<"u"&&window.MotionDebug!==void 0,Qy=["","X","Y","Z"],fU={visibility:"hidden"},hC=1e3;let dU=0;function Xy(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function WM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=nM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",St,!(s||r))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&WM(i)}function QM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=dU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,hf&&(Da.totalNodes=Da.resolvedTargetDeltas=Da.recalculatedProjection=0),this.nodes.forEach(mU),this.nodes.forEach(TU),this.nodes.forEach(EU),this.nodes.forEach(gU),hf&&window.MotionDebug.record(Da)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZO)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new h0),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=XO(l),this.instance=l;const{layoutId:f,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||f)&&(this.isLayoutDirty=!0),t){let _;const E=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=eU(E,250),rp.hasAnimatedSinceResize&&(rp.hasAnimatedSinceResize=!1,this.nodes.forEach(mC))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&p&&(f||d)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:S,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||p.getDefaultTransition()||AU,{onLayoutAnimationStart:R,onLayoutAnimationComplete:V}=p.getProps(),O=!this.targetLayout||!JM(this.targetLayout,A)||S,F=!E&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||E&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,F);const H={...a0(x,"layout"),onPlay:R,onComplete:V};(p.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H)}else E||mC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wU),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const _=this.path[p];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pC);return}this.isUpdating||this.nodes.forEach(vU),this.isUpdating=!1,this.nodes.forEach(_U),this.nodes.forEach(hU),this.nodes.forEach(pU),this.clearAllSnapshots();const c=Os.now();_n.delta=Ao(0,1e3/60,c-_n.timestamp),_n.timestamp=c,_n.isProcessing=!0,Fy.update.process(_n),Fy.preRender.process(_n),Fy.render.process(_n),_n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,X_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yU),this.sharedNodes.forEach(SU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!KM(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&(c||Pa(this.latestValues)||p)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),xU(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return Bt();const f=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(RU))){const{scroll:p}=this.root;p&&(lu(f.x,p.offset.x),lu(f.y,p.offset.y))}return f}removeElementScroll(l){var c;const f=Bt();if(Ni(f,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return f;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:_,options:E}=p;p!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&Ni(f,l),lu(f.x,_.offset.x),lu(f.y,_.offset.y))}return f}applyTransform(l,c=!1){const f=Bt();Ni(f,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&uu(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Pa(p.latestValues)&&uu(f,p.latestValues)}return Pa(this.latestValues)&&uu(f,this.latestValues),f}removeTransform(l){const c=Bt();Ni(c,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Pa(d.latestValues))continue;Yv(d.latestValues)&&d.updateSnapshot();const p=Bt(),_=d.measurePageBox();Ni(p,_),aC(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return Pa(this.latestValues)&&aC(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=_n.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),wf(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ni(this.target,this.layout.layoutBox),FM(this.target,this.targetDelta)):Ni(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),wf(this.relativeTargetOrigin,this.target,S.target),Ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}hf&&Da.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Yv(this.parent.latestValues)||BM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===_n.timestamp&&(d=!1),d)return;const{layout:p,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||_))return;Ni(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,S=this.treeScale.y;BO(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Bt());const{target:A}=c;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sC(this.prevProjectionDelta.x,this.projectionDelta.x),sC(this.prevProjectionDelta.y,this.projectionDelta.y)),Ef(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==S||!dC(this.projectionDelta.x,this.prevProjectionDelta.x)||!dC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),hf&&Da.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=au(),this.projectionDelta=au(),this.projectionDeltaWithTransform=au()}setAnimationOrigin(l,c=!1){const f=this.snapshot,d=f?f.latestValues:{},p={...this.latestValues},_=au();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const E=Bt(),S=f?f.source:void 0,A=this.layout?this.layout.source:void 0,x=S!==A,R=this.getStack(),V=!R||R.members.length<=1,O=!!(x&&!V&&this.options.crossfade===!0&&!this.path.some(CU));this.animationProgress=0;let F;this.mixTargetDelta=H=>{const Y=H/1e3;gC(_.x,l.x,Y),gC(_.y,l.y,Y),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wf(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bU(this.relativeTarget,this.relativeTargetOrigin,E,Y),F&&lU(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Bt()),Ni(F,this.relativeTarget)),x&&(this.animationValues=p,nU(p,d,this.latestValues,Y,O,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{rp.hasAnimatedSinceResize=!0,this.currentAnimation=QO(0,hC,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:p}=l;if(!(!c||!f||!d)){if(this!==l&&this.layout&&d&&XM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Bt();const _=gi(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+_;const E=gi(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+E}Ni(c,f),uu(c,p),Ef(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new uU),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&Xy("z",l,d,this.animationValues);for(let p=0;p<Qy.length;p++)Xy(`rotate${Qy[p]}`,l,d,this.animationValues),Xy(`skew${Qy[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}getProjectionStyles(l){var c,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fU;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=sp(l==null?void 0:l.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=sp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Pa(this.latestValues)&&(x.transform=p?p({},""):"none",this.hasProjected=!1),x}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),d.transform=cU(this.projectionDeltaWithTransform,this.treeScale,E),p&&(d.transform=p(E,d.transform));const{x:S,y:A}=this.projectionDelta;d.transformOrigin=`${S.origin*100}% ${A.origin*100}% 0`,_.animationValues?d.opacity=_===this?(f=(c=E.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:d.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const x in Sp){if(E[x]===void 0)continue;const{correct:R,applyTo:V}=Sp[x],O=d.transform==="none"?E[x]:R(E[x],_);if(V){const F=V.length;for(let H=0;H<F;H++)d[V[H]]=O}else d[x]=O}return this.options.layoutId&&(d.pointerEvents=_===this?sp(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(pC),this.root.sharedNodes.clear()}}}function hU(t){t.updateLayout()}function pU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=t.layout,{animationType:r}=t.options,l=n.source!==t.layout.source;r==="size"?Vi(_=>{const E=l?n.measuredBox[_]:n.layoutBox[_],S=gi(E);E.min=i[_].min,E.max=E.min+S}):XM(r,n.layoutBox,i)&&Vi(_=>{const E=l?n.measuredBox[_]:n.layoutBox[_],S=gi(i[_]);E.max=E.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+S)});const c=au();Ef(c,i,n.layoutBox);const f=au();l?Ef(f,t.applyTransform(s,!0),n.measuredBox):Ef(f,i,n.layoutBox);const d=!KM(c);let p=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:S}=_;if(E&&S){const A=Bt();wf(A,n.layoutBox,E.layoutBox);const x=Bt();wf(x,i,S.layoutBox),JM(A,x)||(p=!0),_.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=A,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:f,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function mU(t){hf&&Da.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yU(t){t.clearSnapshot()}function pC(t){t.clearMeasurements()}function vU(t){t.isLayoutDirty=!1}function _U(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function mC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TU(t){t.resolveTargetDelta()}function EU(t){t.calcProjection()}function wU(t){t.resetSkewAndRotation()}function SU(t){t.removeLeadSnapshot()}function gC(t,e,n){t.translate=xt(e.translate,0,n),t.scale=xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yC(t,e,n,i){t.min=xt(e.min,n.min,i),t.max=xt(e.max,n.max,i)}function bU(t,e,n,i){yC(t.x,e.x,n.x,i),yC(t.y,e.y,n.y,i)}function CU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const AU={duration:.45,ease:[.4,0,.1,1]},vC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_C=vC("applewebkit/")&&!vC("chrome/")?Math.round:pi;function TC(t){t.min=_C(t.min),t.max=_C(t.max)}function xU(t){TC(t.x),TC(t.y)}function XM(t,e,n){return t==="position"||t==="preserve-aspect"&&!MO(fC(e),fC(n),.2)}function RU(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const IU=QM({attachResizeListener:(t,e)=>Vf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jy={current:void 0},jM=QM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!jy.current){const t=new IU({});t.mount(window),t.setOptions({layoutScroll:!0}),jy.current=t}return jy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MU={pan:{Feature:YO},drag:{Feature:$O,ProjectionNode:jM,MeasureLayout:HM}};function EC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&St.postRender(()=>r(e,ed(e)))}class PU extends Gr{mount(){const{current:e}=this.node;e&&(this.unmount=DV(e,n=>(EC(this.node,n,"Start"),i=>EC(this.node,i,"End"))))}unmount(){}}class DU extends Gr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zf(Vf(this.node.current,"focus",()=>this.onFocus()),Vf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wC(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&St.postRender(()=>r(e,ed(e)))}class NU extends Gr{mount(){const{current:e}=this.node;e&&(this.unmount=LV(e,n=>(wC(this.node,n,"Start"),(i,{success:s})=>wC(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jv=new WeakMap,Zy=new WeakMap,kU=t=>{const e=Jv.get(t.target);e&&e(t)},VU=t=>{t.forEach(kU)};function LU({root:t,...e}){const n=t||document;Zy.has(n)||Zy.set(n,{});const i=Zy.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(VU,{root:t,...e})),i[s]}function OU(t,e,n){const i=LU(e);return Jv.set(t,n),i.observe(t),()=>{Jv.delete(t),i.unobserve(t)}}const UU={some:0,all:1};class zU extends Gr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:UU[s]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:_}=this.node.getProps(),E=d?p:_;E&&E(f)};return OU(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BU(e,n))&&this.startObserver()}unmount(){}}function BU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const FU={inView:{Feature:zU},tap:{Feature:NU},focus:{Feature:DU},hover:{Feature:PU}},qU={layout:{ProjectionNode:jM,MeasureLayout:HM}},Wv={current:null},ZM={current:!1};function GU(){if(ZM.current=!0,!!$_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wv.current=t.matches;t.addListener(e),e()}else Wv.current=!1}const HU=[...SM,An,kr],$U=t=>HU.find(wM(t)),SC=new WeakMap;function YU(t,e,n){for(const i in e){const s=e[i],r=n[i];if(Mn(s))t.addValue(i,s);else if(Mn(r))t.addValue(i,Nf(s,{owner:t}));else if(r!==s)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(i);t.addValue(i,Nf(l!==void 0?l:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const bC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KU{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=T0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Os.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,St.render(this.render,!1,!0))};const{latestValues:f,renderState:d,onUpdate:p}=l;this.onUpdate=p,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=lm(n),this.isVariantNode=PI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const S in E){const A=E[S];f[S]!==void 0&&Mn(A)&&A.set(f[S],!1)}}mount(e){this.current=e,SC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),ZM.current||GU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){SC.delete(this.current),this.projection&&this.projection.unmount(),Nr(this.notifyUpdate),Nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=il.has(e),s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&St.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),r(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Mu){const n=Mu[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<bC.length;i++){const s=bC[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,l=e[r];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=YU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Nf(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(TM(s)||fM(s))?s=parseFloat(s):!$U(s)&&kr.test(n)&&(s=yM(e,n)),this.setBaseTarget(e,Mn(s)?s.get():s)),Mn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const l=Z_(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(s=l[e])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Mn(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new h0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class e1 extends KU{constructor(){super(...arguments),this.KeyframeResolver=bM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function JU(t){return window.getComputedStyle(t)}class WU extends e1{constructor(){super(...arguments),this.type="html",this.renderInstance=BI}readValueFromInstance(e,n){if(il.has(n)){const i=_0(n);return i&&i.default||0}else{const i=JU(e),s=(OI(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qM(e,n)}build(e,n,i){n0(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return r0(e,n,i)}}class QU extends e1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(il.has(n)){const i=_0(n);return i&&i.default||0}return n=FI.has(n)?n:Q_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return HI(e,n,i)}build(e,n,i){i0(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,s){qI(e,n,i,s)}mount(e){this.isSVGTag=o0(e.tagName),super.mount(e)}}const XU=(t,e)=>j_(t)?new QU(e):new WU(e,{allowProjection:t!==ie.Fragment}),jU=CV({...EO,...FU,...MU,...qU},XU),Pn=B2(jU);function ZU(t){t.values.forEach(e=>e.stop())}function Qv(t,e){[...e].reverse().forEach(i=>{const s=t.getVariant(i);s&&p0(t,s),t.variantChildren&&t.variantChildren.forEach(r=>{Qv(r,e)})})}function e4(t,e){if(Array.isArray(e))return Qv(t,e);if(typeof e=="string")return Qv(t,[e]);p0(t,e)}function t4(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,i){const s=[];return t.forEach(r=>{s.push(NM(r,n,{transitionOverride:i}))}),Promise.all(s)},set(n){return t.forEach(i=>{e4(i,n)})},stop(){t.forEach(n=>{ZU(n)})},mount(){return()=>{e.stop()}}};return e}function n4(){const t=sm(t4);return Y_(t.mount,[]),t}const i4=n4,s4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),P.jsx("path",{d:"M12 12v9"}),P.jsx("path",{d:"m16 16-4-4-4 4"})]}),o4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),P.jsx("path",{d:"M3 3v5h5"})]}),ap=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),P.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[P.jsx("circle",{cx:"12",cy:"12",r:"2"}),P.jsx("circle",{cx:"12",cy:"5",r:"2"}),P.jsx("circle",{cx:"12",cy:"19",r:"2"})]}),a4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M3 6h18"}),P.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),P.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),P.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),l4=t=>P.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:P.jsx("path",{d:"m15 18-6-6 6-6"})}),u4=t=>P.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:P.jsx("path",{d:"m9 18 6-6-6-6"})}),t1=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),c4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),P.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),f4=t=>P.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:P.jsx("path",{d:"m18 15-6-6-6 6"})}),d4=t=>P.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:P.jsx("path",{d:"m6 9 6 6 6-6"})}),h4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),P.jsx("polyline",{points:"7 10 12 15 17 10"}),P.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),p4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),P.jsx("polyline",{points:"16 6 12 2 8 6"}),P.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),m4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M6 3h12l4 6-10 13L2 9Z"}),P.jsx("path",{d:"M12 22 2 9l10-6 10 6"}),P.jsx("path",{d:"m2 9 10 13"})]}),g4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),P.jsx("polyline",{points:"10 17 15 12 10 7"}),P.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),y4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),P.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),v4=t=>P.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:P.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),_4=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),P.jsx("polyline",{points:"16 17 21 12 16 7"}),P.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),n1=t=>P.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[P.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),P.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),La="generated",T4="pointerdown",E4="pointerup",Xv="pointerleave",w4="pointerout",Ka="pointermove",S4="touchstart",CC="touchend",b4="touchmove",C4="touchcancel",A4="resize",x4="visibilitychange",zi="tsParticles - Error",Sr=100,sn=.5,Dn=1e3,Rn={x:0,y:0,z:0},Gh={a:1,b:0,c:0,d:1},Du="random",lp="mid",Nn=2,R4=Math.PI*Nn,ev=60,i1="true",AC="false",tv="canvas",xC=0,vo=2,RC=4,I4=1,IC=1,MC=1,M4=4,s1=1,up=255,Oa=360,jv=100,Zv=100,PC=0,e_=0,P4=60,D4=0,Ip=.25,DC=sn+Ip,NC=0,N4=1,k4=0,V4=0,L4=1,b0=1,O4=1,kC=1,Mp=0,o1=1,U4=0,z4=120,B4=0,F4=0,q4=1e4,G4=0,H4=1,Pp=0,r1=1,$4=1,Y4=0,VC=1,K4=0,J4=0,LC=-Ip,OC=1.5,UC=0,W4=1,Q4=0,t_=0,a1=1,X4=1,Dp=1,j4=500,zC=50,Z4=0,n_=1,l1=0,BC=1,ez=0,Aa=255,nv=3,iv=6,tz=1,nz=1,iz=0,sz=0,oz=0,rz=0;var Tn;(function(t){t.bottom="bottom",t.bottomLeft="bottom-left",t.bottomRight="bottom-right",t.left="left",t.none="none",t.right="right",t.top="top",t.topLeft="top-left",t.topRight="top-right",t.outside="outside",t.inside="inside"})(Tn||(Tn={}));function u1(t){return typeof t=="boolean"}function Vr(t){return typeof t=="string"}function Lr(t){return typeof t=="number"}function cu(t){return typeof t=="object"&&t!==null}function Js(t){return Array.isArray(t)}function fe(t){return t==null}class fi{constructor(e,n,i){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!Lr(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:Rn.z}else if(e!==void 0&&n!==void 0)this.x=e,this.y=n,this.z=i??Rn.z;else throw new Error(`${zi} Vector3d not initialized correctly`)}static get origin(){return fi.create(Rn.x,Rn.y,Rn.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return fi.create(e.x,e.y,e.z)}static create(e,n,i){return new fi(e,n,i)}add(e){return fi.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return fi.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return fi.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**vo+this.y**vo}mult(e){return fi.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=Pp&&this.multTo(s1/e)}rotate(e){return fi.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),Rn.z)}setTo(e){this.x=e.x,this.y=e.y;const n=e;this.z=n.z?n.z:Rn.z}sub(e){return fi.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class dn extends fi{constructor(e,n){super(e,n,Rn.z)}static get origin(){return dn.create(Rn.x,Rn.y)}static clone(e){return dn.create(e.x,e.y)}static create(e,n){return new dn(e,n)}}let az=Math.random;const c1={nextFrame:t=>requestAnimationFrame(t),cancel:t=>cancelAnimationFrame(t)};function mt(){return Bi(az(),0,1-Number.EPSILON)}function lz(t){return c1.nextFrame(t)}function uz(t){c1.cancel(t)}function Bi(t,e,n){return Math.min(Math.max(t,e),n)}function sv(t,e,n,i){return Math.floor((t*n+e*i)/(n+i))}function di(t){const e=Vs(t),n=0;let i=fm(t);return e===i&&(i=n),mt()*(e-i)+i}function we(t){return Lr(t)?t:di(t)}function fm(t){return Lr(t)?t:t.min}function Vs(t){return Lr(t)?t:t.max}function it(t,e){if(t===e||e===void 0&&Lr(t))return t;const n=fm(t),i=Vs(t);return e!==void 0?{min:Math.min(n,e),max:Math.max(i,e)}:it(n,i)}function Hn(t,e){const n=t.x-e.x,i=t.y-e.y,s=2;return{dx:n,dy:i,distance:Math.sqrt(n**s+i**s)}}function mi(t,e){return Hn(t,e).distance}function xr(t){return t*Math.PI/180}function cz(t,e,n){if(Lr(t))return xr(t);switch(t){case Tn.top:return-Math.PI*sn;case Tn.topRight:return-Math.PI*Ip;case Tn.right:return D4;case Tn.bottomRight:return Math.PI*Ip;case Tn.bottom:return Math.PI*sn;case Tn.bottomLeft:return Math.PI*DC;case Tn.left:return Math.PI;case Tn.topLeft:return-Math.PI*DC;case Tn.inside:return Math.atan2(n.y-e.y,n.x-e.x);case Tn.outside:return Math.atan2(e.y-n.y,e.x-n.x);default:return mt()*R4}}function fz(t){const e=dn.origin;return e.length=1,e.angle=t,e}function FC(t,e,n,i){return dn.create(t.x*(n-i)/(n+i)+e.x*Nn*i/(n+i),t.y)}function dz(t){var e,n;return{x:((e=t.position)==null?void 0:e.x)??mt()*t.size.width,y:((n=t.position)==null?void 0:n.y)??mt()*t.size.height}}function f1(t){return t?t.endsWith("%")?parseFloat(t)/Sr:parseFloat(t):1}var Ua;(function(t){t.auto="auto",t.increase="increase",t.decrease="decrease",t.random="random"})(Ua||(Ua={}));var Zt;(function(t){t.increasing="increasing",t.decreasing="decreasing"})(Zt||(Zt={}));var Ja;(function(t){t.none="none",t.max="max",t.min="min"})(Ja||(Ja={}));var We;(function(t){t.bottom="bottom",t.left="left",t.right="right",t.top="top"})(We||(We={}));var Nu;(function(t){t.precise="precise",t.percent="percent"})(Nu||(Nu={}));var mu;(function(t){t.max="max",t.min="min",t.random="random"})(mu||(mu={}));const hz={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function Wa(){return hz}function pz(t){const e=new Map;return(...n)=>{const i=JSON.stringify(n);if(e.has(i))return e.get(i);const s=t(...n);return e.set(i,s),s}}function qC(t){const e={bounced:!1},{pSide:n,pOtherSide:i,rectSide:s,rectOtherSide:r,velocity:l,factor:c}=t;return i.min<r.min||i.min>r.max||i.max<r.min||i.max>r.max||(n.max>=s.min&&n.max<=(s.max+s.min)*sn&&l>NC||n.min<=s.max&&n.min>(s.max+s.min)*sn&&l<NC)&&(e.velocity=l*-c,e.bounced=!0),e}function mz(t,e){const n=yi(e,i=>t.matches(i));return Js(n)?n.some(i=>i):n}function Qa(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function gz(){return!Qa()&&typeof matchMedia<"u"}function d1(t){if(gz())return matchMedia(t)}function yz(t){if(!(Qa()||typeof IntersectionObserver>"u"))return new IntersectionObserver(t)}function vz(t){if(!(Qa()||typeof MutationObserver>"u"))return new MutationObserver(t)}function qt(t,e){return t===e||Js(e)&&e.indexOf(t)>-1}async function GC(t,e){try{await document.fonts.load(`${e??"400"} 36px '${t??"Verdana"}'`)}catch{}}function _z(t){return Math.floor(mt()*t.length)}function dm(t,e,n=!0){return t[e!==void 0&&n?e%t.length:_z(t)]}function C0(t,e,n,i,s){return Tz(td(t,i??0),e,n,s)}function Tz(t,e,n,i){let s=!0;return(!i||i===We.bottom)&&(s=t.top<e.height+n.x),s&&(!i||i===We.left)&&(s=t.right>n.x),s&&(!i||i===We.right)&&(s=t.left<e.width+n.y),s&&(!i||i===We.top)&&(s=t.bottom>n.y),s}function td(t,e){return{bottom:t.y+e,left:t.x-e,right:t.x+e,top:t.y-e}}function Ln(t,...e){for(const n of e){if(n==null)continue;if(!cu(n)){t=n;continue}const i=Array.isArray(n);i&&(cu(t)||!t||!Array.isArray(t))?t=[]:!i&&(cu(t)||!t||Array.isArray(t))&&(t={});for(const s in n){if(s==="__proto__")continue;const r=n,l=r[s],c=t;c[s]=cu(l)&&Array.isArray(l)?l.map(f=>Ln(c[s],f)):Ln(c[s],l)}}return t}function A0(t,e){return!!m1(e,n=>n.enable&&qt(t,n.mode))}function x0(t,e,n){yi(e,i=>{const s=i.mode;i.enable&&qt(t,s)&&Ez(i,n)})}function Ez(t,e){const n=t.selectors;yi(n,i=>{e(i,t)})}function h1(t,e){if(!(!e||!t))return m1(t,n=>mz(e,n.selectors))}function i_(t){return{position:t.getPosition(),radius:t.getRadius(),mass:t.getMass(),velocity:t.velocity,factor:dn.create(we(t.options.bounce.horizontal.value),we(t.options.bounce.vertical.value))}}function p1(t,e){const{x:n,y:i}=t.velocity.sub(e.velocity),[s,r]=[t.position,e.position],{dx:l,dy:c}=Hn(r,s);if(n*l+i*c<0)return;const d=-Math.atan2(c,l),p=t.mass,_=e.mass,E=t.velocity.rotate(d),S=e.velocity.rotate(d),A=FC(E,S,p,_),x=FC(S,E,p,_),R=A.rotate(-d),V=x.rotate(-d);t.velocity.x=R.x*t.factor.x,t.velocity.y=R.y*t.factor.y,e.velocity.x=V.x*e.factor.x,e.velocity.y=V.y*e.factor.y}function wz(t,e){const n=t.getPosition(),i=t.getRadius(),s=td(n,i),r=t.options.bounce,l=qC({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:t.velocity.x,factor:we(r.horizontal.value)});l.bounced&&(l.velocity!==void 0&&(t.velocity.x=l.velocity),l.position!==void 0&&(t.position.x=l.position));const c=qC({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:t.velocity.y,factor:we(r.vertical.value)});c.bounced&&(c.velocity!==void 0&&(t.velocity.y=c.velocity),c.position!==void 0&&(t.position.y=c.position))}function yi(t,e){return Js(t)?t.map((i,s)=>e(i,s)):e(t,0)}function Oi(t,e,n){return Js(t)?dm(t,e,n):t}function m1(t,e){return Js(t)?t.find((i,s)=>e(i,s)):e(t,0)?t:void 0}function g1(t,e){const n=t.value,i=t.animation,s={delayTime:we(i.delay)*Dn,enable:i.enable,value:we(t.value)*e,max:Vs(n)*e,min:fm(n)*e,loops:0,maxLoops:we(i.count),time:0},r=1;if(i.enable){switch(s.decay=r-we(i.decay),i.mode){case Ua.increase:s.status=Zt.increasing;break;case Ua.decrease:s.status=Zt.decreasing;break;case Ua.random:s.status=mt()>=sn?Zt.increasing:Zt.decreasing;break}const l=i.mode===Ua.auto;switch(i.startValue){case mu.min:s.value=s.min,l&&(s.status=Zt.increasing);break;case mu.max:s.value=s.max,l&&(s.status=Zt.decreasing);break;case mu.random:default:s.value=di(s),l&&(s.status=mt()>=sn?Zt.increasing:Zt.decreasing);break}}return s.initialValue=s.value,s}function Sz(t,e){if(!(t.mode===Nu.percent)){const{mode:s,...r}=t;return r}return"x"in t?{x:t.x/Sr*e.width,y:t.y/Sr*e.height}:{width:t.width/Sr*e.width,height:t.height/Sr*e.height}}function y1(t,e){return Sz(t,e)}function bz(t,e,n,i,s){switch(e){case Ja.max:n>=s&&t.destroy();break;case Ja.min:n<=i&&t.destroy();break}}function R0(t,e,n,i,s){if(t.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const p=(e.velocity??0)*s.factor,_=e.min,E=e.max,S=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=s.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case Zt.increasing:e.value>=E?(n?e.status=Zt.decreasing:e.value-=E,e.loops||(e.loops=0),e.loops++):e.value+=p;break;case Zt.decreasing:e.value<=_?(n?e.status=Zt.increasing:e.value+=E,e.loops||(e.loops=0),e.loops++):e.value-=p}e.velocity&&S!==1&&(e.velocity*=S),bz(t,i,e.value,_,E),t.destroyed||(e.value=Bi(e.value,_,E))}}function Cz(t){var n,i,s,r;const e=document.createElement("div").style;if(!t)return e;for(const l in t){const c=t[l];if(!Object.prototype.hasOwnProperty.call(t,l)||fe(c))continue;const f=(n=t.getPropertyValue)==null?void 0:n.call(t,c);if(!f)continue;const d=(i=t.getPropertyPriority)==null?void 0:i.call(t,c);d?(r=e.setProperty)==null||r.call(e,c,f,d):(s=e.setProperty)==null||s.call(e,c,f)}return e}function Az(t){const e=document.createElement("div").style,n=10,i={width:"100%",height:"100%",margin:"0",padding:"0",borderWidth:"0",position:"fixed",zIndex:t.toString(n),"z-index":t.toString(n),top:"0",left:"0"};for(const s in i){const r=i[s];e.setProperty(s,r)}return e}const xz=pz(Az);var s_;(function(t){t.darken="darken",t.enlighten="enlighten"})(s_||(s_={}));function Rz(t,e){if(e){for(const n of t.colorManagers.values())if(e.startsWith(n.stringPrefix))return n.parseString(e)}}function rs(t,e,n,i=!0){if(!e)return;const s=Vr(e)?{value:e}:e;if(Vr(s.value))return v1(t,s.value,n,i);if(Js(s.value))return rs(t,{value:dm(s.value,n,i)});for(const r of t.colorManagers.values()){const l=r.handleRangeColor(s);if(l)return l}}function v1(t,e,n,i=!0){if(!e)return;const s=Vr(e)?{value:e}:e;if(Vr(s.value))return s.value===Du?T1():Iz(t,s.value);if(Js(s.value))return v1(t,{value:dm(s.value,n,i)});for(const r of t.colorManagers.values()){const l=r.handleColor(s);if(l)return l}}function Lf(t,e,n,i=!0){const s=rs(t,e,n,i);return s?_1(s):void 0}function _1(t){const e=t.r/up,n=t.g/up,i=t.b/up,s=Math.max(e,n,i),r=Math.min(e,n,i),l={h:PC,l:(s+r)*sn,s:e_};return s!==r&&(l.s=l.l<sn?(s-r)/(s+r):(s-r)/(Nn-s-r),l.h=e===s?(n-i)/(s-r):l.h=n===s?Nn+(i-e)/(s-r):Nn*Nn+(e-n)/(s-r)),l.l*=Zv,l.s*=jv,l.h*=P4,l.h<PC&&(l.h+=Oa),l.h>=Oa&&(l.h-=Oa),l}function Iz(t,e){return Rz(t,e)}function ku(t){const e=(t.h%Oa+Oa)%Oa,n=Math.max(e_,Math.min(jv,t.s)),i=Math.max(ez,Math.min(Zv,t.l)),s=e/Oa,r=n/jv,l=i/Zv;if(n===e_){const A=Math.round(l*Aa);return{r:A,g:A,b:A}}const c=(A,x,R)=>{if(R<0&&R++,R>1&&R--,R*iv<1)return A+(x-A)*iv*R;if(R*Nn<1)return x;if(R*nv<1*Nn){const F=Nn/nv;return A+(x-A)*(F-R)*iv}return A},f=l<sn?l*(tz+r):l+r-l*r,d=Nn*l-f,p=nz/nv,_=Math.min(Aa,Aa*c(d,f,s+p)),E=Math.min(Aa,Aa*c(d,f,s)),S=Math.min(Aa,Aa*c(d,f,s-p));return{r:Math.round(_),g:Math.round(E),b:Math.round(S)}}function Mz(t){const e=ku(t);return{a:t.a,b:e.b,g:e.g,r:e.r}}function T1(t){const e=iz,n=up+n_;return{b:Math.floor(di(it(e,n))),g:Math.floor(di(it(e,n))),r:Math.floor(di(it(e,n)))}}function Co(t,e){return`rgba(${t.r}, ${t.g}, ${t.b}, ${e??b0})`}function Of(t,e){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${e??b0})`}function I0(t,e,n,i){let s=t,r=e;return s.r===void 0&&(s=ku(t)),r.r===void 0&&(r=ku(e)),{b:sv(s.b,r.b,n,i),g:sv(s.g,r.g,n,i),r:sv(s.r,r.r,n,i)}}function o_(t,e,n){if(n===Du)return T1();if(n===lp){const i=t.getFillColor()??t.getStrokeColor(),s=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(i&&s&&e)return I0(i,s,t.getRadius(),e.getRadius());{const r=i??s;if(r)return ku(r)}}else return n}function E1(t,e,n,i){const s=Vr(e)?e:e.value;return s===Du?i?rs(t,{value:s}):n?Du:lp:s===lp?lp:rs(t,{value:s})}function HC(t){return t!==void 0?{h:t.h.value,s:t.s.value,l:t.l.value}:void 0}function w1(t,e,n){const i={h:{enable:!1,value:t.h},s:{enable:!1,value:t.s},l:{enable:!1,value:t.l}};return e&&(ov(i.h,e.h,n),ov(i.s,e.s,n),ov(i.l,e.l,n)),i}function ov(t,e,n){t.enable=e.enable,t.enable?(t.velocity=we(e.speed)/Sr*n,t.decay=r1-we(e.decay),t.status=Zt.increasing,t.loops=oz,t.maxLoops=we(e.count),t.time=rz,t.delayTime=we(e.delay)*Dn,e.sync||(t.velocity*=mt(),t.value*=mt()),t.initialValue=t.value,t.offset=it(e.offset)):t.velocity=sz}function rv(t,e,n,i){if(!t||!t.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=i.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const p=t.offset?di(t.offset):0,_=(t.velocity??0)*i.factor+p*3.6,E=t.decay??1,S=Vs(e),A=fm(e);!n||t.status===Zt.increasing?(t.value+=_,t.value>S&&(t.loops||(t.loops=0),t.loops++,n?t.status=Zt.decreasing:t.value-=S)):(t.value-=_,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status=Zt.increasing)),t.velocity&&E!==1&&(t.velocity*=E),t.value=Bi(t.value,A,S)}function S1(t,e){if(!t)return;const{h:n,s:i,l:s}=t,r={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};n&&rv(n,r.h,!1,e),i&&rv(i,r.s,!0,e),s&&rv(s,r.l,!0,e)}function Sf(t,e,n){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.closePath()}function Pz(t,e,n){t.fillStyle=n??"rgba(0,0,0,0)",t.fillRect(Rn.x,Rn.y,e.width,e.height)}function Dz(t,e,n,i){n&&(t.globalAlpha=i,t.drawImage(n,Rn.x,Rn.y,e.width,e.height),t.globalAlpha=1)}function av(t,e){t.clearRect(Rn.x,Rn.y,e.width,e.height)}function Nz(t){const{container:e,context:n,particle:i,delta:s,colorStyles:r,backgroundMask:l,composite:c,radius:f,opacity:d,shadow:p,transform:_}=t,E=i.getPosition(),S=i.rotation+(i.pathRotation?i.velocity.angle:Z4),A={sin:Math.sin(S),cos:Math.cos(S)},x=!!S,R={a:A.cos*(_.a??Gh.a),b:x?A.sin*(_.b??n_):_.b??Gh.b,c:x?-A.sin*(_.c??n_):_.c??Gh.c,d:A.cos*(_.d??Gh.d)};n.setTransform(R.a,R.b,R.c,R.d,E.x,E.y),l&&(n.globalCompositeOperation=c);const V=i.shadowColor;p.enable&&V&&(n.shadowBlur=p.blur,n.shadowColor=Co(V),n.shadowOffsetX=p.offset.x,n.shadowOffsetY=p.offset.y),r.fill&&(n.fillStyle=r.fill);const O=i.strokeWidth??l1;n.lineWidth=O,r.stroke&&(n.strokeStyle=r.stroke);const F={container:e,context:n,particle:i,radius:f,opacity:d,delta:s,transformData:R,strokeWidth:O};Vz(F),Lz(F),kz(F),n.globalCompositeOperation="source-over",n.resetTransform()}function kz(t){const{container:e,context:n,particle:i,radius:s,opacity:r,delta:l,transformData:c}=t;if(!i.effect)return;const f=e.effectDrawers.get(i.effect);f&&f.draw({context:n,particle:i,radius:s,opacity:r,delta:l,pixelRatio:e.retina.pixelRatio,transformData:{...c}})}function Vz(t){const{container:e,context:n,particle:i,radius:s,opacity:r,delta:l,strokeWidth:c,transformData:f}=t;if(!i.shape)return;const d=e.shapeDrawers.get(i.shape);d&&(n.beginPath(),d.draw({context:n,particle:i,radius:s,opacity:r,delta:l,pixelRatio:e.retina.pixelRatio,transformData:{...f}}),i.shapeClose&&n.closePath(),c>l1&&n.stroke(),i.shapeFill&&n.fill())}function Lz(t){const{container:e,context:n,particle:i,radius:s,opacity:r,delta:l,transformData:c}=t;if(!i.shape)return;const f=e.shapeDrawers.get(i.shape);f!=null&&f.afterDraw&&f.afterDraw({context:n,particle:i,radius:s,opacity:r,delta:l,pixelRatio:e.retina.pixelRatio,transformData:{...c}})}function Oz(t,e,n){e.draw&&e.draw(t,n)}function Uz(t,e,n,i){e.drawParticle&&e.drawParticle(t,n,i)}function zz(t,e,n){return{h:t.h,s:t.s,l:t.l+(e===s_.darken?-BC:BC)*n}}function Bz(t,e,n){const i=e[n];i!==void 0&&(t[n]=(t[n]??N4)*i)}function $C(t,e,n=!1){if(!e)return;const i=t;if(!i)return;const s=i.style;if(!s)return;const r=new Set;for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&r.add(s[l]);for(const l in e)Object.prototype.hasOwnProperty.call(e,l)&&r.add(e[l]);for(const l of r){const c=e.getPropertyValue(l);c?s.setProperty(l,c,n?"important":""):s.removeProperty(l)}}let Fz=class{constructor(e,n){this.container=e,this._applyPostDrawUpdaters=r=>{var l;for(const c of this._postDrawUpdaters)(l=c.afterDraw)==null||l.call(c,r)},this._applyPreDrawUpdaters=(r,l,c,f,d,p)=>{var _;for(const E of this._preDrawUpdaters){if(E.getColorStyles){const{fill:S,stroke:A}=E.getColorStyles(l,r,c,f);S&&(d.fill=S),A&&(d.stroke=A)}if(E.getTransformValues){const S=E.getTransformValues(l);for(const A in S)Bz(p,S,A)}(_=E.beforeDraw)==null||_.call(E,l)}},this._applyResizePlugins=()=>{var r;for(const l of this._resizePlugins)(r=l.resize)==null||r.call(l)},this._getPluginParticleColors=r=>{let l,c;for(const f of this._colorPlugins)if(!l&&f.particleFillColor&&(l=Lf(this._engine,f.particleFillColor(r))),!c&&f.particleStrokeColor&&(c=Lf(this._engine,f.particleStrokeColor(r))),l&&c)break;return[l,c]},this._initCover=async()=>{const r=this.container.actualOptions,l=r.backgroundMask.cover,c=l.color;if(c){const f=rs(this._engine,c);if(f){const d={...f,a:l.opacity};this._coverColorStyle=Co(d,d.a)}}else await new Promise((f,d)=>{if(!l.image)return;const p=document.createElement("img");p.addEventListener("load",()=>{this._coverImage={image:p,opacity:l.opacity},f()}),p.addEventListener("error",_=>{d(_.error)}),p.src=l.image})},this._initStyle=()=>{const r=this.element,l=this.container.actualOptions;if(r){this._fullScreen?this._setFullScreenStyle():this._resetOriginalStyle();for(const c in l.style){if(!c||!l.style||!Object.prototype.hasOwnProperty.call(l.style,c))continue;const f=l.style[c];f&&r.style.setProperty(c,f,"important")}}},this._initTrail=async()=>{const r=this.container.actualOptions,l=r.particles.move.trail,c=l.fill;if(!l.enable)return;const f=s1/l.length;if(c.color){const d=rs(this._engine,c.color);if(!d)return;this._trailFill={color:{...d},opacity:f}}else await new Promise((d,p)=>{if(!c.image)return;const _=document.createElement("img");_.addEventListener("load",()=>{this._trailFill={image:_,opacity:f},d()}),_.addEventListener("error",E=>{p(E.error)}),_.src=c.image})},this._paintBase=r=>{this.draw(l=>Pz(l,this.size,r))},this._paintImage=(r,l)=>{this.draw(c=>Dz(c,this.size,r,l))},this._repairStyle=()=>{const r=this.element;if(!r)return;this._safeMutationObserver(c=>c.disconnect()),this._initStyle(),this.initBackground();const l=this._pointerEvents;r.style.pointerEvents=l,r.setAttribute("pointer-events",l),this._safeMutationObserver(c=>{!r||!(r instanceof Node)||c.observe(r,{attributes:!0})})},this._resetOriginalStyle=()=>{const r=this.element,l=this._originalStyle;!r||!l||$C(r,l,!0)},this._safeMutationObserver=r=>{this._mutationObserver&&r(this._mutationObserver)},this._setFullScreenStyle=()=>{const r=this.element;r&&$C(r,xz(this.container.actualOptions.fullScreen.zIndex),!0)},this._engine=n,this._standardSize={height:0,width:0};const i=e.retina.pixelRatio,s=this._standardSize;this.size={height:s.height*i,width:s.width*i},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[],this._pointerEvents="none"}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,n=e.particles.move.trail,i=this._trailFill;e.backgroundMask.enable?this.paint():n.enable&&n.length>V4&&i?i.color?this._paintBase(Co(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):e.clear&&this.draw(s=>{av(s,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e==null||e.remove(),this.element=void 0}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const n=this._context;if(n)return e(n)}drawAsync(e){const n=this._context;if(n)return e(n)}drawParticle(e,n){if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=k4)return;const s=e.getFillColor(),r=e.getStrokeColor()??s;let[l,c]=this._getPluginParticleColors(e);l||(l=s),c||(c=r),!(!l&&!c)&&this.draw(f=>{var H;const d=this.container,p=d.actualOptions,_=e.options.zIndex,E=L4-e.zIndexFactor,S=E**_.opacityRate,A=e.bubble.opacity??((H=e.opacity)==null?void 0:H.value)??b0,x=e.strokeOpacity??A,R=A*S,V=x*S,O={},F={fill:l?Of(l,R):void 0};F.stroke=c?Of(c,V):F.fill,this._applyPreDrawUpdaters(f,e,i,R,F,O),Nz({container:d,context:f,particle:e,delta:n,colorStyles:F,backgroundMask:p.backgroundMask.enable,composite:p.backgroundMask.composite,radius:i*E**_.sizeRate,opacity:R,shadow:e.options.shadow,transform:O}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,n,i){this.draw(s=>Uz(s,e,n,i))}drawPlugin(e,n){this.draw(i=>Oz(i,e,n))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=vz(e=>{for(const n of e)n.type==="attributes"&&n.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),await this._initCover();try{await this._initTrail()}catch(e){Wa().error(e)}this.initBackground(),this._safeMutationObserver(e=>{!this.element||!(this.element instanceof Node)||e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,n=e.background,i=this.element;if(!i)return;const s=i.style;if(s){if(n.color){const r=rs(this._engine,n.color);s.backgroundColor=r?Co(r,n.opacity):""}else s.backgroundColor="";s.backgroundImage=n.image||"",s.backgroundPosition=n.position||"",s.backgroundRepeat=n.repeat||"",s.backgroundSize=n.size||""}}initPlugins(){this._resizePlugins=[];for(const e of this.container.plugins.values())e.resize&&this._resizePlugins.push(e),(e.particleFillColor??e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles??e.getTransformValues??e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&La in e.dataset?e.dataset[La]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=Cz(this.element.style);const n=this._standardSize;n.height=e.offsetHeight,n.width=e.offsetWidth;const i=this.container.retina.pixelRatio,s=this.size;e.height=s.height=n.height*i,e.width=s.width=n.width*i,this._context=this.element.getContext("2d"),this._safeMutationObserver(r=>r.disconnect()),this.container.retina.init(),this.initBackground(),this._safeMutationObserver(r=>{!this.element||!(this.element instanceof Node)||r.observe(this.element,{attributes:!0})})}paint(){const e=this.container.actualOptions;this.draw(n=>{e.backgroundMask.enable&&e.backgroundMask.cover?(av(n,this.size),this._coverImage?this._paintImage(this._coverImage.image,this._coverImage.opacity):this._coverColorStyle?this._paintBase(this._coverColorStyle):this._paintBase()):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,n=e.canvas._standardSize,i={width:this.element.offsetWidth,height:this.element.offsetHeight},s=e.retina.pixelRatio,r={width:i.width*s,height:i.height*s};if(i.height===n.height&&i.width===n.width&&r.height===this.element.height&&r.width===this.element.width)return!1;const l={...n};n.height=i.height,n.width=i.width;const c=this.size;return this.element.width=c.width=r.width,this.element.height=c.height=r.height,this.container.started&&e.particles.setResizeFactor({width:n.width/l.width,height:n.height/l.height}),!0}setPointerEvents(e){this.element&&(this._pointerEvents=e,this._repairStyle())}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>av(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,n=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),n&&await e.refresh()}};var gu;(function(t){t.canvas="canvas",t.parent="parent",t.window="window"})(gu||(gu={}));function ki(t,e,n,i,s){if(i){let r={passive:!0};u1(s)?r.capture=s:s!==void 0&&(r=s),t.addEventListener(e,n,r)}else{const r=s;t.removeEventListener(e,n,r)}}class qz{constructor(e){this.container=e,this._doMouseTouchClick=n=>{const i=this.container,s=i.actualOptions;if(this._canPush){const r=i.interactivity.mouse,l=r.position;if(!l)return;r.clickPosition={...l},r.clickTime=new Date().getTime();const c=s.interactivity.events.onClick;yi(c.mode,f=>this.container.handleClickMode(f))}n.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),j4)},this._handleThemeChange=n=>{const i=n,s=this.container,r=s.options,l=r.defaultThemes,c=i.matches?l.dark:l.light,f=r.themes.find(d=>d.name===c);f!=null&&f.default.auto&&s.loadTheme(c)},this._handleVisibilityChange=()=>{const n=this.container,i=n.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document!=null&&document.hidden?(n.pageHidden=!0,n.pause()):(n.pageHidden=!1,n.animationStatus?n.play(!0):n.draw(!0)))},this._handleWindowResize=()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout);const n=async()=>{const i=this.container.canvas;await(i==null?void 0:i.windowResize())};this._resizeTimeout=setTimeout(()=>void n(),this.container.actualOptions.interactivity.events.resize.delay*Dn)},this._manageInteractivityListeners=(n,i)=>{const s=this._handlers,r=this.container,l=r.actualOptions,c=r.interactivity.element;if(!c)return;const f=c,d=r.canvas;d.setPointerEvents(f===d.element?"initial":"none"),(l.interactivity.events.onHover.enable||l.interactivity.events.onClick.enable)&&(ki(c,Ka,s.mouseMove,i),ki(c,S4,s.touchStart,i),ki(c,b4,s.touchMove,i),l.interactivity.events.onClick.enable?(ki(c,CC,s.touchEndClick,i),ki(c,E4,s.mouseUp,i),ki(c,T4,s.mouseDown,i)):ki(c,CC,s.touchEnd,i),ki(c,n,s.mouseLeave,i),ki(c,C4,s.touchCancel,i))},this._manageListeners=n=>{const i=this._handlers,s=this.container,r=s.actualOptions,l=r.interactivity.detectsOn,c=s.canvas.element;let f=Xv;l===gu.window?(s.interactivity.element=window,f=w4):l===gu.parent&&c?s.interactivity.element=c.parentElement??c.parentNode:s.interactivity.element=c,this._manageMediaMatch(n),this._manageResize(n),this._manageInteractivityListeners(f,n),document&&ki(document,x4,i.visibilityChange,n,!1)},this._manageMediaMatch=n=>{const i=this._handlers,s=d1("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){ki(s,"change",i.themeChange,n);return}s.addListener!==void 0&&(n?s.addListener(i.oldThemeChange):s.removeListener(i.oldThemeChange))}},this._manageResize=n=>{const i=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){ki(window,A4,i.resize,n);return}const l=s.canvas.element;this._resizeObserver&&!n?(l&&this._resizeObserver.unobserve(l),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&n&&l&&(this._resizeObserver=new ResizeObserver(c=>{c.find(d=>d.target===l)&&this._handleWindowResize()}),this._resizeObserver.observe(l))},this._mouseDown=()=>{const{interactivity:n}=this.container;if(!n)return;const{mouse:i}=n;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=n=>{const i=this.container,s=i.actualOptions,{mouse:r}=i.interactivity;r.inside=!0;let l=!1;const c=r.position;if(!(!c||!s.interactivity.events.onClick.enable)){for(const f of i.plugins.values())if(f.clickPositionValid&&(l=f.clickPositionValid(c),l))break;l||this._doMouseTouchClick(n),r.clicking=!1}},this._mouseTouchFinish=()=>{const n=this.container.interactivity;if(!n)return;const i=n.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,n.status=Xv,i.inside=!1,i.clicking=!1},this._mouseTouchMove=n=>{const i=this.container,s=i.actualOptions,r=i.interactivity,l=i.canvas.element;if(!(r!=null&&r.element))return;r.mouse.inside=!0;let c;if(n.type.startsWith("pointer")){this._canPush=!0;const d=n;if(r.element===window){if(l){const p=l.getBoundingClientRect();c={x:d.clientX-p.left,y:d.clientY-p.top}}}else if(s.interactivity.detectsOn===gu.parent){const p=d.target,_=d.currentTarget;if(p&&_&&l){const E=p.getBoundingClientRect(),S=_.getBoundingClientRect(),A=l.getBoundingClientRect();c={x:d.offsetX+Nn*E.left-(S.left+A.left),y:d.offsetY+Nn*E.top-(S.top+A.top)}}else c={x:d.offsetX??d.clientX,y:d.offsetY??d.clientY}}else d.target===l&&(c={x:d.offsetX??d.clientX,y:d.offsetY??d.clientY})}else if(this._canPush=n.type!=="touchmove",l){const d=n,p=d.touches[d.touches.length-a1],_=l.getBoundingClientRect();c={x:p.clientX-(_.left??Mp),y:p.clientY-(_.top??Mp)}}const f=i.retina.pixelRatio;c&&(c.x*=f,c.y*=f),r.mouse.position=c,r.status=Ka},this._touchEnd=n=>{const i=n,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=n=>{const i=n,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchClick(n)},this._touchStart=n=>{const i=n,s=Array.from(i.changedTouches);for(const r of s)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(n)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:n=>this._mouseTouchMove(n),mouseUp:n=>this._mouseTouchClick(n),touchStart:n=>this._touchStart(n),touchMove:n=>this._mouseTouchMove(n),touchEnd:n=>this._touchEnd(n),touchCancel:n=>this._touchEnd(n),touchEndClick:n=>this._touchEndClick(n),visibilityChange:()=>this._handleVisibilityChange(),themeChange:n=>this._handleThemeChange(n),oldThemeChange:n=>this._handleThemeChange(n),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}var Gn;(function(t){t.configAdded="configAdded",t.containerInit="containerInit",t.particlesSetup="particlesSetup",t.containerStarted="containerStarted",t.containerStopped="containerStopped",t.containerDestroyed="containerDestroyed",t.containerPaused="containerPaused",t.containerPlay="containerPlay",t.containerBuilt="containerBuilt",t.particleAdded="particleAdded",t.particleDestroyed="particleDestroyed",t.particleRemoved="particleRemoved"})(Gn||(Gn={}));class On{constructor(){this.value=""}static create(e,n){const i=new On;return i.load(e),n!==void 0&&(Vr(n)||Js(n)?i.load({value:n}):i.load(n)),i}load(e){fe(e)||fe(e.value)||(this.value=e.value)}}class Gz{constructor(){this.color=new On,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){fe(e)||(e.color!==void 0&&(this.color=On.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Hz{constructor(){this.opacity=1}load(e){fe(e)||(e.color!==void 0&&(this.color=On.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.opacity!==void 0&&(this.opacity=e.opacity))}}class $z{constructor(){this.composite="destination-out",this.cover=new Hz,this.enable=!1}load(e){if(!fe(e)){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const n=e.cover,i=Vr(e.cover)?{color:e.cover}:e.cover;this.cover.load(n.color!==void 0||n.image!==void 0?n:{color:i})}e.enable!==void 0&&(this.enable=e.enable)}}}class Yz{constructor(){this.enable=!0,this.zIndex=0}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class Kz{constructor(){this.enable=!1,this.mode=[]}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}var Vu;(function(t){t.circle="circle",t.rectangle="rectangle"})(Vu||(Vu={}));class YC{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type=Vu.circle}load(e){fe(e)||(e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type))}}class Jz{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class Wz{constructor(){this.enable=!1,this.mode=[],this.parallax=new Jz}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class Qz{constructor(){this.delay=.5,this.enable=!0}load(e){fe(e)||(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class Xz{constructor(){this.onClick=new Kz,this.onDiv=new YC,this.onHover=new Wz,this.resize=new Qz}load(e){if(fe(e))return;this.onClick.load(e.onClick);const n=e.onDiv;n!==void 0&&(this.onDiv=yi(n,i=>{const s=new YC;return s.load(i),s})),this.onHover.load(e.onHover),this.resize.load(e.resize)}}class jz{constructor(e,n){this._engine=e,this._container=n}load(e){if(fe(e)||!this._container)return;const n=this._engine.interactors.get(this._container);if(n)for(const i of n)i.loadModeOptions&&i.loadModeOptions(this,e)}}class b1{constructor(e,n){this.detectsOn=gu.window,this.events=new Xz,this.modes=new jz(e,n)}load(e){if(fe(e))return;const n=e.detectsOn;n!==void 0&&(this.detectsOn=n),this.events.load(e.events),this.modes.load(e.modes)}}class Zz{load(e){fe(e)||(e.position&&(this.position={x:e.position.x??zC,y:e.position.y??zC,mode:e.position.mode??Nu.percent}),e.options&&(this.options=Ln({},e.options)))}}var za;(function(t){t.screen="screen",t.canvas="canvas"})(za||(za={}));class e3{constructor(){this.maxWidth=1/0,this.options={},this.mode=za.canvas}load(e){fe(e)||(fe(e.maxWidth)||(this.maxWidth=e.maxWidth),fe(e.mode)||(e.mode===za.screen?this.mode=za.screen:this.mode=za.canvas),fe(e.options)||(this.options=Ln({},e.options)))}}var vr;(function(t){t.any="any",t.dark="dark",t.light="light"})(vr||(vr={}));class t3{constructor(){this.auto=!1,this.mode=vr.any,this.value=!1}load(e){fe(e)||(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class n3{constructor(){this.name="",this.default=new t3}load(e){fe(e)||(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=Ln({},e.options)))}}class M0{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){fe(e)||(e.count!==void 0&&(this.count=it(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=it(e.speed)),e.decay!==void 0&&(this.decay=it(e.decay)),e.delay!==void 0&&(this.delay=it(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class P0 extends M0{constructor(){super(),this.mode=Ua.auto,this.startValue=mu.random}load(e){super.load(e),!fe(e)&&(e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class lv extends M0{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),!fe(e)&&e.offset!==void 0&&(this.offset=it(e.offset))}}class i3{constructor(){this.h=new lv,this.s=new lv,this.l=new lv}load(e){fe(e)||(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class Uf extends On{constructor(){super(),this.animation=new i3}static create(e,n){const i=new Uf;return i.load(e),n!==void 0&&(Vr(n)||Js(n)?i.load({value:n}):i.load(n)),i}load(e){if(super.load(e),fe(e))return;const n=e.animation;n!==void 0&&(n.enable!==void 0?this.animation.h.load(n):this.animation.load(e.animation))}}var yu;(function(t){t.absorb="absorb",t.bounce="bounce",t.destroy="destroy"})(yu||(yu={}));class s3{constructor(){this.speed=2}load(e){fe(e)||e.speed!==void 0&&(this.speed=e.speed)}}class o3{constructor(){this.enable=!0,this.retries=0}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class sl{constructor(){this.value=0}load(e){fe(e)||fe(e.value)||(this.value=it(e.value))}}class r3 extends sl{constructor(){super(),this.animation=new M0}load(e){if(super.load(e),fe(e))return;const n=e.animation;n!==void 0&&this.animation.load(n)}}class C1 extends r3{constructor(){super(),this.animation=new P0}load(e){super.load(e)}}class KC extends sl{constructor(){super(),this.value=1}}class A1{constructor(){this.horizontal=new KC,this.vertical=new KC}load(e){fe(e)||(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class a3{constructor(){this.absorb=new s3,this.bounce=new A1,this.enable=!1,this.maxSpeed=50,this.mode=yu.bounce,this.overlap=new o3}load(e){fe(e)||(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=it(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class l3{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(fe(e))return;const n=e.options;if(n!==void 0)for(const i in n){const s=n[i];s&&(this.options[i]=Ln(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class u3{constructor(){this.offset=0,this.value=90}load(e){fe(e)||(e.offset!==void 0&&(this.offset=it(e.offset)),e.value!==void 0&&(this.value=it(e.value)))}}class c3{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(!fe(e)&&(e.distance!==void 0&&(this.distance=it(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const n=e.rotate.x;n!==void 0&&(this.rotate.x=n);const i=e.rotate.y;i!==void 0&&(this.rotate.y=i)}}}class f3{constructor(){this.x=50,this.y=50,this.mode=Nu.percent,this.radius=0}load(e){fe(e)||(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class d3{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){fe(e)||(e.acceleration!==void 0&&(this.acceleration=it(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=it(e.maxSpeed)))}}class h3{constructor(){this.clamp=!0,this.delay=new sl,this.enable=!1,this.options={}}load(e){fe(e)||(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=Ln(this.options,e.options)))}}class p3{load(e){fe(e)||(e.color!==void 0&&(this.color=On.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class m3{constructor(){this.enable=!1,this.length=10,this.fill=new p3}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}var en;(function(t){t.bounce="bounce",t.none="none",t.out="out",t.destroy="destroy",t.split="split"})(en||(en={}));class g3{constructor(){this.default=en.out}load(e){fe(e)||(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class y3{constructor(){this.acceleration=0,this.enable=!1}load(e){fe(e)||(e.acceleration!==void 0&&(this.acceleration=it(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=Ln({},e.position)))}}class v3{constructor(){this.angle=new u3,this.attract=new c3,this.center=new f3,this.decay=0,this.distance={},this.direction=Tn.none,this.drift=0,this.enable=!1,this.gravity=new d3,this.path=new h3,this.outModes=new g3,this.random=!1,this.size=!1,this.speed=2,this.spin=new y3,this.straight=!1,this.trail=new m3,this.vibrate=!1,this.warp=!1}load(e){if(fe(e))return;this.angle.load(Lr(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=it(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=Lr(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=it(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const n=e.outModes;n!==void 0&&(cu(n)?this.outModes.load(n):this.outModes.load({default:n})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=it(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class _3 extends P0{constructor(){super(),this.destroy=Ja.none,this.speed=2}load(e){super.load(e),!fe(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class T3 extends C1{constructor(){super(),this.animation=new _3,this.value=1}load(e){if(fe(e))return;super.load(e);const n=e.animation;n!==void 0&&this.animation.load(n)}}class E3{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(fe(e))return;e.enable!==void 0&&(this.enable=e.enable);const n=e.width;n!==void 0&&(this.width=n);const i=e.height;i!==void 0&&(this.height=i)}}var zf;(function(t){t.delete="delete",t.wait="wait"})(zf||(zf={}));class w3{constructor(){this.mode=zf.delete,this.value=0}load(e){fe(e)||(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class S3{constructor(){this.density=new E3,this.limit=new w3,this.value=0}load(e){fe(e)||(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}class b3{constructor(){this.blur=0,this.color=new On,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){fe(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=On.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}class C3{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(fe(e))return;const n=e.options;if(n!==void 0)for(const i in n){const s=n[i];s&&(this.options[i]=Ln(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class A3 extends P0{constructor(){super(),this.destroy=Ja.none,this.speed=5}load(e){super.load(e),!fe(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class x3 extends C1{constructor(){super(),this.animation=new A3,this.value=3}load(e){if(super.load(e),fe(e))return;const n=e.animation;n!==void 0&&this.animation.load(n)}}class JC{constructor(){this.width=0}load(e){fe(e)||(e.color!==void 0&&(this.color=Uf.create(this.color,e.color)),e.width!==void 0&&(this.width=it(e.width)),e.opacity!==void 0&&(this.opacity=it(e.opacity)))}}class R3 extends sl{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),!fe(e)&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class I3{constructor(e,n){this._engine=e,this._container=n,this.bounce=new A1,this.collisions=new a3,this.color=new Uf,this.color.value="#fff",this.effect=new l3,this.groups={},this.move=new v3,this.number=new S3,this.opacity=new T3,this.reduceDuplicates=!1,this.shadow=new b3,this.shape=new C3,this.size=new x3,this.stroke=new JC,this.zIndex=new R3}load(e){if(fe(e))return;if(e.groups!==void 0)for(const i of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,i))continue;const s=e.groups[i];s!==void 0&&(this.groups[i]=Ln(this.groups[i]??{},s))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(Uf.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=Ln({},e.interactivity));const n=e.stroke;if(n&&(this.stroke=yi(n,i=>{const s=new JC;return s.load(i),s})),this._container){const i=this._engine.updaters.get(this._container);if(i)for(const r of i)r.loadOptions&&r.loadOptions(this,e);const s=this._engine.interactors.get(this._container);if(s)for(const r of s)r.loadParticlesOptions&&r.loadParticlesOptions(this,e)}}}function x1(t,...e){for(const n of e)t.load(n)}function R1(t,e,...n){const i=new I3(t,e);return x1(i,...n),i}class M3{constructor(e,n){this._findDefaultTheme=i=>this.themes.find(s=>s.default.value&&s.default.mode===i)??this.themes.find(s=>s.default.value&&s.default.mode===vr.any),this._importPreset=i=>{this.load(this._engine.getPreset(i))},this._engine=e,this._container=n,this.autoPlay=!0,this.background=new Gz,this.backgroundMask=new $z,this.clear=!0,this.defaultThemes={},this.delay=0,this.fullScreen=new Yz,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new b1(e,n),this.manualParticles=[],this.particles=R1(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}load(e){var l,c;if(fe(e))return;e.preset!==void 0&&yi(e.preset,f=>this._importPreset(f)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.clear!==void 0&&(this.clear=e.clear),e.key!==void 0&&(this.key=e.key),e.name!==void 0&&(this.name=e.name),e.delay!==void 0&&(this.delay=it(e.delay));const n=e.detectRetina;n!==void 0&&(this.detectRetina=n),e.duration!==void 0&&(this.duration=it(e.duration));const i=e.fpsLimit;i!==void 0&&(this.fpsLimit=i),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const s=e.fullScreen;u1(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(f=>{const d=new Zz;return d.load(f),d})),this.particles.load(e.particles),this.style=Ln(this.style,e.style),this._engine.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.interactors.get(this._container);if(r)for(const f of r)f.loadOptions&&f.loadOptions(this,e);if(e.responsive!==void 0)for(const f of e.responsive){const d=new e3;d.load(f),this.responsive.push(d)}if(this.responsive.sort((f,d)=>f.maxWidth-d.maxWidth),e.themes!==void 0)for(const f of e.themes){const d=this.themes.find(p=>p.name===f.name);if(d)d.load(f);else{const p=new n3;p.load(f),this.themes.push(p)}}this.defaultThemes.dark=(l=this._findDefaultTheme(vr.dark))==null?void 0:l.name,this.defaultThemes.light=(c=this._findDefaultTheme(vr.light))==null?void 0:c.name}setResponsive(e,n,i){this.load(i);const s=this.responsive.find(r=>r.mode===za.screen&&screen?r.maxWidth>screen.availWidth:r.maxWidth*n>e);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(e){if(e){const n=this.themes.find(i=>i.name===e);n&&this.load(n.options)}else{const n=d1("(prefers-color-scheme: dark)"),i=n==null?void 0:n.matches,s=this._findDefaultTheme(i?vr.dark:vr.light);s&&this.load(s.options)}}}var Lu;(function(t){t.external="external",t.particles="particles"})(Lu||(Lu={}));class P3{constructor(e,n){this.container=n,this._engine=e,this._interactors=[],this._externalInteractors=[],this._particleInteractors=[]}externalInteract(e){for(const n of this._externalInteractors)n.isEnabled()&&n.interact(e)}handleClickMode(e){var n;for(const i of this._externalInteractors)(n=i.handleClickMode)==null||n.call(i,e)}async init(){this._interactors=await this._engine.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case Lu.external:this._externalInteractors.push(e);break;case Lu.particles:this._particleInteractors.push(e);break}e.init()}}particlesInteract(e,n){for(const i of this._externalInteractors)i.clear(e,n);for(const i of this._particleInteractors)i.isEnabled(e)&&i.interact(e,n)}reset(e){for(const n of this._externalInteractors)n.isEnabled()&&n.reset(e);for(const n of this._particleInteractors)n.isEnabled(e)&&n.reset(e)}}var as;(function(t){t.normal="normal",t.inside="inside",t.outside="outside"})(as||(as={}));function D3(t,e,n,i){const s=e.options[t];if(s)return Ln({close:e.close,fill:e.fill},Oi(s,n,i))}function N3(t,e,n,i){const s=e.options[t];if(s)return Ln({close:e.close,fill:e.fill},Oi(s,n,i))}function WC(t){if(!qt(t.outMode,t.checkModes))return;const e=t.radius*Nn;t.coord>t.maxCoord-e?t.setCb(-t.radius):t.coord<e&&t.setCb(t.radius)}class k3{constructor(e,n){this.container=n,this._calcPosition=(i,s,r,l=xC)=>{for(const A of i.plugins.values()){const x=A.particlePosition!==void 0?A.particlePosition(s,this):void 0;if(x)return fi.create(x.x,x.y,r)}const c=i.canvas.size,f=dz({size:c,position:s}),d=fi.create(f.x,f.y,r),p=this.getRadius(),_=this.options.move.outModes,E=A=>{WC({outMode:A,checkModes:[en.bounce],coord:d.x,maxCoord:i.canvas.size.width,setCb:x=>d.x+=x,radius:p})},S=A=>{WC({outMode:A,checkModes:[en.bounce],coord:d.y,maxCoord:i.canvas.size.height,setCb:x=>d.y+=x,radius:p})};return E(_.left??_.default),E(_.right??_.default),S(_.top??_.default),S(_.bottom??_.default),this._checkOverlap(d,l)?this._calcPosition(i,void 0,r,l+$4):d},this._calculateVelocity=()=>{const i=fz(this.direction),s=i.copy(),r=this.options.move;if(r.direction===Tn.inside||r.direction===Tn.outside)return s;const l=xr(we(r.angle.value)),c=xr(we(r.angle.offset)),f={left:c-l*sn,right:c+l*sn};return r.straight||(s.angle+=di(it(f.left,f.right))),r.random&&typeof r.speed=="number"&&(s.length*=mt()),s},this._checkOverlap=(i,s=xC)=>{const r=this.options.collisions,l=this.getRadius();if(!r.enable)return!1;const c=r.overlap;if(c.enable)return!1;const f=c.retries;if(f>=Y4&&s>f)throw new Error(`${zi} particle is overlapping and can't be placed`);return!!this.container.particles.find(d=>mi(i,d.position)<l+d.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const s=this.roll.horizontal&&this.roll.vertical?Nn*VC:VC,r=this.roll.horizontal?Math.PI*sn:Pp;return Math.floor(((this.roll.angle??Pp)+r)/(Math.PI/s))%Nn?this.backColor?this.backColor:this.roll.alter?zz(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const s=this.container,r=we(this.options.zIndex.value);this.position=this._calcPosition(s,i,Bi(r,K4,s.zLayers)),this.initialPosition=this.position.copy();const l=s.canvas.size;switch(this.moveCenter={...y1(this.options.move.center,l),radius:this.options.move.center.radius??J4,mode:this.options.move.center.mode??Nu.percent},this.direction=cz(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case Tn.inside:this.outType=as.inside;break;case Tn.outside:this.outType=as.outside;break}this.offset=dn.origin},this._engine=e}destroy(e){var r,l,c;if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const n=this.container,i=this.pathGenerator,s=n.shapeDrawers.get(this.shape);(r=s==null?void 0:s.particleDestroy)==null||r.call(s,this);for(const f of n.plugins.values())(l=f.particleDestroyed)==null||l.call(f,this,e);for(const f of n.particles.updaters)(c=f.particleDestroyed)==null||c.call(f,this,e);i==null||i.reset(this),this._engine.dispatchEvent(Gn.particleDestroyed,{container:this.container,data:{particle:this}})}draw(e){const n=this.container,i=n.canvas;for(const s of n.plugins.values())i.drawParticlePlugin(s,this,e);i.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??HC(this.color))}getMass(){return this.getRadius()**vo*Math.PI*sn}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??HC(this.strokeColor))}init(e,n,i,s){var D,M,k,U,z,B;const r=this.container,l=this._engine;this.id=e,this.group=s,this.effectClose=!0,this.effectFill=!0,this.shapeClose=!0,this.shapeFill=!0,this.pathRotation=!1,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.isRotating=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType=as.normal,this.ignoresResizeRatio=!0;const c=r.retina.pixelRatio,f=r.actualOptions,d=R1(this._engine,r,f.particles),{reduceDuplicates:p}=d,_=d.effect.type,E=d.shape.type;this.effect=Oi(_,this.id,p),this.shape=Oi(E,this.id,p);const S=d.effect,A=d.shape;if(i){if((D=i.effect)!=null&&D.type){const L=i.effect.type,Ae=Oi(L,this.id,p);Ae&&(this.effect=Ae,S.load(i.effect))}if((M=i.shape)!=null&&M.type){const L=i.shape.type,Ae=Oi(L,this.id,p);Ae&&(this.shape=Ae,A.load(i.shape))}}if(this.effect===Du){const L=[...this.container.effectDrawers.keys()];this.effect=L[Math.floor(mt()*L.length)]}if(this.shape===Du){const L=[...this.container.shapeDrawers.keys()];this.shape=L[Math.floor(mt()*L.length)]}this.effectData=D3(this.effect,S,this.id,p),this.shapeData=N3(this.shape,A,this.id,p),d.load(i);const x=this.effectData;x&&d.load(x.particles);const R=this.shapeData;R&&d.load(R.particles);const V=new b1(l,r);V.load(r.actualOptions.interactivity),V.load(d.interactivity),this.interactivity=V,this.effectFill=(x==null?void 0:x.fill)??d.effect.fill,this.effectClose=(x==null?void 0:x.close)??d.effect.close,this.shapeFill=(R==null?void 0:R.fill)??d.shape.fill,this.shapeClose=(R==null?void 0:R.close)??d.shape.close,this.options=d;const O=this.options.move.path;this.pathDelay=we(O.delay.value)*Dn,O.generator&&(this.pathGenerator=this._engine.getPathGenerator(O.generator),this.pathGenerator&&r.addPath(O.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=g1(this.options.size,c),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(n),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=r1-we(this.options.move.decay);const F=r.particles;F.setLastZIndex(this.position.z),this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let H=r.effectDrawers.get(this.effect);H||(H=this._engine.getEffectDrawer(this.effect),H&&r.effectDrawers.set(this.effect,H)),H!=null&&H.loadEffect&&H.loadEffect(this);let Y=r.shapeDrawers.get(this.shape);Y||(Y=this._engine.getShapeDrawer(this.shape),Y&&r.shapeDrawers.set(this.shape,Y)),Y!=null&&Y.loadShape&&Y.loadShape(this);const Z=Y==null?void 0:Y.getSidesCount;Z&&(this.sides=Z(this)),this.spawning=!1,this.shadowColor=rs(this._engine,this.options.shadow.color);for(const L of F.updaters)L.init(this);for(const L of F.movers)(k=L.init)==null||k.call(L,this);(U=H==null?void 0:H.particleInit)==null||U.call(H,r,this),(z=Y==null?void 0:Y.particleInit)==null||z.call(Y,r,this);for(const L of r.plugins.values())(B=L.particleCreated)==null||B.call(L,this)}isInsideCanvas(){const e=this.getRadius(),n=this.container.canvas.size,i=this.position;return i.x>=-e&&i.y>=-e&&i.y<=n.height+e&&i.x<=n.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){var e;for(const n of this.container.particles.updaters)(e=n.reset)==null||e.call(n,this)}}class V3{constructor(e,n){this.position=e,this.particle=n}}var vu;(function(t){t.circle="circle",t.rectangle="rectangle"})(vu||(vu={}));class I1{constructor(e,n,i){this.position={x:e,y:n},this.type=i}}class Vn extends I1{constructor(e,n,i){super(e,n,vu.circle),this.radius=i}contains(e){return mi(e,this.position)<=this.radius}intersects(e){const n=this.position,i=e.position,s={x:Math.abs(i.x-n.x),y:Math.abs(i.y-n.y)},r=this.radius;if(e instanceof Vn||e.type===vu.circle){const l=e,c=r+l.radius,f=Math.sqrt(s.x**vo+s.y**vo);return c>f}else if(e instanceof us||e.type===vu.rectangle){const l=e,{width:c,height:f}=l.size;return Math.pow(s.x-c,vo)+Math.pow(s.y-f,vo)<=r**vo||s.x<=r+c&&s.y<=r+f||s.x<=c||s.y<=f}return!1}}class us extends I1{constructor(e,n,i,s){super(e,n,vu.rectangle),this.size={height:s,width:i}}contains(e){const n=this.size.width,i=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+n&&e.y>=s.y&&e.y<=s.y+i}intersects(e){if(e instanceof Vn)return e.intersects(this);const n=this.size.width,i=this.size.height,s=this.position,r=e.position,l=e instanceof us?e.size:{width:0,height:0},c=l.width,f=l.height;return r.x<s.x+n&&r.x+c>s.x&&r.y<s.y+i&&r.y+f>s.y}}class Np{constructor(e,n){this.rectangle=e,this.capacity=n,this._subdivide=()=>{const{x:i,y:s}=this.rectangle.position,{width:r,height:l}=this.rectangle.size,{capacity:c}=this;for(let f=0;f<M4;f++){const d=f%Nn;this._subs.push(new Np(new us(i+r*sn*d,s+l*sn*(Math.round(f*sn)-d),r*sn,l*sn),c))}this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(n=>n.insert(e))):!1}query(e,n){const i=[];if(!e.intersects(this.rectangle))return[];for(const s of this._points)!e.contains(s.position)&&mi(e.position,s.position)>s.particle.getRadius()&&(!n||n(s.particle))||i.push(s.particle);if(this._divided)for(const s of this._subs)i.push(...s.query(e,n));return i}queryCircle(e,n,i){return this.query(new Vn(e.x,e.y,n),i)}queryRectangle(e,n,i){return this.query(new us(e.x,e.y,n.width,n.height),i)}}const QC=t=>{const{height:e,width:n}=t;return new us(LC*n,LC*e,OC*n,OC*e)};class L3{constructor(e,n){this._addToPool=(...s)=>{this._pool.push(...s)},this._applyDensity=(s,r,l,c)=>{var A,x,R;const f=s.number;if(!((A=s.number.density)!=null&&A.enable)){l===void 0?this._limit=f.limit.value:(((x=c==null?void 0:c.number.limit)==null?void 0:x.value)??f.limit.value)&&this._groupLimits.set(l,((R=c==null?void 0:c.number.limit)==null?void 0:R.value)??f.limit.value);return}const d=this._initDensityFactor(f.density),p=f.value,_=f.limit.value>UC?f.limit.value:p,E=Math.min(p,_)*d+r,S=Math.min(this.count,this.filter(V=>V.group===l).length);l===void 0?this._limit=f.limit.value*d:this._groupLimits.set(l,f.limit.value*d),S<E?this.push(Math.abs(E-S),void 0,s,l):S>E&&this.removeQuantity(S-E,l)},this._initDensityFactor=s=>{const r=this._container;if(!r.canvas.element||!s.enable)return X4;const l=r.canvas.element,c=r.retina.pixelRatio;return l.width*l.height/(s.height*s.width*c**vo)},this._pushParticle=(s,r,l,c)=>{try{let f=this._pool.pop();f||(f=new k3(this._engine,this._container)),f.init(this._nextId,s,r,l);let d=!0;return c&&(d=c(f)),d?(this._array.push(f),this._zArray.push(f),this._nextId++,this._engine.dispatchEvent(Gn.particleAdded,{container:this._container,data:{particle:f}}),f):void 0}catch(f){Wa().warning(`${zi} adding particle: ${f}`)}},this._removeParticle=(s,r,l)=>{const c=this._array[s];if(!c||c.group!==r)return!1;const f=this._zArray.indexOf(c);return this._array.splice(s,Dp),this._zArray.splice(f,Dp),c.destroy(l),this._engine.dispatchEvent(Gn.particleRemoved,{container:this._container,data:{particle:c}}),this._addToPool(c),!0},this._engine=e,this._container=n,this._nextId=0,this._array=[],this._zArray=[],this._pool=[],this._limit=0,this._groupLimits=new Map,this._needsSort=!1,this._lastZIndex=0,this._interactionManager=new P3(e,n),this._pluginsInitialized=!1;const i=n.canvas.size;this.quadTree=new Np(QC(i),RC),this.movers=[],this.updaters=[]}get count(){return this._array.length}addManualParticles(){const e=this._container;e.actualOptions.manualParticles.forEach(i=>this.addParticle(i.position?y1(i.position,e.canvas.size):void 0,i.options))}addParticle(e,n,i,s){const r=this._container.actualOptions.particles.number.limit.mode,l=i===void 0?this._limit:this._groupLimits.get(i)??this._limit,c=this.count;if(l>UC)switch(r){case zf.delete:{const f=c+W4-l;f>Q4&&this.removeQuantity(f);break}case zf.wait:if(c>=l)return;break}return this._pushParticle(e,n,i,s)}clear(){this._array=[],this._zArray=[],this._pluginsInitialized=!1}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}draw(e){const n=this._container,i=n.canvas;i.clear(),this.update(e);for(const s of n.plugins.values())i.drawPlugin(s,e);for(const s of this._zArray)s.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}get(e){return this._array[e]}handleClickMode(e){this._interactionManager.handleClickMode(e)}async init(){var s,r;const e=this._container,n=e.actualOptions;this._lastZIndex=0,this._needsSort=!1,await this.initPlugins();let i=!1;for(const l of e.plugins.values())if(i=((s=l.particlesInitialization)==null?void 0:s.call(l))??i,i)break;if(this.addManualParticles(),!i){const l=n.particles,c=l.groups;for(const f in c){const d=c[f];for(let p=this.count,_=0;_<((r=d.number)==null?void 0:r.value)&&p<l.number.value;p++,_++)this.addParticle(void 0,d,f)}for(let f=this.count;f<l.number.value;f++)this.addParticle()}}async initPlugins(){if(this._pluginsInitialized)return;const e=this._container;this.movers=await this._engine.getMovers(e,!0),this.updaters=await this._engine.getUpdaters(e,!0),await this._interactionManager.init();for(const n of e.pathGenerators.values())n.init(e)}push(e,n,i,s){for(let r=0;r<e;r++)this.addParticle(n==null?void 0:n.position,i,s)}async redraw(){this.clear(),await this.init(),this.draw({value:0,factor:0})}remove(e,n,i){this.removeAt(this._array.indexOf(e),void 0,n,i)}removeAt(e,n=I4,i,s){if(e<t_||e>this.count)return;let r=0;for(let l=e;r<n&&l<this.count;l++)this._removeParticle(l,i,s)&&(l--,r++)}removeQuantity(e,n){this.removeAt(t_,e,n)}setDensity(){const e=this._container.actualOptions,n=e.particles.groups,i=e.manualParticles.length;for(const s in n)this._applyDensity(n[s],i,s);this._applyDensity(e.particles,i)}setLastZIndex(e){this._lastZIndex=e,this._needsSort=this._needsSort||this._lastZIndex<e}setResizeFactor(e){this._resizeFactor=e}update(e){var r,l;const n=this._container,i=new Set;this.quadTree=new Np(QC(n.canvas.size),RC);for(const c of n.pathGenerators.values())c.update();for(const c of n.plugins.values())(r=c.update)==null||r.call(c,e);const s=this._resizeFactor;for(const c of this._array){s&&!c.ignoresResizeRatio&&(c.position.x*=s.width,c.position.y*=s.height,c.initialPosition.x*=s.width,c.initialPosition.y*=s.height),c.ignoresResizeRatio=!1,this._interactionManager.reset(c);for(const f of this._container.plugins.values()){if(c.destroyed)break;(l=f.particleUpdate)==null||l.call(f,c,e)}for(const f of this.movers)f.isEnabled(c)&&f.move(c,e);if(c.destroyed){i.add(c);continue}this.quadTree.insert(new V3(c.getPosition(),c))}if(i.size){const c=f=>!i.has(f);this._array=this.filter(c),this._zArray=this._zArray.filter(c);for(const f of i)this._engine.dispatchEvent(Gn.particleRemoved,{container:this._container,data:{particle:f}});this._addToPool(...i)}this._interactionManager.externalInteract(e);for(const c of this._array){for(const f of this.updaters)f.update(c,e);!c.destroyed&&!c.spawning&&this._interactionManager.particlesInteract(c,e)}if(delete this._resizeFactor,this._needsSort){const c=this._zArray;c.sort((f,d)=>d.position.z-f.position.z||f.id-d.id),this._lastZIndex=c[c.length-a1].position.z,this._needsSort=!1}}}class O3{constructor(e){this.container=e,this.pixelRatio=IC,this.reduceFactor=MC}init(){const e=this.container,n=e.actualOptions;this.pixelRatio=!n.detectRetina||Qa()?IC:devicePixelRatio,this.reduceFactor=MC;const i=this.pixelRatio,s=e.canvas;if(s.element){const c=s.element;s.size.width=c.offsetWidth*i,s.size.height=c.offsetHeight*i}const r=n.particles,l=r.move;this.maxSpeed=we(l.gravity.maxSpeed)*i,this.sizeAnimationSpeed=we(r.size.animation.speed)*i}initParticle(e){const n=e.options,i=this.pixelRatio,s=n.move,r=s.distance,l=e.retina;l.moveDrift=we(s.drift)*i,l.moveSpeed=we(s.speed)*i,l.sizeAnimationSpeed=we(n.size.animation.speed)*i;const c=l.maxDistance;c.horizontal=r.horizontal!==void 0?r.horizontal*i:void 0,c.vertical=r.vertical!==void 0?r.vertical*i:void 0,l.maxSpeed=we(s.gravity.maxSpeed)*i}}function Dt(t){return t&&!t.destroyed}function U3(t,e=ev,n=!1){return{value:t,factor:n?ev/e:ev*t/Dn}}function Ql(t,e,...n){const i=new M3(t,e);return x1(i,...n),i}class z3{constructor(e,n,i){this._intersectionManager=s=>{if(!(!Dt(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of s)r.target===this.interactivity.element&&(r.isIntersecting?this.play():this.pause())},this._nextFrame=s=>{try{if(!this._smooth&&this._lastFrameTime!==void 0&&s<this._lastFrameTime+Dn/this.fpsLimit){this.draw(!1);return}this._lastFrameTime??(this._lastFrameTime=s);const r=U3(s-this._lastFrameTime,this.fpsLimit,this._smooth);if(this.addLifeTime(r.value),this._lastFrameTime=s,r.value>Dn){this.draw(!1);return}if(this.particles.draw(r),!this.alive()){this.destroy();return}this.animationStatus&&this.draw(!1)}catch(r){Wa().error(`${zi} in animation loop`,r)}},this._engine=e,this.id=Symbol(n),this.fpsLimit=120,this._smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this._lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._clickHandlers=new Map,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new O3(this),this.canvas=new Fz(this,this._engine),this.particles=new L3(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this._options=Ql(this._engine,this),this.actualOptions=Ql(this._engine,this),this._eventListeners=new qz(this),this._intersectionObserver=yz(s=>this._intersectionManager(s)),this._engine.dispatchEvent(Gn.containerBuilt,{container:this})}get animationStatus(){return!this._paused&&!this.pageHidden&&Dt(this)}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!Dt(this))return;const n=this.interactivity.element;if(!n)return;const i=(_,E,S)=>{if(!Dt(this))return;const A=this.retina.pixelRatio,x={x:E.x*A,y:E.y*A},R=this.particles.quadTree.queryCircle(x,S*A);e(_,R)},s=_=>{if(!Dt(this))return;const E=_,S={x:E.offsetX||E.clientX,y:E.offsetY||E.clientY};i(_,S,O4)},r=()=>{Dt(this)&&(d=!0,p=!1)},l=()=>{Dt(this)&&(p=!0)},c=_=>{if(Dt(this)){if(d&&!p){const E=_;let S=E.touches[E.touches.length-kC];if(!S&&(S=E.changedTouches[E.changedTouches.length-kC],!S))return;const A=this.canvas.element,x=A?A.getBoundingClientRect():void 0,R={x:S.clientX-(x?x.left:Mp),y:S.clientY-(x?x.top:Mp)};i(_,R,Math.max(S.radiusX,S.radiusY))}d=!1,p=!1}},f=()=>{Dt(this)&&(d=!1,p=!1)};let d=!1,p=!1;this._clickHandlers.set("click",s),this._clickHandlers.set("touchstart",r),this._clickHandlers.set("touchmove",l),this._clickHandlers.set("touchend",c),this._clickHandlers.set("touchcancel",f);for(const[_,E]of this._clickHandlers)n.addEventListener(_,E)}addLifeTime(e){this._lifeTime+=e}addPath(e,n,i=!1){return!Dt(this)||!i&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,n),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}clearClickHandlers(){var e;if(Dt(this)){for(const[n,i]of this._clickHandlers)(e=this.interactivity.element)==null||e.removeEventListener(n,i);this._clickHandlers.clear()}}destroy(e=!0){var n,i;if(Dt(this)){this.stop(),this.clearClickHandlers(),this.particles.destroy(),this.canvas.destroy();for(const s of this.effectDrawers.values())(n=s.destroy)==null||n.call(s,this);for(const s of this.shapeDrawers.values())(i=s.destroy)==null||i.call(s,this);for(const s of this.effectDrawers.keys())this.effectDrawers.delete(s);for(const s of this.shapeDrawers.keys())this.shapeDrawers.delete(s);if(this._engine.clearPlugins(this),this.destroyed=!0,e){const s=this._engine.items,r=s.findIndex(l=>l===this);r>=U4&&s.splice(r,o1)}this._engine.dispatchEvent(Gn.containerDestroyed,{container:this})}}draw(e){if(!Dt(this))return;let n=e;const i=s=>{n&&(this._lastFrameTime=void 0,n=!1),this._nextFrame(s)};this._drawAnimationFrame=lz(s=>i(s))}async export(e,n={}){for(const i of this.plugins.values()){if(!i.export)continue;const s=await i.export(e,n);if(s.supported)return s.blob}Wa().error(`${zi} - Export plugin with type ${e} not found`)}handleClickMode(e){var n;if(Dt(this)){this.particles.handleClickMode(e);for(const i of this.plugins.values())(n=i.handleClickMode)==null||n.call(i,e)}}async init(){var d,p,_,E;if(!Dt(this))return;const e=this._engine.getSupportedEffects();for(const S of e){const A=this._engine.getEffectDrawer(S);A&&this.effectDrawers.set(S,A)}const n=this._engine.getSupportedShapes();for(const S of n){const A=this._engine.getShapeDrawer(S);A&&this.shapeDrawers.set(S,A)}await this.particles.initPlugins(),this._options=Ql(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Ql(this._engine,this,this._options);const i=await this._engine.getAvailablePlugins(this);for(const[S,A]of i)this.plugins.set(S,A);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize();const{zLayers:s,duration:r,delay:l,fpsLimit:c,smooth:f}=this.actualOptions;this.zLayers=s,this._duration=we(r)*Dn,this._delay=we(l)*Dn,this._lifeTime=0,this.fpsLimit=c>B4?c:z4,this._smooth=f;for(const S of this.effectDrawers.values())await((d=S.init)==null?void 0:d.call(S,this));for(const S of this.shapeDrawers.values())await((p=S.init)==null?void 0:p.call(S,this));for(const S of this.plugins.values())await((_=S.init)==null?void 0:_.call(S));this._engine.dispatchEvent(Gn.containerInit,{container:this}),await this.particles.init(),this.particles.setDensity();for(const S of this.plugins.values())(E=S.particlesSetup)==null||E.call(S);this._engine.dispatchEvent(Gn.particlesSetup,{container:this})}async loadTheme(e){Dt(this)&&(this._currentTheme=e,await this.refresh())}pause(){var e;if(Dt(this)&&(this._drawAnimationFrame!==void 0&&(uz(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const n of this.plugins.values())(e=n.pause)==null||e.call(n);this.pageHidden||(this._paused=!0),this._engine.dispatchEvent(Gn.containerPaused,{container:this})}}play(e){if(!Dt(this))return;const n=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),n)for(const i of this.plugins.values())i.play&&i.play();this._engine.dispatchEvent(Gn.containerPlay,{container:this}),this.draw(n??!1)}async refresh(){if(Dt(this))return this.stop(),this.start()}async reset(e){if(Dt(this))return this._initialSourceOptions=e,this._sourceOptions=e,this._options=Ql(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Ql(this._engine,this,this._options),this.refresh()}async start(){!Dt(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{const n=async()=>{var i;this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const s of this.plugins.values())await((i=s.start)==null?void 0:i.call(s));this._engine.dispatchEvent(Gn.containerStarted,{container:this}),this.play(),e()};this._delayTimeout=setTimeout(()=>void n(),this._delay)}))}stop(){var e;if(!(!Dt(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const n of this.plugins.values())(e=n.stop)==null||e.call(n);for(const n of this.plugins.keys())this.plugins.delete(n);this._sourceOptions=this._options,this._engine.dispatchEvent(Gn.containerStopped,{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this._responsiveMaxWidth===e?!1:(this._responsiveMaxWidth=e,!0)}}class B3{constructor(){this._listeners=new Map}addEventListener(e,n){this.removeEventListener(e,n);let i=this._listeners.get(e);i||(i=[],this._listeners.set(e,i)),i.push(n)}dispatchEvent(e,n){const i=this._listeners.get(e);i==null||i.forEach(s=>s(n))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,n){const i=this._listeners.get(e);if(!i)return;const s=i.length,r=i.indexOf(n);r<t_||(s===Dp?this._listeners.delete(e):i.splice(r,Dp))}}async function uv(t,e,n,i=!1){let s=e.get(t);return(!s||i)&&(s=await Promise.all([...n.values()].map(r=>r(t))),e.set(t,s)),s}async function F3(t){const e=Oi(t.url,t.index);if(!e)return t.fallback;const n=await fetch(e);return n.ok?await n.json():(Wa().error(`${zi} ${n.status} while retrieving config file`),t.fallback)}const q3=t=>{let e;if(t instanceof HTMLCanvasElement||t.tagName.toLowerCase()===tv)e=t,e.dataset[La]||(e.dataset[La]=AC);else{const i=t.getElementsByTagName(tv);i.length?(e=i[F4],e.dataset[La]=AC):(e=document.createElement(tv),e.dataset[La]=i1,t.appendChild(e))}const n="100%";return e.style.width||(e.style.width=n),e.style.height||(e.style.height=n),e},G3=(t,e)=>{let n=e??document.getElementById(t);return n||(n=document.createElement("div"),n.id=t,n.dataset[La]=i1,document.body.append(n),n)};class H3{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new B3,this._initialized=!1,this.plugins=[],this.colorManagers=new Map,this.easingFunctions=new Map,this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const e={};for(const[n,i]of this._configs)e[n]=i;return e}get items(){return this._domArray}get version(){return"3.9.1"}async addColorManager(e,n=!0){this.colorManagers.set(e.key,e),await this.refresh(n)}addConfig(e){const n=e.key??e.name??"default";this._configs.set(n,e),this._eventDispatcher.dispatchEvent(Gn.configAdded,{data:{name:n,config:e}})}async addEasing(e,n,i=!0){this.getEasing(e)||(this.easingFunctions.set(e,n),await this.refresh(i))}async addEffect(e,n,i=!0){yi(e,s=>{this.getEffectDrawer(s)||this.effectDrawers.set(s,n)}),await this.refresh(i)}addEventListener(e,n){this._eventDispatcher.addEventListener(e,n)}async addInteractor(e,n,i=!0){this._initializers.interactors.set(e,n),await this.refresh(i)}async addMover(e,n,i=!0){this._initializers.movers.set(e,n),await this.refresh(i)}async addParticleUpdater(e,n,i=!0){this._initializers.updaters.set(e,n),await this.refresh(i)}async addPathGenerator(e,n,i=!0){this.getPathGenerator(e)||this.pathGenerators.set(e,n),await this.refresh(i)}async addPlugin(e,n=!0){this.getPlugin(e.id)||this.plugins.push(e),await this.refresh(n)}async addPreset(e,n,i=!1,s=!0){(i||!this.getPreset(e))&&this.presets.set(e,n),await this.refresh(s)}async addShape(e,n=!0){for(const i of e.validTypes)this.getShapeDrawer(i)||this.shapeDrawers.set(i,e);await this.refresh(n)}checkVersion(e){if(this.version!==e)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${this.version}. Plugin version: ${e}`)}clearPlugins(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}dispatchEvent(e,n){this._eventDispatcher.dispatchEvent(e,n)}dom(){return this.items}domItem(e){return this.item(e)}async getAvailablePlugins(e){const n=new Map;for(const i of this.plugins)i.needsPlugin(e.actualOptions)&&n.set(i.id,await i.getPlugin(e));return n}getEasing(e){return this.easingFunctions.get(e)??(n=>n)}getEffectDrawer(e){return this.effectDrawers.get(e)}async getInteractors(e,n=!1){return uv(e,this.interactors,this._initializers.interactors,n)}async getMovers(e,n=!1){return uv(e,this.movers,this._initializers.movers,n)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(n=>n.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.shapeDrawers.get(e)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(e,n=!1){return uv(e,this.updaters,this._initializers.updaters,n)}init(){this._initialized||(this._initialized=!0)}item(e){const{items:n}=this,i=n[e];if(!i||i.destroyed){n.splice(e,o1);return}return i}async load(e){var E;const n=e.id??((E=e.element)==null?void 0:E.id)??`tsparticles${Math.floor(mt()*q4)}`,{index:i,url:s}=e,r=s?await F3({fallback:e.options,url:s,index:i}):e.options,l=Oi(r,i),{items:c}=this,f=c.findIndex(S=>S.id.description===n),d=new z3(this,n,l);if(f>=G4){const S=this.item(f),A=S?H4:Pp;S&&!S.destroyed&&S.destroy(!1),c.splice(f,A,d)}else c.push(d);const p=G3(n,e.element),_=q3(p);return d.canvas.loadCanvas(_),await d.start(),d}loadOptions(e,n){this.plugins.forEach(i=>{var s;return(s=i.loadOptions)==null?void 0:s.call(i,e,n)})}loadParticlesOptions(e,n,...i){const s=this.updaters.get(e);s&&s.forEach(r=>{var l;return(l=r.loadOptions)==null?void 0:l.call(r,n,...i)})}async refresh(e=!0){e&&await Promise.all(this.items.map(n=>n.refresh()))}removeEventListener(e,n){this._eventDispatcher.removeEventListener(e,n)}setOnClickHandler(e){const{items:n}=this;if(!n.length)throw new Error(`${zi} can only set click handlers after calling tsParticles.load()`);n.forEach(i=>i.addClickHandler(e))}}function $3(){const t=new H3;return t.init(),t}class Ws{constructor(e){this.type=Lu.external,this.container=e}}class D0{constructor(e){this.type=Lu.particles,this.container=e}}var ts;(function(t){t.clockwise="clockwise",t.counterClockwise="counter-clockwise",t.random="random"})(ts||(ts={}));var XC;(function(t){t.linear="linear",t.radial="radial",t.random="random"})(XC||(XC={}));var Ga;(function(t){t.easeInBack="ease-in-back",t.easeInCirc="ease-in-circ",t.easeInCubic="ease-in-cubic",t.easeInLinear="ease-in-linear",t.easeInQuad="ease-in-quad",t.easeInQuart="ease-in-quart",t.easeInQuint="ease-in-quint",t.easeInExpo="ease-in-expo",t.easeInSine="ease-in-sine",t.easeOutBack="ease-out-back",t.easeOutCirc="ease-out-circ",t.easeOutCubic="ease-out-cubic",t.easeOutLinear="ease-out-linear",t.easeOutQuad="ease-out-quad",t.easeOutQuart="ease-out-quart",t.easeOutQuint="ease-out-quint",t.easeOutExpo="ease-out-expo",t.easeOutSine="ease-out-sine",t.easeInOutBack="ease-in-out-back",t.easeInOutCirc="ease-in-out-circ",t.easeInOutCubic="ease-in-out-cubic",t.easeInOutLinear="ease-in-out-linear",t.easeInOutQuad="ease-in-out-quad",t.easeInOutQuart="ease-in-out-quart",t.easeInOutQuint="ease-in-out-quint",t.easeInOutExpo="ease-in-out-expo",t.easeInOutSine="ease-in-out-sine"})(Ga||(Ga={}));const N0=$3();Qa()||(window.tsParticles=N0);const Y3=t=>{const e=t.id??"tsparticles";return ie.useEffect(()=>{let n;return N0.load({id:e,url:t.url,options:t.options}).then(i=>{var s;n=i,(s=t.particlesLoaded)==null||s.call(t,i)}),()=>{n==null||n.destroy()}},[e,t,t.url,t.options]),P.jsx("div",{id:e,className:t.className})};async function K3(t){await t(N0)}const r_=.5,J3=2,br=0,is=1,jC=60,ZC=0,W3=.01,Q3=Math.PI*J3;function X3(t){const e=t.initialPosition,{dx:n,dy:i}=Hn(e,t.position),s=Math.abs(n),r=Math.abs(i),{maxDistance:l}=t.retina,c=l.horizontal,f=l.vertical;if(!c&&!f)return;const d=(c&&s>=c)??!1,p=(f&&r>=f)??!1;if((d||p)&&!t.misplaced)t.misplaced=!!c&&s>c||!!f&&r>f,c&&(t.velocity.x=t.velocity.y*r_-t.velocity.x),f&&(t.velocity.y=t.velocity.x*r_-t.velocity.y);else if((!c||s<c)&&(!f||r<f)&&t.misplaced)t.misplaced=!1;else if(t.misplaced){const _=t.position,E=t.velocity;c&&(_.x<e.x&&E.x<br||_.x>e.x&&E.x>br)&&(E.x*=-mt()),f&&(_.y<e.y&&E.y<br||_.y>e.y&&E.y>br)&&(E.y*=-mt())}}function j3(t,e,n,i,s,r,l){eB(t,l);const c=t.gravity,f=c!=null&&c.enable&&c.inverse?-is:is;s&&n&&(t.velocity.x+=s*l.factor/(jC*n)),c!=null&&c.enable&&n&&(t.velocity.y+=f*(c.acceleration*l.factor)/(jC*n));const d=t.moveDecay;t.velocity.multTo(d);const p=t.velocity.mult(n);c!=null&&c.enable&&i>br&&(!c.inverse&&p.y>=br&&p.y>=i||c.inverse&&p.y<=br&&p.y<=-i)&&(p.y=f*i,n&&(t.velocity.y=p.y/n));const _=t.options.zIndex,E=(is-t.zIndexFactor)**_.velocityRate;p.multTo(E),p.multTo(r);const{position:S}=t;S.addTo(p),e.vibrate&&(S.x+=Math.sin(S.x*Math.cos(S.y))*r,S.y+=Math.cos(S.y*Math.sin(S.x))*r)}function Z3(t,e,n){const i=t.container;if(!t.spin)return;const s=t.spin.direction===ts.clockwise,r={x:s?Math.cos:Math.sin,y:s?Math.sin:Math.cos};t.position.x=t.spin.center.x+t.spin.radius*r.x(t.spin.angle)*n,t.position.y=t.spin.center.y+t.spin.radius*r.y(t.spin.angle)*n,t.spin.radius+=t.spin.acceleration*n;const l=Math.max(i.canvas.size.width,i.canvas.size.height),c=l*r_;t.spin.radius>c?(t.spin.radius=c,t.spin.acceleration*=-is):t.spin.radius<ZC&&(t.spin.radius=ZC,t.spin.acceleration*=-is),t.spin.angle+=e*W3*(is-t.spin.radius/l)}function eB(t,e){var l;const n=t.options,i=n.move.path;if(!i.enable)return;if(t.lastPathTime<=t.pathDelay){t.lastPathTime+=e.value;return}const r=(l=t.pathGenerator)==null?void 0:l.generate(t,e);r&&t.velocity.addTo(r),i.clamp&&(t.velocity.x=Bi(t.velocity.x,-is,is),t.velocity.y=Bi(t.velocity.y,-is,is)),t.lastPathTime-=t.pathDelay}function tB(t){return t.slow.inRange?t.slow.factor:is}function nB(t){const e=t.container,n=t.options,i=n.move.spin;if(!i.enable)return;const s=i.position??{x:50,y:50},r=.01,l={x:s.x*r*e.canvas.size.width,y:s.y*r*e.canvas.size.height},c=t.getPosition(),f=mi(c,l),d=we(i.acceleration);t.retina.spinAcceleration=d*e.retina.pixelRatio,t.spin={center:l,direction:t.velocity.x>=br?ts.clockwise:ts.counterClockwise,angle:mt()*Q3,radius:f,acceleration:t.retina.spinAcceleration}}const iB=2,sB=1,oB=1;class rB{init(e){const n=e.options,i=n.move.gravity;e.gravity={enable:i.enable,acceleration:we(i.acceleration),inverse:i.inverse},nB(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,n){var R,V;const i=e.options,s=i.move;if(!s.enable)return;const r=e.container,l=r.retina.pixelRatio;(R=e.retina).moveSpeed??(R.moveSpeed=we(s.speed)*l),(V=e.retina).moveDrift??(V.moveDrift=we(e.options.move.drift)*l);const c=tB(e),f=r.retina.reduceFactor,d=e.retina.moveSpeed,p=e.retina.moveDrift,_=Vs(i.size.value)*l,E=s.size?e.getRadius()/_:sB,S=n.factor||oB,A=d*E*c*S/iB,x=e.retina.maxSpeed??r.retina.maxSpeed;s.spin.enable?Z3(e,A,f):j3(e,s,A,x,p,f,n),X3(e)}}async function aB(t,e=!0){t.checkVersion("3.9.1"),await t.addMover("base",()=>Promise.resolve(new rB),e)}const lB=2,uB=Math.PI*lB,cB=0,eA={x:0,y:0};function fB(t){const{context:e,particle:n,radius:i}=t;n.circleRange||(n.circleRange={min:cB,max:uB});const s=n.circleRange;e.arc(eA.x,eA.y,i,s.min,s.max,!1)}const dB=12,hB=360,tA=0;class pB{constructor(){this.validTypes=["circle"]}draw(e){fB(e)}getSidesCount(){return dB}particleInit(e,n){const i=n.shapeData,s=(i==null?void 0:i.angle)??{max:hB,min:tA};n.circleRange=cu(s)?{min:xr(s.min),max:xr(s.max)}:{min:tA,max:xr(s)}}}async function mB(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new pB,e)}class gB{constructor(e,n){this._container=e,this._engine=n}init(e){const n=Lf(this._engine,e.options.color,e.id,e.options.reduceDuplicates);n&&(e.color=w1(n,e.options.color.animation,this._container.retina.reduceFactor))}isEnabled(e){const{h:n,s:i,l:s}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&((r==null?void 0:r.h.value)!==void 0&&n.enable||(r==null?void 0:r.s.value)!==void 0&&i.enable||(r==null?void 0:r.l.value)!==void 0&&s.enable)}update(e,n){S1(e.color,n)}}async function yB(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("color",n=>Promise.resolve(new gB(n,t)),e)}var ka;(function(t){t[t.r=1]="r",t[t.g=2]="g",t[t.b=3]="b",t[t.a=4]="a"})(ka||(ka={}));const vB=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,_B=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,Hh=16,TB=1,EB=255;class wB{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(e){return this._parseString(e.value)}handleRangeColor(e){return this._parseString(e.value)}parseString(e){return this._parseString(e)}_parseString(e){if(typeof e!="string"||!(e!=null&&e.startsWith(this.stringPrefix)))return;const n=e.replace(vB,(s,r,l,c,f)=>r+r+l+l+c+c+(f!==void 0?f+f:"")),i=_B.exec(n);return i?{a:i[ka.a]!==void 0?parseInt(i[ka.a],Hh)/EB:TB,b:parseInt(i[ka.b],Hh),g:parseInt(i[ka.g],Hh),r:parseInt(i[ka.r],Hh)}:void 0}}async function SB(t,e=!0){t.checkVersion("3.9.1"),await t.addColorManager(new wB,e)}var fu;(function(t){t[t.h=1]="h",t[t.s=2]="s",t[t.l=3]="l",t[t.a=5]="a"})(fu||(fu={}));class bB{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const n=e.value,i=n.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return ku(i)}handleRangeColor(e){const n=e.value,i=n.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return ku({h:we(i.h),l:we(i.l),s:we(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const n=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=n.exec(e),s=4,r=1,l=10;return i?Mz({a:i.length>s?f1(i[fu.a]):r,h:parseInt(i[fu.h],l),l:parseInt(i[fu.l],l),s:parseInt(i[fu.s],l)}):void 0}}async function CB(t,e=!0){t.checkVersion("3.9.1"),await t.addColorManager(new bB,e)}class AB{constructor(e){this.container=e}init(e){const n=e.options.opacity,i=1;e.opacity=g1(n,i);const s=n.animation;s.enable&&(e.opacity.velocity=we(s.speed)/Sr*this.container.retina.reduceFactor,s.sync||(e.opacity.velocity*=mt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,n){!this.isEnabled(e)||!e.opacity||R0(e,e.opacity,!0,e.options.opacity.animation.destroy,n)}}async function xB(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("opacity",n=>Promise.resolve(new AB(n)),e)}const kp=0,_u=0;function RB(t){if(t.outMode!==en.bounce&&t.outMode!==en.split||t.direction!==We.left&&t.direction!==We.right)return;t.bounds.right<_u&&t.direction===We.left?t.particle.position.x=t.size+t.offset.x:t.bounds.left>t.canvasSize.width&&t.direction===We.right&&(t.particle.position.x=t.canvasSize.width-t.size-t.offset.x);const e=t.particle.velocity.x;let n=!1;if(t.direction===We.right&&t.bounds.right>=t.canvasSize.width&&e>kp||t.direction===We.left&&t.bounds.left<=_u&&e<kp){const s=we(t.particle.options.bounce.horizontal.value);t.particle.velocity.x*=-s,n=!0}if(!n)return;const i=t.offset.x+t.size;t.bounds.right>=t.canvasSize.width&&t.direction===We.right?t.particle.position.x=t.canvasSize.width-i:t.bounds.left<=_u&&t.direction===We.left&&(t.particle.position.x=i),t.outMode===en.split&&t.particle.destroy()}function IB(t){if(t.outMode!==en.bounce&&t.outMode!==en.split||t.direction!==We.bottom&&t.direction!==We.top)return;t.bounds.bottom<_u&&t.direction===We.top?t.particle.position.y=t.size+t.offset.y:t.bounds.top>t.canvasSize.height&&t.direction===We.bottom&&(t.particle.position.y=t.canvasSize.height-t.size-t.offset.y);const e=t.particle.velocity.y;let n=!1;if(t.direction===We.bottom&&t.bounds.bottom>=t.canvasSize.height&&e>kp||t.direction===We.top&&t.bounds.top<=_u&&e<kp){const s=we(t.particle.options.bounce.vertical.value);t.particle.velocity.y*=-s,n=!0}if(!n)return;const i=t.offset.y+t.size;t.bounds.bottom>=t.canvasSize.height&&t.direction===We.bottom?t.particle.position.y=t.canvasSize.height-i:t.bounds.top<=_u&&t.direction===We.top&&(t.particle.position.y=i),t.outMode===en.split&&t.particle.destroy()}class MB{constructor(e){this.container=e,this.modes=[en.bounce,en.split]}update(e,n,i,s){if(!this.modes.includes(s))return;const r=this.container;let l=!1;for(const E of r.plugins.values())if(E.particleBounce!==void 0&&(l=E.particleBounce(e,i,n)),l)break;if(l)return;const c=e.getPosition(),f=e.offset,d=e.getRadius(),p=td(c,d),_=r.canvas.size;RB({particle:e,outMode:s,direction:n,bounds:p,canvasSize:_,offset:f,size:d}),IB({particle:e,outMode:s,direction:n,bounds:p,canvasSize:_,offset:f,size:d})}}const $h=0;class PB{constructor(e){this.container=e,this.modes=[en.destroy]}update(e,n,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case as.normal:case as.outside:if(C0(e.position,r.canvas.size,dn.origin,e.getRadius(),n))return;break;case as.inside:{const{dx:l,dy:c}=Hn(e.position,e.moveCenter),{x:f,y:d}=e.velocity;if(f<$h&&l>e.moveCenter.radius||d<$h&&c>e.moveCenter.radius||f>=$h&&l<-e.moveCenter.radius||d>=$h&&c<-e.moveCenter.radius)return;break}}r.particles.remove(e,e.group,!0)}}const Yh=0;class DB{constructor(e){this.container=e,this.modes=[en.none]}update(e,n,i,s){if(!this.modes.includes(s)||((e.options.move.distance.horizontal&&(n===We.left||n===We.right))??(e.options.move.distance.vertical&&(n===We.top||n===We.bottom))))return;const r=e.options.move.gravity,l=this.container,c=l.canvas.size,f=e.getRadius();if(r.enable){const d=e.position;(!r.inverse&&d.y>c.height+f&&n===We.bottom||r.inverse&&d.y<-f&&n===We.top)&&l.particles.remove(e)}else{if(e.velocity.y>Yh&&e.position.y<=c.height+f||e.velocity.y<Yh&&e.position.y>=-f||e.velocity.x>Yh&&e.position.x<=c.width+f||e.velocity.x<Yh&&e.position.x>=-f)return;C0(e.position,l.canvas.size,dn.origin,f,n)||l.particles.remove(e)}}}const Kh=0,Jh=0;class NB{constructor(e){this.container=e,this.modes=[en.out]}update(e,n,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case as.inside:{const{x:l,y:c}=e.velocity,f=dn.origin;f.length=e.moveCenter.radius,f.angle=e.velocity.angle+Math.PI,f.addTo(dn.create(e.moveCenter));const{dx:d,dy:p}=Hn(e.position,f);if(l<=Kh&&d>=Jh||c<=Kh&&p>=Jh||l>=Kh&&d<=Jh||c>=Kh&&p<=Jh)return;e.position.x=Math.floor(di({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(di({min:0,max:r.canvas.size.height}));const{dx:_,dy:E}=Hn(e.position,e.moveCenter);e.direction=Math.atan2(-E,-_),e.velocity.angle=e.direction;break}default:{if(C0(e.position,r.canvas.size,dn.origin,e.getRadius(),n))return;switch(e.outType){case as.outside:{e.position.x=Math.floor(di({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(di({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:l,dy:c}=Hn(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(c,l),e.velocity.angle=e.direction);break}case as.normal:{const l=e.options.move.warp,c=r.canvas.size,f={bottom:c.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:c.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},d=e.getRadius(),p=td(e.position,d);n===We.right&&p.left>c.width+e.offset.x?(e.position.x=f.left,e.initialPosition.x=e.position.x,l||(e.position.y=mt()*c.height,e.initialPosition.y=e.position.y)):n===We.left&&p.right<-e.offset.x&&(e.position.x=f.right,e.initialPosition.x=e.position.x,l||(e.position.y=mt()*c.height,e.initialPosition.y=e.position.y)),n===We.bottom&&p.top>c.height+e.offset.y?(l||(e.position.x=mt()*c.width,e.initialPosition.x=e.position.x),e.position.y=f.top,e.initialPosition.y=e.position.y):n===We.top&&p.bottom<-e.offset.y&&(l||(e.position.x=mt()*c.width,e.initialPosition.x=e.position.x),e.position.y=f.bottom,e.initialPosition.y=e.position.y);break}}break}}}}const kB=(t,e)=>t.default===e||t.bottom===e||t.left===e||t.right===e||t.top===e;class VB{constructor(e){this._addUpdaterIfMissing=(n,i,s)=>{const r=n.options.move.outModes;!this.updaters.has(i)&&kB(r,i)&&this.updaters.set(i,s(this.container))},this._updateOutMode=(n,i,s,r)=>{for(const l of this.updaters.values())l.update(n,r,i,s)},this.container=e,this.updaters=new Map}init(e){this._addUpdaterIfMissing(e,en.bounce,n=>new MB(n)),this._addUpdaterIfMissing(e,en.out,n=>new NB(n)),this._addUpdaterIfMissing(e,en.destroy,n=>new PB(n)),this._addUpdaterIfMissing(e,en.none,n=>new DB(n))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,n){const i=e.options.move.outModes;this._updateOutMode(e,n,i.bottom??i.default,We.bottom),this._updateOutMode(e,n,i.left??i.default,We.left),this._updateOutMode(e,n,i.right??i.default,We.right),this._updateOutMode(e,n,i.top??i.default,We.top)}}async function LB(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("outModes",n=>Promise.resolve(new VB(n)),e)}var du;(function(t){t[t.r=1]="r",t[t.g=2]="g",t[t.b=3]="b",t[t.a=5]="a"})(du||(du={}));class OB{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const n=e.value,i=n.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const n=e.value,i=n.rgb??e.value;if(i.r!==void 0)return{r:we(i.r),g:we(i.g),b:we(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const n=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=n.exec(e),s=10;return i?{a:i.length>4?f1(i[du.a]):1,b:parseInt(i[du.b],s),g:parseInt(i[du.g],s),r:parseInt(i[du.r],s)}:void 0}}async function UB(t,e=!0){t.checkVersion("3.9.1"),await t.addColorManager(new OB,e)}const xa=0;class zB{init(e){const n=e.container,i=e.options.size,s=i.animation;s.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??n.retina.sizeAnimationSpeed)/Sr*n.retina.reduceFactor,s.sync||(e.size.velocity*=mt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??xa)<=xa||(e.size.maxLoops??xa)>xa&&(e.size.loops??xa)<(e.size.maxLoops??xa))}reset(e){e.size.loops=xa}update(e,n){this.isEnabled(e)&&R0(e,e.size,!0,e.options.size.animation.destroy,n)}}async function BB(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("size",()=>Promise.resolve(new zB),e)}async function FB(t,e=!0){t.checkVersion("3.9.1"),await SB(t,!1),await CB(t,!1),await UB(t,!1),await aB(t,!1),await mB(t,!1),await yB(t,!1),await xB(t,!1),await LB(t,!1),await BB(t,!1),await t.refresh(e)}async function qB(t,e=!0){t.checkVersion("3.9.1"),await t.addEasing(Ga.easeInQuad,n=>n**2,!1),await t.addEasing(Ga.easeOutQuad,n=>1-(1-n)**2,!1),await t.addEasing(Ga.easeInOutQuad,n=>n<.5?2*n**2:1-(-2*n+2)**2/2,!1),await t.refresh(e)}function GB(t,e){const{context:n,opacity:i}=t,s=.5,r=n.globalAlpha;if(!e)return;const l=e.width,c=l*s;n.globalAlpha=i,n.drawImage(e,-c,-c,l,l),n.globalAlpha=r}const cv='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"',nA=0;class HB{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,n]of this._emojiShapeDict)n instanceof ImageBitmap&&(n==null||n.close()),this._emojiShapeDict.delete(e)}draw(e){const n=e.particle.emojiDataKey;if(!n)return;const i=this._emojiShapeDict.get(n);i&&GB(e,i)}async init(e){const n=e.actualOptions,{validTypes:i}=this;if(!i.find(l=>qt(l,n.particles.shape.type)))return;const s=[GC(cv)],r=i.map(l=>n.particles.shape.options[l]).find(l=>!!l);r&&yi(r,l=>{l.font&&s.push(GC(l.font))}),await Promise.all(s)}particleDestroy(e){e.emojiDataKey=void 0}particleInit(e,n){const s=n.shapeData;if(!(s!=null&&s.value))return;const r=Oi(s.value,n.randomIndexData);if(!r)return;const l=typeof r=="string"?{font:s.font??cv,padding:s.padding??nA,value:r}:{font:cv,padding:nA,...s,...r},c=l.font,f=l.value,d=`${f}_${c}`;if(this._emojiShapeDict.has(d)){n.emojiDataKey=d;return}const p=l.padding*2,_=Vs(n.size.value),E=_+p,S=E*2;let A;if(typeof OffscreenCanvas<"u"){const x=new OffscreenCanvas(S,S),R=x.getContext("2d");if(!R)return;R.font=`400 ${_*2}px ${c}`,R.textBaseline="middle",R.textAlign="center",R.fillText(f,E,E),A=x.transferToImageBitmap()}else{const x=document.createElement("canvas");x.width=S,x.height=S;const R=x.getContext("2d");if(!R)return;R.font=`400 ${_*2}px ${c}`,R.textBaseline="middle",R.textAlign="center",R.fillText(f,E,E),A=x}this._emojiShapeDict.set(d,A),n.emojiDataKey=d}}async function $B(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new HB,e)}const YB=1,KB=1,M1=0;function P1(t,e,n,i,s,r){const l=e.actualOptions.interactivity.modes.attract;if(!l)return;const c=e.particles.quadTree.query(s,r);for(const f of c){const{dx:d,dy:p,distance:_}=Hn(f.position,n),E=l.speed*l.factor,S=Bi(t.getEasing(l.easing)(KB-_/i)*E,YB,l.maxSpeed),A=dn.create(_?d/_*S:E,_?p/_*S:E);f.position.subFrom(A)}}function JB(t,e,n){e.attract||(e.attract={particles:[]});const{attract:i}=e;if(i.finish||(i.count||(i.count=0),i.count++,i.count===e.particles.count&&(i.finish=!0)),i.clicking){const s=e.interactivity.mouse.clickPosition,r=e.retina.attractModeDistance;if(!r||r<M1||!s)return;P1(t,e,s,r,new Vn(s.x,s.y,r),l=>n(l))}else i.clicking===!1&&(i.particles=[])}function WB(t,e,n){const i=e.interactivity.mouse.position,s=e.retina.attractModeDistance;!s||s<M1||!i||P1(t,e,i,s,new Vn(i.x,i.y,s),r=>n(r))}class QB{constructor(){this.distance=200,this.duration=.4,this.easing=Ga.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){fe(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}const af="attract";let XB=class extends Ws{constructor(e,n){super(n),this._engine=e,n.attract||(n.attract={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.attract;if(!(!r||i!==af)){n.attract||(n.attract={particles:[]}),n.attract.clicking=!0,n.attract.count=0;for(const l of n.attract.particles)this.isEnabled(l)&&l.velocity.setTo(l.initialVelocity);n.attract.particles=[],n.attract.finish=!1,setTimeout(()=>{n.destroyed||(n.attract||(n.attract={particles:[]}),n.attract.clicking=!1)},r.duration*Dn)}}}clear(){}init(){const e=this.container,n=e.actualOptions.interactivity.modes.attract;n&&(e.retina.attractModeDistance=n.distance*e.retina.pixelRatio)}interact(){const e=this.container,n=e.actualOptions,i=e.interactivity.status===Ka,s=n.interactivity.events,{enable:r,mode:l}=s.onHover,{enable:c,mode:f}=s.onClick;i&&r&&qt(af,l)?WB(this._engine,this.container,d=>this.isEnabled(d)):c&&qt(af,f)&&JB(this._engine,this.container,d=>this.isEnabled(d))}isEnabled(e){const n=this.container,i=n.actualOptions,s=n.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events;if((!s.position||!r.onHover.enable)&&(!s.clickPosition||!r.onClick.enable))return!1;const l=r.onHover.mode,c=r.onClick.mode;return qt(af,l)||qt(af,c)}loadModeOptions(e,...n){e.attract||(e.attract=new QB);for(const i of n)e.attract.load(i==null?void 0:i.attract)}reset(){}};async function jB(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalAttract",n=>Promise.resolve(new XB(t,n)),e)}const ZB=2,cp=.5,eF=Math.PI*cp,iA=2,D1=10,tF=0;function N1(t,e,n,i,s){const r=t.particles.quadTree.query(i,s);for(const l of r)i instanceof Vn?p1(i_(l),{position:e,mass:n**ZB*eF,velocity:dn.origin,factor:dn.origin}):i instanceof us&&wz(l,td(e,n))}function nF(t,e,n,i){const s=document.querySelectorAll(e);s.length&&s.forEach(r=>{const l=r,c=t.retina.pixelRatio,f={x:(l.offsetLeft+l.offsetWidth*cp)*c,y:(l.offsetTop+l.offsetHeight*cp)*c},d=l.offsetWidth*cp*c,p=D1*c,_=n.type===Vu.circle?new Vn(f.x,f.y,d+p):new us(l.offsetLeft*c-p,l.offsetTop*c-p,l.offsetWidth*c+p*iA,l.offsetHeight*c+p*iA);i(f,d,_)})}function iF(t,e,n,i){x0(n,e,(s,r)=>nF(t,s,r,(l,c,f)=>N1(t,l,c,f,i)))}function sF(t,e){const n=t.retina.pixelRatio,i=D1*n,s=t.interactivity.mouse.position,r=t.retina.bounceModeDistance;!r||r<tF||!s||N1(t,s,r,new Vn(s.x,s.y,r+i),e)}class oF{constructor(){this.distance=200}load(e){fe(e)||e.distance!==void 0&&(this.distance=e.distance)}}const Wh="bounce";class rF extends Ws{constructor(e){super(e)}clear(){}init(){const e=this.container,n=e.actualOptions.interactivity.modes.bounce;n&&(e.retina.bounceModeDistance=n.distance*e.retina.pixelRatio)}interact(){const e=this.container,n=e.actualOptions,i=n.interactivity.events,s=e.interactivity.status===Ka,r=i.onHover.enable,l=i.onHover.mode,c=i.onDiv;s&&r&&qt(Wh,l)?sF(this.container,f=>this.isEnabled(f)):iF(this.container,c,Wh,f=>this.isEnabled(f))}isEnabled(e){const n=this.container,i=n.actualOptions,s=n.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,l=r.onDiv;return!!s.position&&r.onHover.enable&&qt(Wh,r.onHover.mode)||A0(Wh,l)}loadModeOptions(e,...n){e.bounce||(e.bounce=new oF);for(const i of n)e.bounce.load(i==null?void 0:i.bounce)}reset(){}}async function aF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalBounce",n=>Promise.resolve(new rF(n)),e)}class k1{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(!fe(e)){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const n=Js(this.color)?void 0:this.color;this.color=yi(e.color,i=>On.create(n,i))}e.size!==void 0&&(this.size=e.size)}}}class lF extends k1{constructor(){super(),this.selectors=[]}load(e){super.load(e),!fe(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class uF extends k1{load(e){super.load(e),!fe(e)&&(this.divs=yi(e.divs,n=>{const i=new lF;return i.load(n),i}))}}var Ns;(function(t){t.color="color",t.opacity="opacity",t.size="size"})(Ns||(Ns={}));function sA(t,e,n,i){if(e>=n){const s=t+(e-n)*i;return Bi(s,t,e)}else if(e<n){const s=t-(n-e)*i;return Bi(s,e,t)}}const Ra="bubble",fv=0,cF=0,fF=2,oA=1,rA=1,dF=0,hF=0,dv=.5,hv=1;class pF extends Ws{constructor(e,n){super(e),this._clickBubble=()=>{var p;const i=this.container,s=i.actualOptions,r=i.interactivity.mouse.clickPosition,l=s.interactivity.modes.bubble;if(!l||!r)return;i.bubble||(i.bubble={});const c=i.retina.bubbleModeDistance;if(!c||c<fv)return;const f=i.particles.quadTree.queryCircle(r,c,_=>this.isEnabled(_)),{bubble:d}=i;for(const _ of f){if(!d.clicking)continue;_.bubble.inRange=!d.durationEnd;const E=_.getPosition(),S=mi(E,r),A=(new Date().getTime()-(i.interactivity.mouse.clickTime??cF))/Dn;A>l.duration&&(d.durationEnd=!0),A>l.duration*fF&&(d.clicking=!1,d.durationEnd=!1);const x={bubbleObj:{optValue:i.retina.bubbleModeSize,value:_.bubble.radius},particlesObj:{optValue:Vs(_.options.size.value)*i.retina.pixelRatio,value:_.size.value},type:Ns.size};this._process(_,S,A,x);const R={bubbleObj:{optValue:l.opacity,value:_.bubble.opacity},particlesObj:{optValue:Vs(_.options.opacity.value),value:((p=_.opacity)==null?void 0:p.value)??oA},type:Ns.opacity};this._process(_,S,A,R),!d.durationEnd&&S<=c?this._hoverBubbleColor(_,S):delete _.bubble.color}},this._hoverBubble=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.bubbleModeDistance;if(!r||r<fv||!s)return;const l=i.particles.quadTree.queryCircle(s,r,c=>this.isEnabled(c));for(const c of l){c.bubble.inRange=!0;const f=c.getPosition(),d=mi(f,s),p=rA-d/r;d<=r?p>=hF&&i.interactivity.status===Ka&&(this._hoverBubbleSize(c,p),this._hoverBubbleOpacity(c,p),this._hoverBubbleColor(c,p)):this.reset(c),i.interactivity.status===Xv&&this.reset(c)}},this._hoverBubbleColor=(i,s,r)=>{const l=this.container.actualOptions,c=r??l.interactivity.modes.bubble;if(c){if(!i.bubble.finalColor){const f=c.color;if(!f)return;const d=Oi(f);i.bubble.finalColor=Lf(this._engine,d)}if(i.bubble.finalColor)if(c.mix){i.bubble.color=void 0;const f=i.getFillColor();i.bubble.color=f?_1(I0(f,i.bubble.finalColor,rA-s,s)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,s,r)=>{var E,S;const l=this.container,c=l.actualOptions,f=(r==null?void 0:r.opacity)??((E=c.interactivity.modes.bubble)==null?void 0:E.opacity);if(!f)return;const d=i.options.opacity.value,p=((S=i.opacity)==null?void 0:S.value)??oA,_=sA(p,f,Vs(d),s);_!==void 0&&(i.bubble.opacity=_)},this._hoverBubbleSize=(i,s,r)=>{const l=this.container,c=r!=null&&r.size?r.size*l.retina.pixelRatio:l.retina.bubbleModeSize;if(c===void 0)return;const f=Vs(i.options.size.value)*l.retina.pixelRatio,d=i.size.value,p=sA(d,c,f,s);p!==void 0&&(i.bubble.radius=p)},this._process=(i,s,r,l)=>{const c=this.container,f=l.bubbleObj.optValue,d=c.actualOptions,p=d.interactivity.modes.bubble;if(!p||f===void 0)return;const _=p.duration,E=c.retina.bubbleModeDistance,S=l.particlesObj.optValue,A=l.bubbleObj.value,x=l.particlesObj.value??dF,R=l.type;if(!(!E||E<fv||f===S))if(c.bubble||(c.bubble={}),c.bubble.durationEnd)A&&(R===Ns.size&&delete i.bubble.radius,R===Ns.opacity&&delete i.bubble.opacity);else if(s<=E){if((A??x)!==f){const O=x-r*(x-f)/_;R===Ns.size&&(i.bubble.radius=O),R===Ns.opacity&&(i.bubble.opacity=O)}}else R===Ns.size&&delete i.bubble.radius,R===Ns.opacity&&delete i.bubble.opacity},this._singleSelectorHover=(i,s,r)=>{const l=this.container,c=document.querySelectorAll(s),f=l.actualOptions.interactivity.modes.bubble;!f||!c.length||c.forEach(d=>{const p=d,_=l.retina.pixelRatio,E={x:(p.offsetLeft+p.offsetWidth*dv)*_,y:(p.offsetTop+p.offsetHeight*dv)*_},S=p.offsetWidth*dv*_,A=r.type===Vu.circle?new Vn(E.x,E.y,S):new us(p.offsetLeft*_,p.offsetTop*_,p.offsetWidth*_,p.offsetHeight*_),x=l.particles.quadTree.query(A,R=>this.isEnabled(R));for(const R of x){if(!A.contains(R.getPosition()))continue;R.bubble.inRange=!0;const V=f.divs,O=h1(V,p);(!R.bubble.div||R.bubble.div!==p)&&(this.clear(R,i,!0),R.bubble.div=p),this._hoverBubbleSize(R,hv,O),this._hoverBubbleOpacity(R,hv,O),this._hoverBubbleColor(R,hv,O)}})},this._engine=n,e.bubble||(e.bubble={}),this.handleClickMode=i=>{i===Ra&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,n,i){e.bubble.inRange&&!i||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,n=e.actualOptions.interactivity.modes.bubble;n&&(e.retina.bubbleModeDistance=n.distance*e.retina.pixelRatio,n.size!==void 0&&(e.retina.bubbleModeSize=n.size*e.retina.pixelRatio))}interact(e){const n=this.container.actualOptions,i=n.interactivity.events,s=i.onHover,r=i.onClick,l=s.enable,c=s.mode,f=r.enable,d=r.mode,p=i.onDiv;l&&qt(Ra,c)?this._hoverBubble():f&&qt(Ra,d)?this._clickBubble():x0(Ra,p,(_,E)=>this._singleSelectorHover(e,_,E))}isEnabled(e){const n=this.container,i=n.actualOptions,s=n.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,{onClick:l,onDiv:c,onHover:f}=r,d=A0(Ra,c);return d||f.enable&&s.position||l.enable&&s.clickPosition?qt(Ra,f.mode)||qt(Ra,l.mode)||d:!1}loadModeOptions(e,...n){e.bubble||(e.bubble=new uF);for(const i of n)e.bubble.load(i==null?void 0:i.bubble)}reset(e){e.bubble.inRange=!1}}async function mF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalBubble",n=>Promise.resolve(new pF(n,t)),e)}class gF{constructor(){this.opacity=.5}load(e){fe(e)||e.opacity!==void 0&&(this.opacity=e.opacity)}}class yF{constructor(){this.distance=80,this.links=new gF,this.radius=60}load(e){fe(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links),e.radius!==void 0&&(this.radius=e.radius))}}const aA=0,lA=1,vF=0;function _F(t,e,n,i){const s=Math.floor(n.getRadius()/e.getRadius()),r=e.getFillColor(),l=n.getFillColor();if(!r||!l)return;const c=e.getPosition(),f=n.getPosition(),d=I0(r,l,e.getRadius(),n.getRadius()),p=t.createLinearGradient(c.x,c.y,f.x,f.y);return p.addColorStop(aA,Of(r,i)),p.addColorStop(Bi(s,aA,lA),Co(d,i)),p.addColorStop(lA,Of(l,i)),p}function TF(t,e,n,i,s){Sf(t,i,s),t.lineWidth=e,t.strokeStyle=n,t.stroke()}function EF(t,e,n,i){const s=t.actualOptions,r=s.interactivity.modes.connect;if(r)return _F(e,n,i,r.links.opacity)}function wF(t,e,n){t.canvas.draw(i=>{const s=EF(t,i,e,n);if(!s)return;const r=e.getPosition(),l=n.getPosition();TF(i,e.retina.linksWidth??vF,s,r,l)})}const SF="connect",uA=0;class bF extends Ws{constructor(e){super(e)}clear(){}init(){const e=this.container,n=e.actualOptions.interactivity.modes.connect;n&&(e.retina.connectModeDistance=n.distance*e.retina.pixelRatio,e.retina.connectModeRadius=n.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const i=e.interactivity.mouse.position,{connectModeDistance:s,connectModeRadius:r}=e.retina;if(!s||s<uA||!r||r<uA||!i)return;const l=Math.abs(r),c=e.particles.quadTree.queryCircle(i,l,f=>this.isEnabled(f));c.forEach((f,d)=>{const p=f.getPosition(),_=1;for(const E of c.slice(d+_)){const S=E.getPosition(),A=Math.abs(s),x=Math.abs(p.x-S.x),R=Math.abs(p.y-S.y);x<A&&R<A&&wF(e,f,E)}})}}isEnabled(e){const n=this.container,i=n.interactivity.mouse,s=((e==null?void 0:e.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&i.position?qt(SF,s.onHover.mode):!1}loadModeOptions(e,...n){e.connect||(e.connect=new yF);for(const i of n)e.connect.load(i==null?void 0:i.connect)}reset(){}}async function CF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalConnect",n=>Promise.resolve(new bF(n)),e)}class AF{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){fe(e)||(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=On.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class xF{constructor(){this.distance=100,this.links=new AF}load(e){fe(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links))}}const RF=0;function IF(t,e,n,i,s,r){Sf(t,n,i),t.strokeStyle=Co(s,r),t.lineWidth=e,t.stroke()}function MF(t,e,n,i,s){t.canvas.draw(r=>{const l=e.getPosition();IF(r,e.retina.linksWidth??RF,l,s,n,i)})}const PF="grab",DF=0,NF=0;class kF extends Ws{constructor(e,n){super(e),this._engine=n}clear(){}init(){const e=this.container,n=e.actualOptions.interactivity.modes.grab;n&&(e.retina.grabModeDistance=n.distance*e.retina.pixelRatio)}interact(){var c;const e=this.container,n=e.actualOptions,i=n.interactivity;if(!i.modes.grab||!i.events.onHover.enable||e.interactivity.status!==Ka)return;const s=e.interactivity.mouse.position;if(!s)return;const r=e.retina.grabModeDistance;if(!r||r<DF)return;const l=e.particles.quadTree.queryCircle(s,r,f=>this.isEnabled(f));for(const f of l){const d=f.getPosition(),p=mi(d,s);if(p>r)continue;const _=i.modes.grab.links,E=_.opacity,S=E-p*E/r;if(S<=NF)continue;const A=_.color??((c=f.options.links)==null?void 0:c.color);if(!e.particles.grabLineColor&&A){const R=i.modes.grab.links;e.particles.grabLineColor=E1(this._engine,A,R.blink,R.consent)}const x=o_(f,void 0,e.particles.grabLineColor);x&&MF(e,f,x,S,s)}}isEnabled(e){const n=this.container,i=n.interactivity.mouse,s=((e==null?void 0:e.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&qt(PF,s.onHover.mode)}loadModeOptions(e,...n){e.grab||(e.grab=new xF);for(const i of n)e.grab.load(i==null?void 0:i.grab)}reset(){}}async function VF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalGrab",n=>Promise.resolve(new kF(n,t)),e)}const LF="pause";class OF extends Ws{constructor(e){super(e),this.handleClickMode=n=>{if(n!==LF)return;const i=this.container;i.animationStatus?i.pause():i.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function UF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalPause",n=>Promise.resolve(new OF(n)),e)}class zF{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(fe(e))return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(i=>i)),this.groups.length||(this.default=!0);const n=e.quantity;n!==void 0&&(this.quantity=it(n)),this.particles=yi(e.particles,i=>Ln({},i))}}const BF="push",FF=0;class qF extends Ws{constructor(e){super(e),this.handleClickMode=n=>{if(n!==BF)return;const i=this.container,s=i.actualOptions,r=s.interactivity.modes.push;if(!r)return;const l=we(r.quantity);if(l<=FF)return;const c=dm([void 0,...r.groups]),f=c!==void 0?i.actualOptions.particles.groups[c]:void 0,d=Oi(r.particles),p=Ln(f,d);i.particles.push(l,i.interactivity.mouse,p,c)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...n){e.push||(e.push=new zF);for(const i of n)e.push.load(i==null?void 0:i.push)}reset(){}}async function GF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalPush",n=>Promise.resolve(new qF(n)),e)}class HF{constructor(){this.quantity=2}load(e){if(fe(e))return;const n=e.quantity;n!==void 0&&(this.quantity=it(n))}}const $F="remove";class YF extends Ws{constructor(e){super(e),this.handleClickMode=n=>{const i=this.container,s=i.actualOptions;if(!s.interactivity.modes.remove||n!==$F)return;const r=we(s.interactivity.modes.remove.quantity);i.particles.removeQuantity(r)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...n){e.remove||(e.remove=new HF);for(const i of n)e.remove.load(i==null?void 0:i.remove)}reset(){}}async function KF(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalRemove",n=>Promise.resolve(new YF(n)),e)}class V1{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=Ga.easeOutQuad}load(e){fe(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class JF extends V1{constructor(){super(),this.selectors=[]}load(e){super.load(e),!fe(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class WF extends V1{load(e){super.load(e),!fe(e)&&(this.divs=yi(e.divs,n=>{const i=new JF;return i.load(n),i}))}}const Ia="repulse",QF=0,XF=6,jF=3,ZF=2,e6=0,t6=0,n6=1,pv=.5;class i6 extends Ws{constructor(e,n){super(n),this._clickRepulse=()=>{const i=this.container,s=i.actualOptions.interactivity.modes.repulse;if(!s)return;const r=i.repulse??{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===i.particles.count&&(r.finish=!0)),r.clicking){const l=i.retina.repulseModeDistance;if(!l||l<QF)return;const c=Math.pow(l/XF,jF),f=i.interactivity.mouse.clickPosition;if(f===void 0)return;const d=new Vn(f.x,f.y,c),p=i.particles.quadTree.query(d,_=>this.isEnabled(_));for(const _ of p){const{dx:E,dy:S,distance:A}=Hn(f,_.position),x=A**ZF,R=s.speed,V=-c*R/x;if(x<=c){r.particles.push(_);const O=dn.create(E,S);O.length=V,_.velocity.setTo(O)}}}else if(r.clicking===!1){for(const l of r.particles)l.velocity.setTo(l.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.repulseModeDistance;!r||r<e6||!s||this._processRepulse(s,r,new Vn(s.x,s.y,r))},this._processRepulse=(i,s,r,l)=>{const c=this.container,f=c.particles.quadTree.query(r,R=>this.isEnabled(R)),d=c.actualOptions.interactivity.modes.repulse;if(!d)return;const{easing:p,speed:_,factor:E,maxSpeed:S}=d,A=this._engine.getEasing(p),x=((l==null?void 0:l.speed)??_)*E;for(const R of f){const{dx:V,dy:O,distance:F}=Hn(R.position,i),H=Bi(A(n6-F/s)*x,t6,S),Y=dn.create(F?V/F*H:x,F?O/F*H:x);R.position.addTo(Y)}},this._singleSelectorRepulse=(i,s)=>{const r=this.container,l=r.actualOptions.interactivity.modes.repulse;if(!l)return;const c=document.querySelectorAll(i);c.length&&c.forEach(f=>{const d=f,p=r.retina.pixelRatio,_={x:(d.offsetLeft+d.offsetWidth*pv)*p,y:(d.offsetTop+d.offsetHeight*pv)*p},E=d.offsetWidth*pv*p,S=s.type===Vu.circle?new Vn(_.x,_.y,E):new us(d.offsetLeft*p,d.offsetTop*p,d.offsetWidth*p,d.offsetHeight*p),A=l.divs,x=h1(A,d);this._processRepulse(_,E,S,x)})},this._engine=e,n.repulse||(n.repulse={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.repulse;if(!r||i!==Ia)return;n.repulse||(n.repulse={particles:[]});const l=n.repulse;l.clicking=!0,l.count=0;for(const c of n.repulse.particles)this.isEnabled(c)&&c.velocity.setTo(c.initialVelocity);l.particles=[],l.finish=!1,setTimeout(()=>{n.destroyed||(l.clicking=!1)},r.duration*Dn)}}clear(){}init(){const e=this.container,n=e.actualOptions.interactivity.modes.repulse;n&&(e.retina.repulseModeDistance=n.distance*e.retina.pixelRatio)}interact(){const e=this.container,n=e.actualOptions,i=e.interactivity.status===Ka,s=n.interactivity.events,r=s.onHover,l=r.enable,c=r.mode,f=s.onClick,d=f.enable,p=f.mode,_=s.onDiv;i&&l&&qt(Ia,c)?this._hoverRepulse():d&&qt(Ia,p)?this._clickRepulse():x0(Ia,_,(E,S)=>this._singleSelectorRepulse(E,S))}isEnabled(e){const n=this.container,i=n.actualOptions,s=n.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,l=r.onDiv,c=r.onHover,f=r.onClick,d=A0(Ia,l);if(!(d||c.enable&&s.position||f.enable&&s.clickPosition))return!1;const p=c.mode,_=f.mode;return qt(Ia,p)||qt(Ia,_)||d}loadModeOptions(e,...n){e.repulse||(e.repulse=new WF);for(const i of n)e.repulse.load(i==null?void 0:i.repulse)}reset(){}}async function s6(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalRepulse",n=>Promise.resolve(new i6(t,n)),e)}class o6{constructor(){this.factor=3,this.radius=200}load(e){fe(e)||(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}const r6="slow",a6=0;class l6 extends Ws{constructor(e){super(e)}clear(e,n,i){e.slow.inRange&&!i||(e.slow.factor=1)}init(){const e=this.container,n=e.actualOptions.interactivity.modes.slow;n&&(e.retina.slowModeRadius=n.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const n=this.container,i=n.interactivity.mouse,s=((e==null?void 0:e.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&qt(r6,s.onHover.mode)}loadModeOptions(e,...n){e.slow||(e.slow=new o6);for(const i of n)e.slow.load(i==null?void 0:i.slow)}reset(e){e.slow.inRange=!1;const n=this.container,i=n.actualOptions,s=n.interactivity.mouse.position,r=n.retina.slowModeRadius,l=i.interactivity.modes.slow;if(!l||!r||r<a6||!s)return;const c=e.getPosition(),f=mi(s,c),d=f/r,p=l.factor,{slow:_}=e;f>r||(_.inRange=!0,_.factor=d/p)}}async function u6(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("externalSlow",n=>Promise.resolve(new l6(n)),e)}const c6=0,f6=1,d6=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function h6(t,e,n){const{svgData:i}=t;if(!i)return"";const s=Of(e,n);if(i.includes("fill"))return i.replace(d6,()=>s);const r=i.indexOf(">");return`${i.substring(c6,r)} fill="${s}"${i.substring(r)}`}async function hm(t){return new Promise(e=>{t.loading=!0;const n=new Image;t.element=n,n.addEventListener("load",()=>{t.loading=!1,e()}),n.addEventListener("error",()=>{t.element=void 0,t.error=!0,t.loading=!1,Wa().error(`${zi} loading image: ${t.source}`),e()}),n.src=t.source})}async function p6(t){if(t.type!=="svg"){await hm(t);return}t.loading=!0;const e=await fetch(t.source);e.ok?t.svgData=await e.text():(Wa().error(`${zi} Image not found`),t.error=!0),t.loading=!1}function m6(t,e,n,i){var l;const s=h6(t,n,((l=i.opacity)==null?void 0:l.value)??f6),r={color:n,gif:e.gif,data:{...t,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(c=>{const f=new Blob([s],{type:"image/svg+xml"}),d=URL||window.URL||window.webkitURL||window,p=d.createObjectURL(f),_=new Image;_.addEventListener("load",()=>{r.loaded=!0,r.element=_,c(r),d.revokeObjectURL(p)});const E=async()=>{d.revokeObjectURL(p);const S={...t,error:!1,loading:!0};await hm(S),r.loaded=!0,r.element=S.element,c(r)};_.addEventListener("error",()=>void E()),_.src=p})}const mv=[0,4,2,1],cA=[8,8,4,2];class g6{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const n=this.data.slice(this.pos,this.pos+e);return this.pos+=n.length,n.reduce((i,s)=>i+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",n=0;const i=0,s=0;do{n=this.data[this.pos++];for(let r=n;--r>=i;e+=String.fromCharCode(this.data[this.pos++]));}while(n!==s);return e}readSubBlocksBin(){let e=this.data[this.pos],n=0;const i=0,s=1;for(let l=0;e!==i;l+=e+s,e=this.data[this.pos+l])n+=e;const r=new Uint8Array(n);e=this.data[this.pos++];for(let l=0;e!==i;e=this.data[this.pos++])for(let c=e;--c>=i;r[l++]=this.data[this.pos++]);return r}skipSubBlocks(){for(const e=1,n=0;this.data[this.pos]!==n;this.pos+=this.data[this.pos]+e);this.pos++}}var es;(function(t){t[t.Replace=0]="Replace",t[t.Combine=1]="Combine",t[t.RestoreBackground=2]="RestoreBackground",t[t.RestorePrevious=3]="RestorePrevious",t[t.UndefinedA=4]="UndefinedA",t[t.UndefinedB=5]="UndefinedB",t[t.UndefinedC=6]="UndefinedC",t[t.UndefinedD=7]="UndefinedD"})(es||(es={}));var To;(function(t){t[t.Extension=33]="Extension",t[t.ApplicationExtension=255]="ApplicationExtension",t[t.GraphicsControlExtension=249]="GraphicsControlExtension",t[t.PlainTextExtension=1]="PlainTextExtension",t[t.CommentExtension=254]="CommentExtension",t[t.Image=44]="Image",t[t.EndOfFile=59]="EndOfFile"})(To||(To={}));const jn={x:0,y:0},y6=0,fA=.5,v6=0,dA=0,a_=0;function L1(t,e){const n=[];for(let i=0;i<e;i++)n.push({r:t.data[t.pos],g:t.data[t.pos+1],b:t.data[t.pos+2]}),t.pos+=3;return n}function _6(t,e,n,i){switch(t.nextByte()){case To.GraphicsControlExtension:{const s=e.frames[n(!1)];t.pos++;const r=t.nextByte();s.GCreserved=(r&224)>>>5,s.disposalMethod=(r&28)>>>2,s.userInputDelayFlag=(r&2)===2;const l=(r&1)===1;s.delayTime=t.nextTwoBytes()*10;const c=t.nextByte();l&&i(c),t.pos++;break}case To.ApplicationExtension:{t.pos++;const s={identifier:t.getString(8),authenticationCode:t.getString(3),data:t.readSubBlocksBin()};e.applicationExtensions.push(s);break}case To.CommentExtension:{e.comments.push([n(!1),t.readSubBlocks()]);break}case To.PlainTextExtension:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");t.pos++,e.frames[n(!1)].plainTextData={left:t.nextTwoBytes(),top:t.nextTwoBytes(),width:t.nextTwoBytes(),height:t.nextTwoBytes(),charSize:{width:t.nextTwoBytes(),height:t.nextTwoBytes()},foregroundColor:t.nextByte(),backgroundColor:t.nextByte(),text:t.readSubBlocks()};break}default:t.skipSubBlocks();break}}async function T6(t,e,n,i,s,r){const l=e.frames[i(!0)];l.left=t.nextTwoBytes(),l.top=t.nextTwoBytes(),l.width=t.nextTwoBytes(),l.height=t.nextTwoBytes();const c=t.nextByte(),f=(c&128)===128,d=(c&64)===64;l.sortFlag=(c&32)===32,l.reserved=(c&24)>>>3;const p=1<<(c&7)+1;f&&(l.localColorTable=L1(t,p));const _=V=>{const{r:O,g:F,b:H}=(f?l.localColorTable:e.globalColorTable)[V];return V!==s(null)?{r:O,g:F,b:H,a:255}:{r:O,g:F,b:H,a:n?~~((O+F+H)/3):0}},E=(()=>{try{return new ImageData(l.width,l.height,{colorSpace:"srgb"})}catch(V){if(V instanceof DOMException&&V.name==="IndexSizeError")return null;throw V}})();if(E==null)throw new EvalError("GIF frame size is to large");const S=t.nextByte(),A=t.readSubBlocksBin(),x=1<<S,R=(V,O)=>{const F=V>>>3,H=V&7;return(A[F]+(A[F+1]<<8)+(A[F+2]<<16)&(1<<O)-1<<H)>>>H};if(d){for(let V=0,O=S+1,F=0,H=[[0]],Y=0;Y<4;Y++)if(mv[Y]<l.height){let Z=0,D=0,M=!1;for(;!M;){const k=V;if(V=R(F,O),F+=O+1,V===x){O=S+1,H.length=x+2;for(let U=0;U<H.length;U++)H[U]=U<x?[U]:[]}else{V>=H.length?H.push(H[k].concat(H[k][0])):k!==x&&H.push(H[k].concat(H[V][0]));for(const U of H[V]){const{r:z,g:B,b:L,a:Ae}=_(U);E.data.set([z,B,L,Ae],mv[Y]*l.width+cA[Y]*D+Z%(l.width*4)),Z+=4}H.length===1<<O&&O<12&&O++}Z===l.width*4*(D+1)&&(D++,mv[Y]+cA[Y]*D>=l.height&&(M=!0))}}l.image=E,l.bitmap=await createImageBitmap(E)}else{let V=0,O=S+1,F=0,H=-4,Y=!1;const Z=[[0]];for(;!Y;){const D=V;if(V=R(F,O),F+=O,V===x){O=S+1,Z.length=x+2;for(let M=0;M<Z.length;M++)Z[M]=M<x?[M]:[]}else{if(V===x+1){Y=!0;break}V>=Z.length?Z.push(Z[D].concat(Z[D][0])):D!==x&&Z.push(Z[D].concat(Z[V][0]));for(const M of Z[V]){const{r:k,g:U,b:z,a:B}=_(M);E.data.set([k,U,z,B],H+=4)}Z.length>=1<<O&&O<12&&O++}}l.image=E,l.bitmap=await createImageBitmap(E)}}async function E6(t,e,n,i,s,r){switch(t.nextByte()){case To.EndOfFile:return!0;case To.Image:await T6(t,e,n,i,s);break;case To.Extension:_6(t,e,i,s);break;default:throw new EvalError("undefined block found")}return!1}function w6(t){for(const e of t.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function S6(t,e,n){n||(n=!1);const i=await fetch(t);if(!i.ok&&i.status===404)throw new EvalError("file not found");const s=await i.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},l=new g6(new Uint8ClampedArray(s));if(l.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=l.nextTwoBytes(),r.height=l.nextTwoBytes();const c=l.nextByte(),f=(c&128)===128;r.colorRes=(c&112)>>>4,r.sortFlag=(c&8)===8;const d=1<<(c&7)+1,p=l.nextByte();r.pixelAspectRatio=l.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),f&&(r.globalColorTable=L1(l,d));const _=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(H){if(H instanceof DOMException&&H.name==="IndexSizeError")return null;throw H}})();if(_==null)throw new Error("GIF frame size is to large");const{r:E,g:S,b:A}=r.globalColorTable[p];_.data.set(f?[E,S,A,255]:[0,0,0,0]);for(let H=4;H<_.data.length;H*=2)_.data.copyWithin(H,0,H);r.backgroundImage=_;let x=-1,R=!0,V=-1;const O=H=>(H&&(R=!0),x),F=H=>(H!=null&&(V=H),V);try{do R&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:es.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),x++,V=-1,R=!1);while(!await E6(l,r,n,O,F,e));r.frames.length--;for(const H of r.frames){if(H.userInputDelayFlag&&H.delayTime===0){r.totalTime=1/0;break}r.totalTime+=H.delayTime}return r}catch(H){throw H instanceof EvalError?new Error(`error while parsing frame ${x} "${H.message}"`):H}}function b6(t){const{context:e,radius:n,particle:i,delta:s}=t,r=i.image;if(!(r!=null&&r.gifData)||!r.gif)return;const l=new OffscreenCanvas(r.gifData.width,r.gifData.height),c=l.getContext("2d");if(!c)throw new Error("could not create offscreen canvas context");c.imageSmoothingQuality="low",c.imageSmoothingEnabled=!1,c.clearRect(jn.x,jn.y,l.width,l.height),i.gifLoopCount===void 0&&(i.gifLoopCount=r.gifLoopCount??a_);let f=i.gifFrame??y6;const d={x:-r.gifData.width*fA,y:-r.gifData.height*fA},p=r.gifData.frames[f];if(i.gifTime===void 0&&(i.gifTime=v6),!!p.bitmap){switch(e.scale(n/r.gifData.width,n/r.gifData.height),p.disposalMethod){case es.UndefinedA:case es.UndefinedB:case es.UndefinedC:case es.UndefinedD:case es.Replace:c.drawImage(p.bitmap,p.left,p.top),e.drawImage(l,d.x,d.y),c.clearRect(jn.x,jn.y,l.width,l.height);break;case es.Combine:c.drawImage(p.bitmap,p.left,p.top),e.drawImage(l,d.x,d.y);break;case es.RestoreBackground:c.drawImage(p.bitmap,p.left,p.top),e.drawImage(l,d.x,d.y),c.clearRect(jn.x,jn.y,l.width,l.height),r.gifData.globalColorTable.length?c.putImageData(r.gifData.backgroundImage,d.x,d.y):c.putImageData(r.gifData.frames[dA].image,d.x+p.left,d.y+p.top);break;case es.RestorePrevious:{const _=c.getImageData(jn.x,jn.y,l.width,l.height);c.drawImage(p.bitmap,p.left,p.top),e.drawImage(l,d.x,d.y),c.clearRect(jn.x,jn.y,l.width,l.height),c.putImageData(_,jn.x,jn.y)}break}if(i.gifTime+=s.value,i.gifTime>p.delayTime){if(i.gifTime-=p.delayTime,++f>=r.gifData.frames.length){if(--i.gifLoopCount<=a_)return;f=dA,c.clearRect(jn.x,jn.y,l.width,l.height)}i.gifFrame=f}e.scale(r.gifData.width/n,r.gifData.height/n)}}async function C6(t){if(t.type!=="gif"){await hm(t);return}t.loading=!0;try{t.gifData=await S6(t.source),t.gifLoopCount=w6(t.gifData)??a_,t.gifLoopCount||(t.gifLoopCount=1/0)}catch{t.error=!0}t.loading=!1}const A6=2,x6=1,R6=12,I6=1;class M6{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async n=>{if(!this._engine.loadImage)throw new Error(`${zi} image shape not initialized`);await this._engine.loadImage({gif:n.gif,name:n.name,replaceColor:n.replaceColor??!1,src:n.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:n,radius:i,particle:s,opacity:r}=e,l=s.image,c=l==null?void 0:l.element;if(l){if(n.globalAlpha=r,l.gif&&l.gifData)b6(e);else if(c){const f=l.ratio,d={x:-i,y:-i},p=i*A6;n.drawImage(c,d.x,d.y,p,p/f)}n.globalAlpha=x6}}getSidesCount(){return R6}async init(e){const n=e.actualOptions;if(!(!n.preload||!this._engine.loadImage))for(const i of n.preload)await this._engine.loadImage(i)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const n=e.shapeData;if(!n)return;this._engine.images.find(s=>s.name===n.name||s.source===n.src)||this.loadImageShape(n).then(()=>{this.loadShape(e)})}particleInit(e,n){if(n.shape!=="image"&&n.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,s=n.shapeData;if(!s)return;const r=n.getFillColor(),l=i.find(f=>f.name===s.name||f.source===s.src);if(!l)return;const c=s.replaceColor??l.replaceColor;if(l.loading){setTimeout(()=>{this.particleInit(e,n)});return}(async()=>{let f;l.svgData&&r?f=await m6(l,s,r,n):f={color:r,data:l,element:l.element,gif:l.gif,gifData:l.gifData,gifLoopCount:l.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:l.ratio??I6,replaceColor:c,source:s.src},f.ratio||(f.ratio=1);const d=s.fill??n.shapeFill,p=s.close??n.shapeClose,_={image:f,fill:d,close:p};n.image=_.image,n.shapeFill=_.fill,n.shapeClose=_.close})()}}class P6{constructor(){this.src="",this.gif=!1}load(e){fe(e)||(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class D6{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,n){if(!(n!=null&&n.preload))return;e.preload||(e.preload=[]);const i=e.preload;for(const s of n.preload){const r=i.find(l=>l.name===s.name||l.src===s.src);if(r)r.load(s);else{const l=new P6;l.load(s),i.push(l)}}}needsPlugin(){return!0}}const N6=3;function k6(t){t.loadImage||(t.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${zi} no image source provided`);if(t.images||(t.images=[]),!t.images.find(n=>n.name===e.name||n.source===e.src))try{const n={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-N6),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};t.images.push(n);let i;e.gif?i=C6:i=e.replaceColor?p6:hm,await i(n)}catch{throw new Error(`${zi} ${e.name??e.src} not found`)}})}async function V6(t,e=!0){t.checkVersion("3.9.1"),k6(t);const n=new D6(t);await t.addPlugin(n,e),await t.addShape(new M6(t),e)}class L6 extends sl{constructor(){super(),this.sync=!1}load(e){fe(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class O6 extends sl{constructor(){super(),this.sync=!1}load(e){fe(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class U6{constructor(){this.count=0,this.delay=new L6,this.duration=new O6}load(e){fe(e)||(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const Xl=0,z6=-1,hA=0,pA=0;function B6(t,e,n){if(!t.life)return;const i=t.life;let s=!1;if(t.spawning)if(i.delayTime+=e.value,i.delayTime>=t.life.delay)s=!0,t.spawning=!1,i.delayTime=Xl,i.time=Xl;else return;if(i.duration===z6||t.spawning||(s?i.time=Xl:i.time+=e.value,i.time<i.duration))return;if(i.time=Xl,t.life.count>hA&&t.life.count--,t.life.count===hA){t.destroy();return}const r=it(pA,n.width),l=it(pA,n.width);t.position.x=di(r),t.position.y=di(l),t.spawning=!0,i.delayTime=Xl,i.time=Xl,t.reset();const c=t.options.life;c&&(i.delay=we(c.delay.value)*Dn,i.duration=we(c.duration.value)*Dn)}const Ma=0,mA=1,gA=-1;class F6{constructor(e){this.container=e}init(e){const n=this.container,i=e.options,s=i.life;s&&(e.life={delay:n.retina.reduceFactor?we(s.delay.value)*(s.delay.sync?mA:mt())/n.retina.reduceFactor*Dn:Ma,delayTime:Ma,duration:n.retina.reduceFactor?we(s.duration.value)*(s.duration.sync?mA:mt())/n.retina.reduceFactor*Dn:Ma,time:Ma,count:s.count},e.life.duration<=Ma&&(e.life.duration=gA),e.life.count<=Ma&&(e.life.count=gA),e.life&&(e.spawning=e.life.delay>Ma))}isEnabled(e){return!e.destroyed}loadOptions(e,...n){e.life||(e.life=new U6);for(const i of n)e.life.load(i==null?void 0:i.life)}update(e,n){!this.isEnabled(e)||!e.life||B6(e,n,this.container.canvas.size)}}async function q6(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("life",async n=>Promise.resolve(new F6(n)),e)}function G6(t){const{context:e,particle:n,radius:i}=t,s=n.shapeData,r=0;e.moveTo(-i,r),e.lineTo(i,r),e.lineCap=(s==null?void 0:s.cap)??"butt"}const H6=1;class $6{constructor(){this.validTypes=["line"]}draw(e){G6(e)}getSidesCount(){return H6}}async function Y6(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new $6,e)}const yA=.5;class K6{init(){}isEnabled(e){return!Qa()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const n=e.container,i=n.actualOptions,s=i.interactivity.events.onHover.parallax;if(Qa()||!s.enable)return;const r=s.force,l=n.interactivity.mouse.position;if(!l)return;const c=n.canvas.size,f={x:c.width*yA,y:c.height*yA},d=s.smooth,p=e.getRadius()/r,_={x:(l.x-f.x)*p,y:(l.y-f.y)*p},{offset:E}=e;E.x+=(_.x-E.x)/d,E.y+=(_.y-E.y)/d}}async function J6(t,e=!0){t.checkVersion("3.9.1"),await t.addMover("parallax",()=>Promise.resolve(new K6),e)}const vA=1e3,W6=1;class Q6 extends D0{constructor(e){super(e)}clear(){}init(){}interact(e){const n=this.container;e.attractDistance===void 0&&(e.attractDistance=we(e.options.move.attract.distance)*n.retina.pixelRatio);const i=e.attractDistance,s=e.getPosition(),r=n.particles.quadTree.queryCircle(s,i);for(const l of r){if(e===l||!l.options.move.attract.enable||l.destroyed||l.spawning)continue;const c=l.getPosition(),{dx:f,dy:d}=Hn(s,c),p=e.options.move.attract.rotate,_=f/(p.x*vA),E=d/(p.y*vA),S=l.size.value/e.size.value,A=W6/S;e.velocity.x-=_*S,e.velocity.y-=E*S,l.velocity.x+=_*A,l.velocity.y+=E*A}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function X6(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("particlesAttract",n=>Promise.resolve(new Q6(n)),e)}const j6=.5,Z6=10,e5=0;function _A(t,e,n,i,s,r){const l=Bi(t.options.collisions.absorb.speed*s.factor/Z6,e5,i);t.size.value+=l*j6,n.size.value-=l,i<=r&&(n.size.value=0,n.destroy())}function t5(t,e,n,i){const s=t.getRadius(),r=e.getRadius();s===void 0&&r!==void 0?t.destroy():s!==void 0&&r===void 0?e.destroy():s!==void 0&&r!==void 0&&(s>=r?_A(t,s,e,r,n,i):_A(e,r,t,s,n,i))}const TA=t=>{t.collisionMaxSpeed===void 0&&(t.collisionMaxSpeed=we(t.options.collisions.maxSpeed)),t.velocity.length>t.collisionMaxSpeed&&(t.velocity.length=t.collisionMaxSpeed)};function O1(t,e){p1(i_(t),i_(e)),TA(t),TA(e)}function n5(t,e){!t.unbreakable&&!e.unbreakable&&O1(t,e),t.getRadius()===void 0&&e.getRadius()!==void 0?t.destroy():t.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():t.getRadius()!==void 0&&e.getRadius()!==void 0&&(t.getRadius()>=e.getRadius()?e:t).destroy()}function i5(t,e,n,i){switch(t.options.collisions.mode){case yu.absorb:{t5(t,e,n,i);break}case yu.bounce:{O1(t,e);break}case yu.destroy:{n5(t,e);break}}}const s5=2;class o5 extends D0{constructor(e){super(e)}clear(){}init(){}interact(e,n){if(e.destroyed||e.spawning)return;const i=this.container,s=e.getPosition(),r=e.getRadius(),l=i.particles.quadTree.queryCircle(s,r*s5);for(const c of l){if(e===c||!c.options.collisions.enable||e.options.collisions.mode!==c.options.collisions.mode||c.destroyed||c.spawning)continue;const f=c.getPosition(),d=c.getRadius();if(Math.abs(Math.round(s.z)-Math.round(f.z))>r+d)continue;const p=mi(s,f),_=r+d;p>_||i5(e,c,n,i.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function r5(t,e=!0){t.checkVersion("3.9.1"),await t.addInteractor("particlesCollisions",n=>Promise.resolve(new o5(n)),e)}const gv=2;class a5 extends Vn{constructor(e,n,i,s){super(e,n,i),this.canvasSize=s,this.canvasSize={...s}}contains(e){const{width:n,height:i}=this.canvasSize,{x:s,y:r}=e;return super.contains(e)||super.contains({x:s-n,y:r})||super.contains({x:s-n,y:r-i})||super.contains({x:s,y:r-i})}intersects(e){if(super.intersects(e))return!0;const n=e,i=e,s={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(i.radius!==void 0){const r=new Vn(s.x,s.y,i.radius*gv);return super.intersects(r)}else if(n.size!==void 0){const r=new us(s.x,s.y,n.size.width*gv,n.size.height*gv);return super.intersects(r)}return!1}}class l5{constructor(){this.blur=5,this.color=new On,this.color.value="#000",this.enable=!1}load(e){fe(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=On.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class u5{constructor(){this.enable=!1,this.frequency=1}load(e){fe(e)||(e.color!==void 0&&(this.color=On.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class c5{constructor(){this.blink=!1,this.color=new On,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new l5,this.triangles=new u5,this.width=1,this.warp=!1}load(e){fe(e)||(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=On.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}const EA=2,f5=1,Qh={x:0,y:0},d5=0;function h5(t,e,n,i,s){const{dx:r,dy:l,distance:c}=Hn(t,e);if(!s||c<=n)return c;const f={x:Math.abs(r),y:Math.abs(l)},d={x:Math.min(f.x,i.width-f.x),y:Math.min(f.y,i.height-f.y)};return Math.sqrt(d.x**EA+d.y**EA)}class p5 extends D0{constructor(e,n){super(e),this._setColor=i=>{if(!i.options.links)return;const s=this._linkContainer,r=i.options.links;let l=r.id===void 0?s.particles.linksColor:s.particles.linksColors.get(r.id);if(l)return;const c=r.color;l=E1(this._engine,c,r.blink,r.consent),r.id===void 0?s.particles.linksColor=l:s.particles.linksColors.set(r.id,l)},this._linkContainer=e,this._engine=n}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const n=e.getPosition(),i=this.container,s=i.canvas.size;if(n.x<Qh.x||n.y<Qh.y||n.x>s.width||n.y>s.height)return;const r=e.options.links,l=r.opacity,c=e.retina.linksDistance??d5,f=r.warp;let d;f?d=new a5(n.x,n.y,c,s):d=new Vn(n.x,n.y,c);const p=i.particles.quadTree.query(d);for(const _ of p){const E=_.options.links;if(e===_||!(E!=null&&E.enable)||r.id!==E.id||_.spawning||_.destroyed||!_.links||e.links.some(R=>R.destination===_)||_.links.some(R=>R.destination===e))continue;const S=_.getPosition();if(S.x<Qh.x||S.y<Qh.y||S.x>s.width||S.y>s.height)continue;const A=h5(n,S,c,s,f&&E.warp);if(A>c)continue;const x=(f5-A/c)*l;this._setColor(e),e.links.push({destination:_,opacity:x})}}isEnabled(e){var n;return!!((n=e.options.links)!=null&&n.enable)}loadParticlesOptions(e,...n){e.links||(e.links=new c5);for(const i of n)e.links.load(i==null?void 0:i.links)}reset(){}}async function m5(t,e=!0){await t.addInteractor("particlesLinks",async n=>Promise.resolve(new p5(n,t)),e)}function g5(t,e,n,i){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.lineTo(i.x,i.y),t.closePath()}function y5(t){let e=!1;const{begin:n,end:i,engine:s,maxDistance:r,context:l,canvasSize:c,width:f,backgroundMask:d,colorLine:p,opacity:_,links:E}=t;if(mi(n,i)<=r)Sf(l,n,i),e=!0;else if(E.warp){let A,x;const R={x:i.x-c.width,y:i.y},V=Hn(n,R);if(V.distance<=r){const O=n.y-V.dy/V.dx*n.x;A={x:0,y:O},x={x:c.width,y:O}}else{const O={x:i.x,y:i.y-c.height},F=Hn(n,O);if(F.distance<=r){const Y=-(n.y-F.dy/F.dx*n.x)/(F.dy/F.dx);A={x:Y,y:0},x={x:Y,y:c.height}}else{const H={x:i.x-c.width,y:i.y-c.height},Y=Hn(n,H);if(Y.distance<=r){const Z=n.y-Y.dy/Y.dx*n.x;A={x:-Z/(Y.dy/Y.dx),y:Z},x={x:A.x+c.width,y:A.y+c.height}}}}A&&x&&(Sf(l,n,A),Sf(l,i,x),e=!0)}if(!e)return;l.lineWidth=f,d.enable&&(l.globalCompositeOperation=d.composite),l.strokeStyle=Co(p,_);const{shadow:S}=E;if(S.enable){const A=rs(s,S.color);A&&(l.shadowBlur=S.blur,l.shadowColor=Co(A))}l.stroke()}function v5(t){const{context:e,pos1:n,pos2:i,pos3:s,backgroundMask:r,colorTriangle:l,opacityTriangle:c}=t;g5(e,n,i,s),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=Co(l,c),e.fill()}function _5(t){return t.sort((e,n)=>e-n),t.join("_")}function wA(t,e){const n=_5(t.map(s=>s.id));let i=e.get(n);return i===void 0&&(i=mt(),e.set(n,i)),i}const SA=0,yv=0,bA=0,T5=.5,E5=1;class w5{constructor(e,n){this._drawLinkLine=(i,s)=>{const r=i.options.links;if(!(r!=null&&r.enable))return;const l=this._container,c=l.actualOptions,f=s.destination,d=i.getPosition(),p=f.getPosition();let _=s.opacity;l.canvas.draw(E=>{var O;let S;const A=(O=i.options.twinkle)==null?void 0:O.lines;if(A!=null&&A.enable){const F=A.frequency,H=rs(this._engine,A.color);mt()<F&&H&&(S=H,_=we(A.opacity))}if(!S){const F=r.id!==void 0?l.particles.linksColors.get(r.id):l.particles.linksColor;S=o_(i,f,F)}if(!S)return;const x=i.retina.linksWidth??yv,R=i.retina.linksDistance??bA,{backgroundMask:V}=c;y5({context:E,width:x,begin:d,end:p,engine:this._engine,maxDistance:R,canvasSize:l.canvas.size,links:r,backgroundMask:V,colorLine:S,opacity:_})})},this._drawLinkTriangle=(i,s,r)=>{const l=i.options.links;if(!(l!=null&&l.enable))return;const c=l.triangles;if(!c.enable)return;const f=this._container,d=f.actualOptions,p=s.destination,_=r.destination,E=c.opacity??(s.opacity+r.opacity)*T5;E<=SA||f.canvas.draw(S=>{const A=i.getPosition(),x=p.getPosition(),R=_.getPosition(),V=i.retina.linksDistance??bA;if(mi(A,x)>V||mi(R,x)>V||mi(R,A)>V)return;let O=rs(this._engine,c.color);if(!O){const F=l.id!==void 0?f.particles.linksColors.get(l.id):f.particles.linksColor;O=o_(i,p,F)}O&&v5({context:S,pos1:A,pos2:x,pos3:R,backgroundMask:d.backgroundMask,colorTriangle:O,opacityTriangle:E})})},this._drawTriangles=(i,s,r,l)=>{var d,p,_;const c=r.destination;if(!((d=i.links)!=null&&d.triangles.enable&&((p=c.options.links)!=null&&p.triangles.enable)))return;const f=(_=c.links)==null?void 0:_.filter(E=>{const S=this._getLinkFrequency(c,E.destination);return c.options.links&&S<=c.options.links.frequency&&l.findIndex(x=>x.destination===E.destination)>=0});if(f!=null&&f.length)for(const E of f){const S=E.destination;this._getTriangleFrequency(s,c,S)>i.links.triangles.frequency||this._drawLinkTriangle(s,r,E)}},this._getLinkFrequency=(i,s)=>wA([i,s],this._freqs.links),this._getTriangleFrequency=(i,s,r)=>wA([i,s,r],this._freqs.triangles),this._container=e,this._engine=n,this._freqs={links:new Map,triangles:new Map}}drawParticle(e,n){const{links:i,options:s}=n;if(!(i!=null&&i.length))return;const r=i.filter(l=>s.links&&(s.links.frequency>=E5||this._getLinkFrequency(n,l.destination)<=s.links.frequency));for(const l of r)this._drawTriangles(s,n,l,r),l.opacity>SA&&(n.retina.linksWidth??yv)>yv&&this._drawLinkLine(n,l)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const n=this._container.retina.pixelRatio,{retina:i}=e,{distance:s,width:r}=e.options.links;i.linksDistance=s*n,i.linksWidth=r*n}particleDestroyed(e){e.links=[]}}class S5{constructor(e){this.id="links",this._engine=e}getPlugin(e){return Promise.resolve(new w5(e,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function b5(t,e=!0){const n=new S5(t);await t.addPlugin(n,e)}async function C5(t,e=!0){t.checkVersion("3.9.1"),await m5(t,e),await b5(t,e)}const A5=180,Xh={x:0,y:0},x5=2;function R5(t,e,n){const{context:i}=t,s=n.count.numerator*n.count.denominator,r=n.count.numerator/n.count.denominator,l=A5*(r-x5)/r,c=Math.PI-xr(l);if(i){i.beginPath(),i.translate(e.x,e.y),i.moveTo(Xh.x,Xh.y);for(let f=0;f<s;f++)i.lineTo(n.length,Xh.y),i.translate(n.length,Xh.y),i.rotate(c)}}const I5=5;class U1{draw(e){const{particle:n,radius:i}=e,s=this.getCenter(n,i),r=this.getSidesData(n,i);R5(e,s,r)}getSidesCount(e){const n=e.shapeData;return Math.round(we((n==null?void 0:n.sides)??I5))}}const CA=3.5,AA=2.66,M5=3;class P5 extends U1{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,n){return{x:-n/(e.sides/CA),y:-n/(AA/CA)}}getSidesData(e,n){const i=e.sides;return{count:{denominator:1,numerator:i},length:n*AA/(i/M5)}}}const D5=1.66,N5=3,k5=2;class V5 extends U1{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,n){return{x:-n,y:n/D5}}getSidesCount(){return N5}getSidesData(e,n){const i=n*k5;return{count:{denominator:2,numerator:3},length:i}}}async function L5(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new P5,e)}async function O5(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new V5,e)}async function U5(t,e=!0){t.checkVersion("3.9.1"),await L5(t,e),await O5(t,e)}class z5{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){fe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=it(e.speed)),e.decay!==void 0&&(this.decay=it(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class B5 extends sl{constructor(){super(),this.animation=new z5,this.direction=ts.clockwise,this.path=!1,this.value=0}load(e){fe(e)||(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const z1=2,F5=Math.PI*z1,q5=1,G5=360;class H5{constructor(e){this.container=e}init(e){const n=e.options.rotate;if(!n)return;e.rotate={enable:n.animation.enable,value:xr(we(n.value)),min:0,max:F5},e.pathRotation=n.path;let i=n.direction;switch(i===ts.random&&(i=Math.floor(mt()*z1)>0?ts.counterClockwise:ts.clockwise),i){case ts.counterClockwise:case"counterClockwise":e.rotate.status=Zt.decreasing;break;case ts.clockwise:e.rotate.status=Zt.increasing;break}const s=n.animation;s.enable&&(e.rotate.decay=q5-we(s.decay),e.rotate.velocity=we(s.speed)/G5*this.container.retina.reduceFactor,s.sync||(e.rotate.velocity*=mt())),e.rotation=e.rotate.value}isEnabled(e){const n=e.options.rotate;return n?!e.destroyed&&!e.spawning&&(!!n.value||n.animation.enable||n.path):!1}loadOptions(e,...n){e.rotate||(e.rotate=new B5);for(const i of n)e.rotate.load(i==null?void 0:i.rotate)}update(e,n){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(R0(e,e.rotate,!1,Ja.none,n),e.rotation=e.rotate.value))}}async function $5(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("rotate",n=>Promise.resolve(new H5(n)),e)}const Y5=2,K5=Math.sqrt(Y5),J5=2;function W5(t){const{context:e,radius:n}=t,i=n/K5,s=i*J5;e.rect(-i,-i,s,s)}const Q5=4;class X5{constructor(){this.validTypes=["edge","square"]}draw(e){W5(e)}getSidesCount(){return Q5}}async function j5(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new X5,e)}const Z5=2,jl={x:0,y:0};function eq(t){const{context:e,particle:n,radius:i}=t,s=n.sides,r=n.starInset??Z5;e.moveTo(jl.x,jl.y-i);for(let l=0;l<s;l++)e.rotate(Math.PI/s),e.lineTo(jl.x,jl.y-i*r),e.rotate(Math.PI/s),e.lineTo(jl.x,jl.y-i)}const tq=2,nq=5;class iq{constructor(){this.validTypes=["star"]}draw(e){eq(e)}getSidesCount(e){const n=e.shapeData;return Math.round(we((n==null?void 0:n.sides)??nq))}particleInit(e,n){const i=n.shapeData;n.starInset=we((i==null?void 0:i.inset)??tq)}}async function sq(t,e=!0){t.checkVersion("3.9.1"),await t.addShape(new iq,e)}const oq=1;class rq{constructor(e,n){this._container=e,this._engine=n}init(e){var l;const n=this._container,i=e.options,s=Oi(i.stroke,e.id,i.reduceDuplicates);e.strokeWidth=we(s.width)*n.retina.pixelRatio,e.strokeOpacity=we(s.opacity??oq),e.strokeAnimation=(l=s.color)==null?void 0:l.animation;const r=Lf(this._engine,s.color)??e.getFillColor();r&&(e.strokeColor=w1(r,e.strokeAnimation,n.retina.reduceFactor))}isEnabled(e){const n=e.strokeAnimation,{strokeColor:i}=e;return!e.destroyed&&!e.spawning&&!!n&&((i==null?void 0:i.h.value)!==void 0&&i.h.enable||(i==null?void 0:i.s.value)!==void 0&&i.s.enable||(i==null?void 0:i.l.value)!==void 0&&i.l.enable)}update(e,n){this.isEnabled(e)&&S1(e.strokeColor,n)}}async function aq(t,e=!0){t.checkVersion("3.9.1"),await t.addParticleUpdater("strokeColor",n=>Promise.resolve(new rq(n,t)),e)}async function lq(t,e=!0){t.checkVersion("3.9.1"),await J6(t,!1),await jB(t,!1),await aF(t,!1),await mF(t,!1),await CF(t,!1),await VF(t,!1),await UF(t,!1),await GF(t,!1),await KF(t,!1),await s6(t,!1),await u6(t,!1),await X6(t,!1),await r5(t,!1),await C5(t,!1),await qB(t,!1),await $B(t,!1),await V6(t,!1),await Y6(t,!1),await U5(t,!1),await j5(t,!1),await sq(t,!1),await q6(t,!1),await $5(t,!1),await aq(t,!1),await FB(t,e)}function B1(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=B1(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function uq(){for(var t,e,n=0,i="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=B1(t))&&(i&&(i+=" "),i+=e);return i}const k0="-",cq=t=>{const e=dq(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:l=>{const c=l.split(k0);return c[0]===""&&c.length!==1&&c.shift(),F1(c,e)||fq(l)},getConflictingClassGroupIds:(l,c)=>{const f=n[l]||[];return c&&i[l]?[...f,...i[l]]:f}}},F1=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),s=i?F1(t.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const r=t.join(k0);return(l=e.validators.find(({validator:c})=>c(r)))==null?void 0:l.classGroupId},xA=/^\[(.+)\]$/,fq=t=>{if(xA.test(t)){const e=xA.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},dq=t=>{const{theme:e,prefix:n}=t,i={nextPart:new Map,validators:[]};return pq(Object.entries(t.classGroups),n).forEach(([r,l])=>{l_(l,i,r,e)}),i},l_=(t,e,n,i)=>{t.forEach(s=>{if(typeof s=="string"){const r=s===""?e:RA(e,s);r.classGroupId=n;return}if(typeof s=="function"){if(hq(s)){l_(s(i),e,n,i);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([r,l])=>{l_(l,RA(e,r),n,i)})})},RA=(t,e)=>{let n=t;return e.split(k0).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},hq=t=>t.isThemeGetter,pq=(t,e)=>e?t.map(([n,i])=>{const s=i.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([l,c])=>[e+l,c])):r);return[n,s]}):t,mq=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const s=(r,l)=>{n.set(r,l),e++,e>t&&(e=0,i=n,n=new Map)};return{get(r){let l=n.get(r);if(l!==void 0)return l;if((l=i.get(r))!==void 0)return s(r,l),l},set(r,l){n.has(r)?n.set(r,l):s(r,l)}}},q1="!",gq=t=>{const{separator:e,experimentalParseClassName:n}=t,i=e.length===1,s=e[0],r=e.length,l=c=>{const f=[];let d=0,p=0,_;for(let R=0;R<c.length;R++){let V=c[R];if(d===0){if(V===s&&(i||c.slice(R,R+r)===e)){f.push(c.slice(p,R)),p=R+r;continue}if(V==="/"){_=R;continue}}V==="["?d++:V==="]"&&d--}const E=f.length===0?c:c.substring(p),S=E.startsWith(q1),A=S?E.substring(1):E,x=_&&_>p?_-p:void 0;return{modifiers:f,hasImportantModifier:S,baseClassName:A,maybePostfixModifierPosition:x}};return n?c=>n({className:c,parseClassName:l}):l},yq=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(i=>{i[0]==="["?(e.push(...n.sort(),i),n=[]):n.push(i)}),e.push(...n.sort()),e},vq=t=>({cache:mq(t.cacheSize),parseClassName:gq(t),...cq(t)}),_q=/\s+/,Tq=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:s}=e,r=[],l=t.trim().split(_q);let c="";for(let f=l.length-1;f>=0;f-=1){const d=l[f],{modifiers:p,hasImportantModifier:_,baseClassName:E,maybePostfixModifierPosition:S}=n(d);let A=!!S,x=i(A?E.substring(0,S):E);if(!x){if(!A){c=d+(c.length>0?" "+c:c);continue}if(x=i(E),!x){c=d+(c.length>0?" "+c:c);continue}A=!1}const R=yq(p).join(":"),V=_?R+q1:R,O=V+x;if(r.includes(O))continue;r.push(O);const F=s(x,A);for(let H=0;H<F.length;++H){const Y=F[H];r.push(V+Y)}c=d+(c.length>0?" "+c:c)}return c};function Eq(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=G1(e))&&(i&&(i+=" "),i+=n);return i}const G1=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=G1(t[i]))&&(n&&(n+=" "),n+=e);return n};function wq(t,...e){let n,i,s,r=l;function l(f){const d=e.reduce((p,_)=>_(p),t());return n=vq(d),i=n.cache.get,s=n.cache.set,r=c,c(f)}function c(f){const d=i(f);if(d)return d;const p=Tq(f,n);return s(f,p),p}return function(){return r(Eq.apply(null,arguments))}}const Tt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},H1=/^\[(?:([a-z-]+):)?(.+)\]$/i,Sq=/^\d+\/\d+$/,bq=new Set(["px","full","screen"]),Cq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Aq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Rq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Iq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yo=t=>Tu(t)||bq.has(t)||Sq.test(t),pr=t=>Ku(t,"length",Oq),Tu=t=>!!t&&!Number.isNaN(Number(t)),vv=t=>Ku(t,"number",Tu),lf=t=>!!t&&Number.isInteger(Number(t)),Mq=t=>t.endsWith("%")&&Tu(t.slice(0,-1)),ze=t=>H1.test(t),mr=t=>Cq.test(t),Pq=new Set(["length","size","percentage"]),Dq=t=>Ku(t,Pq,$1),Nq=t=>Ku(t,"position",$1),kq=new Set(["image","url"]),Vq=t=>Ku(t,kq,zq),Lq=t=>Ku(t,"",Uq),uf=()=>!0,Ku=(t,e,n)=>{const i=H1.exec(t);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):n(i[2]):!1},Oq=t=>Aq.test(t)&&!xq.test(t),$1=()=>!1,Uq=t=>Rq.test(t),zq=t=>Iq.test(t),Bq=()=>{const t=Tt("colors"),e=Tt("spacing"),n=Tt("blur"),i=Tt("brightness"),s=Tt("borderColor"),r=Tt("borderRadius"),l=Tt("borderSpacing"),c=Tt("borderWidth"),f=Tt("contrast"),d=Tt("grayscale"),p=Tt("hueRotate"),_=Tt("invert"),E=Tt("gap"),S=Tt("gradientColorStops"),A=Tt("gradientColorStopPositions"),x=Tt("inset"),R=Tt("margin"),V=Tt("opacity"),O=Tt("padding"),F=Tt("saturate"),H=Tt("scale"),Y=Tt("sepia"),Z=Tt("skew"),D=Tt("space"),M=Tt("translate"),k=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",ze,e],B=()=>[ze,e],L=()=>["",yo,pr],Ae=()=>["auto",Tu,ze],Se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>["start","end","center","between","around","evenly","stretch"],Me=()=>["","0",ze],qe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Tu,ze];return{cacheSize:500,separator:":",theme:{colors:[uf],spacing:[yo,pr],blur:["none","",mr,ze],brightness:G(),borderColor:[t],borderRadius:["none","","full",mr,ze],borderSpacing:B(),borderWidth:L(),contrast:G(),grayscale:Me(),hueRotate:G(),invert:Me(),gap:B(),gradientColorStops:[t],gradientColorStopPositions:[Mq,pr],inset:z(),margin:z(),opacity:G(),padding:B(),saturate:G(),scale:G(),sepia:Me(),skew:G(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",ze]}],container:["container"],columns:[{columns:[mr]}],"break-after":[{"break-after":qe()}],"break-before":[{"break-before":qe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Se(),ze]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lf,ze]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ze]}],grow:[{grow:Me()}],shrink:[{shrink:Me()}],order:[{order:["first","last","none",lf,ze]}],"grid-cols":[{"grid-cols":[uf]}],"col-start-end":[{col:["auto",{span:["full",lf,ze]},ze]}],"col-start":[{"col-start":Ae()}],"col-end":[{"col-end":Ae()}],"grid-rows":[{"grid-rows":[uf]}],"row-start-end":[{row:["auto",{span:[lf,ze]},ze]}],"row-start":[{"row-start":Ae()}],"row-end":[{"row-end":Ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ze]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...he()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...he(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...he(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[O]}],px:[{px:[O]}],py:[{py:[O]}],ps:[{ps:[O]}],pe:[{pe:[O]}],pt:[{pt:[O]}],pr:[{pr:[O]}],pb:[{pb:[O]}],pl:[{pl:[O]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ze,e]}],"min-w":[{"min-w":[ze,e,"min","max","fit"]}],"max-w":[{"max-w":[ze,e,"none","full","min","max","fit","prose",{screen:[mr]},mr]}],h:[{h:[ze,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ze,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mr,pr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vv]}],"font-family":[{font:[uf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ze]}],"line-clamp":[{"line-clamp":["none",Tu,vv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yo,ze]}],"list-image":[{"list-image":["none",ze]}],"list-style-type":[{list:["none","disc","decimal",ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[V]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[V]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yo,pr]}],"underline-offset":[{"underline-offset":["auto",yo,ze]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[V]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Se(),Nq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Dq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Vq]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[A]}],"gradient-via-pos":[{via:[A]}],"gradient-to-pos":[{to:[A]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[V]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[V]}],"divide-style":[{divide:j()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[yo,ze]}],"outline-w":[{outline:[yo,pr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[V]}],"ring-offset-w":[{"ring-offset":[yo,pr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mr,Lq]}],"shadow-color":[{shadow:[uf]}],opacity:[{opacity:[V]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",mr,ze]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[_]}],saturate:[{saturate:[F]}],sepia:[{sepia:[Y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[V]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[Y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ze]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",ze]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[H]}],"scale-x":[{"scale-x":[H]}],"scale-y":[{"scale-y":[H]}],rotate:[{rotate:[lf,ze]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ze]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yo,pr,vv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fq=wq(Bq);/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/function hu(...t){return Fq(uq(t))}function Vp(t,e){var i;let n="An unknown error occurred.";if(t instanceof Error?n=t.message:typeof t=="string"?n=t:t&&(n=String(t)),n.includes("Unsupported MIME type")){try{const s=JSON.parse(n),r=(i=s==null?void 0:s.error)==null?void 0:i.message;if(r&&r.includes("Unsupported MIME type"))return`File type '${r.split(": ")[1]||"unsupported"}' is not supported. Please use a format like PNG, JPEG, or WEBP.`}catch{}return"Unsupported file format. Please upload an image format like PNG, JPEG, or WEBP."}return`${e}. ${n}`}const qq=async(t,e)=>{try{const n=await fetch(t);if(!n.ok)throw new Error(`Network response was not ok: ${n.status} ${n.statusText}`);const i=await n.blob();if(!i.type.startsWith("image/"))throw new Error(`Fetched content is not an image. MIME type: ${i.type}`);return new File([i],e,{type:i.type})}catch(n){throw console.error(`Failed to load image from URL "${t}".`,n),new Error("Could not load image. There might be a network issue or the image is unavailable.")}},Gq=t=>{const{id:e,className:n,background:i,minSize:s,maxSize:r,speed:l,particleColor:c,particleDensity:f}=t,[d,p]=ie.useState(!1);ie.useEffect(()=>{K3(async A=>{await lq(A)}).then(()=>{p(!0)})},[]);const _=i4(),E=async A=>{A&&_.start({opacity:1,transition:{duration:1}})},S=ie.useId();return P.jsx(Pn.div,{animate:_,className:hu("opacity-0",n),children:d&&P.jsx(Y3,{id:e||S,className:hu("h-full w-full"),particlesLoaded:E,options:{background:{color:{value:i||"#0d47a1"}},fullScreen:{enable:!1,zIndex:1},fpsLimit:120,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!1,mode:"repulse"},resize:!0},modes:{push:{quantity:4},repulse:{distance:200,duration:.4}}},particles:{bounce:{horizontal:{value:1},vertical:{value:1}},collisions:{absorb:{speed:2},bounce:{horizontal:{value:1},vertical:{value:1}},enable:!1,maxSpeed:50,mode:"bounce",overlap:{enable:!0,retries:0}},color:{value:c||"#ffffff",animation:{h:{count:0,enable:!1,speed:1,decay:0,delay:0,sync:!0,offset:0},s:{count:0,enable:!1,speed:1,decay:0,delay:0,sync:!0,offset:0},l:{count:0,enable:!1,speed:1,decay:0,delay:0,sync:!0,offset:0}}},effect:{close:!0,fill:!0,options:{},type:{}},groups:{},move:{angle:{offset:0,value:90},attract:{distance:200,enable:!1,rotate:{x:3e3,y:3e3}},center:{x:50,y:50,mode:"percent",radius:0},decay:0,distance:{},direction:"none",drift:0,enable:!0,gravity:{acceleration:9.81,enable:!1,inverse:!1,maxSpeed:50},path:{clamp:!0,delay:{value:0},enable:!1,options:{}},outModes:{default:"out"},random:!1,size:!1,speed:{min:.1,max:1},spin:{acceleration:0,enable:!1},straight:!1,trail:{enable:!1,length:10,fill:{}},vibrate:!1,warp:!1},number:{density:{enable:!0,width:400,height:400},limit:{mode:"delete",value:0},value:f||120},opacity:{value:{min:.1,max:1},animation:{count:0,enable:!0,speed:l||4,decay:0,delay:0,sync:!1,mode:"auto",startValue:"random",destroy:"none"}},reduceDuplicates:!1,shadow:{blur:0,color:{value:"#000"},enable:!1,offset:{x:0,y:0}},shape:{close:!0,fill:!0,options:{},type:"circle"},size:{value:{min:s||1,max:r||3},animation:{count:0,enable:!1,speed:5,decay:0,delay:0,sync:!1,mode:"auto",startValue:"random",destroy:"none"}},stroke:{width:0},zIndex:{value:0,opacityRate:1,sizeRate:1,velocityRate:1},destroy:{bounds:{},mode:"none",split:{count:1,factor:{value:3},rate:{value:{min:4,max:9}},sizeOffset:!0}},roll:{darken:{enable:!1,value:0},enable:!1,enlighten:{enable:!1,value:0},mode:"vertical",speed:25},tilt:{value:0,animation:{enable:!1,speed:0,decay:0,sync:!1},direction:"clockwise",enable:!1},twinkle:{lines:{enable:!1,frequency:.05,opacity:1},particles:{enable:!1,frequency:.05,opacity:1}},wobble:{distance:5,enable:!1,speed:{angle:50,move:10}},life:{count:0,delay:{value:0,sync:!1},duration:{value:0,sync:!1}},rotate:{value:0,animation:{enable:!1,speed:0,decay:0,sync:!1},direction:"clockwise",path:!1},orbit:{animation:{count:0,enable:!1,speed:1,decay:0,delay:0,sync:!1},enable:!1,opacity:1,rotation:{value:45},width:1},links:{blink:!1,color:{value:"#fff"},consent:!1,distance:100,enable:!1,frequency:1,opacity:1,shadow:{blur:5,color:{value:"#000"},enable:!1},triangles:{enable:!1,frequency:1},width:1,warp:!1},repulse:{value:0,enabled:!1,distance:1,duration:1,factor:1,speed:1}},detectRetina:!0}})})},IA=({firstImage:t="",secondImage:e="",className:n,firstImageClassName:i,secondImageClassname:s,initialSliderPercentage:r=50,slideMode:l="hover",showHandlebar:c=!0,autoplay:f=!1,autoplayDuration:d=5e3})=>{const[p,_]=ie.useState(r),[E,S]=ie.useState(!1),A=ie.useRef(null),[x,R]=ie.useState(!1),V=ie.useRef(null),O=ie.useCallback(()=>{if(!f)return;const Se=Date.now(),j=()=>{const he=(Date.now()-Se)%(d*2)/d,Me=he<=1?he*100:(2-he)*100;_(Me),V.current=setTimeout(j,16)};j()},[f,d]),F=ie.useCallback(()=>{V.current&&(clearTimeout(V.current),V.current=null)},[]);ie.useEffect(()=>(O(),()=>F()),[O,F]);function H(){R(!0),F()}function Y(){R(!1),l==="hover"&&_(r),l==="drag"&&S(!1),O()}const Z=ie.useCallback(Se=>{l==="drag"&&S(!0)},[l]),D=ie.useCallback(()=>{l==="drag"&&S(!1)},[l]),M=ie.useCallback(Se=>{if(A.current&&(l==="hover"||l==="drag"&&E)){const j=A.current.getBoundingClientRect(),he=(Se-j.left)/j.width*100;requestAnimationFrame(()=>{_(Math.max(0,Math.min(100,he)))})}},[l,E]),k=ie.useCallback(Se=>Z(Se.clientX),[Z]),U=ie.useCallback(()=>D(),[D]),z=ie.useCallback(Se=>M(Se.clientX),[M]),B=ie.useCallback(Se=>{f||Z(Se.touches[0].clientX)},[Z,f]),L=ie.useCallback(()=>{f||D()},[D,f]),Ae=ie.useCallback(Se=>{f||M(Se.touches[0].clientX)},[M,f]);return P.jsxs("div",{ref:A,className:hu("w-[400px] h-[400px] overflow-hidden",n),style:{position:"relative",cursor:l==="drag"?E?"grabbing":"grab":"col-resize"},onMouseMove:z,onMouseLeave:Y,onMouseEnter:H,onMouseDown:k,onMouseUp:U,onTouchStart:B,onTouchEnd:L,onTouchMove:Ae,children:[P.jsx(os,{initial:!1,children:P.jsxs(Pn.div,{className:"h-full w-px absolute top-0 m-auto z-30 bg-gradient-to-b from-transparent from-[5%] to-[95%] via-indigo-500 to-transparent",style:{left:`${p}%`,top:"0",zIndex:40},transition:{duration:0},children:[P.jsx("div",{className:"w-36 h-full [mask-image:radial-gradient(100px_at_left,white,transparent)] absolute top-1/2 -translate-y-1/2 left-0 bg-gradient-to-r from-indigo-400 via-transparent to-transparent z-20 opacity-50"}),P.jsx("div",{className:"w-10 h-1/2 [mask-image:radial-gradient(50px_at_left,white,transparent)] absolute top-1/2 -translate-y-1/2 left-0 bg-gradient-to-r from-cyan-400 via-transparent to-transparent z-10 opacity-100"}),P.jsx("div",{className:"w-10 h-3/4 top-1/2 -translate-y-1/2 absolute -right-10 [mask-image:radial-gradient(100px_at_left,white,transparent)]",children:P.jsx(Hq,{background:"transparent",minSize:.4,maxSize:1,particleDensity:1200,className:"w-full h-full",particleColor:"#FFFFFF"})}),c&&P.jsx("div",{className:"h-5 w-5 rounded-md top-1/2 -translate-y-1/2 bg-white z-30 -right-2.5 absolute flex items-center justify-center border border-gray-300/80",children:P.jsx(r4,{className:"h-4 w-4 text-black"})})]})}),P.jsx("div",{className:"overflow-hidden w-full h-full relative z-20 pointer-events-none",children:P.jsx(os,{initial:!1,children:t?P.jsx(Pn.div,{className:hu("absolute inset-0 z-20 rounded-2xl shrink-0 w-full h-full select-none overflow-hidden",i),style:{clipPath:`inset(0 ${100-p}% 0 0)`},transition:{duration:0},children:P.jsx("img",{alt:"first image",src:t,className:hu("absolute inset-0  z-20 rounded-2xl shrink-0 w-full h-full select-none object-cover",i),draggable:!1})}):null})}),P.jsx(os,{initial:!1,children:e?P.jsx(Pn.img,{className:hu("absolute top-0 left-0 z-[19]  rounded-2xl w-full h-full select-none object-cover",s),alt:"second image",src:e,draggable:!1}):null})]})},Hq=CI.memo(Gq);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $q,Yq;function Kq(){return{geminiUrl:$q,vertexUrl:Yq}}function Jq(t,e,n,i){var s,r;if(!(t!=null&&t.baseUrl)){const l=Kq();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(r=l.geminiUrl)!==null&&r!==void 0?r:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ol{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(t,e,n){for(let r=0;r<e.length-1;r++){const l=e[r];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const p=f[d];y(p,e.slice(r+1),n[d])}else for(const d of f)y(d,e.slice(r+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];y(f[0],e.slice(r+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wq(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function Qq(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=m(t,["done"]);s!=null&&y(e,["done"],s);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],jq(l)),e}function Xq(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=m(t,["done"]);s!=null&&y(e,["done"],s);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const l=m(t,["response"]);return l!=null&&y(e,["response"],Zq(l)),e}function jq(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>e9(l))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function Zq(t){const e={},n=m(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>t9(l))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function e9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],s9(n)),e}function t9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],o9(n)),e}function n9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function i9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function s9(t){const e={},n=m(t,["video","uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["video","encodedVideo"]);i!=null&&y(e,["videoBytes"],V0(i));const s=m(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function o9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],V0(i));const s=m(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var MA;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(MA||(MA={}));var PA;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(PA||(PA={}));var Cr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Cr||(Cr={}));var DA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(DA||(DA={}));var NA;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(NA||(NA={}));var kA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(kA||(kA={}));var VA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(VA||(VA={}));var LA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(LA||(LA={}));var OA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(OA||(OA={}));var UA;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UA||(UA={}));var zA;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(zA||(zA={}));var BA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(BA||(BA={}));var FA;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(FA||(FA={}));var qA;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(qA||(qA={}));var GA;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(GA||(GA={}));var Hs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Hs||(Hs={}));var HA;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(HA||(HA={}));var u_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(u_||(u_={}));var $A;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($A||($A={}));var YA;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(YA||(YA={}));var KA;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(KA||(KA={}));var JA;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(JA||(JA={}));var WA;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(WA||(WA={}));var QA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(QA||(QA={}));var XA;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(XA||(XA={}));var jA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(jA||(jA={}));var ZA;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ZA||(ZA={}));var ex;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ex||(ex={}));var tx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tx||(tx={}));var nx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nx||(nx={}));var ix;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ix||(ix={}));var sx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(sx||(sx={}));var ox;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ox||(ox={}));var rx;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(rx||(rx={}));var ax;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ax||(ax={}));var lx;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(lx||(lx={}));var ux;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ux||(ux={}));var cx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(cx||(cx={}));var fx;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(fx||(fx={}));var dx;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(dx||(dx={}));var hx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(hx||(hx={}));var px;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(px||(px={}));var mx;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(mx||(mx={}));var gx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(gx||(gx={}));var yx;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yx||(yx={}));var vx;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(vx||(vx={}));var _x;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_x||(_x={}));var Tx;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Tx||(Tx={}));var pu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(pu||(pu={}));class c_{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class cf{get text(){var e,n,i,s,r,l,c,f;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const _=[];for(const E of(f=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[S,A]of Object.entries(E))S!=="text"&&S!=="thought"&&(A!==null||A!==void 0)&&_.push(S);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;p=!0,d+=E.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,n,i,s,r,l,c,f;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const _ of(f=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[E,S]of Object.entries(_))E!=="inlineData"&&(S!==null||S!==void 0)&&p.push(E);_.inlineData&&typeof _.inlineData.data=="string"&&(d+=atob(_.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,s,r,l,c,f;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,s,r,l,c,f,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,s,r,l,c,f,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class Ex{}class wx{}class r9{}class a9{}class l9{}class u9{}class Sx{}class bx{}class Cx{}class c9{}class Lp{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new Lp;let s;const r=e;return n?s=Xq(r):s=Qq(r),Object.assign(i,s),i}}class Ax{}class xx{}class Rx{}class f9{}class d9{}class h9{}class Ix{}class p9{get text(){var e,n,i;let s="",r=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;r=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,i;let s="";const r=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&r.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class m9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function st(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Y1(t,e){const n=st(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function K1(t){return Array.isArray(t)?t.map(e=>Op(e)):[Op(t)]}function Op(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function J1(t){const e=Op(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function W1(t){const e=Op(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Mx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Q1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Mx(e)):[Mx(t)]}function f_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Px(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Dx(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function kn(t){if(t==null)throw new Error("ContentUnion is required");return f_(t)?t:{role:"user",parts:Q1(t)}}function L0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=kn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=kn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>kn(n)):[kn(e)]}function Ui(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Px(t)||Dx(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[kn(t)]}const e=[],n=[],i=f_(t[0]);for(const s of t){const r=f_(s);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(Px(s)||Dx(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:Q1(n)}),e}function g9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Cr).includes(n[0].toUpperCase())?n[0].toUpperCase():Cr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Cr).includes(i.toUpperCase())?i.toUpperCase():Cr.TYPE_UNSPECIFIED})}}function Eu(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&g9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Cr).includes(c.toUpperCase())?c.toUpperCase():Cr.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Eu(c);else if(i.includes(l)){const f=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}f.push(Eu(d))}e[l]=f}else if(s.includes(l)){const f={};for(const[d,p]of Object.entries(c))f[d]=Eu(p);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function O0(t){return Eu(t)}function U0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function z0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ju(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Eu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Eu(e.response));return t}function Wu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function y9(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Po(t,e){if(typeof e!="string")throw new Error("name must be a string");return y9(t,e,"cachedContents")}function X1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Hr(t){return V0(t)}function v9(t){return t!=null&&typeof t=="object"&&"name"in t}function _9(t){return t!=null&&typeof t=="object"&&"video"in t}function T9(t){return t!=null&&typeof t=="object"&&"uri"in t}function j1(t){var e;let n;if(v9(t)&&(n=t.name),!(T9(t)&&(n=t.uri,n===void 0))&&!(_9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Z1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function eP(t){for(const e of["models","tunedModels","publisherModels"])if(E9(t,e))return t[e];return[]}function E9(t,e){return t!==null&&typeof t=="object"&&e in t}function w9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function S9(t,e={}){const n=[],i=new Set;for(const s of t){const r=s.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const l=w9(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function tP(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function b9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nP(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let r=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Qu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function iP(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>tG(l))),y(e,["inlinedResponses"],r)}const s=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),y(e,["inlinedEmbedContentResponses"],r)}return e}function A9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const s=m(t,["bigqueryDestination","outputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function x9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const s=m(t,["bigqueryUri"]);if(s!=null&&y(e,["bigqueryDestination","outputUri"],s),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pf(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const s=m(t,["metadata","state"]);s!=null&&y(e,["state"],iP(s));const r=m(t,["metadata","createTime"]);r!=null&&y(e,["createTime"],r);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const f=m(t,["metadata","model"]);f!=null&&y(e,["model"],f);const d=m(t,["metadata","output"]);return d!=null&&y(e,["dest"],C9(nP(d))),e}function d_(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=m(t,["state"]);s!=null&&y(e,["state"],iP(s));const r=m(t,["error"]);r!=null&&y(e,["error"],r);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const f=m(t,["endTime"]);f!=null&&y(e,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(e,["updateTime"],d);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const _=m(t,["inputConfig"]);_!=null&&y(e,["src"],R9(_));const E=m(t,["outputConfig"]);return E!=null&&y(e,["dest"],A9(nP(E))),e}function R9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const s=m(t,["bigquerySource","inputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function I9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const s=m(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>eG(t,l))),y(n,["requests","requests"],r)}return n}function M9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const s=m(t,["bigqueryUri"]);if(s!=null&&y(e,["bigquerySource","inputUri"],s),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function P9(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function D9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Qu(t,i)),n}function N9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Qu(t,i)),n}function k9(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],V9(i));const s=m(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const r=m(t,["finishReason"]);r!=null&&y(e,["finishReason"],r);const l=m(t,["urlContextMetadata"]);l!=null&&y(e,["urlContextMetadata"],l);const c=m(t,["avgLogprobs"]);c!=null&&y(e,["avgLogprobs"],c);const f=m(t,["groundingMetadata"]);f!=null&&y(e,["groundingMetadata"],f);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const p=m(t,["logprobsResult"]);p!=null&&y(e,["logprobsResult"],p);const _=m(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>S)),y(e,["safetyRatings"],E)}return e}function V9(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["citations"],i)}return e}function sP(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>lG(r))),y(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function L9(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function O9(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=m(t,["dest"]);return e!==void 0&&s!=null&&y(e,["outputConfig"],x9(b9(s))),n}function Nx(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["src"]);s!=null&&y(n,["batch","inputConfig"],I9(t,tP(t,s)));const r=m(e,["config"]);return r!=null&&L9(r,n),n}function U9(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],st(t,i));const s=m(e,["src"]);s!=null&&y(n,["inputConfig"],M9(tP(t,s)));const r=m(e,["config"]);return r!=null&&O9(r,n),n}function z9(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function _v(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["src"]);s!=null&&y(n,["batch","inputConfig"],Y9(t,s));const r=m(e,["config"]);return r!=null&&z9(r,n),n}function B9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Qu(t,i)),n}function F9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Qu(t,i)),n}function q9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["done"]);s!=null&&y(e,["done"],s);const r=m(t,["error"]);return r!=null&&y(e,["error"],r),e}function G9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["done"]);s!=null&&y(e,["done"],s);const r=m(t,["error"]);return r!=null&&y(e,["error"],r),e}function H9(t,e){const n={},i=m(e,["contents"]);if(i!=null){let r=L0(t,i);Array.isArray(r)&&(r=r.map(l=>l)),y(n,["requests[]","request","content"],r)}const s=m(e,["config"]);return s!=null&&y(n,["_self"],$9(s,n)),n}function $9(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const s=m(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const r=m(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&y(e,["requests[]","outputDimensionality"],r),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Y9(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const s=m(e,["inlinedRequests"]);return s!=null&&y(n,["requests"],H9(t,s)),n}function K9(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function J9(t,e,n){const i={},s=m(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],sP(kn(s)));const r=m(e,["temperature"]);r!=null&&y(i,["temperature"],r);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const _=m(e,["responseLogprobs"]);_!=null&&y(i,["responseLogprobs"],_);const E=m(e,["logprobs"]);E!=null&&y(i,["logprobs"],E);const S=m(e,["presencePenalty"]);S!=null&&y(i,["presencePenalty"],S);const A=m(e,["frequencyPenalty"]);A!=null&&y(i,["frequencyPenalty"],A);const x=m(e,["seed"]);x!=null&&y(i,["seed"],x);const R=m(e,["responseMimeType"]);R!=null&&y(i,["responseMimeType"],R);const V=m(e,["responseSchema"]);V!=null&&y(i,["responseSchema"],O0(V));const O=m(e,["responseJsonSchema"]);if(O!=null&&y(i,["responseJsonSchema"],O),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let B=F;Array.isArray(B)&&(B=B.map(L=>uG(L))),y(n,["safetySettings"],B)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let B=Wu(H);Array.isArray(B)&&(B=B.map(L=>cG(Ju(L)))),y(n,["tools"],B)}const Y=m(e,["toolConfig"]);if(n!==void 0&&Y!=null&&y(n,["toolConfig"],Y),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=m(e,["cachedContent"]);n!==void 0&&Z!=null&&y(n,["cachedContent"],Po(t,Z));const D=m(e,["responseModalities"]);D!=null&&y(i,["responseModalities"],D);const M=m(e,["mediaResolution"]);M!=null&&y(i,["mediaResolution"],M);const k=m(e,["speechConfig"]);if(k!=null&&y(i,["speechConfig"],U0(k)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);U!=null&&y(i,["thinkingConfig"],U);const z=m(e,["imageConfig"]);return z!=null&&y(i,["imageConfig"],z),i}function W9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>k9(d))),y(e,["candidates"],f)}const s=m(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const r=m(t,["promptFeedback"]);r!=null&&y(e,["promptFeedback"],r);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function Q9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Qu(t,i)),n}function X9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Qu(t,i)),n}function j9(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Z9(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function eG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let c=Ui(s);Array.isArray(c)&&(c=c.map(f=>sP(f))),y(n,["request","contents"],c)}const r=m(e,["metadata"]);r!=null&&y(n,["metadata"],r);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],J9(t,l,m(n,["request"],{}))),n}function tG(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],W9(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function nG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);if(e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function iG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const r=m(t,["filter"]);return e!==void 0&&r!=null&&y(e,["_query","filter"],r),n}function sG(t){const e={},n=m(t,["config"]);return n!=null&&nG(n,e),e}function oG(t){const e={},n=m(t,["config"]);return n!=null&&iG(n,e),e}function rG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>pf(l))),y(e,["batchJobs"],r)}return e}function aG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>d_(l))),y(e,["batchJobs"],r)}return e}function lG(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&y(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&y(e,["inlineData"],P9(s));const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],K9(r));const l=m(t,["thoughtSignature"]);l!=null&&y(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&y(e,["functionCall"],c);const f=m(t,["codeExecutionResult"]);f!=null&&y(e,["codeExecutionResult"],f);const d=m(t,["executableCode"]);d!=null&&y(e,["executableCode"],d);const p=m(t,["functionResponse"]);p!=null&&y(e,["functionResponse"],p);const _=m(t,["text"]);return _!=null&&y(e,["text"],_),e}function uG(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&y(e,["category"],n);const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function cG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["functionDeclarations"],d)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],Z9(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&y(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=m(t,["googleMaps"]);r!=null&&y(e,["googleMaps"],j9(r));const l=m(t,["urlContext"]);l!=null&&y(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],c);const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xa;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Xa||(Xa={}));class nd{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(r=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fG extends ol{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{var i,s;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const c=this.createInlinedEmbedContentRequest(n),f=c.path,d=c.body,p=_v(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(E=>E.json()).then(E=>pf(E))},this.list=async(n={})=>new nd(Xa.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Nx(this.apiClient,e),i=n._url,s=ye("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const p of f){const _=Object.assign({},p);if(_.systemInstruction){const E=_.systemInstruction;delete _.systemInstruction;const S=_.request;S.systemInstruction=E,_.request=S}d.push(_)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}createInlinedEmbedContentRequest(e){const n=_v(this.apiClient,e),i=n._url,s=ye("{model}:asyncBatchEmbedContent",i),c=n.batch.inputConfig.requests,f=c.requests,d=[];delete c.config;for(const p of f){const _=Object.assign({},p),E=_.request;for(const S in _)S!=="request"&&(E[S]=_[S],delete _[S]);d.push(_)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const r=this.getGcsUri(e),l=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=U9(this.apiClient,e);return c=ye("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>d_(p))}else{const d=Nx(this.apiClient,e);return c=ye("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>pf(p))}}async createEmbeddingsInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_v(this.apiClient,e);return r=ye("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>pf(f))}}async get(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=X9(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>d_(p))}else{const d=Q9(this.apiClient,e);return c=ye("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>pf(p))}}async cancel(e){var n,i,s,r;let l="",c={};if(this.apiClient.isVertexAI()){const f=N9(this.apiClient,e);l=ye("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=D9(this.apiClient,e);l=ye("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=oG(e);return c=ye("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=aG(p),E=new Ix;return Object.assign(E,_),E})}else{const d=sG(e);return c=ye("batches",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=rG(p),E=new Ix;return Object.assign(E,_),E})}}async delete(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=F9(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>G9(p))}else{const d=B9(this.apiClient,e);return c=ye("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>q9(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dG(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function kx(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>NG(r))),y(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function hG(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=m(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Ui(l);Array.isArray(p)&&(p=p.map(_=>kx(_))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],kx(kn(c)));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(_=>kG(_))),y(e,["tools"],p)}const d=m(t,["toolConfig"]);if(e!==void 0&&d!=null&&y(e,["toolConfig"],d),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function pG(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=m(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let _=Ui(l);Array.isArray(_)&&(_=_.map(E=>E)),y(e,["contents"],_)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],kn(c));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>VG(E))),y(e,["tools"],_)}const d=m(t,["toolConfig"]);e!==void 0&&d!=null&&y(e,["toolConfig"],d);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function mG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],Y1(t,i));const s=m(e,["config"]);return s!=null&&hG(s,n),n}function gG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],Y1(t,i));const s=m(e,["config"]);return s!=null&&pG(s,n),n}function yG(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Po(t,i)),n}function vG(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Po(t,i)),n}function _G(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function TG(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function EG(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wG(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["parameters"]);s!=null&&y(e,["parameters"],s);const r=m(t,["parametersJsonSchema"]);r!=null&&y(e,["parametersJsonSchema"],r);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function SG(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Po(t,i)),n}function bG(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Po(t,i)),n}function CG(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function AG(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function xG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function RG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function IG(t){const e={},n=m(t,["config"]);return n!=null&&xG(n,e),e}function MG(t){const e={},n=m(t,["config"]);return n!=null&&RG(n,e),e}function PG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),y(e,["cachedContents"],r)}return e}function DG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),y(e,["cachedContents"],r)}return e}function NG(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&y(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&y(e,["inlineData"],dG(s));const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],EG(r));const l=m(t,["thoughtSignature"]);l!=null&&y(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&y(e,["functionCall"],c);const f=m(t,["codeExecutionResult"]);f!=null&&y(e,["codeExecutionResult"],f);const d=m(t,["executableCode"]);d!=null&&y(e,["executableCode"],d);const p=m(t,["functionResponse"]);p!=null&&y(e,["functionResponse"],p);const _=m(t,["text"]);return _!=null&&y(e,["text"],_),e}function kG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["functionDeclarations"],d)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],AG(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&y(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=m(t,["googleMaps"]);r!=null&&y(e,["googleMaps"],CG(r));const l=m(t,["urlContext"]);l!=null&&y(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],c);const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}function VG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>wG(E))),y(e,["functionDeclarations"],_)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=m(t,["googleSearch"]);s!=null&&y(e,["googleSearch"],s);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const l=m(t,["enterpriseWebSearch"]);l!=null&&y(e,["enterpriseWebSearch"],l);const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const f=m(t,["urlContext"]);f!=null&&y(e,["urlContext"],f);const d=m(t,["computerUse"]);d!=null&&y(e,["computerUse"],d);const p=m(t,["codeExecution"]);return p!=null&&y(e,["codeExecution"],p),e}function LG(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=m(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function OG(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=m(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function UG(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Po(t,i));const s=m(e,["config"]);return s!=null&&LG(s,n),n}function zG(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Po(t,i));const s=m(e,["config"]);return s!=null&&OG(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BG extends ol{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new nd(Xa.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=gG(this.apiClient,e);return c=ye("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=mG(this.apiClient,e);return c=ye("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=bG(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=SG(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=vG(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=TG(p),E=new xx;return Object.assign(E,_),E})}else{const d=yG(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=_G(p),E=new xx;return Object.assign(E,_),E})}}async update(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=zG(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=UG(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=MG(e);return c=ye("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=DG(p),E=new Rx;return Object.assign(E,_),E})}else{const d=IG(e);return c=ye("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=PG(p),E=new Rx;return Object.assign(E,_),E})}}}function Vx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Et(t){return this instanceof Et?(this.v=t,this):new Et(t)}function wu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(S){return function(A){return Promise.resolve(A).then(S,_)}}function c(S,A){i[S]&&(s[S]=function(x){return new Promise(function(R,V){r.push([S,x,R,V])>1||f(S,x)})},A&&(s[S]=A(s[S])))}function f(S,A){try{d(i[S](A))}catch(x){E(r[0][3],x)}}function d(S){S.value instanceof Et?Promise.resolve(S.value.v).then(p,_):E(r[0][2],S)}function p(S){f("next",S)}function _(S){f("throw",S)}function E(S,A){S(A),r.shift(),r.length&&f(r[0][0],r[0][1])}}function bf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vx=="function"?Vx(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(l){return new Promise(function(c,f){l=t[r](l),s(c,f,l.done,l.value)})}}function s(r,l,c,f){Promise.resolve(f).then(function(d){r({value:d,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FG(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:oP(n)}function oP(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qG(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Lx(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let r=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),r&&!oP(t[i])&&(r=!1),i++;r?e.push(...s):e.pop()}return e}class GG{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new HG(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class HG{constructor(e,n,i,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),qG(r)}async sendMessage(e){var n;await this.sendPromise;const i=kn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,l,c;const f=await s,d=(l=(r=f.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content,p=f.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let E=[];p!=null&&(E=(c=p.slice(_))!==null&&c!==void 0?c:[]);const S=d?[d]:[];this.recordHistory(i,S,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=kn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,i)}getHistory(e=!1){const n=e?Lx(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return wu(this,arguments,function*(){var l,c,f,d;const p=[];try{for(var _=!0,E=bf(e),S;S=yield Et(E.next()),l=S.done,!l;_=!0){d=S.value,_=!1;const A=d;if(FG(A)){const x=(s=(i=A.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;x!==void 0&&p.push(x)}yield yield Et(A)}}catch(A){c={error:A}}finally{try{!_&&!l&&(f=E.return)&&(yield Et(f.call(E)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Lx(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pm extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pm.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $G(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function YG(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function KG(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],j1(n)),e}function JG(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function WG(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],j1(n)),e}function QG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function XG(t){const e={},n=m(t,["config"]);return n!=null&&QG(n,e),e}function jG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),y(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZG extends ol{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new nd(Xa.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XG(e);return r=ye("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const d=jG(f),p=new f9;return Object.assign(p,d),p})}}async createInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$G(e);return r=ye("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const d=YG(f),p=new d9;return Object.assign(p,d),p})}}async get(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WG(e);return r=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KG(e);return r=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const d=JG(f),p=new h9;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fp(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function eH(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mH(r))),y(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function tH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function nH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["parameters"]);s!=null&&y(e,["parameters"],s);const r=m(t,["parametersJsonSchema"]);r!=null&&y(e,["parametersJsonSchema"],r);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function iH(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const s=m(t,["candidateCount"]);s!=null&&y(e,["candidateCount"],s);const r=m(t,["enableAffectiveDialog"]);r!=null&&y(e,["enableAffectiveDialog"],r);const l=m(t,["frequencyPenalty"]);l!=null&&y(e,["frequencyPenalty"],l);const c=m(t,["logprobs"]);c!=null&&y(e,["logprobs"],c);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const d=m(t,["mediaResolution"]);d!=null&&y(e,["mediaResolution"],d);const p=m(t,["presencePenalty"]);p!=null&&y(e,["presencePenalty"],p);const _=m(t,["responseJsonSchema"]);_!=null&&y(e,["responseJsonSchema"],_);const E=m(t,["responseLogprobs"]);E!=null&&y(e,["responseLogprobs"],E);const S=m(t,["responseMimeType"]);S!=null&&y(e,["responseMimeType"],S);const A=m(t,["responseModalities"]);A!=null&&y(e,["responseModalities"],A);const x=m(t,["responseSchema"]);x!=null&&y(e,["responseSchema"],x);const R=m(t,["routingConfig"]);R!=null&&y(e,["routingConfig"],R);const V=m(t,["seed"]);V!=null&&y(e,["seed"],V);const O=m(t,["speechConfig"]);O!=null&&y(e,["speechConfig"],rP(O));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const H=m(t,["temperature"]);H!=null&&y(e,["temperature"],H);const Y=m(t,["thinkingConfig"]);Y!=null&&y(e,["thinkingConfig"],Y);const Z=m(t,["topK"]);Z!=null&&y(e,["topK"],Z);const D=m(t,["topP"]);return D!=null&&y(e,["topP"],D),e}function sH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function oH(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function rH(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const s=m(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const r=m(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const _=m(t,["speechConfig"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","speechConfig"],z0(_));const E=m(t,["thinkingConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","thinkingConfig"],E);const S=m(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],S);const A=m(t,["systemInstruction"]);e!==void 0&&A!=null&&y(e,["setup","systemInstruction"],eH(kn(A)));const x=m(t,["tools"]);if(e!==void 0&&x!=null){let Z=Wu(x);Array.isArray(Z)&&(Z=Z.map(D=>yH(Ju(D)))),y(e,["setup","tools"],Z)}const R=m(t,["sessionResumption"]);e!==void 0&&R!=null&&y(e,["setup","sessionResumption"],gH(R));const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&y(e,["setup","inputAudioTranscription"],V);const O=m(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","outputAudioTranscription"],O);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const H=m(t,["contextWindowCompression"]);e!==void 0&&H!=null&&y(e,["setup","contextWindowCompression"],H);const Y=m(t,["proactivity"]);return e!==void 0&&Y!=null&&y(e,["setup","proactivity"],Y),n}function aH(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],iH(i));const s=m(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const r=m(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const _=m(t,["speechConfig"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","speechConfig"],rP(z0(_)));const E=m(t,["thinkingConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","thinkingConfig"],E);const S=m(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],S);const A=m(t,["systemInstruction"]);e!==void 0&&A!=null&&y(e,["setup","systemInstruction"],kn(A));const x=m(t,["tools"]);if(e!==void 0&&x!=null){let Z=Wu(x);Array.isArray(Z)&&(Z=Z.map(D=>vH(Ju(D)))),y(e,["setup","tools"],Z)}const R=m(t,["sessionResumption"]);e!==void 0&&R!=null&&y(e,["setup","sessionResumption"],R);const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&y(e,["setup","inputAudioTranscription"],V);const O=m(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","outputAudioTranscription"],O);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const H=m(t,["contextWindowCompression"]);e!==void 0&&H!=null&&y(e,["setup","contextWindowCompression"],H);const Y=m(t,["proactivity"]);return e!==void 0&&Y!=null&&y(e,["setup","proactivity"],Y),n}function lH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],st(t,i));const s=m(e,["config"]);return s!=null&&y(n,["config"],rH(s,n)),n}function uH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],st(t,i));const s=m(e,["config"]);return s!=null&&y(n,["config"],aH(s,n)),n}function cH(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function fH(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["weightedPrompts"],i)}return e}function dH(t){const e={},n=m(t,["media"]);if(n!=null){let d=K1(n);Array.isArray(d)&&(d=d.map(p=>fp(p))),y(e,["mediaChunks"],d)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],fp(W1(i)));const s=m(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const r=m(t,["video"]);r!=null&&y(e,["video"],fp(J1(r)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const f=m(t,["activityEnd"]);return f!=null&&y(e,["activityEnd"],f),e}function hH(t){const e={},n=m(t,["media"]);if(n!=null){let d=K1(n);Array.isArray(d)&&(d=d.map(p=>p)),y(e,["mediaChunks"],d)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],W1(i));const s=m(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const r=m(t,["video"]);r!=null&&y(e,["video"],J1(r));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const f=m(t,["activityEnd"]);return f!=null&&y(e,["activityEnd"],f),e}function pH(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const s=m(t,["toolCall"]);s!=null&&y(e,["toolCall"],s);const r=m(t,["toolCallCancellation"]);r!=null&&y(e,["toolCallCancellation"],r);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],_H(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const f=m(t,["sessionResumptionUpdate"]);return f!=null&&y(e,["sessionResumptionUpdate"],f),e}function mH(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&y(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&y(e,["inlineData"],fp(s));const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],tH(r));const l=m(t,["thoughtSignature"]);l!=null&&y(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&y(e,["functionCall"],c);const f=m(t,["codeExecutionResult"]);f!=null&&y(e,["codeExecutionResult"],f);const d=m(t,["executableCode"]);d!=null&&y(e,["executableCode"],d);const p=m(t,["functionResponse"]);p!=null&&y(e,["functionResponse"],p);const _=m(t,["text"]);return _!=null&&y(e,["text"],_),e}function gH(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rP(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],n),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function yH(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["functionDeclarations"],d)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],oH(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&y(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=m(t,["googleMaps"]);r!=null&&y(e,["googleMaps"],sH(r));const l=m(t,["urlContext"]);l!=null&&y(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],c);const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}function vH(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>nH(E))),y(e,["functionDeclarations"],_)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=m(t,["googleSearch"]);s!=null&&y(e,["googleSearch"],s);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const l=m(t,["enterpriseWebSearch"]);l!=null&&y(e,["enterpriseWebSearch"],l);const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const f=m(t,["urlContext"]);f!=null&&y(e,["urlContext"],f);const d=m(t,["computerUse"]);d!=null&&y(e,["computerUse"],d);const p=m(t,["codeExecution"]);return p!=null&&y(e,["codeExecution"],p),e}function _H(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const s=m(t,["candidatesTokenCount"]);s!=null&&y(e,["responseTokenCount"],s);const r=m(t,["toolUsePromptTokenCount"]);r!=null&&y(e,["toolUsePromptTokenCount"],r);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const f=m(t,["promptTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(A=>A)),y(e,["promptTokensDetails"],S)}const d=m(t,["cacheTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(A=>A)),y(e,["cacheTokensDetails"],S)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(A=>A)),y(e,["responseTokensDetails"],S)}const _=m(t,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(A=>A)),y(e,["toolUsePromptTokensDetails"],S)}const E=m(t,["trafficType"]);return E!=null&&y(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function EH(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],wH(i));const s=m(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const r=m(t,["finishReason"]);r!=null&&y(e,["finishReason"],r);const l=m(t,["urlContextMetadata"]);l!=null&&y(e,["urlContextMetadata"],l);const c=m(t,["avgLogprobs"]);c!=null&&y(e,["avgLogprobs"],c);const f=m(t,["groundingMetadata"]);f!=null&&y(e,["groundingMetadata"],f);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const p=m(t,["logprobsResult"]);p!=null&&y(e,["logprobsResult"],p);const _=m(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>S)),y(e,["safetyRatings"],E)}return e}function wH(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["citations"],i)}return e}function SH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let r=Ui(s);Array.isArray(r)&&(r=r.map(l=>l)),y(n,["contents"],r)}return n}function bH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),y(e,["tokensInfo"],s)}return e}function CH(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],AH(i)),e}function AH(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function mm(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>P8(r))),y(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function xH(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function RH(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function IH(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],kn(i));const s=m(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>fP(c))),y(e,["tools"],l)}const r=m(t,["generationConfig"]);return e!==void 0&&r!=null&&y(e,["generationConfig"],v8(r)),n}function MH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ui(s);Array.isArray(l)&&(l=l.map(c=>mm(c))),y(n,["contents"],l)}const r=m(e,["config"]);return r!=null&&RH(r),n}function PH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ui(s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const r=m(e,["config"]);return r!=null&&IH(r,n),n}function DH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const s=m(t,["cachedContentTokenCount"]);return s!=null&&y(e,["cachedContentTokenCount"],s),e}function NH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function kH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],st(t,i)),n}function VH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],st(t,i)),n}function LH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function OH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function UH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=m(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const _=m(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&y(e,["parameters","includeSafetyAttributes"],_);const E=m(t,["includeRaiReason"]);e!==void 0&&E!=null&&y(e,["parameters","includeRaiReason"],E);const S=m(t,["language"]);e!==void 0&&S!=null&&y(e,["parameters","language"],S);const A=m(t,["outputMimeType"]);e!==void 0&&A!=null&&y(e,["parameters","outputOptions","mimeType"],A);const x=m(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","compressionQuality"],x);const R=m(t,["addWatermark"]);e!==void 0&&R!=null&&y(e,["parameters","addWatermark"],R);const V=m(t,["labels"]);e!==void 0&&V!=null&&y(e,["labels"],V);const O=m(t,["editMode"]);e!==void 0&&O!=null&&y(e,["parameters","editMode"],O);const F=m(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function zH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const r=m(e,["referenceImages"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>O8(f))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&UH(l,n),n}function BH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>gm(r))),y(e,["generatedImages"],s)}return e}function FH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const s=m(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const r=m(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&y(e,["requests[]","outputDimensionality"],r),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const s=m(t,["title"]);e!==void 0&&s!=null&&y(e,["instances[]","title"],s);const r=m(t,["outputDimensionality"]);e!==void 0&&r!=null&&y(e,["parameters","outputDimensionality"],r);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function GH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let c=L0(t,s);Array.isArray(c)&&(c=c.map(f=>f)),y(n,["requests[]","content"],c)}const r=m(e,["config"]);r!=null&&FH(r,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],st(t,l)),n}function HH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let l=L0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const r=m(e,["config"]);return r!=null&&qH(r,n),n}function $H(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),y(e,["embeddings"],r)}const s=m(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function YH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>CH(l))),y(e,["embeddings"],r)}const s=m(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function KH(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function JH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function WH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["parameters"]);s!=null&&y(e,["parameters"],s);const r=m(t,["parametersJsonSchema"]);r!=null&&y(e,["parametersJsonSchema"],r);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function QH(t,e,n){const i={},s=m(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],mm(kn(s)));const r=m(e,["temperature"]);r!=null&&y(i,["temperature"],r);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const _=m(e,["responseLogprobs"]);_!=null&&y(i,["responseLogprobs"],_);const E=m(e,["logprobs"]);E!=null&&y(i,["logprobs"],E);const S=m(e,["presencePenalty"]);S!=null&&y(i,["presencePenalty"],S);const A=m(e,["frequencyPenalty"]);A!=null&&y(i,["frequencyPenalty"],A);const x=m(e,["seed"]);x!=null&&y(i,["seed"],x);const R=m(e,["responseMimeType"]);R!=null&&y(i,["responseMimeType"],R);const V=m(e,["responseSchema"]);V!=null&&y(i,["responseSchema"],O0(V));const O=m(e,["responseJsonSchema"]);if(O!=null&&y(i,["responseJsonSchema"],O),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let B=F;Array.isArray(B)&&(B=B.map(L=>U8(L))),y(n,["safetySettings"],B)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let B=Wu(H);Array.isArray(B)&&(B=B.map(L=>H8(Ju(L)))),y(n,["tools"],B)}const Y=m(e,["toolConfig"]);if(n!==void 0&&Y!=null&&y(n,["toolConfig"],Y),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=m(e,["cachedContent"]);n!==void 0&&Z!=null&&y(n,["cachedContent"],Po(t,Z));const D=m(e,["responseModalities"]);D!=null&&y(i,["responseModalities"],D);const M=m(e,["mediaResolution"]);M!=null&&y(i,["mediaResolution"],M);const k=m(e,["speechConfig"]);if(k!=null&&y(i,["speechConfig"],U0(k)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);U!=null&&y(i,["thinkingConfig"],U);const z=m(e,["imageConfig"]);return z!=null&&y(i,["imageConfig"],z),i}function XH(t,e,n){const i={},s=m(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],kn(s));const r=m(e,["temperature"]);r!=null&&y(i,["temperature"],r);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const _=m(e,["responseLogprobs"]);_!=null&&y(i,["responseLogprobs"],_);const E=m(e,["logprobs"]);E!=null&&y(i,["logprobs"],E);const S=m(e,["presencePenalty"]);S!=null&&y(i,["presencePenalty"],S);const A=m(e,["frequencyPenalty"]);A!=null&&y(i,["frequencyPenalty"],A);const x=m(e,["seed"]);x!=null&&y(i,["seed"],x);const R=m(e,["responseMimeType"]);R!=null&&y(i,["responseMimeType"],R);const V=m(e,["responseSchema"]);V!=null&&y(i,["responseSchema"],O0(V));const O=m(e,["responseJsonSchema"]);O!=null&&y(i,["responseJsonSchema"],O);const F=m(e,["routingConfig"]);F!=null&&y(i,["routingConfig"],F);const H=m(e,["modelSelectionConfig"]);H!=null&&y(i,["modelConfig"],H);const Y=m(e,["safetySettings"]);if(n!==void 0&&Y!=null){let j=Y;Array.isArray(j)&&(j=j.map(le=>le)),y(n,["safetySettings"],j)}const Z=m(e,["tools"]);if(n!==void 0&&Z!=null){let j=Wu(Z);Array.isArray(j)&&(j=j.map(le=>fP(Ju(le)))),y(n,["tools"],j)}const D=m(e,["toolConfig"]);n!==void 0&&D!=null&&y(n,["toolConfig"],D);const M=m(e,["labels"]);n!==void 0&&M!=null&&y(n,["labels"],M);const k=m(e,["cachedContent"]);n!==void 0&&k!=null&&y(n,["cachedContent"],Po(t,k));const U=m(e,["responseModalities"]);U!=null&&y(i,["responseModalities"],U);const z=m(e,["mediaResolution"]);z!=null&&y(i,["mediaResolution"],z);const B=m(e,["speechConfig"]);B!=null&&y(i,["speechConfig"],cP(U0(B)));const L=m(e,["audioTimestamp"]);L!=null&&y(i,["audioTimestamp"],L);const Ae=m(e,["thinkingConfig"]);Ae!=null&&y(i,["thinkingConfig"],Ae);const Se=m(e,["imageConfig"]);return Se!=null&&y(i,["imageConfig"],Se),i}function Ox(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ui(s);Array.isArray(l)&&(l=l.map(c=>mm(c))),y(n,["contents"],l)}const r=m(e,["config"]);return r!=null&&y(n,["generationConfig"],QH(t,r,n)),n}function Ux(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ui(s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const r=m(e,["config"]);return r!=null&&y(n,["generationConfig"],XH(t,r,n)),n}function zx(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>EH(d))),y(e,["candidates"],f)}const s=m(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const r=m(t,["promptFeedback"]);r!=null&&y(e,["promptFeedback"],r);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function Bx(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["candidates"],d)}const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const f=m(t,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function jH(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const r=m(t,["guidanceScale"]);if(e!==void 0&&r!=null&&y(e,["parameters","guidanceScale"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const f=m(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&y(e,["parameters","includeSafetyAttributes"],f);const d=m(t,["includeRaiReason"]);e!==void 0&&d!=null&&y(e,["parameters","includeRaiReason"],d);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const _=m(t,["outputMimeType"]);e!==void 0&&_!=null&&y(e,["parameters","outputOptions","mimeType"],_);const E=m(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=m(t,["imageSize"]);if(e!==void 0&&S!=null&&y(e,["parameters","sampleImageSize"],S),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ZH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=m(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const _=m(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&y(e,["parameters","includeSafetyAttributes"],_);const E=m(t,["includeRaiReason"]);e!==void 0&&E!=null&&y(e,["parameters","includeRaiReason"],E);const S=m(t,["language"]);e!==void 0&&S!=null&&y(e,["parameters","language"],S);const A=m(t,["outputMimeType"]);e!==void 0&&A!=null&&y(e,["parameters","outputOptions","mimeType"],A);const x=m(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","compressionQuality"],x);const R=m(t,["addWatermark"]);e!==void 0&&R!=null&&y(e,["parameters","addWatermark"],R);const V=m(t,["labels"]);e!==void 0&&V!=null&&y(e,["labels"],V);const O=m(t,["imageSize"]);e!==void 0&&O!=null&&y(e,["parameters","sampleImageSize"],O);const F=m(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function e8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const r=m(e,["config"]);return r!=null&&jH(r,n),n}function t8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const r=m(e,["config"]);return r!=null&&ZH(r,n),n}function n8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>p8(l))),y(e,["generatedImages"],r)}const s=m(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],lP(s)),e}function i8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>gm(l))),y(e,["generatedImages"],r)}const s=m(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],uP(s)),e}function s8(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=m(t,["durationSeconds"]);if(e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(t,["negativePrompt"]);e!==void 0&&f!=null&&y(e,["parameters","negativePrompt"],f);const d=m(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&y(e,["parameters","enhancePrompt"],d),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],ym(p));const _=m(t,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>i7(S))),y(e,["instances[0]","referenceImages"],E)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function o8(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=m(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const r=m(t,["fps"]);e!==void 0&&r!=null&&y(e,["parameters","fps"],r);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const f=m(t,["aspectRatio"]);e!==void 0&&f!=null&&y(e,["parameters","aspectRatio"],f);const d=m(t,["resolution"]);e!==void 0&&d!=null&&y(e,["parameters","resolution"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const _=m(t,["pubsubTopic"]);e!==void 0&&_!=null&&y(e,["parameters","pubsubTopic"],_);const E=m(t,["negativePrompt"]);e!==void 0&&E!=null&&y(e,["parameters","negativePrompt"],E);const S=m(t,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const A=m(t,["generateAudio"]);e!==void 0&&A!=null&&y(e,["parameters","generateAudio"],A);const x=m(t,["lastFrame"]);e!==void 0&&x!=null&&y(e,["instances[0]","lastFrame"],cs(x));const R=m(t,["referenceImages"]);if(e!==void 0&&R!=null){let F=R;Array.isArray(F)&&(F=F.map(H=>s7(H))),y(e,["instances[0]","referenceImages"],F)}const V=m(t,["mask"]);e!==void 0&&V!=null&&y(e,["instances[0]","mask"],n7(V));const O=m(t,["compressionQuality"]);return e!==void 0&&O!=null&&y(e,["parameters","compressionQuality"],O),n}function r8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=m(t,["done"]);s!=null&&y(e,["done"],s);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],c8(l)),e}function a8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=m(t,["done"]);s!=null&&y(e,["done"],s);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const l=m(t,["response"]);return l!=null&&y(e,["response"],f8(l)),e}function l8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],ym(r));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],dP(l));const c=m(e,["source"]);c!=null&&d8(c,n);const f=m(e,["config"]);return f!=null&&s8(f,n),n}function u8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],cs(r));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],hP(l));const c=m(e,["source"]);c!=null&&h8(c,n);const f=m(e,["config"]);return f!=null&&o8(f,n),n}function c8(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>g8(l))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function f8(t){const e={},n=m(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>y8(l))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function d8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=m(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],ym(s));const r=m(t,["video"]);return e!==void 0&&r!=null&&y(e,["instances[0]","video"],dP(r)),n}function h8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=m(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],cs(s));const r=m(t,["video"]);return e!==void 0&&r!=null&&y(e,["instances[0]","video"],hP(r)),n}function p8(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],S8(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const s=m(t,["_self"]);return s!=null&&y(e,["safetyAttributes"],lP(s)),e}function gm(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],aP(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const s=m(t,["_self"]);s!=null&&y(e,["safetyAttributes"],uP(s));const r=m(t,["prompt"]);return r!=null&&y(e,["enhancedPrompt"],r),e}function m8(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],aP(n));const i=m(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),y(e,["labels"],s)}return e}function g8(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],e7(n)),e}function y8(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],t7(n)),e}function v8(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const s=m(t,["candidateCount"]);s!=null&&y(e,["candidateCount"],s);const r=m(t,["enableAffectiveDialog"]);r!=null&&y(e,["enableAffectiveDialog"],r);const l=m(t,["frequencyPenalty"]);l!=null&&y(e,["frequencyPenalty"],l);const c=m(t,["logprobs"]);c!=null&&y(e,["logprobs"],c);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const d=m(t,["mediaResolution"]);d!=null&&y(e,["mediaResolution"],d);const p=m(t,["presencePenalty"]);p!=null&&y(e,["presencePenalty"],p);const _=m(t,["responseJsonSchema"]);_!=null&&y(e,["responseJsonSchema"],_);const E=m(t,["responseLogprobs"]);E!=null&&y(e,["responseLogprobs"],E);const S=m(t,["responseMimeType"]);S!=null&&y(e,["responseMimeType"],S);const A=m(t,["responseModalities"]);A!=null&&y(e,["responseModalities"],A);const x=m(t,["responseSchema"]);x!=null&&y(e,["responseSchema"],x);const R=m(t,["routingConfig"]);R!=null&&y(e,["routingConfig"],R);const V=m(t,["seed"]);V!=null&&y(e,["seed"],V);const O=m(t,["speechConfig"]);O!=null&&y(e,["speechConfig"],cP(O));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const H=m(t,["temperature"]);H!=null&&y(e,["temperature"],H);const Y=m(t,["thinkingConfig"]);Y!=null&&y(e,["thinkingConfig"],Y);const Z=m(t,["topK"]);Z!=null&&y(e,["topK"],Z);const D=m(t,["topP"]);return D!=null&&y(e,["topP"],D),e}function _8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],st(t,i)),n}function T8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],st(t,i)),n}function E8(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function w8(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function S8(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Hr(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function aP(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],Hr(i));const s=m(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function ym(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Hr(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function cs(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Hr(i));const s=m(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function b8(t,e,n){const i={},s=m(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const r=m(e,["pageToken"]);n!==void 0&&r!=null&&y(n,["_query","pageToken"],r);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],Z1(t,c)),i}function C8(t,e,n){const i={},s=m(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const r=m(e,["pageToken"]);n!==void 0&&r!=null&&y(n,["_query","pageToken"],r);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],Z1(t,c)),i}function A8(t,e){const n={},i=m(e,["config"]);return i!=null&&b8(t,i,n),n}function x8(t,e){const n={},i=m(e,["config"]);return i!=null&&C8(t,i,n),n}function R8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["_self"]);if(s!=null){let r=eP(s);Array.isArray(r)&&(r=r.map(l=>h_(l))),y(e,["models"],r)}return e}function I8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["_self"]);if(s!=null){let r=eP(s);Array.isArray(r)&&(r=r.map(l=>p_(l))),y(e,["models"],r)}return e}function M8(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const s=m(t,["maskDilation"]);return s!=null&&y(e,["dilation"],s),e}function h_(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=m(t,["description"]);s!=null&&y(e,["description"],s);const r=m(t,["version"]);r!=null&&y(e,["version"],r);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],$8(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const f=m(t,["outputTokenLimit"]);f!=null&&y(e,["outputTokenLimit"],f);const d=m(t,["supportedGenerationMethods"]);return d!=null&&y(e,["supportedActions"],d),e}function p_(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=m(t,["description"]);s!=null&&y(e,["description"],s);const r=m(t,["versionId"]);r!=null&&y(e,["version"],r);const l=m(t,["deployedModels"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>KH(E))),y(e,["endpoints"],_)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const f=m(t,["_self"]);f!=null&&y(e,["tunedModelInfo"],Y8(f));const d=m(t,["defaultCheckpointId"]);d!=null&&y(e,["defaultCheckpointId"],d);const p=m(t,["checkpoints"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>E)),y(e,["checkpoints"],_)}return e}function P8(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&y(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&y(e,["inlineData"],TH(s));const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],JH(r));const l=m(t,["thoughtSignature"]);l!=null&&y(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&y(e,["functionCall"],c);const f=m(t,["codeExecutionResult"]);f!=null&&y(e,["codeExecutionResult"],f);const d=m(t,["executableCode"]);d!=null&&y(e,["executableCode"],d);const p=m(t,["functionResponse"]);p!=null&&y(e,["functionResponse"],p);const _=m(t,["text"]);return _!=null&&y(e,["text"],_),e}function D8(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],cs(n)),e}function N8(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=m(t,["baseSteps"]);e!==void 0&&s!=null&&y(e,["parameters","editConfig","baseSteps"],s);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const d=m(t,["addWatermark"]);e!==void 0&&d!=null&&y(e,["parameters","addWatermark"],d);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const _=m(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&y(e,["parameters","outputOptions","compressionQuality"],_);const E=m(t,["enhancePrompt"]);e!==void 0&&E!=null&&y(e,["parameters","enhancePrompt"],E);const S=m(t,["labels"]);return e!==void 0&&S!=null&&y(e,["labels"],S),n}function k8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["source"]);s!=null&&L8(s,n);const r=m(e,["config"]);return r!=null&&N8(r,n),n}function V8(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>gm(s))),y(e,["generatedImages"],i)}return e}function L8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=m(t,["personImage"]);e!==void 0&&s!=null&&y(e,["instances[0]","personImage","image"],cs(s));const r=m(t,["productImages"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>D8(c))),y(e,["instances[0]","productImages"],l)}return n}function O8(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],cs(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const s=m(t,["referenceType"]);s!=null&&y(e,["referenceType"],s);const r=m(t,["maskImageConfig"]);r!=null&&y(e,["maskImageConfig"],M8(r));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],xH(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const f=m(t,["subjectImageConfig"]);return f!=null&&y(e,["subjectImageConfig"],f),e}function lP(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const s=m(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function uP(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const s=m(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function U8(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&y(e,["category"],n);const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function z8(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],cs(n)),e}function B8(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const s=m(t,["maxPredictions"]);e!==void 0&&s!=null&&y(e,["parameters","maxPredictions"],s);const r=m(t,["confidenceThreshold"]);e!==void 0&&r!=null&&y(e,["parameters","confidenceThreshold"],r);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const f=m(t,["labels"]);return e!==void 0&&f!=null&&y(e,["labels"],f),n}function F8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["source"]);s!=null&&G8(s,n);const r=m(e,["config"]);return r!=null&&B8(r,n),n}function q8(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>m8(s))),y(e,["generatedMasks"],i)}return e}function G8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=m(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],cs(s));const r=m(t,["scribbleImage"]);return e!==void 0&&r!=null&&y(e,["instances[0]","scribble"],z8(r)),n}function cP(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],n),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function H8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["functionDeclarations"],d)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],w8(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&y(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=m(t,["googleMaps"]);r!=null&&y(e,["googleMaps"],E8(r));const l=m(t,["urlContext"]);l!=null&&y(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],c);const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}function fP(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>WH(E))),y(e,["functionDeclarations"],_)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=m(t,["googleSearch"]);s!=null&&y(e,["googleSearch"],s);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const l=m(t,["enterpriseWebSearch"]);l!=null&&y(e,["enterpriseWebSearch"],l);const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const f=m(t,["urlContext"]);f!=null&&y(e,["urlContext"],f);const d=m(t,["computerUse"]);d!=null&&y(e,["computerUse"],d);const p=m(t,["codeExecution"]);return p!=null&&y(e,["codeExecution"],p),e}function $8(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const s=m(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function Y8(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const s=m(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function K8(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=m(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const r=m(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&y(e,["defaultCheckpointId"],r),n}function J8(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=m(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const r=m(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&y(e,["defaultCheckpointId"],r),n}function W8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],st(t,i));const s=m(e,["config"]);return s!=null&&K8(s,n),n}function Q8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["config"]);return s!=null&&J8(s,n),n}function X8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=m(t,["includeRaiReason"]);e!==void 0&&s!=null&&y(e,["parameters","includeRaiReason"],s);const r=m(t,["outputMimeType"]);e!==void 0&&r!=null&&y(e,["parameters","outputOptions","mimeType"],r);const l=m(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&y(e,["parameters","outputOptions","compressionQuality"],l);const c=m(t,["enhanceInputImage"]);e!==void 0&&c!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=m(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=m(t,["labels"]);e!==void 0&&d!=null&&y(e,["labels"],d);const p=m(t,["numberOfImages"]);e!==void 0&&p!=null&&y(e,["parameters","sampleCount"],p);const _=m(t,["mode"]);return e!==void 0&&_!=null&&y(e,["parameters","mode"],_),n}function j8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],st(t,i));const s=m(e,["image"]);s!=null&&y(n,["instances[0]","image"],cs(s));const r=m(e,["upscaleFactor"]);r!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],r);const l=m(e,["config"]);return l!=null&&X8(l,n),n}function Z8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>gm(r))),y(e,["generatedImages"],s)}return e}function e7(t){const e={},n=m(t,["video","uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["video","encodedVideo"]);i!=null&&y(e,["videoBytes"],Hr(i));const s=m(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function t7(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Hr(i));const s=m(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function n7(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],cs(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function i7(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],ym(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function s7(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],cs(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function dP(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["video","uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["video","encodedVideo"],Hr(i));const s=m(t,["mimeType"]);return s!=null&&y(e,["encoding"],s),e}function hP(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Hr(i));const s=m(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o7="Content-Type",r7="X-Server-Timeout",a7="User-Agent",m_="x-goog-api-client",l7="1.24.0",u7=`google-genai-sdk/${l7}`,c7="v1beta1",f7="v1beta",Fx=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class d7{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:c7,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:f7,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>s.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&h7(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await qx(s),new c_(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await qx(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return wu(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield Et(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=r.decode(f,{stream:!0});try{const _=JSON.parse(d);if("error"in _){const E=JSON.parse(JSON.stringify(_.error)),S=E.status,A=E.code,x=`got status: ${S}. ${JSON.stringify(_)}`;if(A>=400&&A<600)throw new pm({message:x,status:A})}}catch(_){if(_.name==="ApiError")throw _}l+=d;let p=l.match(Fx);for(;p;){const _=p[1];try{const E=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Et(new c_(E)),l=l.slice(p[0].length),p=l.match(Fx)}catch(E){throw new Error(`exception parsing stream chunk ${_}. ${E}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=u7+" "+this.clientOptions.userAgentExtra;return e[a7]=n,e[m_]=n,e[o7]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(r7,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,l=await r.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const f=await this.fetchUploadUrl(s,n);return r.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},l=await this.request({path:ye("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function qx(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new pm({message:s,status:n}):new Error(s)}}function h7(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,l){const c=Object.assign({},r);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const d=l[f],p=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?c[f]=i(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p7="mcp_used/unknown";let m7=!1;function pP(t){for(const e of t)if(g7(e)||typeof e=="object"&&"inputSchema"in e)return!0;return m7}function mP(t){var e;const n=(e=t[m_])!==null&&e!==void 0?e:"";t[m_]=(n+` ${p7}`).trimStart()}function g7(t){return t!==null&&typeof t=="object"&&t instanceof B0}function y7(t,e=100){return wu(this,arguments,function*(){let i,s=0;for(;s<e;){const r=yield Et(t.listTools({cursor:i}));for(const l of r.tools)yield yield Et(l),s++;if(!r.nextCursor)break;i=r.nextCursor}})}class B0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new B0(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const r={},l=[];for(const p of this.mcpClients)try{for(var c=!0,f=(n=void 0,bf(y7(p))),d;d=await f.next(),e=d.done,!e;c=!0){s=d.value,c=!1;const _=s;l.push(_);const E=_.name;if(r[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);r[E]=p}}catch(_){n={error:_}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),S9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function v7(t,e,n){const i=new m9;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class _7{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),l=w7(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const p=new Promise(F=>{d=F}),_=e.callbacks,E=function(){d({})},S=this.apiClient,A={onopen:E,onmessage:F=>{v7(S,_.onmessage,F)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(F){}},x=this.webSocketFactory.create(f,E7(l),A);x.connect(),await p;const O={setup:{model:st(this.apiClient,e.model)}};return x.send(JSON.stringify(O)),new T7(x,this.apiClient)}}class T7{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fH(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=cH(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pu.PLAY)}pause(){this.sendPlaybackControl(pu.PAUSE)}stop(){this.sendPlaybackControl(pu.STOP)}resetContext(){this.sendPlaybackControl(pu.RESET_CONTEXT)}close(){this.conn.close()}}function E7(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function w7(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S7="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function b7(t,e,n){const i=new p9;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const l=pH(r);Object.assign(i,l)}else Object.assign(i,r);e(i)}class C7{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new _7(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,r,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&pP(e.config.tools)&&mP(_);const E=I7(_);if(this.apiClient.isVertexAI())p=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E);else{const k=this.apiClient.getApiKey();let U="BidiGenerateContent",z="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",z="access_token"),p=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${z}=${k}`}let S=()=>{};const A=new Promise(k=>{S=k}),x=e.callbacks,R=function(){var k;(k=x==null?void 0:x.onopen)===null||k===void 0||k.call(x),S({})},V=this.apiClient,O={onopen:R,onmessage:k=>{b7(V,x.onmessage,k)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(k){}},F=this.webSocketFactory.create(p,R7(E),O);F.connect(),await A;let H=st(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const k=this.apiClient.getProject(),U=this.apiClient.getLocation();H=`projects/${k}/locations/${U}/`+H}let Y={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Hs.AUDIO]}:e.config.responseModalities=[Hs.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],D=[];for(const k of Z)if(this.isCallableTool(k)){const U=k;D.push(await U.tool())}else D.push(k);D.length>0&&(e.config.tools=D);const M={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=uH(this.apiClient,M):Y=lH(this.apiClient,M),delete Y.config,F.send(JSON.stringify(Y)),new x7(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const A7={turnComplete:!0};class x7{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ui(n.turns),e.isVertexAI()||(i=i.map(s=>mm(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(S7)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},A7),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:hH(e)}:n={realtimeInput:dH(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function R7(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function I7(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gx=10;function Hx(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Su(l)){s=!0;break}if(!s)return!0;const r=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Su(t){return"callTool"in t&&typeof t.callTool=="function"}function M7(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Su(s)))!==null&&i!==void 0?i:!1}function P7(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!Su(s)))!==null&&i!==void 0?i:!1}function $x(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D7 extends ol{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,r,l,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!M7(n)||Hx(n.config))return await this.generateContentInternal(f);if(P7(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,p;const _=Ui(f.contents),E=(r=(s=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Gx;let S=0;for(;S<E&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const A=d.candidates[0].content,x=[];for(const R of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Su(R)){const O=await R.callTool(d.functionCalls);x.push(...O)}S++,p={role:"user",parts:x},f.contents=Ui(f.contents),f.contents.push(A),f.contents.push(p),$x(f.config)&&(_.push(A),_.push(p))}return $x(f.config)&&(d.automaticFunctionCallingHistory=_),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Hx(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let r;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=f==null?void 0:f.safetyAttributes:l.push(f);let c;return r?c={generatedImages:l,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new nd(Xa.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const l=await Promise.all(r.map(async f=>Su(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&pP(e.config.tools)){const f=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),mP(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,s;const r=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Su(l)){const c=l,f=await c.tool();for(const d of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,c)}}return r}async processAfcStream(e){var n,i,s;const r=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Gx;let l=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(d,p,_){var E,S;return wu(this,arguments,function*(){for(var A,x,R,V;c<r;){l&&(c++,l=!1);const Y=yield Et(d.processParamsMaybeAddMcpUsage(_)),Z=yield Et(d.generateContentStreamInternal(Y)),D=[],M=[];try{for(var O=!0,F=(x=void 0,bf(Z)),H;H=yield Et(F.next()),A=H.done,!A;O=!0){V=H.value,O=!1;const k=V;if(yield yield Et(k),k.candidates&&(!((E=k.candidates[0])===null||E===void 0)&&E.content)){M.push(k.candidates[0].content);for(const U of(S=k.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(c<r&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(U.functionCall.name)){const z=yield Et(p.get(U.functionCall.name).callTool([U.functionCall]));D.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(k){x={error:k}}finally{try{!O&&!A&&(R=F.return)&&(yield Et(R.call(F)))}finally{if(x)throw x.error}}if(D.length>0){l=!0;const k=new cf;k.candidates=[{content:{role:"user",parts:D}}],yield yield Et(k);const U=[];U.push(...M),U.push({role:"user",parts:D});const z=Ui(_.contents).concat(U);_.contents=z}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Ux(this.apiClient,e);return c=ye("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=Bx(p),E=new cf;return Object.assign(E,_),E})}else{const d=Ox(this.apiClient,e);return c=ye("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=zx(p),E=new cf;return Object.assign(E,_),E})}}async generateContentStreamInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Ux(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(_){return wu(this,arguments,function*(){var E,S,A,x;try{for(var R=!0,V=bf(_),O;O=yield Et(V.next()),E=O.done,!E;R=!0){x=O.value,R=!1;const F=x,H=Bx(yield Et(F.json()));H.sdkHttpResponse={headers:F.headers};const Y=new cf;Object.assign(Y,H),yield yield Et(Y)}}catch(F){S={error:F}}finally{try{!R&&!E&&(A=V.return)&&(yield Et(A.call(V)))}finally{if(S)throw S.error}}})})}else{const d=Ox(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(_){return wu(this,arguments,function*(){var E,S,A,x;try{for(var R=!0,V=bf(_),O;O=yield Et(V.next()),E=O.done,!E;R=!0){x=O.value,R=!1;const F=x,H=zx(yield Et(F.json()));H.sdkHttpResponse={headers:F.headers};const Y=new cf;Object.assign(Y,H),yield yield Et(Y)}}catch(F){S={error:F}}finally{try{!R&&!E&&(A=V.return)&&(yield Et(A.call(V)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=HH(this.apiClient,e);return c=ye("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=YH(p),E=new Ex;return Object.assign(E,_),E})}else{const d=GH(this.apiClient,e);return c=ye("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=$H(p),E=new Ex;return Object.assign(E,_),E})}}async generateImagesInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=t8(this.apiClient,e);return c=ye("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=i8(p),E=new wx;return Object.assign(E,_),E})}else{const d=e8(this.apiClient,e);return c=ye("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=n8(p),E=new wx;return Object.assign(E,_),E})}}async editImageInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=zH(this.apiClient,e);return r=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const d=BH(f),p=new r9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=j8(this.apiClient,e);return r=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const d=Z8(f),p=new a9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=k8(this.apiClient,e);return r=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const d=V8(f),p=new l9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=F8(this.apiClient,e);return r=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const d=q8(f),p=new u9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=T8(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p_(p))}else{const d=_8(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>h_(p))}}async listInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=x8(this.apiClient,e);return c=ye("{models_url}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=I8(p),E=new Sx;return Object.assign(E,_),E})}else{const d=A8(this.apiClient,e);return c=ye("{models_url}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=R8(p),E=new Sx;return Object.assign(E,_),E})}}async update(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Q8(this.apiClient,e);return c=ye("{model}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p_(p))}else{const d=W8(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>h_(p))}}async delete(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=VH(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=OH(p),E=new bx;return Object.assign(E,_),E})}else{const d=kH(this.apiClient,e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=LH(p),E=new bx;return Object.assign(E,_),E})}}async countTokens(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=PH(this.apiClient,e);return c=ye("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=NH(p),E=new Cx;return Object.assign(E,_),E})}else{const d=MH(this.apiClient,e);return c=ye("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=DH(p),E=new Cx;return Object.assign(E,_),E})}}async computeTokens(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=SH(this.apiClient,e);return r=ye("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const d=bH(f),p=new c9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=u8(this.apiClient,e);return c=ye("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const _=a8(p),E=new Lp;return Object.assign(E,_),E})}else{const d=l8(this.apiClient,e);return c=ye("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>{const _=r8(p),E=new Lp;return Object.assign(E,_),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N7 extends ol{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=i9(e);return c=ye("{operationName}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const d=n9(e);return c=ye("{operationName}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=Wq(e);return r=ye("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k7(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function V7(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>G7(r))),y(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function L7(t,e,n){const i={},s=m(e,["expireTime"]);n!==void 0&&s!=null&&y(n,["expireTime"],s);const r=m(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&y(n,["newSessionExpireTime"],r);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],q7(t,c));const f=m(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&y(n,["fieldMask"],f),i}function O7(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],L7(t,i,n)),n}function U7(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function z7(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function B7(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function F7(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const s=m(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const r=m(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const _=m(t,["speechConfig"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","speechConfig"],z0(_));const E=m(t,["thinkingConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","thinkingConfig"],E);const S=m(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],S);const A=m(t,["systemInstruction"]);e!==void 0&&A!=null&&y(e,["setup","systemInstruction"],V7(kn(A)));const x=m(t,["tools"]);if(e!==void 0&&x!=null){let Z=Wu(x);Array.isArray(Z)&&(Z=Z.map(D=>$7(Ju(D)))),y(e,["setup","tools"],Z)}const R=m(t,["sessionResumption"]);e!==void 0&&R!=null&&y(e,["setup","sessionResumption"],H7(R));const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&y(e,["setup","inputAudioTranscription"],V);const O=m(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","outputAudioTranscription"],O);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const H=m(t,["contextWindowCompression"]);e!==void 0&&H!=null&&y(e,["setup","contextWindowCompression"],H);const Y=m(t,["proactivity"]);return e!==void 0&&Y!=null&&y(e,["setup","proactivity"],Y),n}function q7(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],st(t,i));const s=m(e,["config"]);return s!=null&&y(n,["config"],F7(s,n)),n}function G7(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&y(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&y(e,["inlineData"],k7(s));const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],U7(r));const l=m(t,["thoughtSignature"]);l!=null&&y(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&y(e,["functionCall"],c);const f=m(t,["codeExecutionResult"]);f!=null&&y(e,["codeExecutionResult"],f);const d=m(t,["executableCode"]);d!=null&&y(e,["executableCode"],d);const p=m(t,["functionResponse"]);p!=null&&y(e,["functionResponse"],p);const _=m(t,["text"]);return _!=null&&y(e,["text"],_),e}function H7(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $7(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["functionDeclarations"],d)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],B7(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&y(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=m(t,["googleMaps"]);r!=null&&y(e,["googleMaps"],z7(r));const l=m(t,["urlContext"]);l!=null&&y(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],c);const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y7(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function K7(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=Y7(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(d=>l.includes(d)?`generationConfig.${d}`:d));const f=[];r&&f.push(r),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class J7 extends ol{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=O7(this.apiClient,e);r=ye("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const f=K7(c,e.config);return s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W7(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function Q7(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function X7(t,e){const n={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=m(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&y(e,["displayName"],i),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=m(t,["epochCount"]);e!==void 0&&s!=null&&y(e,["tuningTask","hyperparameters","epochCount"],s);const r=m(t,["learningRateMultiplier"]);if(r!=null&&y(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=m(t,["batchSize"]);e!==void 0&&l!=null&&y(e,["tuningTask","hyperparameters","batchSize"],l);const c=m(t,["learningRate"]);if(e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","learningRate"],c),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function j7(t,e){const n={},i=m(t,["validationDataset"]);e!==void 0&&i!=null&&y(e,["supervisedTuningSpec"],h$(i,n));const s=m(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&y(e,["tunedModelDisplayName"],s);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const l=m(t,["epochCount"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=m(t,["learningRateMultiplier"]);e!==void 0&&c!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const f=m(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=m(t,["adapterSize"]);if(e!==void 0&&d!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=m(t,["labels"]);return e!==void 0&&p!=null&&y(e,["labels"],p),n}function Z7(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["preTunedModel"]);i!=null&&y(e,["preTunedModel"],i);const s=m(t,["trainingDataset"]);s!=null&&y(e,["tuningTask","trainingData"],c$(s));const r=m(t,["config"]);return r!=null&&X7(r,e),e}function e$(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["preTunedModel"]);i!=null&&y(e,["preTunedModel"],i);const s=m(t,["trainingDataset"]);s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],f$(s,e));const r=m(t,["config"]);return r!=null&&j7(r,e),e}function t$(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function n$(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function i$(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const r=m(t,["filter"]);return e!==void 0&&r!=null&&y(e,["_query","filter"],r),n}function s$(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const r=m(t,["filter"]);return e!==void 0&&r!=null&&y(e,["_query","filter"],r),n}function o$(t){const e={},n=m(t,["config"]);return n!=null&&i$(n,e),e}function r$(t){const e={},n=m(t,["config"]);return n!=null&&s$(n,e),e}function a$(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>gP(l))),y(e,["tuningJobs"],r)}return e}function l$(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=m(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>g_(l))),y(e,["tuningJobs"],r)}return e}function u$(t){const e={},n=m(t,["name"]);n!=null&&y(e,["model"],n);const i=m(t,["name"]);return i!=null&&y(e,["endpoint"],i),e}function c$(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=m(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["examples","examples"],i)}return e}function f$(t,e){const n={},i=m(t,["gcsUri"]);e!==void 0&&i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=m(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],s),m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function gP(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["state"]);s!=null&&y(e,["state"],X1(s));const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const l=m(t,["tuningTask","startTime"]);l!=null&&y(e,["startTime"],l);const c=m(t,["tuningTask","completeTime"]);c!=null&&y(e,["endTime"],c);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const d=m(t,["description"]);d!=null&&y(e,["description"],d);const p=m(t,["baseModel"]);p!=null&&y(e,["baseModel"],p);const _=m(t,["_self"]);_!=null&&y(e,["tunedModel"],u$(_));const E=m(t,["customBaseModel"]);E!=null&&y(e,["customBaseModel"],E);const S=m(t,["experiment"]);S!=null&&y(e,["experiment"],S);const A=m(t,["labels"]);A!=null&&y(e,["labels"],A);const x=m(t,["outputUri"]);x!=null&&y(e,["outputUri"],x);const R=m(t,["pipelineJob"]);R!=null&&y(e,["pipelineJob"],R);const V=m(t,["serviceAccount"]);V!=null&&y(e,["serviceAccount"],V);const O=m(t,["tunedModelDisplayName"]);O!=null&&y(e,["tunedModelDisplayName"],O);const F=m(t,["veoTuningSpec"]);return F!=null&&y(e,["veoTuningSpec"],F),e}function g_(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["state"]);s!=null&&y(e,["state"],X1(s));const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const l=m(t,["startTime"]);l!=null&&y(e,["startTime"],l);const c=m(t,["endTime"]);c!=null&&y(e,["endTime"],c);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const d=m(t,["error"]);d!=null&&y(e,["error"],d);const p=m(t,["description"]);p!=null&&y(e,["description"],p);const _=m(t,["baseModel"]);_!=null&&y(e,["baseModel"],_);const E=m(t,["tunedModel"]);E!=null&&y(e,["tunedModel"],E);const S=m(t,["preTunedModel"]);S!=null&&y(e,["preTunedModel"],S);const A=m(t,["supervisedTuningSpec"]);A!=null&&y(e,["supervisedTuningSpec"],A);const x=m(t,["tuningDataStats"]);x!=null&&y(e,["tuningDataStats"],x);const R=m(t,["encryptionSpec"]);R!=null&&y(e,["encryptionSpec"],R);const V=m(t,["partnerModelTuningSpec"]);V!=null&&y(e,["partnerModelTuningSpec"],V);const O=m(t,["customBaseModel"]);O!=null&&y(e,["customBaseModel"],O);const F=m(t,["experiment"]);F!=null&&y(e,["experiment"],F);const H=m(t,["labels"]);H!=null&&y(e,["labels"],H);const Y=m(t,["outputUri"]);Y!=null&&y(e,["outputUri"],Y);const Z=m(t,["pipelineJob"]);Z!=null&&y(e,["pipelineJob"],Z);const D=m(t,["serviceAccount"]);D!=null&&y(e,["serviceAccount"],D);const M=m(t,["tunedModelDisplayName"]);M!=null&&y(e,["tunedModelDisplayName"],M);const k=m(t,["veoTuningSpec"]);return k!=null&&y(e,["veoTuningSpec"],k),e}function d$(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const s=m(t,["metadata"]);s!=null&&y(e,["metadata"],s);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const l=m(t,["error"]);return l!=null&&y(e,["error"],l),e}function h$(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const s=m(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p$ extends ol{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new nd(Xa.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),r=await this.tuneMldevInternal(s);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:u_.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=n$(e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>g_(p))}else{const d=t$(e);return c=ye("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>gP(p))}}async listInternal(e){var n,i,s,r;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=r$(e);return c=ye("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=l$(p),E=new Ax;return Object.assign(E,_),E})}else{const d=o$(e);return c=ye("tunedModels",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const _=a$(p),E=new Ax;return Object.assign(E,_),E})}}async cancel(e){var n,i,s,r;let l="",c={};if(this.apiClient.isVertexAI()){const f=Q7(e);l=ye("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=W7(e);l=ye("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI()){const c=e$(e);return r=ye("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>g_(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Z7(e);return r=ye("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>d$(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m${async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const g$=1024*1024*8,y$=3,v$=1e3,_$=2,Tv="x-goog-upload-status";async function T$(t,e,n){var i,s,r;let l=0,c=0,f=new c_(new Response),d="upload";for(l=t.size;c<l;){const _=Math.min(g$,l-c),E=t.slice(c,c+_);c+_>=l&&(d+=", finalize");let S=0,A=v$;for(;S<y$&&(f=await n.request({path:"",body:E,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(c),"Content-Length":String(_)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Tv]));)S++,await w$(A),A=A*_$;if(c+=_,((s=f==null?void 0:f.headers)===null||s===void 0?void 0:s[Tv])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await(f==null?void 0:f.json());if(((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Tv])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function E$(t){return{size:t.size,type:t.type}}function w$(t){return new Promise(e=>setTimeout(e,t))}class S${async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T$(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await E$(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b${create(e,n,i){return new C$(e,n,i)}}class C${constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yx="x-goog-api-key";class A${constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Yx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Yx,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x$="gl-node/";class R${constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Jq(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new A$(this.apiKey);this.apiClient=new d7({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:x$+"web",uploader:new S$,downloader:new m$}),this.models=new D7(this.apiClient),this.live=new C7(this.apiClient,s,new b$),this.batches=new fG(this.apiClient),this.chats=new GG(this.models,this.apiClient),this.caches=new BG(this.apiClient),this.files=new ZG(this.apiClient),this.operations=new N7(this.apiClient),this.authTokens=new J7(this.apiClient),this.tunings=new p$(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const yP=async t=>{const e=await new Promise((s,r)=>{const l=new FileReader;l.readAsDataURL(t),l.onload=()=>s(l.result),l.onerror=c=>r(c)}),{mimeType:n,data:i}=vP(e);return{inlineData:{mimeType:n,data:i}}},vP=t=>{const e=t.split(",");if(e.length<2)throw new Error("Invalid data URL");const n=e[0].match(/:(.*?);/);if(!n||!n[1])throw new Error("Could not parse MIME type from data URL");return{mimeType:n[1],data:e[1]}},Kx=t=>{const{mimeType:e,data:n}=vP(t);return{inlineData:{mimeType:e,data:n}}},_P=t=>t.startsWith("data:")?Promise.resolve(Kx(t)):new Promise((e,n)=>{const i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{const s=document.createElement("canvas");s.width=i.naturalWidth,s.height=i.naturalHeight;const r=s.getContext("2d");if(!r)return n(new Error("Could not get canvas context."));r.drawImage(i,0,0);const l=s.toDataURL("image/png");e(Kx(l))},i.onerror=s=>{n(new Error(`Could not load image from URL for conversion. The image might not be accessible due to CORS policy. Error: ${s}`))},i.src=t}),F0=t=>{var s,r,l,c,f,d;if((s=t.promptFeedback)!=null&&s.blockReason){const{blockReason:p,blockReasonMessage:_}=t.promptFeedback,E=`Request was blocked. Reason: ${p}. ${_||""}`;throw new Error(E)}for(const p of t.candidates??[]){const _=(l=(r=p.content)==null?void 0:r.parts)==null?void 0:l.find(E=>E.inlineData);if(_!=null&&_.inlineData){const{mimeType:E,data:S}=_.inlineData;return`data:${E};base64,${S}`}}const e=(f=(c=t.candidates)==null?void 0:c[0])==null?void 0:f.finishReason;if(e&&e!=="STOP"){const p=`Image generation stopped unexpectedly. Reason: ${e}. This often relates to safety settings.`;throw new Error(p)}const n=(d=t.text)==null?void 0:d.trim(),i="The AI model did not return an image. "+(n?`The model responded with text: "${n}"`:"This can happen due to safety filters or if the request is too complex. Please try a different image.");throw new Error(i)},q0=new R$({apiKey:"AIzaSyAN_WhWhftw0iUvAF4u167fCEVslsvPbCc"}),G0="gemini-2.5-flash-image",I$=async t=>{const e=await yP(t),i=await q0.models.generateContent({model:G0,contents:{parts:[e,{text:"You are an expert fashion photographer AI. Transform the person in this image into a full-body fashion model photo suitable for an e-commerce website. The background must be a clean, neutral studio backdrop (light gray, #f0f0f0). The person should have a neutral, professional model expression. Preserve the person's identity, unique features, and body type, but place them in a standard, relaxed standing model pose. The final image must be photorealistic. Return ONLY the final image."}]},config:{responseModalities:[Hs.IMAGE,Hs.TEXT]}});return F0(i)},M$=async(t,e)=>{const n=await _P(t),i=await yP(e),r=await q0.models.generateContent({model:G0,contents:{parts:[n,i,{text:`You are an expert virtual try-on AI. You will be given a 'model image' and a 'garment image'. Your task is to create a new photorealistic image where the person from the 'model image' is wearing the clothing from the 'garment image'.

**Crucial Rules:**
1.  **Complete Garment Replacement:** You MUST completely REMOVE and REPLACE the clothing item worn by the person in the 'model image' with the new garment. No part of the original clothing (e.g., collars, sleeves, patterns) should be visible in the final image.
2.  **Preserve the Model:** The person's face, hair, body shape, and pose from the 'model image' MUST remain unchanged.
3.  **Preserve the Background:** The entire background from the 'model image' MUST be preserved perfectly.
4.  **Apply the Garment:** Realistically fit the new garment onto the person. It should adapt to their pose with natural folds, shadows, and lighting consistent with the original scene.
5.  **Output:** Return ONLY the final, edited image. Do not include any text.`}]},config:{responseModalities:[Hs.IMAGE,Hs.TEXT]}});return F0(r)},P$=async(t,e)=>{const n=await _P(t),i=`You are an expert fashion photographer AI. Take this image and regenerate it from a different perspective. The person, clothing, and background style must remain identical. The new perspective should be: "${e}". Return ONLY the final image.`,s=await q0.models.generateContent({model:G0,contents:{parts:[n,{text:i}]},config:{responseModalities:[Hs.IMAGE,Hs.TEXT]}});return F0(s)};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const _r=()=>P.jsxs("svg",{className:"animate-spin h-10 w-10 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[P.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),P.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),D$=()=>{};var Jx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},N$=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],l=t[n++],c=t[n++],f=((s&7)<<18|(r&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const r=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|l&63)}}return e.join("")},EP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],l=s+1<t.length,c=l?t[s+1]:0,f=s+2<t.length,d=f?t[s+2]:0,p=r>>2,_=(r&3)<<4|c>>4;let E=(c&15)<<2|d>>6,S=d&63;f||(S=64,l||(E=64)),i.push(n[p],n[_],n[E],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const _=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||c==null||d==null||_==null)throw new k$;const E=r<<2|c>>4;if(i.push(E),d!==64){const S=c<<4&240|d>>2;if(i.push(S),_!==64){const A=d<<6&192|_;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V$=function(t){const e=TP(t);return EP.encodeByteArray(e,!0)},Up=function(t){return V$(t).replace(/\./g,"")},wP=function(t){try{return EP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$=()=>L$().__FIREBASE_DEFAULTS__,U$=()=>{if(typeof process>"u"||typeof Jx>"u")return;const t=Jx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},z$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wP(t[1]);return e&&JSON.parse(e)},vm=()=>{try{return D$()||O$()||U$()||z$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SP=t=>{var e,n;return(n=(e=vm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},B$=t=>{const e=SP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},bP=()=>{var t;return(t=vm())==null?void 0:t.config},CP=t=>{var e;return(e=vm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AP(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Up(JSON.stringify(n)),Up(JSON.stringify(l)),""].join(".")}const Cf={};function G$(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cf))Cf[e]?t.emulator.push(e):t.prod.push(e);return t}function H$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Wx=!1;function xP(t,e){if(typeof window>"u"||typeof document>"u"||!Xu(window.location.host)||Cf[t]===e||Cf[t]||Wx)return;Cf[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",r=G$().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function d(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Wx=!0,l()},E}function p(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=H$(i),S=n("text"),A=document.getElementById(S)||document.createElement("span"),x=n("learnmore"),R=document.getElementById(x)||document.createElement("a"),V=n("preprendIcon"),O=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;c(F),p(R,x);const H=d();f(O,V),F.append(O,A,R,H),document.body.appendChild(F)}r?(A.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function Y$(){var e;const t=(e=vm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function W$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q$(){const t=Un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X$(){return!Y$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j$(){try{return typeof indexedDB=="object"}catch{return!1}}function Z$(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY="FirebaseError";class Do extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=eY,Object.setPrototypeOf(this,Do.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,id.prototype.create)}}class id{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],l=r?tY(r,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Do(s,c,i)}}function tY(t,e){return t.replace(nY,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const nY=/\{\$([^}]+)}/g;function iY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ja(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],l=e[s];if(Qx(r)&&Qx(l)){if(!ja(r,l))return!1}else if(r!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Qx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sY(t,e){const n=new oY(t,e);return n.subscribe.bind(n)}class oY{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");rY(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ev),s.error===void 0&&(s.error=Ev),s.complete===void 0&&(s.complete=Ev);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rY(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ev(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t){return t&&t._delegate?t._delegate:t}class Za{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new F$;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uY(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lY(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lY(t){return t===Na?void 0:t}function uY(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aY(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const fY={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},dY=Je.INFO,hY={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},pY=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=hY[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H0{constructor(e){this.name=e,this._logLevel=dY,this._logHandler=pY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const mY=(t,e)=>e.some(n=>t instanceof n);let Xx,jx;function gY(){return Xx||(Xx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yY(){return jx||(jx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RP=new WeakMap,y_=new WeakMap,IP=new WeakMap,wv=new WeakMap,$0=new WeakMap;function vY(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",l)},r=()=>{n(Rr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&RP.set(n,t)}).catch(()=>{}),$0.set(e,t),e}function _Y(t){if(y_.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",l),t.removeEventListener("abort",l)},r=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",l),t.addEventListener("abort",l)});y_.set(t,e)}let v_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return y_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TY(t){v_=t(v_)}function EY(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Sv(this),e,...n);return IP.set(i,e.sort?e.sort():[e]),Rr(i)}:yY().includes(t)?function(...e){return t.apply(Sv(this),e),Rr(RP.get(this))}:function(...e){return Rr(t.apply(Sv(this),e))}}function wY(t){return typeof t=="function"?EY(t):(t instanceof IDBTransaction&&_Y(t),mY(t,gY())?new Proxy(t,v_):t)}function Rr(t){if(t instanceof IDBRequest)return vY(t);if(wv.has(t))return wv.get(t);const e=wY(t);return e!==t&&(wv.set(t,e),$0.set(e,t)),e}const Sv=t=>$0.get(t);function SY(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const l=indexedDB.open(t,e),c=Rr(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Rr(l.result),f.oldVersion,f.newVersion,Rr(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{r&&f.addEventListener("close",()=>r()),s&&f.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const bY=["get","getKey","getAll","getAllKeys","count"],CY=["put","add","delete","clear"],bv=new Map;function Zx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bv.get(e))return bv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=CY.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||bY.includes(n)))return;const r=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&f.done]))[0]};return bv.set(e,r),r}TY(t=>({...t,get:(e,n,i)=>Zx(e,n)||t.get(e,n,i),has:(e,n)=>!!Zx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xY(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xY(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const __="@firebase/app",eR="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new H0("@firebase/app"),RY="@firebase/app-compat",IY="@firebase/analytics-compat",MY="@firebase/analytics",PY="@firebase/app-check-compat",DY="@firebase/app-check",NY="@firebase/auth",kY="@firebase/auth-compat",VY="@firebase/database",LY="@firebase/data-connect",OY="@firebase/database-compat",UY="@firebase/functions",zY="@firebase/functions-compat",BY="@firebase/installations",FY="@firebase/installations-compat",qY="@firebase/messaging",GY="@firebase/messaging-compat",HY="@firebase/performance",$Y="@firebase/performance-compat",YY="@firebase/remote-config",KY="@firebase/remote-config-compat",JY="@firebase/storage",WY="@firebase/storage-compat",QY="@firebase/firestore",XY="@firebase/ai",jY="@firebase/firestore-compat",ZY="firebase",eK="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="[DEFAULT]",tK={[__]:"fire-core",[RY]:"fire-core-compat",[MY]:"fire-analytics",[IY]:"fire-analytics-compat",[DY]:"fire-app-check",[PY]:"fire-app-check-compat",[NY]:"fire-auth",[kY]:"fire-auth-compat",[VY]:"fire-rtdb",[LY]:"fire-data-connect",[OY]:"fire-rtdb-compat",[UY]:"fire-fn",[zY]:"fire-fn-compat",[BY]:"fire-iid",[FY]:"fire-iid-compat",[qY]:"fire-fcm",[GY]:"fire-fcm-compat",[HY]:"fire-perf",[$Y]:"fire-perf-compat",[YY]:"fire-rc",[KY]:"fire-rc-compat",[JY]:"fire-gcs",[WY]:"fire-gcs-compat",[QY]:"fire-fst",[jY]:"fire-fst-compat",[XY]:"fire-vertex","fire-js":"fire-js",[ZY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=new Map,nK=new Map,E_=new Map;function tR(t,e){try{t.container.addComponent(e)}catch(n){xo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ou(t){const e=t.name;if(E_.has(e))return xo.debug(`There were multiple attempts to register component ${e}.`),!1;E_.set(e,t);for(const n of zp.values())tR(n,t);for(const n of nK.values())tR(n,t);return!0}function Y0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ns(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new id("app","Firebase",iK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Za("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=eK;function MP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:T_,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ir.create("bad-app-name",{appName:String(s)});if(n||(n=bP()),!n)throw Ir.create("no-options");const r=zp.get(s);if(r){if(ja(n,r.options)&&ja(i,r.config))return r;throw Ir.create("duplicate-app",{appName:s})}const l=new cY(s);for(const f of E_.values())l.addComponent(f);const c=new sK(n,i,l);return zp.set(s,c),c}function PP(t=T_){const e=zp.get(t);if(!e&&t===T_&&bP())return MP();if(!e)throw Ir.create("no-app",{appName:t});return e}function Mr(t,e,n){let i=tK[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&l.push("and"),r&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xo.warn(l.join(" "));return}Ou(new Za(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK="firebase-heartbeat-database",rK=1,Bf="firebase-heartbeat-store";let Cv=null;function DP(){return Cv||(Cv=SY(oK,rK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),Cv}async function aK(t){try{const n=(await DP()).transaction(Bf),i=await n.objectStore(Bf).get(NP(t));return await n.done,i}catch(e){if(e instanceof Do)xo.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xo.warn(n.message)}}}async function nR(t,e){try{const i=(await DP()).transaction(Bf,"readwrite");await i.objectStore(Bf).put(e,NP(t)),await i.done}catch(n){if(n instanceof Do)xo.warn(n.message);else{const i=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xo.warn(i.message)}}}function NP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=1024,uK=30;class cK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dK(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=iR();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>uK){const l=hK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xo.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iR(),{heartbeatsToSend:i,unsentEntries:s}=fK(this._heartbeatsCache.heartbeats),r=Up(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return xo.warn(n),""}}}function iR(){return new Date().toISOString().substring(0,10)}function fK(t,e=lK){const n=[];let i=t.slice();for(const s of t){const r=n.find(l=>l.agent===s.agent);if(r){if(r.dates.push(s.date),sR(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sR(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j$()?Z$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sR(t){return Up(JSON.stringify({version:2,heartbeats:t})).length}function hK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(t){Ou(new Za("platform-logger",e=>new AY(e),"PRIVATE")),Ou(new Za("heartbeat",e=>new cK(e),"PRIVATE")),Mr(__,eR,t),Mr(__,eR,"esm2020"),Mr("fire-js","")}pK("");var mK="firebase",gK="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(mK,gK,"app");function kP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yK=kP,VP=new id("auth","Firebase",kP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=new H0("@firebase/auth");function vK(t,...e){Bp.logLevel<=Je.WARN&&Bp.warn(`Auth (${ju}): ${t}`,...e)}function dp(t,...e){Bp.logLevel<=Je.ERROR&&Bp.error(`Auth (${ju}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t,...e){throw J0(t,...e)}function ls(t,...e){return J0(t,...e)}function K0(t,e,n){const i={...yK(),[e]:n};return new id("auth","Firebase",i).create(e,{appName:t.name})}function Ha(t){return K0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _K(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&$s(t,"argument-error"),K0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J0(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return VP.create(t,...e)}function Pe(t,e,...n){if(!t)throw J0(e,...n)}function Eo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dp(e),new Error(e)}function Ro(t,e){t||Eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function TK(){return oR()==="http:"||oR()==="https:"}function oR(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TK()||J$()||"connection"in navigator)?navigator.onLine:!0}function wK(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ro(n>e,"Short delay should be less than long delay!"),this.isMobile=$$()||W$()}get(){return EK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e){Ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CK=new od(3e4,6e4);function Q0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Zu(t,e,n,i,s={}){return OP(t,s,async()=>{let r={},l={};i&&(e==="GET"?l=i:r={body:JSON.stringify(i)});const c=sd({key:t.config.apiKey,...l}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:f,...r};return K$()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Xu(t.emulatorConfig.host)&&(d.credentials="include"),LP.fetch()(await UP(t,t.config.apiHost,n,c),d)})}async function OP(t,e,n){t._canInitEmulator=!1;const i={...SK,...e};try{const s=new xK(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await r.json();if("needConfirmation"in l)throw jh(t,"account-exists-with-different-credential",l);if(r.ok&&!("errorMessage"in l))return l;{const c=r.ok?l.errorMessage:l.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw jh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw jh(t,"user-disabled",l);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw K0(t,p,d);$s(t,p)}}catch(s){if(s instanceof Do)throw s;$s(t,"network-request-failed",{message:String(s)})}}async function AK(t,e,n,i,s={}){const r=await Zu(t,e,n,i,s);return"mfaPendingCredential"in r&&$s(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function UP(t,e,n,i){const s=`${e}${n}?${i}`,r=t,l=r.config.emulator?W0(t.config,s):`${t.config.apiScheme}://${s}`;return bK.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(l).toString():l}class xK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ls(this.auth,"network-request-failed")),CK.get())})}}function jh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=ls(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RK(t,e){return Zu(t,"POST","/v1/accounts:delete",e)}async function Fp(t,e){return Zu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IK(t,e=!1){const n=zn(t),i=await n.getIdToken(e),s=X0(i);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,l=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Af(Av(s.auth_time)),issuedAtTime:Af(Av(s.iat)),expirationTime:Af(Av(s.exp)),signInProvider:l||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Av(t){return Number(t)*1e3}function X0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return dp("JWT malformed, contained fewer than 3 sections"),null;try{const s=wP(n);return s?JSON.parse(s):(dp("Failed to decode base64 JWT payload"),null)}catch(s){return dp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rR(t){const e=X0(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ff(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Do&&MK(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function MK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Af(this.lastLoginAt),this.creationTime=Af(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qp(t){var _;const e=t.auth,n=await t.getIdToken(),i=await Ff(t,Fp(e,{idToken:n}));Pe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(_=s.providerUserInfo)!=null&&_.length?zP(s.providerUserInfo):[],l=NK(t.providerData,r),c=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?f:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new S_(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function DK(t){const e=zn(t);await qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NK(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function zP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kK(t,e){const n=await OP(t,{},async()=>{const i=sd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,l=await UP(t,s,"/v1/token",`key=${r}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return t.emulatorConfig&&Xu(t.emulatorConfig.host)&&(f.credentials="include"),LP.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VK(t,e){return Zu(t,"POST","/v2/accounts:revokeToken",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=rR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await kK(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,l=new bu;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),r&&(Pe(typeof r=="number","internal-error",{appName:e}),l.expirationTime=r),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bu,this.toJSON())}_performRefresh(){return Eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ss{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new PK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new S_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ff(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return IK(this,e)}reload(){return DK(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await qp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await Ff(this,RK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,l=n.photoURL??void 0,c=n.tenantId??void 0,f=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:A,stsTokenManager:x}=n;Pe(_&&x,e,"internal-error");const R=bu.fromJSON(this.name,x);Pe(typeof _=="string",e,"internal-error"),gr(i,e.name),gr(s,e.name),Pe(typeof E=="boolean",e,"internal-error"),Pe(typeof S=="boolean",e,"internal-error"),gr(r,e.name),gr(l,e.name),gr(c,e.name),gr(f,e.name),gr(d,e.name),gr(p,e.name);const V=new ss({uid:_,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:r,tenantId:c,stsTokenManager:R,createdAt:d,lastLoginAt:p});return A&&Array.isArray(A)&&(V.providerData=A.map(O=>({...O}))),f&&(V._redirectEventId=f),V}static async _fromIdTokenResponse(e,n,i=!1){const s=new bu;s.updateFromServerResponse(n);const r=new ss({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await qp(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?zP(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),c=new bu;c.updateFromIdToken(i);const f=new ss({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new S_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Map;function wo(t){Ro(t instanceof Function,"Expected a class definition");let e=aR.get(t);return e?(Ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BP.type="NONE";const lR=BP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t,e,n){return`firebase:${t}:${e}:${n}`}class Cu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=hp(this.userKey,s.apiKey,r),this.fullPersistenceKey=hp("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fp(this.auth,{idToken:e}).catch(()=>{});return n?ss._fromGetAccountInfoResponse(this.auth,n,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Cu(wo(lR),e,i);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=s[0]||wo(lR);const l=hp(i,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(l);if(p){let _;if(typeof p=="string"){const E=await Fp(e,{idToken:p}).catch(()=>{});if(!E)break;_=await ss._fromGetAccountInfoResponse(e,E,p)}else _=ss._fromJSON(e,p);d!==r&&(c=_),r=d;break}}catch{}const f=s.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!f.length?new Cu(r,e,i):(r=f[0],c&&await r._set(l,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(l)}catch{}})),new Cu(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YP(e))return"Blackberry";if(KP(e))return"Webos";if(qP(e))return"Safari";if((e.includes("chrome/")||GP(e))&&!e.includes("edge/"))return"Chrome";if($P(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function FP(t=Un()){return/firefox\//i.test(t)}function qP(t=Un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GP(t=Un()){return/crios\//i.test(t)}function HP(t=Un()){return/iemobile/i.test(t)}function $P(t=Un()){return/android/i.test(t)}function YP(t=Un()){return/blackberry/i.test(t)}function KP(t=Un()){return/webos/i.test(t)}function j0(t=Un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LK(t=Un()){var e;return j0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function OK(){return Q$()&&document.documentMode===10}function JP(t=Un()){return j0(t)||$P(t)||KP(t)||YP(t)||/windows phone/i.test(t)||HP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t,e=[]){let n;switch(t){case"Browser":n=uR(Un());break;case"Worker":n=`${uR(Un())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ju}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((l,c)=>{try{const f=e(r);l(f)}catch(f){c(f)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zK(t,e={}){return Zu(t,"GET","/v2/passwordPolicy",Q0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK=6;class FK{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BK,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cR(this),this.idTokenSubscription=new cR(this),this.beforeStateQueue=new UK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wo(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Cu.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fp(this,{idToken:e}),i=await ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ns(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(r=this.redirectUser)==null?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(Ha(this));const n=e?zn(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zK(this),n=new FK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new id("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await VK(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wo(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Cu.create(this,[wo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{l||r(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&vK(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _m(t){return zn(t)}class cR{constructor(e){this.auth=e,this.observer=null,this.addObserver=sY(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GK(t){Z0=t}function HK(t){return Z0.loadJS(t)}function $K(){return Z0.gapiScript}function YK(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KK(t,e){const n=Y0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(ja(r,e??{}))return s;$s(s,"already-initialized")}return n.initialize({options:e})}function JK(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function WK(t,e,n){const i=_m(t);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=QP(e),{host:l,port:c}=QK(e),f=c===null?"":`:${c}`,d={url:`${r}//${l}${f}/`},p=Object.freeze({host:l,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(ja(d,i.config.emulator)&&ja(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Xu(l)?(AP(`${r}//${l}${f}`),xP("Auth",!0)):XK()}function QP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QK(t){const e=QP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:fR(i.substr(r.length+1))}}else{const[r,l]=i.split(":");return{host:r,port:fR(l)}}}function fR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Eo("not implemented")}_getIdTokenResponse(e){return Eo("not implemented")}_linkToIdToken(e,n){return Eo("not implemented")}_getReauthenticationResolver(e){return Eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e){return AK(t,"POST","/v1/accounts:signInWithIdp",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jK="http://localhost";class el extends XP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$s("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const l=new el(i,s);return l.idToken=r.idToken||void 0,l.accessToken=r.accessToken||void 0,l.secret=r.secret,l.nonce=r.nonce,l.pendingToken=r.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Au(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Au(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Au(e,n)}buildRequest(){const e={requestUri:jK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends eT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends rd{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends rd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return el._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return _o.credential(n,i)}catch{return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com";_o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends rd{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends rd{constructor(){super("twitter.com")}static credential(e,n){return el._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wr.credential(n,i)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await ss._fromIdTokenResponse(e,i,s),l=dR(i);return new Uu({user:r,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=dR(i);return new Uu({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function dR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends Do{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Gp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Gp(e,n,i,s)}}function jP(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Gp._fromErrorAndOperation(t,r,e,i):r})}async function ZK(t,e,n=!1){const i=await Ff(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Uu._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eJ(t,e,n=!1){const{auth:i}=t;if(ns(i.app))return Promise.reject(Ha(i));const s="reauthenticate";try{const r=await Ff(t,jP(i,s,e,t),n);Pe(r.idToken,i,"internal-error");const l=X0(r.idToken);Pe(l,i,"internal-error");const{sub:c}=l;return Pe(t.uid===c,i,"user-mismatch"),Uu._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&$s(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tJ(t,e,n=!1){if(ns(t.app))return Promise.reject(Ha(t));const i="signIn",s=await jP(t,i,e),r=await Uu._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}function nJ(t,e,n,i){return zn(t).onIdTokenChanged(e,n,i)}function iJ(t,e,n){return zn(t).beforeAuthStateChanged(e,n)}function sJ(t,e,n,i){return zn(t).onAuthStateChanged(e,n,i)}function oJ(t){return zn(t).signOut()}const Hp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hp,"1"),this.storage.removeItem(Hp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ=1e3,aJ=10;class eD extends ZP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},r=this.storage.getItem(i);OK()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,aJ):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},rJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eD.type="LOCAL";const lJ=eD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD extends ZP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tD.type="SESSION";const nD=tD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uJ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Tm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async d=>d(n.origin,r)),f=await uJ(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,l;return new Promise((c,f)=>{const d=tT("",20);s.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(_){const E=_;if(E.data.eventId===d)switch(E.data.status){case"ack":clearTimeout(p),r=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(E.data.response);break;default:clearTimeout(p),clearTimeout(r),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function fJ(t){Us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function dJ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hJ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function pJ(){return iD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="firebaseLocalStorageDb",mJ=1,$p="firebaseLocalStorage",oD="fbase_key";class ad{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([$p],e?"readwrite":"readonly").objectStore($p)}function gJ(){const t=indexedDB.deleteDatabase(sD);return new ad(t).toPromise()}function b_(){const t=indexedDB.open(sD,mJ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore($p,{keyPath:oD})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains($p)?e(i):(i.close(),await gJ(),e(await b_()))})})}async function hR(t,e,n){const i=Em(t,!0).put({[oD]:e,value:n});return new ad(i).toPromise()}async function yJ(t,e){const n=Em(t,!1).get(e),i=await new ad(n).toPromise();return i===void 0?null:i.value}function pR(t,e){const n=Em(t,!0).delete(e);return new ad(n).toPromise()}const vJ=800,_J=3;class rD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_J)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tm._getInstance(pJ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await dJ(),!this.activeServiceWorker)return;this.sender=new cJ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b_();return await hR(e,Hp,"1"),await pR(e,Hp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>hR(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>yJ(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Em(s,!1).getAll();return new ad(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rD.type="LOCAL";const TJ=rD;new od(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t,e){return e?wo(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends XP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Au(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Au(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Au(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EJ(t){return tJ(t.auth,new nT(t),t.bypassAuthState)}function wJ(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),eJ(n,new nT(t),t.bypassAuthState)}async function SJ(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),ZK(n,new nT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EJ;case"linkViaPopup":case"linkViaRedirect":return SJ;case"reauthViaPopup":case"reauthViaRedirect":return wJ;default:$s(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=new od(2e3,1e4);async function CJ(t,e,n){if(ns(t.app))return Promise.reject(ls(t,"operation-not-supported-in-this-environment"));const i=_m(t);_K(t,e,eT);const s=aD(i,n);return new Ba(i,"signInViaPopup",e,s).executeNotNull()}class Ba extends lD{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const e=tT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bJ.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ="pendingRedirect",pp=new Map;class xJ extends lD{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=pp.get(this.auth._key());if(!e){try{const i=await RJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}pp.set(this.auth._key(),e)}return this.bypassAuthState||pp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RJ(t,e){const n=PJ(e),i=MJ(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function IJ(t,e){pp.set(t._key(),e)}function MJ(t){return wo(t._redirectPersistence)}function PJ(t){return hp(AJ,t.config.apiKey,t.name)}async function DJ(t,e,n=!1){if(ns(t.app))return Promise.reject(Ha(t));const i=_m(t),s=aD(i,e),l=await new xJ(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NJ=600*1e3;class kJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!uD(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ls(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(mR(e))}saveEventToCache(e){this.cachedEventUids.add(mR(e)),this.lastProcessedEventTime=Date.now()}}function mR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LJ(t,e={}){return Zu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UJ=/^https?/;async function zJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LJ(t);for(const n of e)try{if(BJ(n))return}catch{}$s(t,"unauthorized-domain")}function BJ(t){const e=w_(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!UJ.test(n))return!1;if(OJ.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FJ=new od(3e4,6e4);function gR(){const t=Us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qJ(t){return new Promise((e,n)=>{var s,r,l;function i(){gR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gR(),n(ls(t,"network-request-failed"))},timeout:FJ.get()})}if((r=(s=Us().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((l=Us().gapi)!=null&&l.load)i();else{const c=YK("iframefcb");return Us()[c]=()=>{gapi.load?i():n(ls(t,"network-request-failed"))},HK(`${$K()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw mp=null,e})}let mp=null;function GJ(t){return mp=mp||qJ(t),mp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ=new od(5e3,15e3),$J="__/auth/iframe",YJ="emulator/auth/iframe",KJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WJ(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W0(e,YJ):`https://${t.config.authDomain}/${$J}`,i={apiKey:e.apiKey,appName:t.name,v:ju},s=JJ.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${sd(i).slice(1)}`}async function QJ(t){const e=await GJ(t),n=Us().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:WJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KJ,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const l=ls(t,"network-request-failed"),c=Us().setTimeout(()=>{r(l)},HJ.get());function f(){Us().clearTimeout(c),s(i)}i.ping(f).then(f,()=>{r(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jJ=500,ZJ=600,eW="_blank",tW="http://localhost";class yR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nW(t,e,n,i=jJ,s=ZJ){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f={...XJ,width:i.toString(),height:s.toString(),top:r,left:l},d=Un().toLowerCase();n&&(c=GP(d)?eW:n),FP(d)&&(e=e||tW,f.scrollbars="yes");const p=Object.entries(f).reduce((E,[S,A])=>`${E}${S}=${A},`,"");if(LK(d)&&c!=="_self")return iW(e||"",c),new yR(null);const _=window.open(e||"",c,p);Pe(_,t,"popup-blocked");try{_.focus()}catch{}return new yR(_)}function iW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW="__/auth/handler",oW="emulator/auth/handler",rW=encodeURIComponent("fac");async function vR(t,e,n,i,s,r){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ju,eventId:s};if(e instanceof eT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",iY(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries({}))l[p]=_}if(e instanceof rd){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),d=f?`#${rW}=${encodeURIComponent(f)}`:"";return`${aW(t)}?${sd(c).slice(1)}${d}`}function aW({config:t}){return t.emulator?W0(t,oW):`https://${t.authDomain}/${sW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="webStorageSupport";class lW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nD,this._completeRedirectFn=DJ,this._overrideRedirectResult=IJ}async _openPopup(e,n,i,s){var l;Ro((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const r=await vR(e,n,i,w_(),s);return nW(e,r,tT())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await vR(e,n,i,w_(),s);return fJ(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Ro(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await QJ(e),i=new kJ(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xv,{type:xv},s=>{var l;const r=(l=s==null?void 0:s[0])==null?void 0:l[xv];r!==void 0&&n(!!r),$s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JP()||qP()||j0()}}const uW=lW;var _R="@firebase/auth",TR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dW(t){Ou(new Za("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WP(t)},d=new qK(i,s,r,f);return JK(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ou(new Za("auth-internal",e=>{const n=_m(e.getProvider("auth").getImmediate());return(i=>new cW(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(_R,TR,fW(t)),Mr(_R,TR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=300,pW=CP("authIdTokenMaxAge")||hW;let ER=null;const mW=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>pW)return;const s=n==null?void 0:n.token;ER!==s&&(ER=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gW(t=PP()){const e=Y0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KK(t,{popupRedirectResolver:uW,persistence:[TJ,lJ,nD]}),i=CP("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const l=mW(r.toString());iJ(n,l,()=>l(n.currentUser)),nJ(n,c=>l(c))}}const s=SP("auth");return s&&WK(n,`http://${s}`),n}function yW(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}GK({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=ls("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",yW().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dW("Browser");var wR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,cD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function k(){}k.prototype=M.prototype,D.F=M.prototype,D.prototype=new k,D.prototype.constructor=D,D.D=function(U,z,B){for(var L=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)L[Ae-2]=arguments[Ae];return M.prototype[z].apply(U,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,M,k){k||(k=0);const U=Array(16);if(typeof M=="string")for(var z=0;z<16;++z)U[z]=M.charCodeAt(k++)|M.charCodeAt(k++)<<8|M.charCodeAt(k++)<<16|M.charCodeAt(k++)<<24;else for(z=0;z<16;++z)U[z]=M[k++]|M[k++]<<8|M[k++]<<16|M[k++]<<24;M=D.g[0],k=D.g[1],z=D.g[2];let B=D.g[3],L;L=M+(B^k&(z^B))+U[0]+3614090360&4294967295,M=k+(L<<7&4294967295|L>>>25),L=B+(z^M&(k^z))+U[1]+3905402710&4294967295,B=M+(L<<12&4294967295|L>>>20),L=z+(k^B&(M^k))+U[2]+606105819&4294967295,z=B+(L<<17&4294967295|L>>>15),L=k+(M^z&(B^M))+U[3]+3250441966&4294967295,k=z+(L<<22&4294967295|L>>>10),L=M+(B^k&(z^B))+U[4]+4118548399&4294967295,M=k+(L<<7&4294967295|L>>>25),L=B+(z^M&(k^z))+U[5]+1200080426&4294967295,B=M+(L<<12&4294967295|L>>>20),L=z+(k^B&(M^k))+U[6]+2821735955&4294967295,z=B+(L<<17&4294967295|L>>>15),L=k+(M^z&(B^M))+U[7]+4249261313&4294967295,k=z+(L<<22&4294967295|L>>>10),L=M+(B^k&(z^B))+U[8]+1770035416&4294967295,M=k+(L<<7&4294967295|L>>>25),L=B+(z^M&(k^z))+U[9]+2336552879&4294967295,B=M+(L<<12&4294967295|L>>>20),L=z+(k^B&(M^k))+U[10]+4294925233&4294967295,z=B+(L<<17&4294967295|L>>>15),L=k+(M^z&(B^M))+U[11]+2304563134&4294967295,k=z+(L<<22&4294967295|L>>>10),L=M+(B^k&(z^B))+U[12]+1804603682&4294967295,M=k+(L<<7&4294967295|L>>>25),L=B+(z^M&(k^z))+U[13]+4254626195&4294967295,B=M+(L<<12&4294967295|L>>>20),L=z+(k^B&(M^k))+U[14]+2792965006&4294967295,z=B+(L<<17&4294967295|L>>>15),L=k+(M^z&(B^M))+U[15]+1236535329&4294967295,k=z+(L<<22&4294967295|L>>>10),L=M+(z^B&(k^z))+U[1]+4129170786&4294967295,M=k+(L<<5&4294967295|L>>>27),L=B+(k^z&(M^k))+U[6]+3225465664&4294967295,B=M+(L<<9&4294967295|L>>>23),L=z+(M^k&(B^M))+U[11]+643717713&4294967295,z=B+(L<<14&4294967295|L>>>18),L=k+(B^M&(z^B))+U[0]+3921069994&4294967295,k=z+(L<<20&4294967295|L>>>12),L=M+(z^B&(k^z))+U[5]+3593408605&4294967295,M=k+(L<<5&4294967295|L>>>27),L=B+(k^z&(M^k))+U[10]+38016083&4294967295,B=M+(L<<9&4294967295|L>>>23),L=z+(M^k&(B^M))+U[15]+3634488961&4294967295,z=B+(L<<14&4294967295|L>>>18),L=k+(B^M&(z^B))+U[4]+3889429448&4294967295,k=z+(L<<20&4294967295|L>>>12),L=M+(z^B&(k^z))+U[9]+568446438&4294967295,M=k+(L<<5&4294967295|L>>>27),L=B+(k^z&(M^k))+U[14]+3275163606&4294967295,B=M+(L<<9&4294967295|L>>>23),L=z+(M^k&(B^M))+U[3]+4107603335&4294967295,z=B+(L<<14&4294967295|L>>>18),L=k+(B^M&(z^B))+U[8]+1163531501&4294967295,k=z+(L<<20&4294967295|L>>>12),L=M+(z^B&(k^z))+U[13]+2850285829&4294967295,M=k+(L<<5&4294967295|L>>>27),L=B+(k^z&(M^k))+U[2]+4243563512&4294967295,B=M+(L<<9&4294967295|L>>>23),L=z+(M^k&(B^M))+U[7]+1735328473&4294967295,z=B+(L<<14&4294967295|L>>>18),L=k+(B^M&(z^B))+U[12]+2368359562&4294967295,k=z+(L<<20&4294967295|L>>>12),L=M+(k^z^B)+U[5]+4294588738&4294967295,M=k+(L<<4&4294967295|L>>>28),L=B+(M^k^z)+U[8]+2272392833&4294967295,B=M+(L<<11&4294967295|L>>>21),L=z+(B^M^k)+U[11]+1839030562&4294967295,z=B+(L<<16&4294967295|L>>>16),L=k+(z^B^M)+U[14]+4259657740&4294967295,k=z+(L<<23&4294967295|L>>>9),L=M+(k^z^B)+U[1]+2763975236&4294967295,M=k+(L<<4&4294967295|L>>>28),L=B+(M^k^z)+U[4]+1272893353&4294967295,B=M+(L<<11&4294967295|L>>>21),L=z+(B^M^k)+U[7]+4139469664&4294967295,z=B+(L<<16&4294967295|L>>>16),L=k+(z^B^M)+U[10]+3200236656&4294967295,k=z+(L<<23&4294967295|L>>>9),L=M+(k^z^B)+U[13]+681279174&4294967295,M=k+(L<<4&4294967295|L>>>28),L=B+(M^k^z)+U[0]+3936430074&4294967295,B=M+(L<<11&4294967295|L>>>21),L=z+(B^M^k)+U[3]+3572445317&4294967295,z=B+(L<<16&4294967295|L>>>16),L=k+(z^B^M)+U[6]+76029189&4294967295,k=z+(L<<23&4294967295|L>>>9),L=M+(k^z^B)+U[9]+3654602809&4294967295,M=k+(L<<4&4294967295|L>>>28),L=B+(M^k^z)+U[12]+3873151461&4294967295,B=M+(L<<11&4294967295|L>>>21),L=z+(B^M^k)+U[15]+530742520&4294967295,z=B+(L<<16&4294967295|L>>>16),L=k+(z^B^M)+U[2]+3299628645&4294967295,k=z+(L<<23&4294967295|L>>>9),L=M+(z^(k|~B))+U[0]+4096336452&4294967295,M=k+(L<<6&4294967295|L>>>26),L=B+(k^(M|~z))+U[7]+1126891415&4294967295,B=M+(L<<10&4294967295|L>>>22),L=z+(M^(B|~k))+U[14]+2878612391&4294967295,z=B+(L<<15&4294967295|L>>>17),L=k+(B^(z|~M))+U[5]+4237533241&4294967295,k=z+(L<<21&4294967295|L>>>11),L=M+(z^(k|~B))+U[12]+1700485571&4294967295,M=k+(L<<6&4294967295|L>>>26),L=B+(k^(M|~z))+U[3]+2399980690&4294967295,B=M+(L<<10&4294967295|L>>>22),L=z+(M^(B|~k))+U[10]+4293915773&4294967295,z=B+(L<<15&4294967295|L>>>17),L=k+(B^(z|~M))+U[1]+2240044497&4294967295,k=z+(L<<21&4294967295|L>>>11),L=M+(z^(k|~B))+U[8]+1873313359&4294967295,M=k+(L<<6&4294967295|L>>>26),L=B+(k^(M|~z))+U[15]+4264355552&4294967295,B=M+(L<<10&4294967295|L>>>22),L=z+(M^(B|~k))+U[6]+2734768916&4294967295,z=B+(L<<15&4294967295|L>>>17),L=k+(B^(z|~M))+U[13]+1309151649&4294967295,k=z+(L<<21&4294967295|L>>>11),L=M+(z^(k|~B))+U[4]+4149444226&4294967295,M=k+(L<<6&4294967295|L>>>26),L=B+(k^(M|~z))+U[11]+3174756917&4294967295,B=M+(L<<10&4294967295|L>>>22),L=z+(M^(B|~k))+U[2]+718787259&4294967295,z=B+(L<<15&4294967295|L>>>17),L=k+(B^(z|~M))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(z+(L<<21&4294967295|L>>>11))&4294967295,D.g[2]=D.g[2]+z&4294967295,D.g[3]=D.g[3]+B&4294967295}i.prototype.v=function(D,M){M===void 0&&(M=D.length);const k=M-this.blockSize,U=this.C;let z=this.h,B=0;for(;B<M;){if(z==0)for(;B<=k;)s(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<M;)if(U[z++]=D.charCodeAt(B++),z==this.blockSize){s(this,U),z=0;break}}else for(;B<M;)if(U[z++]=D[B++],z==this.blockSize){s(this,U),z=0;break}}this.h=z,this.o+=M},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;M=this.o*8;for(var k=D.length-8;k<D.length;++k)D[k]=M&255,M/=256;for(this.v(D),D=Array(16),M=0,k=0;k<4;++k)for(let U=0;U<32;U+=8)D[M++]=this.g[k]>>>U&255;return D};function r(D,M){var k=c;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=M(D)}function l(D,M){this.h=M;const k=[];let U=!0;for(let z=D.length-1;z>=0;z--){const B=D[z]|0;U&&B==M||(k[z]=B,U=!1)}this.g=k}var c={};function f(D){return-128<=D&&D<128?r(D,function(M){return new l([M|0],M<0?-1:0)}):new l([D|0],D<0?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return R(d(-D));const M=[];let k=1;for(let U=0;D>=k;U++)M[U]=D/k|0,k*=4294967296;return new l(M,0)}function p(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return R(p(D.substring(1),M));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(M,8));let U=_;for(let B=0;B<D.length;B+=8){var z=Math.min(8,D.length-B);const L=parseInt(D.substring(B,B+z),M);z<8?(z=d(Math.pow(M,z)),U=U.j(z).add(d(L))):(U=U.j(k),U=U.add(d(L)))}return U}var _=f(0),E=f(1),S=f(16777216);t=l.prototype,t.m=function(){if(x(this))return-R(this).m();let D=0,M=1;for(let k=0;k<this.g.length;k++){const U=this.i(k);D+=(U>=0?U:4294967296+U)*M,M*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(x(this))return"-"+R(this).toString(D);const M=d(Math.pow(D,6));var k=this;let U="";for(;;){const z=H(k,M).g;k=V(k,z.j(M));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(D);if(k=z,A(k))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(let M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function x(D){return D.h==-1}t.l=function(D){return D=V(this,D),x(D)?-1:A(D)?0:1};function R(D){const M=D.g.length,k=[];for(let U=0;U<M;U++)k[U]=~D.g[U];return new l(k,~D.h).add(E)}t.abs=function(){return x(this)?R(this):this},t.add=function(D){const M=Math.max(this.g.length,D.g.length),k=[];let U=0;for(let z=0;z<=M;z++){let B=U+(this.i(z)&65535)+(D.i(z)&65535),L=(B>>>16)+(this.i(z)>>>16)+(D.i(z)>>>16);U=L>>>16,B&=65535,L&=65535,k[z]=L<<16|B}return new l(k,k[k.length-1]&-2147483648?-1:0)};function V(D,M){return D.add(R(M))}t.j=function(D){if(A(this)||A(D))return _;if(x(this))return x(D)?R(this).j(R(D)):R(R(this).j(D));if(x(D))return R(this.j(R(D)));if(this.l(S)<0&&D.l(S)<0)return d(this.m()*D.m());const M=this.g.length+D.g.length,k=[];for(var U=0;U<2*M;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(let z=0;z<D.g.length;z++){const B=this.i(U)>>>16,L=this.i(U)&65535,Ae=D.i(z)>>>16,Se=D.i(z)&65535;k[2*U+2*z]+=L*Se,O(k,2*U+2*z),k[2*U+2*z+1]+=B*Se,O(k,2*U+2*z+1),k[2*U+2*z+1]+=L*Ae,O(k,2*U+2*z+1),k[2*U+2*z+2]+=B*Ae,O(k,2*U+2*z+2)}for(D=0;D<M;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=M;D<2*M;D++)k[D]=0;return new l(k,0)};function O(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function F(D,M){this.g=D,this.h=M}function H(D,M){if(A(M))throw Error("division by zero");if(A(D))return new F(_,_);if(x(D))return M=H(R(D),M),new F(R(M.g),R(M.h));if(x(M))return M=H(D,R(M)),new F(R(M.g),M.h);if(D.g.length>30){if(x(D)||x(M))throw Error("slowDivide_ only works with positive integers.");for(var k=E,U=M;U.l(D)<=0;)k=Y(k),U=Y(U);var z=Z(k,1),B=Z(U,1);for(U=Z(U,2),k=Z(k,2);!A(U);){var L=B.add(U);L.l(D)<=0&&(z=z.add(k),B=L),U=Z(U,1),k=Z(k,1)}return M=V(D,z.j(M)),new F(z,M)}for(z=_;D.l(M)>=0;){for(k=Math.max(1,Math.floor(D.m()/M.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=d(k),L=B.j(M);x(L)||L.l(D)>0;)k-=U,B=d(k),L=B.j(M);A(B)&&(B=E),z=z.add(B),D=V(D,L)}return new F(z,D)}t.B=function(D){return H(this,D).h},t.and=function(D){const M=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<M;U++)k[U]=this.i(U)&D.i(U);return new l(k,this.h&D.h)},t.or=function(D){const M=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<M;U++)k[U]=this.i(U)|D.i(U);return new l(k,this.h|D.h)},t.xor=function(D){const M=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<M;U++)k[U]=this.i(U)^D.i(U);return new l(k,this.h^D.h)};function Y(D){const M=D.g.length+1,k=[];for(let U=0;U<M;U++)k[U]=D.i(U)<<1|D.i(U-1)>>>31;return new l(k,D.h)}function Z(D,M){const k=M>>5;M%=32;const U=D.g.length-k,z=[];for(let B=0;B<U;B++)z[B]=M>0?D.i(B+k)>>>M|D.i(B+k+1)<<32-M:D.i(B+k);return new l(z,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,cD=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=p,Pr=l}).apply(typeof wR<"u"?wR:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fD,mf,dD,gp,C_,hD,pD,mD;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var w=0;w<g.length;++w){var C=g[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(g,w){if(w)e:{var C=i;g=g.split(".");for(var N=0;N<g.length-1;N++){var J=g[N];if(!(J in C))break e;C=C[J]}g=g[g.length-1],N=C[g],w=w(N),w!=N&&w!=null&&e(C,g,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(w){var C=[],N;for(N in w)Object.prototype.hasOwnProperty.call(w,N)&&C.push([N,w[N]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},l=this||self;function c(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function f(g,w,C){return g.call.apply(g.bind,arguments)}function d(g,w,C){return d=f,d.apply(null,arguments)}function p(g,w){var C=Array.prototype.slice.call(arguments,1);return function(){var N=C.slice();return N.push.apply(N,arguments),g.apply(this,N)}}function _(g,w){function C(){}C.prototype=w.prototype,g.Z=w.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(N,J,ee){for(var ce=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ce[Le-2]=arguments[Le];return w.prototype[J].apply(N,ce)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function S(g){const w=g.length;if(w>0){const C=Array(w);for(let N=0;N<w;N++)C[N]=g[N];return C}return[]}function A(g,w){for(let N=1;N<arguments.length;N++){const J=arguments[N];var C=typeof J;if(C=C!="object"?C:J?Array.isArray(J)?"array":C:"null",C=="array"||C=="object"&&typeof J.length=="number"){C=g.length||0;const ee=J.length||0;g.length=C+ee;for(let ce=0;ce<ee;ce++)g[C+ce]=J[ce]}else g.push(J)}}class x{constructor(w,C){this.i=w,this.j=C,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function R(g){l.setTimeout(()=>{throw g},0)}function V(){var g=D;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class O{constructor(){this.h=this.g=null}add(w,C){const N=F.get();N.set(w,C),this.h?this.h.next=N:this.g=N,this.h=N}}var F=new x(()=>new H,g=>g.reset());class H{constructor(){this.next=this.g=this.h=null}set(w,C){this.h=w,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Z=!1,D=new O,M=()=>{const g=Promise.resolve(void 0);Y=()=>{g.then(k)}};function k(){for(var g;g=V();){try{g.h.call(g.g)}catch(C){R(C)}var w=F;w.j(g),w.h<100&&(w.h++,g.next=w.g,w.g=g)}Z=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};l.addEventListener("test",C,w),l.removeEventListener("test",C,w)}catch{}return g})();function L(g){return/^[\s\xa0]*$/.test(g)}function Ae(g,w){z.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,w)}_(Ae,z),Ae.prototype.init=function(g,w){const C=this.type=g.type,N=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget,w||(C=="mouseover"?w=g.fromElement:C=="mouseout"&&(w=g.toElement)),this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),j=0;function le(g,w,C,N,J){this.listener=g,this.proxy=null,this.src=w,this.type=C,this.capture=!!N,this.ha=J,this.key=++j,this.da=this.fa=!1}function he(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Me(g,w,C){for(const N in g)w.call(C,g[N],N,g)}function qe(g,w){for(const C in g)w.call(void 0,g[C],C,g)}function G(g){const w={};for(const C in g)w[C]=g[C];return w}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(g,w){let C,N;for(let J=1;J<arguments.length;J++){N=arguments[J];for(C in N)g[C]=N[C];for(let ee=0;ee<oe.length;ee++)C=oe[ee],Object.prototype.hasOwnProperty.call(N,C)&&(g[C]=N[C])}}function pe(g){this.src=g,this.g={},this.h=0}pe.prototype.add=function(g,w,C,N,J){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const ce=Ne(g,w,N,J);return ce>-1?(w=g[ce],C||(w.fa=!1)):(w=new le(w,this.src,ee,!!N,J),w.fa=C,g.push(w)),w};function Ie(g,w){const C=w.type;if(C in g.g){var N=g.g[C],J=Array.prototype.indexOf.call(N,w,void 0),ee;(ee=J>=0)&&Array.prototype.splice.call(N,J,1),ee&&(he(w),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Ne(g,w,C,N){for(let J=0;J<g.length;++J){const ee=g[J];if(!ee.da&&ee.listener==w&&ee.capture==!!C&&ee.ha==N)return J}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),kt={};function yt(g,w,C,N,J){if(Array.isArray(w)){for(let ee=0;ee<w.length;ee++)yt(g,w[ee],C,N,J);return null}return C=Wr(C),g&&g[Se]?g.J(w,C,c(N)?!!N.capture:!1,J):Qs(g,w,C,!1,N,J)}function Qs(g,w,C,N,J,ee){if(!w)throw Error("Invalid event type");const ce=c(J)?!!J.capture:!!J;let Le=vi(g);if(Le||(g[$e]=Le=new pe(g)),C=Le.add(w,C,N,ce,ee),C.proxy)return C;if(N=No(),C.proxy=N,N.src=g,N.listener=C,g.addEventListener)B||(J=ce),J===void 0&&(J=!1),g.addEventListener(w.toString(),N,J);else if(g.attachEvent)g.attachEvent(ti(w.toString()),N);else if(g.addListener&&g.removeListener)g.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return C}function No(){function g(C){return w.call(g.src,g.listener,C)}const w=Kr;return g}function ko(g,w,C,N,J){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)ko(g,w[ee],C,N,J);else N=c(N)?!!N.capture:!!N,C=Wr(C),g&&g[Se]?(g=g.i,ee=String(w).toString(),ee in g.g&&(w=g.g[ee],C=Ne(w,C,N,J),C>-1&&(he(w[C]),Array.prototype.splice.call(w,C,1),w.length==0&&(delete g.g[ee],g.h--)))):g&&(g=vi(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Ne(w,C,N,J)),(C=g>-1?w[g]:null)&&Vo(C))}function Vo(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Se])Ie(w.i,g);else{var C=g.type,N=g.proxy;w.removeEventListener?w.removeEventListener(C,N,g.capture):w.detachEvent?w.detachEvent(ti(C),N):w.addListener&&w.removeListener&&w.removeListener(N),(C=vi(w))?(Ie(C,g),C.h==0&&(C.src=null,w[$e]=null)):he(g)}}}function ti(g){return g in kt?kt[g]:kt[g]="on"+g}function Kr(g,w){if(g.da)g=!0;else{w=new Ae(w,this);const C=g.listener,N=g.ha||g.src;g.fa&&Vo(g),g=C.call(N,w)}return g}function vi(g){return g=g[$e],g instanceof pe?g:null}var Jr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wr(g){return typeof g=="function"?g:(g[Jr]||(g[Jr]=function(w){return g.handleEvent(w)}),g[Jr])}function It(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}_(It,U),It.prototype[Se]=!0,It.prototype.removeEventListener=function(g,w,C,N){ko(this,g,w,C,N)};function Vt(g,w){var C,N=g.G;if(N)for(C=[];N;N=N.G)C.push(N);if(g=g.M,N=w.type||w,typeof w=="string")w=new z(w,g);else if(w instanceof z)w.target=w.target||g;else{var J=w;w=new z(N,g),de(w,J)}J=!0;let ee,ce;if(C)for(ce=C.length-1;ce>=0;ce--)ee=w.g=C[ce],J=ve(ee,N,!0,w)&&J;if(ee=w.g=g,J=ve(ee,N,!0,w)&&J,J=ve(ee,N,!1,w)&&J,C)for(ce=0;ce<C.length;ce++)ee=w.g=C[ce],J=ve(ee,N,!1,w)&&J}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var g=this.i;for(const w in g.g){const C=g.g[w];for(let N=0;N<C.length;N++)he(C[N]);delete g.g[w],g.h--}}this.G=null},It.prototype.J=function(g,w,C,N){return this.i.add(String(g),w,!1,C,N)},It.prototype.K=function(g,w,C,N){return this.i.add(String(g),w,!0,C,N)};function ve(g,w,C,N){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();let J=!0;for(let ee=0;ee<w.length;++ee){const ce=w[ee];if(ce&&!ce.da&&ce.capture==C){const Le=ce.listener,Ot=ce.ha||ce.src;ce.fa&&Ie(g.i,ce),J=Le.call(Ot,N)!==!1&&J}}return J&&!N.defaultPrevented}function Be(g,w){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(g,w||0)}function et(g){g.g=Be(()=>{g.g=null,g.i&&(g.i=!1,et(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class Fe extends U{constructor(w,C){super(),this.m=w,this.l=C,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:et(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(g){U.call(this),this.h=g,this.g={}}_(Gt,U);var _i=[];function Bn(g){Me(g.g,function(w,C){this.g.hasOwnProperty(C)&&Vo(w)},g),g.g={}}Gt.prototype.N=function(){Gt.Z.N.call(this),Bn(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=l.JSON.stringify,Qr=l.JSON.parse,ll=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Lo(){}function hd(){}var Fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hn(){z.call(this,"d")}_(hn,z);function Ti(){z.call(this,"c")}_(Ti,z);var Lt={},pd=null;function ul(){return pd=pd||new It}Lt.Ia="serverreachability";function md(g){z.call(this,Lt.Ia,g)}_(md,z);function ds(g){const w=ul();Vt(w,new md(w))}Lt.STAT_EVENT="statevent";function Xr(g,w){z.call(this,Lt.STAT_EVENT,g),this.stat=w}_(Xr,z);function Ht(g){const w=ul();Vt(w,new Xr(w,g))}Lt.Ja="timingevent";function hs(g,w){z.call(this,Lt.Ja,g),this.size=w}_(hs,z);function ps(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},w)}function qi(){this.g=!0}qi.prototype.ua=function(){this.g=!1};function zm(g,w,C,N,J,ee){g.info(function(){if(g.g)if(ee){var ce="",Le=ee.split("&");for(let ot=0;ot<Le.length;ot++){var Ot=Le[ot].split("=");if(Ot.length>1){const bt=Ot[0];Ot=Ot[1];const bi=bt.split("_");ce=bi.length>=2&&bi[1]=="type"?ce+(bt+"="+Ot+"&"):ce+(bt+"=redacted&")}}}else ce=null;else ce=ee;return"XMLHTTP REQ ("+N+") [attempt "+J+"]: "+w+`
`+C+`
`+ce})}function gd(g,w,C,N,J,ee,ce){g.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+J+"]: "+w+`
`+C+`
`+ee+" "+ce})}function ms(g,w,C,N){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+Bm(g,C)+(N?" "+N:"")})}function jr(g,w){g.info(function(){return"TIMEOUT: "+w})}qi.prototype.info=function(){};function Bm(g,w){if(!g.g)return w;if(!w)return null;try{const ee=JSON.parse(w);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var C=ee[g];if(!(C.length<2)){var N=C[1];if(Array.isArray(N)&&!(N.length<1)){var J=N[0];if(J!="noop"&&J!="stop"&&J!="close")for(let ce=1;ce<N.length;ce++)N[ce]=""}}}}return fs(ee)}catch{return w}}var Zr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oc;function ea(){}_(ea,Lo),ea.prototype.g=function(){return new XMLHttpRequest},oc=new ea;function Xs(g){return encodeURIComponent(String(g))}function yd(g){var w=1;g=g.split(":");const C=[];for(;w>0&&g.length;)C.push(g.shift()),w--;return g.length&&C.push(g.join(":")),C}function Gi(g,w,C,N){this.j=g,this.i=w,this.l=C,this.S=N||1,this.V=new Gt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var $t={},ln={};function gs(g,w,C){g.M=1,g.A=ta(Kt(w)),g.u=C,g.R=!0,cl(g,null)}function cl(g,w){g.F=Date.now(),ys(g),g.B=Kt(g.A);var C=g.B,N=g.S;Array.isArray(N)||(N=[String(N)]),pl(C.i,"t",N),g.C=0,C=g.j.L,g.h=new Hi,g.g=Dd(g.j,C?w:null,!g.u),g.P>0&&(g.O=new Fe(d(g.Y,g,g.g),g.P)),w=g.V,C=g.g,N=g.ba;var J="readystatechange";Array.isArray(J)||(J&&(_i[0]=J.toString()),J=_i);for(let ee=0;ee<J.length;ee++){const ce=yt(C,J[ee],N||w.handleEvent,!1,w.h||w);if(!ce)break;w.g[ce.key]=ce}w=g.J?G(g.J):{},g.u?(g.v||(g.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,w)):(g.v="GET",g.g.ea(g.B,g.v,null,w)),ds(),zm(g.i,g.v,g.B,g.l,g.S,g.u)}Gi.prototype.ba=function(g){g=g.target;const w=this.O;w&&Ki(g)==3?w.j():this.Y(g)},Gi.prototype.Y=function(g){try{if(g==this.g)e:{const Le=Ki(this.g),Ot=this.g.ya(),ot=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||Le!=4||Ot==7||(Ot==8||ot<=0?ds(3):ds(2)),vs(this);var w=this.g.ca();this.X=w;var C=Fm(this);if(this.o=w==200,gd(this.i,this.v,this.B,this.l,this.S,Le,w),this.o){if(this.U&&!this.L){t:{if(this.g){var N,J=this.g;if((N=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(N)){var ee=N;break t}}ee=null}if(g=ee)ms(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_s(this,g);else{this.o=!1,this.m=3,Ht(12),ni(this),Ei(this);break e}}if(this.R){g=!0;let bt;for(;!this.K&&this.C<C.length;)if(bt=_d(this,C),bt==ln){Le==4&&(this.m=4,Ht(14),g=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==$t){this.m=4,Ht(15),ms(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else ms(this.i,this.l,bt,null),_s(this,bt);if(vd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||C.length!=0||this.h.h||(this.m=1,Ht(16),g=!1),this.o=this.o&&g,!g)ms(this.i,this.l,C,"[Invalid Chunked Response]"),ni(this),Ei(this);else if(C.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Tc(ce),ce.P=!0,Ht(11))}}else ms(this.i,this.l,C,null),_s(this,C);Le==4&&ni(this),this.o&&!this.K&&(Le==4?Rd(this.j,this):(this.o=!1,ys(this)))}else Zs(this.g),w==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),ni(this),Ei(this)}}}catch{}finally{}};function Fm(g){if(!vd(g))return g.g.la();const w=pn(g.g);if(w==="")return"";let C="";const N=w.length,J=Ki(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return ni(g),Ei(g),"";g.h.i=new l.TextDecoder}for(let ee=0;ee<N;ee++)g.h.h=!0,C+=g.h.i.decode(w[ee],{stream:!(J&&ee==N-1)});return w.length=0,g.h.g+=C,g.C=0,g.h.g}function vd(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function _d(g,w){var C=g.C,N=w.indexOf(`
`,C);return N==-1?ln:(C=Number(w.substring(C,N)),isNaN(C)?$t:(N+=1,N+C>w.length?ln:(w=w.slice(N,N+C),g.C=N+C,w)))}Gi.prototype.cancel=function(){this.K=!0,ni(this)};function ys(g){g.T=Date.now()+g.H,fl(g,g.H)}function fl(g,w){if(g.D!=null)throw Error("WatchDog timer not null");g.D=ps(d(g.aa,g),w)}function vs(g){g.D&&(l.clearTimeout(g.D),g.D=null)}Gi.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(jr(this.i,this.B),this.M!=2&&(ds(),Ht(17)),ni(this),this.m=2,Ei(this)):fl(this,this.T-g)};function Ei(g){g.j.I==0||g.K||Rd(g.j,g)}function ni(g){vs(g);var w=g.O;w&&typeof w.dispose=="function"&&w.dispose(),g.O=null,Bn(g.V),g.g&&(w=g.g,g.g=null,w.abort(),w.dispose())}function _s(g,w){try{var C=g.j;if(C.I!=0&&(C.g==g||Es(C.h,g))){if(!g.L&&Es(C.h,g)&&C.I==3){try{var N=C.Ba.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var J=N;if(J[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)_l(C),Ho(C);else break e;la(C),Ht(18)}}else C.xa=J[1],0<C.xa-C.K&&J[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=ps(d(C.Va,C),6e3));Ts(C.h)<=1&&C.ta&&(C.ta=void 0)}else xs(C,11)}else if((g.L||C.g==g)&&_l(C),!L(w))for(J=C.Ba.g.parse(w),w=0;w<J.length;w++){let ot=J[w];const bt=ot[0];if(!(bt<=C.K))if(C.K=bt,ot=ot[1],C.I==2)if(ot[0]=="c"){C.M=ot[1],C.ba=ot[2];const bi=ot[3];bi!=null&&(C.ka=bi,C.j.info("VER="+C.ka));const Rs=ot[4];Rs!=null&&(C.za=Rs,C.j.info("SVER="+C.za));const Ji=ot[5];Ji!=null&&typeof Ji=="number"&&Ji>0&&(N=1.5*Ji,C.O=N,C.j.info("backChannelRequestTimeoutMs_="+N)),N=C;const Wi=g.g;if(Wi){const ua=Wi.g?Wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ua){var ee=N.h;ee.g||ua.indexOf("spdy")==-1&&ua.indexOf("quic")==-1&&ua.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(lc(ee,ee.h),ee.h=null))}if(N.G){const Tl=Wi.g?Wi.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(N.wa=Tl,lt(N.J,N.G,Tl))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),N=C;var ce=g;if(N.na=Pd(N,N.L?N.ba:null,N.W),ce.L){uc(N.h,ce);var Le=ce,Ot=N.O;Ot&&(Le.H=Ot),Le.D&&(vs(Le),ys(Le)),N.g=ce}else Ad(N);C.i.length>0&&As(C)}else ot[0]!="stop"&&ot[0]!="close"||xs(C,7);else C.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?xs(C,7):vc(C):ot[0]!="noop"&&C.l&&C.l.qa(ot),C.A=0)}}ds(4)}catch{}}var Yt=class{constructor(g,w){this.g=g,this.map=w}};function rc(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ac(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ts(g){return g.h?1:g.g?g.g.size:0}function Es(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function lc(g,w){g.g?g.g.add(w):g.h=w}function uc(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}rc.prototype.cancel=function(){if(this.i=cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function cc(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const C of g.g.values())w=w.concat(C.G);return w}return S(g.i)}var Td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dl(g,w){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const N=g[C].indexOf("=");let J,ee=null;N>=0?(J=g[C].substring(0,N),ee=g[C].substring(N+1)):J=g[C],w(J,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function ii(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;g instanceof ii?(this.l=g.l,un(this,g.j),this.o=g.o,this.g=g.g,Oo(this,g.u),this.h=g.h,fc(this,bd(g.i)),this.m=g.m):g&&(w=String(g).match(Td))?(this.l=!1,un(this,w[1]||"",!0),this.o=ws(w[2]||""),this.g=ws(w[3]||"",!0),Oo(this,w[4]),this.h=ws(w[5]||"",!0),fc(this,w[6]||"",!0),this.m=ws(w[7]||"")):(this.l=!1,this.i=new zo(null,this.l))}ii.prototype.toString=function(){const g=[];var w=this.j;w&&g.push(na(w,hl,!0),":");var C=this.g;return(C||w=="file")&&(g.push("//"),(w=this.o)&&g.push(na(w,hl,!0),"@"),g.push(Xs(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(na(C,C.charAt(0)=="/"?dc:Ed,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",na(C,wd)),g.join("")},ii.prototype.resolve=function(g){const w=Kt(this);let C=!!g.j;C?un(w,g.j):C=!!g.o,C?w.o=g.o:C=!!g.g,C?w.g=g.g:C=g.u!=null;var N=g.h;if(C)Oo(w,g.u);else if(C=!!g.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var J=w.h.lastIndexOf("/");J!=-1&&(N=w.h.slice(0,J+1)+N)}if(J=N,J==".."||J==".")N="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){N=J.lastIndexOf("/",0)==0,J=J.split("/");const ee=[];for(let ce=0;ce<J.length;){const Le=J[ce++];Le=="."?N&&ce==J.length&&ee.push(""):Le==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),N&&ce==J.length&&ee.push("")):(ee.push(Le),N=!0)}N=ee.join("/")}else N=J}return C?w.h=N:C=g.i.toString()!=="",C?fc(w,bd(g.i)):C=!!g.m,C&&(w.m=g.m),w};function Kt(g){return new ii(g)}function un(g,w,C){g.j=C?ws(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function Oo(g,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);g.u=w}else g.u=null}function fc(g,w,C){w instanceof zo?(g.i=w,ml(g.i,g.l)):(C||(w=na(w,Uo)),g.i=new zo(w,g.l))}function lt(g,w,C){g.i.set(w,C)}function ta(g){return lt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ws(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function na(g,w,C){return typeof g=="string"?(g=encodeURI(g).replace(w,$n),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function $n(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var hl=/[#\/\?@]/g,Ed=/[#\?:]/g,dc=/[#\?]/g,Uo=/[#\?@]/g,wd=/#/g;function zo(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Yn(g){g.g||(g.g=new Map,g.h=0,g.i&&dl(g.i,function(w,C){g.add(decodeURIComponent(w.replace(/\+/g," ")),C)}))}t=zo.prototype,t.add=function(g,w){Yn(this),this.i=null,g=Bo(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(w),this.h+=1,this};function Sd(g,w){Yn(g),w=Bo(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function hc(g,w){return Yn(g),w=Bo(g,w),g.g.has(w)}t.forEach=function(g,w){Yn(this),this.g.forEach(function(C,N){C.forEach(function(J){g.call(w,J,N,this)},this)},this)};function pc(g,w){Yn(g);let C=[];if(typeof w=="string")hc(g,w)&&(C=C.concat(g.g.get(Bo(g,w))));else for(g=Array.from(g.g.values()),w=0;w<g.length;w++)C=C.concat(g[w]);return C}t.set=function(g,w){return Yn(this),this.i=null,g=Bo(this,g),hc(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=pc(this,g),g.length>0?String(g[0]):w):w};function pl(g,w,C){Sd(g,w),C.length>0&&(g.i=null,g.g.set(Bo(g,w),S(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(let N=0;N<w.length;N++){var C=w[N];const J=Xs(C);C=pc(this,C);for(let ee=0;ee<C.length;ee++){let ce=J;C[ee]!==""&&(ce+="="+Xs(C[ee])),g.push(ce)}}return this.i=g.join("&")};function bd(g){const w=new zo;return w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),w}function Bo(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function ml(g,w){w&&!g.j&&(Yn(g),g.i=null,g.g.forEach(function(C,N){const J=N.toLowerCase();N!=J&&(Sd(this,N),pl(this,J,C))},g)),g.j=w}function $i(g,w){const C=new qi;if(l.Image){const N=new Image;N.onload=p(wi,C,"TestLoadImage: loaded",!0,w,N),N.onerror=p(wi,C,"TestLoadImage: error",!1,w,N),N.onabort=p(wi,C,"TestLoadImage: abort",!1,w,N),N.ontimeout=p(wi,C,"TestLoadImage: timeout",!1,w,N),l.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=g}else w(!1)}function mc(g,w){const C=new qi,N=new AbortController,J=setTimeout(()=>{N.abort(),wi(C,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:N.signal}).then(ee=>{clearTimeout(J),ee.ok?wi(C,"TestPingServer: ok",!0,w):wi(C,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(J),wi(C,"TestPingServer: error",!1,w)})}function wi(g,w,C,N,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),N(C)}catch{}}function Fo(){this.g=new ll}function Ss(g){this.i=g.Sb||null,this.h=g.ab||!1}_(Ss,Lo),Ss.prototype.g=function(){return new ia(this.i,this.h)};function ia(g,w){It.call(this),this.H=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(ia,It),t=ia.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=w,this.readyState=1,Yi(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(w.body=g),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qo(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gl(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function gl(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?qo(this):Yi(this),this.readyState==3&&gl(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,qo(this))},t.Na=function(g){this.g&&(this.response=g,qo(this))},t.ga=function(){this.g&&qo(this)};function qo(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Yi(g)}t.setRequestHeader=function(g,w){this.A.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var C=w.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=w.next();return g.join(`\r
`)};function Yi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Si(g){let w="";return Me(g,function(C,N){w+=N,w+=":",w+=C,w+=`\r
`}),w}function sa(g,w,C){e:{for(N in C){var N=!1;break e}N=!0}N||(C=Si(C),typeof g=="string"?C!=null&&Xs(C):lt(g,w,C))}function ft(g){It.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ft,It);var bs=/^https?$/i,gc=["POST","PUT"];t=ft.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,w,C,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oc.g(),this.g.onreadystatechange=E(d(this.Ca,this));try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(ee){oa(this,ee);return}if(g=C||"",C=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var J in N)C.set(J,N[J]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())C.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(C.keys()).find(ee=>ee.toLowerCase()=="content-type"),J=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(gc,w,void 0)>=0)||N||J||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ce]of C)this.g.setRequestHeader(ee,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){oa(this,ee)}};function oa(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.o=5,yc(g),js(g)}function yc(g){g.A||(g.A=!0,Vt(g,"complete"),Vt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Vt(this,"complete"),Vt(this,"abort"),js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ra(this):this.Xa())},t.Xa=function(){ra(this)};function ra(g){if(g.h&&typeof r<"u"){if(g.v&&Ki(g)==4)setTimeout(g.Ca.bind(g),0);else if(Vt(g,"readystatechange"),Ki(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var C;if(!(C=w)){var N;if(N=ee===0){let ce=String(g.D).match(Td)[1]||null;!ce&&l.self&&l.self.location&&(ce=l.self.location.protocol.slice(0,-1)),N=!bs.test(ce?ce.toLowerCase():"")}C=N}if(C)Vt(g,"complete"),Vt(g,"success");else{g.o=6;try{var J=Ki(g)>2?g.g.statusText:""}catch{J=""}g.l=J+" ["+g.ca()+"]",yc(g)}}finally{js(g)}}}}function js(g,w){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,w||Vt(g,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ki(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Ki(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),Qr(w)}};function pn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Zs(g){const w={};g=(g.g&&Ki(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<g.length;N++){if(L(g[N]))continue;var C=yd(g[N]);const J=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ee=w[J]||[];w[J]=ee,ee.push(C)}qe(w,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(g,w,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||w}function Go(g){this.za=0,this.i=[],this.j=new qi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cs("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cs("baseRetryDelayMs",5e3,g),this.Za=Cs("retryDelaySeedMs",1e4,g),this.Ta=Cs("forwardChannelMaxRetries",2,g),this.va=Cs("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new rc(g&&g.concurrentRequestLimit),this.Ba=new Fo,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Go.prototype,t.ka=8,t.I=1,t.connect=function(g,w,C,N){Ht(0),this.W=g,this.H=w||{},C&&N!==void 0&&(this.H.OSID=C,this.H.OAID=N),this.F=this.X,this.J=Pd(this,null,this.W),As(this)};function vc(g){if(yl(g),g.I==3){var w=g.V++,C=Kt(g.J);if(lt(C,"SID",g.M),lt(C,"RID",w),lt(C,"TYPE","terminate"),aa(g,C),w=new Gi(g,g.j,w),w.M=2,w.A=ta(Kt(C)),C=!1,l.navigator&&l.navigator.sendBeacon)try{C=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!C&&l.Image&&(new Image().src=w.A,C=!0),C||(w.g=Dd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),ys(w)}Md(g)}function Ho(g){g.g&&(Tc(g),g.g.cancel(),g.g=null)}function yl(g){Ho(g),g.v&&(l.clearTimeout(g.v),g.v=null),_l(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function As(g){if(!ac(g.h)&&!g.m){g.m=!0;var w=g.Ea;Y||M(),Z||(Y(),Z=!0),D.add(w,g),g.D=0}}function vl(g,w){return Ts(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=w.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=ps(d(g.Ea,g,w),Id(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const J=new Gi(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=G(ee),de(ee,this.U)):ee=this.U),this.u!==null||this.R||(J.J=ee,ee=null),this.S)e:{for(var w=0,C=0;C<this.i.length;C++){t:{var N=this.i[C];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,w>4096){w=C;break e}if(w===4096||C===this.i.length-1){w=C+1;break e}}w=1e3}else w=1e3;w=Cd(this,J,w),C=Kt(this.J),lt(C,"RID",g),lt(C,"CVER",22),this.G&&lt(C,"X-HTTP-Session-Id",this.G),aa(this,C),ee&&(this.R?w="headers="+Xs(Si(ee))+"&"+w:this.u&&sa(C,this.u,ee)),lc(this.h,J),this.Ra&&lt(C,"TYPE","init"),this.S?(lt(C,"$req",w),lt(C,"SID","null"),J.U=!0,gs(J,C,null)):gs(J,C,w),this.I=2}}else this.I==3&&(g?_c(this,g):this.i.length==0||ac(this.h)||_c(this))};function _c(g,w){var C;w?C=w.l:C=g.V++;const N=Kt(g.J);lt(N,"SID",g.M),lt(N,"RID",C),lt(N,"AID",g.K),aa(g,N),g.u&&g.o&&sa(N,g.u,g.o),C=new Gi(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),w&&(g.i=w.G.concat(g.i)),w=Cd(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),lc(g.h,C),gs(C,N,w)}function aa(g,w){g.H&&Me(g.H,function(C,N){lt(w,N,C)}),g.l&&Me({},function(C,N){lt(w,N,C)})}function Cd(g,w,C){C=Math.min(g.i.length,C);const N=g.l?d(g.l.Ka,g.l,g):null;e:{var J=g.i;let Le=-1;for(;;){const Ot=["count="+C];Le==-1?C>0?(Le=J[0].g,Ot.push("ofs="+Le)):Le=0:Ot.push("ofs="+Le);let ot=!0;for(let bt=0;bt<C;bt++){var ee=J[bt].g;const bi=J[bt].map;if(ee-=Le,ee<0)Le=Math.max(0,J[bt].g-100),ot=!1;else try{ee="req"+ee+"_"||"";try{var ce=bi instanceof Map?bi:Object.entries(bi);for(const[Rs,Ji]of ce){let Wi=Ji;c(Ji)&&(Wi=fs(Ji)),Ot.push(ee+Rs+"="+encodeURIComponent(Wi))}}catch(Rs){throw Ot.push(ee+"type="+encodeURIComponent("_badmap")),Rs}}catch{N&&N(bi)}}if(ot){ce=Ot.join("&");break e}}ce=void 0}return g=g.i.splice(0,C),w.G=g,ce}function Ad(g){if(!g.g&&!g.v){g.Y=1;var w=g.Da;Y||M(),Z||(Y(),Z=!0),D.add(w,g),g.A=0}}function la(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=ps(d(g.Da,g),Id(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,xd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=ps(d(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Ho(this),xd(this))};function Tc(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function xd(g){g.g=new Gi(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var w=Kt(g.na);lt(w,"RID","rpc"),lt(w,"SID",g.M),lt(w,"AID",g.K),lt(w,"CI",g.F?"0":"1"),!g.F&&g.ia&&lt(w,"TO",g.ia),lt(w,"TYPE","xmlhttp"),aa(g,w),g.u&&g.o&&sa(w,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=ta(Kt(w)),C.u=null,C.R=!0,cl(C,g)}t.Va=function(){this.C!=null&&(this.C=null,Ho(this),la(this),Ht(19))};function _l(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function Rd(g,w){var C=null;if(g.g==w){_l(g),Tc(g),g.g=null;var N=2}else if(Es(g.h,w))C=w.G,uc(g.h,w),N=1;else return;if(g.I!=0){if(w.o)if(N==1){C=w.u?w.u.length:0,w=Date.now()-w.F;var J=g.D;N=ul(),Vt(N,new hs(N,C)),As(g)}else Ad(g);else if(J=w.m,J==3||J==0&&w.X>0||!(N==1&&vl(g,w)||N==2&&la(g)))switch(C&&C.length>0&&(w=g.h,w.i=w.i.concat(C)),J){case 1:xs(g,5);break;case 4:xs(g,10);break;case 3:xs(g,6);break;default:xs(g,2)}}}function Id(g,w){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*w}function xs(g,w){if(g.j.info("Error code "+w),w==2){var C=d(g.bb,g),N=g.Ua;const J=!N;N=new ii(N||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||un(N,"https"),ta(N),J?$i(N.toString(),C):mc(N.toString(),C)}else Ht(2);g.I=0,g.l&&g.l.pa(w),Md(g),yl(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Md(g){if(g.I=0,g.ja=[],g.l){const w=cc(g.h);(w.length!=0||g.i.length!=0)&&(A(g.ja,w),A(g.ja,g.i),g.h.i.length=0,S(g.i),g.i.length=0),g.l.oa()}}function Pd(g,w,C){var N=C instanceof ii?Kt(C):new ii(C);if(N.g!="")w&&(N.g=w+"."+N.g),Oo(N,N.u);else{var J=l.location;N=J.protocol,w=w?w+"."+J.hostname:J.hostname,J=+J.port;const ee=new ii(null);N&&un(ee,N),w&&(ee.g=w),J&&Oo(ee,J),C&&(ee.h=C),N=ee}return C=g.G,w=g.wa,C&&w&&lt(N,C,w),lt(N,"VER",g.ka),aa(g,N),N}function Dd(g,w,C){if(w&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Aa&&!g.ma?new ft(new Ss({ab:C})):new ft(g.ma),w.Fa(g.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nd(){}t=Nd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $o(){}$o.prototype.g=function(g,w){return new Fn(g,w)};function Fn(g,w){It.call(this),this.g=new Go(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(g?g["X-WebChannel-Client-Profile"]=w.sa:g={"X-WebChannel-Client-Profile":w.sa}),this.g.U=g,(g=w&&w.Qb)&&!L(g)&&(this.g.u=g),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.G=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new eo(this)}_(Fn,It),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){vc(this.g)},Fn.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=fs(g),g=C);w.i.push(new Yt(w.Ya++,g)),w.I==3&&As(w)},Fn.prototype.N=function(){this.g.l=null,delete this.j,vc(this.g),delete this.g,Fn.Z.N.call(this)};function kd(g){hn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const C in w){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}_(kd,hn);function Vd(){Ti.call(this),this.status=1}_(Vd,Ti);function eo(g){this.g=g}_(eo,Nd),eo.prototype.ra=function(){Vt(this.g,"a")},eo.prototype.qa=function(g){Vt(this.g,new kd(g))},eo.prototype.pa=function(g){Vt(this.g,new Vd)},eo.prototype.oa=function(){Vt(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,mD=function(){return new $o},pD=function(){return ul()},hD=Lt,C_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,gp=Zr,sc.COMPLETE="complete",dD=sc,hd.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",It.prototype.listen=It.prototype.J,mf=hd,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,fD=ft}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});const SR="@firebase/firestore",bR="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new H0("@firebase/firestore");function tu(){return tl.logLevel}function me(t,...e){if(tl.logLevel<=Je.DEBUG){const n=e.map(iT);tl.debug(`Firestore (${ec}): ${t}`,...n)}}function Io(t,...e){if(tl.logLevel<=Je.ERROR){const n=e.map(iT);tl.error(`Firestore (${ec}): ${t}`,...n)}}function zu(t,...e){if(tl.logLevel<=Je.WARN){const n=e.map(iT);tl.warn(`Firestore (${ec}): ${t}`,...n)}}function iT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,gD(t,i,n)}function gD(t,e,n){let i=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Io(i),new Error(i)}function at(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||gD(e,s,i)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Do{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xn.UNAUTHENTICATED)))}shutdown(){}}class _W{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TW{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let r=new $a;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new $a,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=r;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},c=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new $a)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string",31837,{l:i}),new yD(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class EW{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wW{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new EW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class CR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const i=r=>{r.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const l=r.token!==this.m;return this.m=r.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>i(r)))};const s=r=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new CR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=bW(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function Qe(t,e){return t<e?-1:t>e?1:0}function A_(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return Rv(s)===Rv(r)?Qe(s,r):Rv(s)?1:-1}return Qe(t.length,e.length)}const CW=55296,AW=57343;function Rv(t){const e=t.charCodeAt(0);return e>=CW&&e<=AW}function Bu(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="__name__";class ks{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Re(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=ks.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return Qe(e.length,n.length)}static compareSegments(e,n){const i=ks.isNumericId(e),s=ks.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?ks.extractNumericId(e).compare(ks.extractNumericId(n)):A_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}}class At extends ks{construct(e,n,i){return new At(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new At(n)}static emptyPath(){return new At([])}}const xW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends ks{construct(e,n,i){return new wn(e,n,i)}static isValidIdentifier(e){return xW.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AR}static keyField(){return new wn([AR])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(r(),s++)}if(r(),l)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(n)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(At.fromString(e))}static fromName(e){return new be(At.fromString(e).popFirst(5))}static empty(){return new be(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t,e,n){if(!n)throw new Te(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IW(t,e,n,i){if(e===!0&&i===!0)throw new Te(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xR(t){if(!be.isDocumentKey(t))throw new Te(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function oT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oT(t);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function ld(t,e){if(!vD(t))throw new Te(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&l!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new Te(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=-62135596800,IR=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*IR);return new wt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<RR)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IR}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ld(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:tn("string",wt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new wt(0,0))}static max(){return new De(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-1;function MW(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=De.fromTimestamp(i===1e9?new wt(n+1,0):new wt(n,i));return new Or(s,be.empty(),e)}function PW(t){return new Or(t.readTime,t.key,qf)}class Or{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Or(De.min(),be.empty(),qf)}static max(){return new Or(De.max(),be.empty(),qf)}}function DW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==NW)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,i)=>{n(e)}))}static reject(e){return new ae(((n,i)=>{i(e)}))}static waitFor(e){return new ae(((n,i)=>{let s=0,r=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++r,l&&r===s&&n()}),(f=>i(f)))})),l=!0,r===s&&n()}))}static or(e){let n=ae.resolve(!1);for(const i of e)n=n.next((s=>s?ae.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,r)=>{i.push(n.call(this,s,r))})),this.waitFor(i)}static mapArray(e,n){return new ae(((i,s)=>{const r=e.length,l=new Array(r);let c=0;for(let f=0;f<r;f++){const d=f;n(e[d]).next((p=>{l[d]=p,++c,c===r&&i(l)}),(p=>s(p)))}}))}static doWhile(e,n){return new ae(((i,s)=>{const r=()=>{e()===!0?n().next((()=>{r()}),s):i()};r()}))}}function VW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=-1;function Sm(t){return t==null}function Yp(t){return t===0&&1/t==-1/0}function LW(t){return typeof t=="number"&&Number.isInteger(t)&&!Yp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="";function OW(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MR(e)),e=UW(t.get(n),e);return MR(e)}function UW(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case _D:n+="";break;default:n+=r}}return n}function MR(t){return t+_D+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??En.RED,this.left=s??En.EMPTY,this.right=r??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new En(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DR(this.data.getIterator())}getIteratorFrom(e){return new DR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class DR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new hi([])}unionWith(e){let n=new an(wn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ED("Invalid base64 string: "+r):r}})(e);return new Sn(n)}static fromUint8Array(e){const n=(function(s){let r="";for(let l=0;l<s.length;++l)r+=String.fromCharCode(s[l]);return r})(e);return new Sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const zW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(at(!!t,39018),typeof t=="string"){let e=0;const n=zW.exec(t);if(at(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="server_timestamp",SD="__type__",bD="__previous_value__",CD="__local_write_time__";function aT(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[SD])==null?void 0:i.stringValue)===wD}function bm(t){const e=t.mapValue.fields[bD];return aT(e)?bm(e):e}function Gf(t){const e=Ur(t.mapValue.fields[CD].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,n,i,s,r,l,c,f,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const Kp="(default)";class Hf{constructor(e,n){this.projectId=e,this.database=n||Kp}static empty(){return new Hf("","")}get isDefaultDatabase(){return this.database===Kp}isEqual(e){return e instanceof Hf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="__type__",FW="__max__",tp={mapValue:{}},xD="__vector__",Jp="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?aT(t)?4:GW(t)?9007199254740991:qW(t)?10:11:Re(28295,{value:t})}function Ys(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gf(t).isEqual(Gf(e));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const l=Ur(s.timestampValue),c=Ur(r.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,r){return zr(s.bytesValue).isEqual(zr(r.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,r){return Ft(s.geoPointValue.latitude)===Ft(r.geoPointValue.latitude)&&Ft(s.geoPointValue.longitude)===Ft(r.geoPointValue.longitude)})(t,e);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return Ft(s.integerValue)===Ft(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const l=Ft(s.doubleValue),c=Ft(r.doubleValue);return l===c?Yp(l)===Yp(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Bu(t.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return(function(s,r){const l=s.mapValue.fields||{},c=r.mapValue.fields||{};if(PR(l)!==PR(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Ys(l[f],c[f])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function $f(t,e){return(t.values||[]).find((n=>Ys(n,e)))!==void 0}function Fu(t,e){if(t===e)return 0;const n=Br(t),i=Br(e);if(n!==i)return Qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return(function(r,l){const c=Ft(r.integerValue||r.doubleValue),f=Ft(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(t,e);case 3:return NR(t.timestampValue,e.timestampValue);case 4:return NR(Gf(t),Gf(e));case 5:return A_(t.stringValue,e.stringValue);case 6:return(function(r,l){const c=zr(r),f=zr(l);return c.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(r,l){const c=r.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const p=Qe(c[d],f[d]);if(p!==0)return p}return Qe(c.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(r,l){const c=Qe(Ft(r.latitude),Ft(l.latitude));return c!==0?c:Qe(Ft(r.longitude),Ft(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return kR(t.arrayValue,e.arrayValue);case 10:return(function(r,l){var E,S,A,x;const c=r.fields||{},f=l.fields||{},d=(E=c[Jp])==null?void 0:E.arrayValue,p=(S=f[Jp])==null?void 0:S.arrayValue,_=Qe(((A=d==null?void 0:d.values)==null?void 0:A.length)||0,((x=p==null?void 0:p.values)==null?void 0:x.length)||0);return _!==0?_:kR(d,p)})(t.mapValue,e.mapValue);case 11:return(function(r,l){if(r===tp.mapValue&&l===tp.mapValue)return 0;if(r===tp.mapValue)return 1;if(l===tp.mapValue)return-1;const c=r.fields||{},f=Object.keys(c),d=l.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let _=0;_<f.length&&_<p.length;++_){const E=A_(f[_],p[_]);if(E!==0)return E;const S=Fu(c[f[_]],d[p[_]]);if(S!==0)return S}return Qe(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function NR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const n=Ur(t),i=Ur(e),s=Qe(n.seconds,i.seconds);return s!==0?s:Qe(n.nanos,i.nanos)}function kR(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Fu(n[s],i[s]);if(r)return r}return Qe(n.length,i.length)}function qu(t){return x_(t)}function x_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Ur(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return zr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return be.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=x_(r);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const l of i)r?r=!1:s+=",",s+=`${l}:${x_(n.fields[l])}`;return s+"}"})(t.mapValue):Re(61005,{value:t})}function yp(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bm(t);return e?16+yp(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+yp(r)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return $r(i.fields,((r,l)=>{s+=r.length+yp(l)})),s})(t.mapValue);default:throw Re(13486,{value:t})}}function R_(t){return!!t&&"integerValue"in t}function lT(t){return!!t&&"arrayValue"in t}function VR(t){return!!t&&"nullValue"in t}function LR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vp(t){return!!t&&"mapValue"in t}function qW(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[AD])==null?void 0:i.stringValue)===xD}function xf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $r(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=xf(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xf(t.arrayValue.values[n]);return e}return{...t}}function GW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===FW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(n)}setAll(e){let n=wn.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=xf(l):s.push(c.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());vp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];vp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){$r(n,((s,r)=>e[s]=r));for(const s of i)delete e[s]}clone(){return new ei(xf(this.value))}}function RD(t){const e=[];return $r(t.fields,((n,i)=>{const s=new wn([n]);if(vp(i)){const r=RD(i.mapValue).fields;if(r.length===0)e.push(s);else for(const l of r)e.push(s.child(l))}else e.push(s)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,i,s,r,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=l,this.documentState=c}static newInvalidDocument(e){return new In(e,0,De.min(),De.min(),De.min(),ei.empty(),0)}static newFoundDocument(e,n,i,s){return new In(e,1,n,De.min(),i,s,0)}static newNoDocument(e,n){return new In(e,2,n,De.min(),De.min(),ei.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,De.min(),De.min(),ei.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.position=e,this.inclusive=n}}function OR(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],l=t.position[s];if(r.field.isKeyField()?i=be.comparator(be.fromName(l.referenceValue),n.key):i=Fu(l,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function UR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ys(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n="asc"){this.field=e,this.dir=n}}function HW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{}class on extends ID{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new YW(e,n,i):n==="array-contains"?new WW(e,i):n==="in"?new QW(e,i):n==="not-in"?new XW(e,i):n==="array-contains-any"?new jW(e,i):new on(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new KW(e,i):new JW(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fu(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Fu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ks extends ID{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ks(e,n)}matches(e){return MD(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MD(t){return t.op==="and"}function PD(t){return $W(t)&&MD(t)}function $W(t){for(const e of t.filters)if(e instanceof Ks)return!1;return!0}function I_(t){if(t instanceof on)return t.field.canonicalString()+t.op.toString()+qu(t.value);if(PD(t))return t.filters.map((e=>I_(e))).join(",");{const e=t.filters.map((n=>I_(n))).join(",");return`${t.op}(${e})`}}function DD(t,e){return t instanceof on?(function(i,s){return s instanceof on&&i.op===s.op&&i.field.isEqual(s.field)&&Ys(i.value,s.value)})(t,e):t instanceof Ks?(function(i,s){return s instanceof Ks&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,l,c)=>r&&DD(l,s.filters[c])),!0):!1})(t,e):void Re(19439)}function ND(t){return t instanceof on?(function(n){return`${n.field.canonicalString()} ${n.op} ${qu(n.value)}`})(t):t instanceof Ks?(function(n){return n.op.toString()+" {"+n.getFilters().map(ND).join(" ,")+"}"})(t):"Filter"}class YW extends on{constructor(e,n,i){super(e,n,i),this.key=be.fromName(i.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class KW extends on{constructor(e,n){super(e,"in",n),this.keys=kD("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class JW extends on{constructor(e,n){super(e,"not-in",n),this.keys=kD("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kD(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>be.fromName(i.referenceValue)))}class WW extends on{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lT(n)&&$f(n.arrayValue,this.value)}}class QW extends on{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$f(this.value.arrayValue,n)}}class XW extends on{constructor(e,n){super(e,"not-in",n)}matches(e){if($f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$f(this.value.arrayValue,n)}}class jW extends on{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lT(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>$f(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e,n=null,i=[],s=[],r=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=l,this.endAt=c,this.Te=null}}function zR(t,e=null,n=[],i=[],s=null,r=null,l=null){return new ZW(t,e,n,i,s,r,l)}function uT(t){const e=Ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>I_(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),Sm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>qu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>qu(i))).join(",")),e.Te=n}return e.Te}function cT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UR(t.startAt,e.startAt)&&UR(t.endAt,e.endAt)}function M_(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n=null,i=[],s=[],r=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eQ(t,e,n,i,s,r,l,c){return new Cm(t,e,n,i,s,r,l,c)}function fT(t){return new Cm(t)}function BR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tQ(t){return t.collectionGroup!==null}function Rf(t){const e=Ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new an(wn.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Qp(r,i))})),n.has(wn.keyField().canonicalString())||e.Ie.push(new Qp(wn.keyField(),i))}return e.Ie}function zs(t){const e=Ve(t);return e.Ee||(e.Ee=nQ(e,Rf(t))),e.Ee}function nQ(t,e){if(t.limitType==="F")return zR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new Qp(s.field,r)}));const n=t.endAt?new Wp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wp(t.startAt.position,t.startAt.inclusive):null;return zR(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function P_(t,e,n){return new Cm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Am(t,e){return cT(zs(t),zs(e))&&t.limitType===e.limitType}function VD(t){return`${uT(zs(t))}|lt:${t.limitType}`}function nu(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>ND(s))).join(", ")}]`),Sm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>qu(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>qu(s))).join(",")),`Target(${i})`})(zs(t))}; limitType=${t.limitType})`}function xm(t,e){return e.isFoundDocument()&&(function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):be.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(t,e)&&(function(i,s){for(const r of Rf(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,f){const d=OR(l,c,f);return l.inclusive?d<=0:d<0})(i.startAt,Rf(i),s)||i.endAt&&!(function(l,c,f){const d=OR(l,c,f);return l.inclusive?d>=0:d>0})(i.endAt,Rf(i),s))})(t,e)}function iQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LD(t){return(e,n)=>{let i=!1;for(const s of Rf(t)){const r=sQ(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function sQ(t,e,n){const i=t.field.isKeyField()?be.comparator(e.key,n.key):(function(r,l,c){const f=l.data.field(r),d=c.data.field(r);return f!==null&&d!==null?Fu(f,d):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,((n,i)=>{for(const[s,r]of i)e(s,r)}))}isEmpty(){return TD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQ=new Rt(be.comparator);function Mo(){return oQ}const OD=new Rt(be.comparator);function gf(...t){let e=OD;for(const n of t)e=e.insert(n.key,n);return e}function UD(t){let e=OD;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Fa(){return If()}function zD(){return If()}function If(){return new rl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const rQ=new Rt(be.comparator),aQ=new an(be.comparator);function Xe(...t){let e=aQ;for(const n of t)e=e.add(n);return e}const lQ=new an(Qe);function uQ(){return lQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yp(e)?"-0":e}}function BD(t){return{integerValue:""+t}}function FD(t,e){return LW(e)?BD(e):dT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this._=void 0}}function cQ(t,e,n){return t instanceof Xp?(function(s,r){const l={fields:{[SD]:{stringValue:wD},[CD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&aT(r)&&(r=bm(r)),r&&(l.fields[bD]=r),{mapValue:l}})(n,e):t instanceof Yf?GD(t,e):t instanceof Kf?HD(t,e):(function(s,r){const l=qD(s,r),c=FR(l)+FR(s.Ae);return R_(l)&&R_(s.Ae)?BD(c):dT(s.serializer,c)})(t,e)}function fQ(t,e,n){return t instanceof Yf?GD(t,e):t instanceof Kf?HD(t,e):n}function qD(t,e){return t instanceof Jf?(function(i){return R_(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(e)?e:{integerValue:0}:null}class Xp extends Rm{}class Yf extends Rm{constructor(e){super(),this.elements=e}}function GD(t,e){const n=$D(e);for(const i of t.elements)n.some((s=>Ys(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Kf extends Rm{constructor(e){super(),this.elements=e}}function HD(t,e){let n=$D(e);for(const i of t.elements)n=n.filter((s=>!Ys(s,i)));return{arrayValue:{values:n}}}class Jf extends Rm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function FR(t){return Ft(t.integerValue||t.doubleValue)}function $D(t){return lT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(e,n){this.field=e,this.transform=n}}function hQ(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Yf&&s instanceof Yf||i instanceof Kf&&s instanceof Kf?Bu(i.elements,s.elements,Ys):i instanceof Jf&&s instanceof Jf?Ys(i.Ae,s.Ae):i instanceof Xp&&s instanceof Xp})(t.transform,e.transform)}class pQ{constructor(e,n){this.version=e,this.transformResults=n}}class Bs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bs}static exists(e){return new Bs(void 0,e)}static updateTime(e){return new Bs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _p(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Im{}function YD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new JD(t.key,Bs.none()):new ud(t.key,t.data,Bs.none());{const n=t.data,i=ei.empty();let s=new an(wn.comparator);for(let r of e.fields)if(!s.has(r)){let l=n.field(r);l===null&&r.length>1&&(r=r.popLast(),l=n.field(r)),l===null?i.delete(r):i.set(r,l),s=s.add(r)}return new Yr(t.key,i,new hi(s.toArray()),Bs.none())}}function mQ(t,e,n){t instanceof ud?(function(s,r,l){const c=s.value.clone(),f=GR(s.fieldTransforms,r,l.transformResults);c.setAll(f),r.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Yr?(function(s,r,l){if(!_p(s.precondition,r))return void r.convertToUnknownDocument(l.version);const c=GR(s.fieldTransforms,r,l.transformResults),f=r.data;f.setAll(KD(s)),f.setAll(c),r.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(s,r,l){r.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Mf(t,e,n,i){return t instanceof ud?(function(r,l,c,f){if(!_p(r.precondition,l))return c;const d=r.value.clone(),p=HR(r.fieldTransforms,f,l);return d.setAll(p),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof Yr?(function(r,l,c,f){if(!_p(r.precondition,l))return c;const d=HR(r.fieldTransforms,f,l),p=l.data;return p.setAll(KD(r)),p.setAll(d),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((_=>_.field)))})(t,e,n,i):(function(r,l,c){return _p(r.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function gQ(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=qD(i.transform,s||null);r!=null&&(n===null&&(n=ei.empty()),n.set(i.field,r))}return n||null}function qR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Bu(i,s,((r,l)=>hQ(r,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ud extends Im{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends Im{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function KD(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function GR(t,e,n){const i=new Map;at(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],l=r.transform,c=e.data.field(r.field);i.set(r.field,fQ(l,c,n[s]))}return i}function HR(t,e,n){const i=new Map;for(const s of t){const r=s.transform,l=n.data.field(s.field);i.set(s.field,cQ(r,l,e))}return i}class JD extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yQ extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&mQ(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Mf(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Mf(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=zD();return this.mutations.forEach((s=>{const r=e.get(s.key),l=r.overlayedDocument;let c=this.applyToLocalView(l,r.mutatedFields);c=n.has(s.key)?null:c;const f=YD(l,c);f!==null&&i.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Bu(this.mutations,e.mutations,((n,i)=>qR(n,i)))&&Bu(this.baseMutations,e.baseMutations,((n,i)=>qR(n,i)))}}class hT{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){at(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return rQ})();const r=e.mutations;for(let l=0;l<r.length;l++)s=s.insert(r[l].key,i[l].version);return new hT(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Ze;function EQ(t){switch(t){case ue.OK:return Re(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function WD(t){if(t===void 0)return Io("GRPC error has no .code"),ue.UNKNOWN;switch(t){case jt.OK:return ue.OK;case jt.CANCELLED:return ue.CANCELLED;case jt.UNKNOWN:return ue.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ue.INTERNAL;case jt.UNAVAILABLE:return ue.UNAVAILABLE;case jt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case jt.NOT_FOUND:return ue.NOT_FOUND;case jt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case jt.ABORTED:return ue.ABORTED;case jt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case jt.DATA_LOSS:return ue.DATA_LOSS;default:return Re(39323,{code:t})}}(Ze=jt||(jt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ=new Pr([4294967295,4294967295],0);function $R(t){const e=wQ().encode(t),n=new cD;return n.update(e),new Uint8Array(n.digest())}function YR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Pr([n,i],0),new Pr([s,r],0)]}class pT{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new yf(`Invalid padding: ${n}`);if(i<0)throw new yf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new yf(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new yf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Pr.fromNumber(i)));return s.compare(SQ)===1&&(s=new Pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$R(e),[i,s]=YR(n);for(let r=0;r<this.hashCount;r++){const l=this.ye(i,s,r);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),l=new pT(r,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const n=$R(e),[i,s]=YR(n);for(let r=0;r<this.hashCount;r++){const l=this.ye(i,s,r);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class yf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Mm(De.min(),s,new Rt(Qe),Mo(),Xe())}}class cd{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new cd(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class QD{constructor(e,n){this.targetId=e,this.Ce=n}}class XD{constructor(e,n,i=Sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class KR{constructor(){this.ve=0,this.Fe=JR(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),i=Xe();return this.Fe.forEach(((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Re(38017,{changeType:r})}})),new cd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=JR()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bQ{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mo(),this.Je=np(),this.He=np(),this.Ye=new Rt(Qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(M_(r))if(i===0){const l=new be(r.path);this.et(n,l,In.newNoDocument(l,De.min()))}else at(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let l,c;try{l=zr(i).toUint8Array()}catch(f){if(f instanceof ED)return zu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new pT(l,s,r)}catch(f){return zu(f instanceof yf?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((r=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${r.path.canonicalString()}`;e.mightContain(c)||(this.et(n,r,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((r,l)=>{const c=this.ot(l);if(c){if(r.current&&M_(c.target)){const f=new be(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,In.newNoDocument(f,e))}r.Be&&(n.set(l,r.ke()),r.qe())}}));let i=Xe();this.He.forEach(((r,l)=>{let c=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(r))})),this.je.forEach(((r,l)=>l.setReadTime(e)));const s=new Mm(e,n,this.Ye,this.je,i);return this.je=Mo(),this.Je=np(),this.He=np(),this.Ye=new Rt(Qe),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new KR,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new an(Qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new an(Qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function np(){return new Rt(be.comparator)}function JR(){return new Rt(be.comparator)}const CQ={asc:"ASCENDING",desc:"DESCENDING"},AQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xQ={and:"AND",or:"OR"};class RQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function D_(t,e){return t.useProto3Json||Sm(e)?e:{value:e}}function jp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IQ(t,e){return jp(t,e.toTimestamp())}function Fs(t){return at(!!t,49232),De.fromTimestamp((function(n){const i=Ur(n);return new wt(i.seconds,i.nanos)})(t))}function mT(t,e){return N_(t,e).canonicalString()}function N_(t,e){const n=(function(s){return new At(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function ZD(t){const e=At.fromString(t);return at(sN(e),10190,{key:e.toString()}),e}function k_(t,e){return mT(t.databaseId,e.path)}function Iv(t,e){const n=ZD(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(tN(n))}function eN(t,e){return mT(t.databaseId,e)}function MQ(t){const e=ZD(t);return e.length===4?At.emptyPath():tN(e)}function V_(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tN(t){return at(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function WR(t,e,n){return{name:k_(t,e),fields:n.value.mapValue.fields}}function PQ(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Re(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=(function(d,p){return d.useProto3Json?(at(p===void 0||typeof p=="string",58123),Sn.fromBase64String(p||"")):(at(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Sn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(d){const p=d.code===void 0?ue.UNKNOWN:WD(d.code);return new Te(p,d.message||"")})(l);n=new XD(i,s,r,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Iv(t,i.document.name),r=Fs(i.document.updateTime),l=i.document.createTime?Fs(i.document.createTime):De.min(),c=new ei({mapValue:{fields:i.document.fields}}),f=In.newFoundDocument(s,r,l,c),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Tp(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Iv(t,i.document),r=i.readTime?Fs(i.readTime):De.min(),l=In.newNoDocument(s,r),c=i.removedTargetIds||[];n=new Tp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Iv(t,i.document),r=i.removedTargetIds||[];n=new Tp([],r,s,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,l=new TQ(s,r),c=i.targetId;n=new QD(c,l)}}return n}function DQ(t,e){let n;if(e instanceof ud)n={update:WR(t,e.key,e.value)};else if(e instanceof JD)n={delete:k_(t,e.key)};else if(e instanceof Yr)n={update:WR(t,e.key,e.data),updateMask:FQ(e.fieldMask)};else{if(!(e instanceof yQ))return Re(16599,{Vt:e.type});n={verify:k_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(r,l){const c=l.transform;if(c instanceof Xp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Kf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Jf)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Re(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:IQ(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Re(27497)})(t,e.precondition)),n}function NQ(t,e){return t&&t.length>0?(at(e!==void 0,14353),t.map((n=>(function(s,r){let l=s.updateTime?Fs(s.updateTime):Fs(r);return l.isEqual(De.min())&&(l=Fs(r)),new pQ(l,s.transformResults||[])})(n,e)))):[]}function kQ(t,e){return{documents:[eN(t,e.path)]}}function VQ(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=eN(t,s);const r=(function(d){if(d.length!==0)return iN(Ks.create(d,"and"))})(e.filters);r&&(n.structuredQuery.where=r);const l=(function(d){if(d.length!==0)return d.map((p=>(function(E){return{field:iu(E.field),direction:UQ(E.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=D_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:s}}function LQ(t){let e=MQ(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){at(i===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let r=[];n.where&&(r=(function(_){const E=nN(_);return E instanceof Ks&&PD(E)?E.getFilters():[E]})(n.where));let l=[];n.orderBy&&(l=(function(_){return _.map((E=>(function(A){return new Qp(su(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(E)))})(n.orderBy));let c=null;n.limit&&(c=(function(_){let E;return E=typeof _=="object"?_.value:_,Sm(E)?null:E})(n.limit));let f=null;n.startAt&&(f=(function(_){const E=!!_.before,S=_.values||[];return new Wp(S,E)})(n.startAt));let d=null;return n.endAt&&(d=(function(_){const E=!_.before,S=_.values||[];return new Wp(S,E)})(n.endAt)),eQ(e,s,l,r,c,"F",f,d)}function OQ(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=su(n.unaryFilter.field);return on.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=su(n.unaryFilter.field);return on.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=su(n.unaryFilter.field);return on.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=su(n.unaryFilter.field);return on.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return on.create(su(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ks.create(n.compositeFilter.filters.map((i=>nN(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function UQ(t){return CQ[t]}function zQ(t){return AQ[t]}function BQ(t){return xQ[t]}function iu(t){return{fieldPath:t.canonicalString()}}function su(t){return wn.fromServerFormat(t.fieldPath)}function iN(t){return t instanceof on?(function(n){if(n.op==="=="){if(LR(n.value))return{unaryFilter:{field:iu(n.field),op:"IS_NAN"}};if(VR(n.value))return{unaryFilter:{field:iu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LR(n.value))return{unaryFilter:{field:iu(n.field),op:"IS_NOT_NAN"}};if(VR(n.value))return{unaryFilter:{field:iu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iu(n.field),op:zQ(n.op),value:n.value}}})(t):t instanceof Ks?(function(n){const i=n.getFilters().map((s=>iN(s)));return i.length===1?i[0]:{compositeFilter:{op:BQ(n.op),filters:i}}})(t):Re(54877,{filter:t})}function FQ(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function sN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,i,s,r=De.min(),l=De.min(),c=Sn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e){this.yt=e}}function GQ(t){const e=LQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?P_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(){this.Cn=new $Q}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Or.min())}updateCollectionGroup(e,n,i){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class $Q{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new an(At.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new an(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oN=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(oN,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gu(0)}static cr(){return new Gu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="LruGarbageCollector",YQ=1048576;function jR([t,e],[n,i]){const s=Qe(t,n);return s===0?Qe(e,i):s}class KQ{constructor(e){this.Ir=e,this.buffer=new an(jR),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();jR(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JQ{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(XR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nc(n)?me(XR,"Ignoring IndexedDB error during garbage collection: ",n):await tc(n)}await this.Vr(3e5)}))}}class WQ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(wm.ce);const i=new KQ(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(QR)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QR):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,l,c,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s)))).next((_=>(i=_,c=Date.now(),this.removeTargets(e,i,n)))).next((_=>(r=_,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(d=Date.now(),tu()<=Je.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${r} targets in `+(f-c)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:_}))))}}function QQ(t,e){return new WQ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(){this.changes=new rl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ae.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&Mf(i.mutation,s,hi.empty(),wt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Xe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Xe()){const s=Fa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((r=>{let l=gf();return r.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=Fa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Xe())))}populateOverlays(e,n,i){const s=[];return i.forEach((r=>{n.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(e,s).next((r=>{r.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let r=Mo();const l=If(),c=(function(){return If()})();return n.forEach(((f,d)=>{const p=i.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Yr)?r=r.insert(d.key,d):p!==void 0?(l.set(d.key,p.mutation.getFieldMask()),Mf(p.mutation,d,p.mutation.getFieldMask(),wt.now())):l.set(d.key,hi.empty())})),this.recalculateAndSaveOverlays(e,r).next((f=>(f.forEach(((d,p)=>l.set(d,p))),n.forEach(((d,p)=>c.set(d,new jQ(p,l.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const i=If();let s=new Rt(((l,c)=>l-c)),r=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((f=>{const d=n.get(f);if(d===null)return;let p=i.get(f)||hi.empty();p=c.applyToLocalView(d,p),i.set(f,p);const _=(s.get(c.batchId)||Xe()).add(f);s=s.insert(c.batchId,_)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,p=f.value,_=zD();p.forEach((E=>{if(!r.has(E)){const S=YD(n.get(E),i.get(E));S!==null&&_.set(E,S),r=r.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,_))}return ae.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return be.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tQ(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((r=>{const l=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):ae.resolve(Fa());let c=qf,f=r;return l.next((d=>ae.forEach(d,((p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),r.get(p)?ae.resolve():this.remoteDocumentCache.getEntry(e,p).next((E=>{f=f.insert(p,E)}))))).next((()=>this.populateOverlays(e,d,r))).next((()=>this.computeViews(e,f,d,Xe()))).next((p=>({batchId:c,changes:UD(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((i=>{let s=gf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let l=gf();return this.indexManager.getCollectionParents(e,r).next((c=>ae.forEach(c,(f=>{const d=(function(_,E){return new Cm(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,f.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,i,s).next((p=>{p.forEach(((_,E)=>{l=l.insert(_,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(r=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s)))).next((l=>{r.forEach(((f,d)=>{const p=d.getKey();l.get(p)===null&&(l=l.insert(p,In.newInvalidDocument(p)))}));let c=gf();return l.forEach(((f,d)=>{const p=r.get(f);p!==void 0&&Mf(p.mutation,d,hi.empty(),wt.now()),xm(n,d)&&(c=c.insert(f,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Fs(s.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:GQ(s.bundledQuery),readTime:Fs(s.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(){this.overlays=new Rt(be.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fa();return ae.forEach(n,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,r)=>{this.St(e,n,r)})),ae.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,n,i){const s=Fa(),r=n.length+1,l=new be(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&f.largestBatchId>i&&s.set(f.getKey(),f)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Rt(((d,p)=>d-p));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=r.get(d.largestBatchId);p===null&&(p=Fa(),r=r.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Fa(),f=r.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>c.set(d,p))),!(c.size()>=s)););return ae.resolve(c)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new _Q(n,i));let r=this.qr.get(n);r===void 0&&(r=Xe(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nX{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.Qr=new an(fn.$r),this.Ur=new an(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new fn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new fn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new be(new At([])),i=new fn(n,e),s=new fn(n,e+1),r=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),r.push(l.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new At([])),i=new fn(n,e),s=new fn(n,e+1);let r=Xe();return this.Ur.forEachInRange([i,s],(l=>{r=r.add(l.key)})),r}containsKey(e){const n=new fn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class fn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||Qe(e.Yr,n.Yr)}static Kr(e,n){return Qe(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new an(fn.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new vQ(r,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new fn(c.key,r)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return ae.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?rT:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],(l=>{const c=this.Xr(l.Yr);r.push(c)})),ae.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new an(Qe);return n.forEach((s=>{const r=new fn(s,0),l=new fn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,l],(c=>{i=i.add(c.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;be.isDocumentKey(r)||(r=r.child(""));const l=new fn(new be(r),0);let c=new an(Qe);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===s&&(c=c.add(f.Yr)),!0)}),l),ae.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){at(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(n.mutations,(s=>{const r=new fn(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new fn(n,0),s=this.Zr.firstAfterOrEqual(i);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX{constructor(e){this.ri=e,this.docs=(function(){return new Rt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ae.resolve(i?i.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let i=Mo();return n.forEach((s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():In.newInvalidDocument(s))})),ae.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Mo();const l=n.path,c=new be(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||DW(PW(p),i)<=0||(s.has(p.key)||xm(n,p))&&(r=r.insert(p.key,p.mutableCopy()))}return ae.resolve(r)}getAllFromCollectionGroup(e,n,i,s){Re(9500)}ii(e,n){return ae.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new oX(this)}getSize(e){return ae.resolve(this.size)}}class oX extends XQ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(e){this.persistence=e,this.si=new rl((n=>uT(n)),cT),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new gT,this.targetCount=0,this.ai=Gu.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Gu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(l),r.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ae.waitFor(r).next((()=>s))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ae.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ae.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach((l=>{r.push(s.markPotentiallyOrphaned(e,l))})),ae.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ae.resolve(i)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.ui={},this.overlays={},this.ci=new wm(0),this.li=!1,this.li=!0,this.hi=new nX,this.referenceDelegate=e(this),this.Pi=new rX(this),this.indexManager=new HQ,this.remoteDocumentCache=(function(s){return new sX(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new qQ(n),this.Ii=new eX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tX,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new iX(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){me("MemoryPersistence","Starting transaction:",e);const s=new aX(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(e,n){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class aX extends kW{constructor(e){super(),this.currentSequenceNumber=e}}class yT{constructor(e){this.persistence=e,this.Ri=new gT,this.Vi=null}static mi(e){return new yT(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const s=be.fromPath(i);return this.gi(e,s).next((r=>{r||n.removeEntry(s,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zp{constructor(e,n){this.persistence=e,this.pi=new rl((i=>OW(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=QQ(this,n)}static mi(e,n){return new Zp(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((i,s)=>this.br(e,i,s).next((r=>r?ae.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((c=>{c||(i++,r.removeEntry(l,De.min()))})))).next((()=>r.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yp(e.data.value)),n}br(e,n,i){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ae.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Xe(),s=Xe();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new vT(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return X$()?8:VW(Un())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next((l=>{r.result=l})).next((()=>{if(!r.result)return this.ws(e,n,s,i).next((l=>{r.result=l}))})).next((()=>{if(r.result)return;const l=new lX;return this.Ss(e,n,l).next((c=>{if(r.result=c,this.Vs)return this.bs(e,n,l,c.size)}))})).next((()=>r.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(tu()<=Je.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",nu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(tu()<=Je.DEBUG&&me("QueryEngine","Query:",nu(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(tu()<=Je.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",nu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):ae.resolve())}ys(e,n){if(BR(n))return ae.resolve(null);let i=zs(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=P_(n,null,"F"),i=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((r=>{const l=Xe(...r);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.Ds(n,c);return this.Cs(n,d,l,f.readTime)?this.ys(e,P_(n,null,"F")):this.vs(e,d,n,f)}))))})))))}ws(e,n,i,s){return BR(n)||s.isEqual(De.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((r=>{const l=this.Ds(n,r);return this.Cs(n,l,i,s)?ae.resolve(null):(tu()<=Je.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),nu(n)),this.vs(e,l,n,MW(s,qf)).next((c=>c)))}))}Ds(e,n){let i=new an(LD(e));return n.forEach(((s,r)=>{xm(e,r)&&(i=i.add(r))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return tu()<=Je.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",nu(n)),this.ps.getDocumentsMatchingQuery(e,n,Or.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((r=>(n.forEach((l=>{r=r.insert(l.key,l)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="LocalStore",cX=3e8;class fX{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Rt(Qe),this.xs=new rl((r=>uT(r)),cT),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZQ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function dX(t,e,n,i){return new fX(t,e,n,i)}async function aN(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((r=>{const l=[],c=[];let f=Xe();for(const d of s){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of r){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function hX(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,p){const _=d.batch,E=_.keys();let S=ae.resolve();return E.forEach((A=>{S=S.next((()=>p.getEntry(f,A))).next((x=>{const R=d.docVersions.get(A);at(R!==null,48541),x.version.compareTo(R)<0&&(_.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),p.addEntry(x)))}))})),S.next((()=>c.mutationQueue.removeMutationBatch(f,_)))})(n,i,e,r).next((()=>r.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=Xe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function lN(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function pX(t,e){const n=Ve(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((p,_)=>{const E=s.get(_);if(!E)return;c.push(n.Pi.removeMatchingKeys(r,p.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(r,p.addedDocuments,_))));let S=E.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(Sn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,i)),s=s.insert(_,S),(function(x,R,V){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=cX?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,S,p)&&c.push(n.Pi.updateTargetData(r,S))}));let f=Mo(),d=Xe();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(r,p))})),c.push(mX(r,l,e.documentUpdates).next((p=>{f=p.ks,d=p.qs}))),!i.isEqual(De.min())){const p=n.Pi.getLastRemoteSnapshotVersion(r).next((_=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i)));c.push(p)}return ae.waitFor(c).next((()=>l.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,f,d))).next((()=>f))})).then((r=>(n.Ms=s,r)))}function mX(t,e,n){let i=Xe(),s=Xe();return n.forEach((r=>i=i.add(r))),e.getEntries(t,i).next((r=>{let l=Mo();return n.forEach(((c,f)=>{const d=r.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(De.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):me(_T,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:s}}))}function gX(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=rT),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yX(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((r=>r?(s=r,ae.resolve(s)):n.Pi.allocateTargetId(i).next((l=>(s=new Ar(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function L_(t,e,n){const i=Ve(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!nc(l))throw l;me(_T,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function ZR(t,e,n){const i=Ve(t);let s=De.min(),r=Xe();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,p){const _=Ve(f),E=_.xs.get(p);return E!==void 0?ae.resolve(_.Ms.get(E)):_.Pi.getTargetData(d,p)})(i,l,zs(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{r=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:De.min(),n?r:Xe()))).next((c=>(vX(i,iQ(e),c),{documents:c,Qs:r})))))}function vX(t,e,n){let i=t.Os.get(e)||De.min();n.forEach(((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)})),t.Os.set(e,i)}class eI{constructor(){this.activeTargetIds=uQ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _X{constructor(){this.Mo=new eI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eI,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="ConnectivityMonitor";class nI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(tI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(tI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip=null;function O_(){return ip===null?ip=(function(){return 268435456+Math.round(2147483648*Math.random())})():ip++,"0x"+ip.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="RestConnection",EX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wX{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Kp?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const l=O_(),c=this.zo(e,n.toUriEncodedString());me(Mv,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,r);const{host:d}=new URL(c),p=Xu(d);return this.Jo(e,c,f,i,p).then((_=>(me(Mv,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw zu(Mv,`RPC '${e}' ${l} failed with error: `,_,"url: ",c,"request:",i),_}))}Ho(e,n,i,s,r,l){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,r)=>e[r]=s)),i&&i.headers.forEach(((s,r)=>e[r]=s))}zo(e,n){const i=EX[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class bX extends wX{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const l=O_();return new Promise(((c,f)=>{const d=new fD;d.setWithCredentials(!0),d.listenOnce(dD.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case gp.NO_ERROR:const _=d.getResponseJson();me(Cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case gp.TIMEOUT:me(Cn,`RPC '${e}' ${l} timed out`),f(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case gp.HTTP_ERROR:const E=d.getStatus();if(me(Cn,`RPC '${e}' ${l} failed with status:`,E,"response text:",d.getResponseText()),E>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);const A=S==null?void 0:S.error;if(A&&A.status&&A.message){const x=(function(V){const O=V.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(O)>=0?O:ue.UNKNOWN})(A.status);f(new Te(x,A.message))}else f(new Te(ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{me(Cn,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(s);me(Cn,`RPC '${e}' ${l} sending request:`,s),d.send(n,"POST",p,i,15)}))}T_(e,n,i){const s=O_(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=mD(),c=pD(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const p=r.join("");me(Cn,`Creating RPC '${e}' stream ${s}: ${p}`,f);const _=l.createWebChannel(p,f);this.I_(_);let E=!1,S=!1;const A=new SX({Yo:R=>{S?me(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(E||(me(Cn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),me(Cn,`RPC '${e}' stream ${s} sending:`,R),_.send(R))},Zo:()=>_.close()}),x=(R,V,O)=>{R.listen(V,(F=>{try{O(F)}catch(H){setTimeout((()=>{throw H}),0)}}))};return x(_,mf.EventType.OPEN,(()=>{S||(me(Cn,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),x(_,mf.EventType.CLOSE,(()=>{S||(S=!0,me(Cn,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(_))})),x(_,mf.EventType.ERROR,(R=>{S||(S=!0,zu(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),A.a_(new Te(ue.UNAVAILABLE,"The operation could not be completed")))})),x(_,mf.EventType.MESSAGE,(R=>{var V;if(!S){const O=R.data[0];at(!!O,16349);const F=O,H=(F==null?void 0:F.error)||((V=F[0])==null?void 0:V.error);if(H){me(Cn,`RPC '${e}' stream ${s} received error:`,H);const Y=H.status;let Z=(function(k){const U=jt[k];if(U!==void 0)return WD(U)})(Y),D=H.message;Z===void 0&&(Z=ue.INTERNAL,D="Unknown error status: "+Y+" with message "+H.message),S=!0,A.a_(new Te(Z,D)),_.close()}else me(Cn,`RPC '${e}' stream ${s} received:`,O),A.u_(O)}})),x(c,hD.STAT_EVENT,(R=>{R.stat===C_.PROXY?me(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===C_.NOPROXY&&me(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Pv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){return new RQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="PersistentStream";class cN{constructor(e,n,i,s,r,l,c,f){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Io(n.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new Te(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(iI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(iI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CX extends cN{constructor(e,n,i,s,r,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=PQ(this.serializer,e),i=(function(r){if(!("targetChange"in r))return De.min();const l=r.targetChange;return l.targetIds&&l.targetIds.length?De.min():l.readTime?Fs(l.readTime):De.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=V_(this.serializer),n.addTarget=(function(r,l){let c;const f=l.target;if(c=M_(f)?{documents:kQ(r,f)}:{query:VQ(r,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=jD(r,l.resumeToken);const d=D_(r,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(De.min())>0){c.readTime=jp(r,l.snapshotVersion.toTimestamp());const d=D_(r,l.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const i=OQ(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=V_(this.serializer),n.removeTarget=e,this.q_(n)}}class AX extends cN{constructor(e,n,i,s,r,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NQ(e.writeResults,e.commitTime),i=Fs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=V_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>DQ(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{}class RX extends xX{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,l])=>this.connection.Go(e,N_(n,i),s,r,l))).catch((r=>{throw r.name==="FirebaseError"?(r.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Te(ue.UNKNOWN,r.toString())}))}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,N_(n,i),s,l,c,r))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ue.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class IX{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Io(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class MX{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{al(this)&&(me(nl,"Restarting streams for network reachability change."),await(async function(f){const d=Ve(f);d.Ea.add(4),await fd(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Dm(d)})(this))}))})),this.Ra=new IX(i,s)}}async function Dm(t){if(al(t))for(const e of t.da)await e(!0)}async function fd(t){for(const e of t.da)await e(!1)}function fN(t,e){const n=Ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ST(n)?wT(n):ic(n).O_()&&ET(n,e))}function TT(t,e){const n=Ve(t),i=ic(n);n.Ia.delete(e),i.O_()&&dN(n,e),n.Ia.size===0&&(i.O_()?i.L_():al(n)&&n.Ra.set("Unknown"))}function ET(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).Y_(e)}function dN(t,e){t.Va.Ue(e),ic(t).Z_(e)}function wT(t){t.Va=new bQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.Ra.ua()}function ST(t){return al(t)&&!ic(t).x_()&&t.Ia.size>0}function al(t){return Ve(t).Ea.size===0}function hN(t){t.Va=void 0}async function PX(t){t.Ra.set("Online")}async function DX(t){t.Ia.forEach(((e,n)=>{ET(t,e)}))}async function NX(t,e){hN(t),ST(t)?(t.Ra.ha(e),wT(t)):t.Ra.set("Unknown")}async function kX(t,e,n){if(t.Ra.set("Online"),e instanceof XD&&e.state===2&&e.cause)try{await(async function(s,r){const l=r.cause;for(const c of r.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(i){me(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await em(t,i)}else if(e instanceof Tp?t.Va.Ze(e):e instanceof QD?t.Va.st(e):t.Va.tt(e),!n.isEqual(De.min()))try{const i=await lN(t.localStore);n.compareTo(i)>=0&&await(function(r,l){const c=r.Va.Tt(l);return c.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=r.Ia.get(d);p&&r.Ia.set(d,p.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,d)=>{const p=r.Ia.get(f);if(!p)return;r.Ia.set(f,p.withResumeToken(Sn.EMPTY_BYTE_STRING,p.snapshotVersion)),dN(r,f);const _=new Ar(p.target,f,d,p.sequenceNumber);ET(r,_)})),r.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){me(nl,"Failed to raise snapshot:",i),await em(t,i)}}async function em(t,e,n){if(!nc(e))throw e;t.Ea.add(1),await fd(t),t.Ra.set("Offline"),n||(n=()=>lN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(nl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Dm(t)}))}function pN(t,e){return e().catch((n=>em(t,n,e)))}async function Nm(t){const e=Ve(t),n=Fr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rT;for(;VX(e);)try{const s=await gX(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,LX(e,s)}catch(s){await em(e,s)}mN(e)&&gN(e)}function VX(t){return al(t)&&t.Ta.length<10}function LX(t,e){t.Ta.push(e);const n=Fr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mN(t){return al(t)&&!Fr(t).x_()&&t.Ta.length>0}function gN(t){Fr(t).start()}async function OX(t){Fr(t).ra()}async function UX(t){const e=Fr(t);for(const n of t.Ta)e.ea(n.mutations)}async function zX(t,e,n){const i=t.Ta.shift(),s=hT.from(i,e,n);await pN(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Nm(t)}async function BX(t,e){e&&Fr(t).X_&&await(async function(i,s){if((function(l){return EQ(l)&&l!==ue.ABORTED})(s.code)){const r=i.Ta.shift();Fr(i).B_(),await pN(i,(()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s))),await Nm(i)}})(t,e),mN(t)&&gN(t)}async function sI(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),me(nl,"RemoteStore received new credentials");const i=al(n);n.Ea.add(3),await fd(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Dm(n)}async function FX(t,e){const n=Ve(t);e?(n.Ea.delete(2),await Dm(n)):e||(n.Ea.add(2),await fd(n),n.Ra.set("Unknown"))}function ic(t){return t.ma||(t.ma=(function(n,i,s){const r=Ve(n);return r.sa(),new CX(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(t.datastore,t.asyncQueue,{Xo:PX.bind(null,t),t_:DX.bind(null,t),r_:NX.bind(null,t),H_:kX.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),ST(t)?wT(t):t.Ra.set("Unknown")):(await t.ma.stop(),hN(t))}))),t.ma}function Fr(t){return t.fa||(t.fa=(function(n,i,s){const r=Ve(n);return r.sa(),new AX(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:OX.bind(null,t),r_:BX.bind(null,t),ta:UX.bind(null,t),na:zX.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Nm(t)):(await t.fa.stop(),t.Ta.length>0&&(me(nl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new $a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const l=Date.now()+i,c=new bT(e,n,l,s,r);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CT(t,e){if(Io("AsyncQueue",`${e}: ${t}`),nc(t))return new Te(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{static emptySet(e){return new xu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||be.comparator(n.key,i.key):(n,i)=>be.comparator(n.key,i.key),this.keyedMap=gf(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.ga=new Rt(be.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Hu{constructor(e,n,i,s,r,l,c,f,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,s,r){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Hu(e,n,xu.emptySet(n),l,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GX{constructor(){this.queries=rI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Ve(n),r=s.queries;s.queries=rI(),r.forEach(((l,c)=>{for(const f of c.Sa)f.onError(i)}))})(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function rI(){return new rl((t=>VD(t)),Am)}async function HX(t,e){const n=Ve(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new qX,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=CT(l,`Initialization of query '${nu(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&AT(n)}async function $X(t,e){const n=Ve(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const l=r.Sa.indexOf(e);l>=0&&(r.Sa.splice(l,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function YX(t,e){const n=Ve(t);let i=!1;for(const s of e){const r=s.query,l=n.queries.get(r);if(l){for(const c of l.Sa)c.Fa(s)&&(i=!0);l.wa=s}}i&&AT(n)}function KX(t,e,n){const i=Ve(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function AT(t){t.Ca.forEach((e=>{e.next()}))}var U_,aI;(aI=U_||(U_={})).Ma="default",aI.Cache="cache";class JX{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Hu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==U_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class WX{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=LD(e),this.tu=new xu(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new oI,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,_)=>{const E=s.get(p),S=xm(this.query,_)?_:null,A=!!E&&this.mutatedKeys.has(E.key),x=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let R=!1;E&&S?E.data.isEqual(S.data)?A!==x&&(i.track({type:3,doc:S}),R=!0):this.su(E,S)||(i.track({type:2,doc:S}),R=!0,(f&&this.eu(S,f)>0||d&&this.eu(S,d)<0)&&(c=!0)):!E&&S?(i.track({type:0,doc:S}),R=!0):E&&!S&&(i.track({type:1,doc:E}),R=!0,(f||d)&&(c=!0)),R&&(S?(l=l.add(S),r=x?r.add(p):r.delete(p)):(l=l.delete(p),r=r.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),r=r.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:c,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,_)=>(function(S,A){const x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:R})}};return x(S)-x(A)})(p.type,_.type)||this.eu(p.doc,_.doc))),this.ou(i),s=s??!1;const c=n&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new Hu(this.query,e.tu,r,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new vN(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new yN(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xT="SyncEngine";class QX{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class XX{constructor(e){this.key=e,this.hu=!1}}class jX{constructor(e,n,i,s,r,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new rl((c=>VD(c)),Am),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(be.comparator),this.Au=new Map,this.Ru=new gT,this.Vu={},this.mu=new Map,this.fu=Gu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZX(t,e,n=!0){const i=bN(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await _N(i,e,n,!0),s}async function ej(t,e){const n=bN(t);await _N(n,e,!0,!1)}async function _N(t,e,n,i){const s=await yX(t.localStore,zs(e)),r=s.targetId,l=t.sharedClientState.addLocalQueryTarget(r,n);let c;return i&&(c=await tj(t,e,r,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&fN(t.remoteStore,s),c}async function tj(t,e,n,i,s){t.pu=(_,E,S)=>(async function(x,R,V,O){let F=R.view.ru(V);F.Cs&&(F=await ZR(x.localStore,R.query,!1).then((({documents:D})=>R.view.ru(D,F))));const H=O&&O.targetChanges.get(R.targetId),Y=O&&O.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(F,x.isPrimaryClient,H,Y);return uI(x,R.targetId,Z.au),Z.snapshot})(t,_,E,S);const r=await ZR(t.localStore,e,!0),l=new WX(e,r.Qs),c=l.ru(r.documents),f=cd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),d=l.applyChanges(c,t.isPrimaryClient,f);uI(t,n,d.au);const p=new QX(e,n,l);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function nj(t,e,n){const i=Ve(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter((l=>!Am(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await L_(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&TT(i.remoteStore,s.targetId),z_(i,s.targetId)})).catch(tc)):(z_(i,s.targetId),await L_(i.localStore,s.targetId,!0))}async function ij(t,e){const n=Ve(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),TT(n.remoteStore,i.targetId))}async function sj(t,e,n){const i=fj(t);try{const s=await(function(l,c){const f=Ve(l),d=wt.now(),p=c.reduce(((S,A)=>S.add(A.key)),Xe());let _,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let A=Mo(),x=Xe();return f.Ns.getEntries(S,p).next((R=>{A=R,A.forEach(((V,O)=>{O.isValidDocument()||(x=x.add(V))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,A))).next((R=>{_=R;const V=[];for(const O of c){const F=gQ(O,_.get(O.key).overlayedDocument);F!=null&&V.push(new Yr(O.key,F,RD(F.value.mapValue),Bs.exists(!0)))}return f.mutationQueue.addMutationBatch(S,d,V,c)})).next((R=>{E=R;const V=R.applyToLocalDocumentSet(_,x);return f.documentOverlayCache.saveOverlays(S,R.batchId,V)}))})).then((()=>({batchId:E.batchId,changes:UD(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new Rt(Qe)),d=d.insert(c,f),l.Vu[l.currentUser.toKey()]=d})(i,s.batchId,n),await dd(i,s.changes),await Nm(i.remoteStore)}catch(s){const r=CT(s,"Failed to persist write");n.reject(r)}}async function TN(t,e){const n=Ve(t);try{const i=await pX(n.localStore,e);e.targetChanges.forEach(((s,r)=>{const l=n.Au.get(r);l&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?at(l.hu,14607):s.removedDocuments.size>0&&(at(l.hu,42227),l.hu=!1))})),await dd(n,i,e)}catch(i){await tc(i)}}function lI(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((r,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const f=Ve(l);f.onlineState=c;let d=!1;f.queries.forEach(((p,_)=>{for(const E of _.Sa)E.va(c)&&(d=!0)})),d&&AT(f)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function oj(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let l=new Rt(be.comparator);l=l.insert(r,In.newNoDocument(r,De.min()));const c=Xe().add(r),f=new Mm(De.min(),new Map,new Rt(Qe),l,c);await TN(i,f),i.du=i.du.remove(r),i.Au.delete(e),RT(i)}else await L_(i.localStore,e,!1).then((()=>z_(i,e,n))).catch(tc)}async function rj(t,e){const n=Ve(t),i=e.batch.batchId;try{const s=await hX(n.localStore,e);wN(n,i,null),EN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await dd(n,s)}catch(s){await tc(s)}}async function aj(t,e,n){const i=Ve(t);try{const s=await(function(l,c){const f=Ve(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,c).next((_=>(at(_!==null,37113),p=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,e);wN(i,e,n),EN(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await dd(i,s)}catch(s){await tc(s)}}function EN(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function wN(t,e,n){const i=Ve(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function z_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||SN(t,i)}))}function SN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(TT(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),RT(t))}function uI(t,e,n){for(const i of n)i instanceof yN?(t.Ru.addReference(i.key,e),lj(t,i)):i instanceof vN?(me(xT,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||SN(t,i.key)):Re(19791,{wu:i})}function lj(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(me(xT,"New document in limbo: "+n),t.Eu.add(i),RT(t))}function RT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new be(At.fromString(e)),i=t.fu.next();t.Au.set(i,new XX(n)),t.du=t.du.insert(n,i),fN(t.remoteStore,new Ar(zs(fT(n.path)),i,"TargetPurposeLimboResolution",wm.ce))}}async function dd(t,e,n){const i=Ve(t),s=[],r=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,f)=>{l.push(i.pu(f,e,n).then((d=>{var p;if((d||n)&&i.isPrimaryClient){const _=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(d){s.push(d);const _=vT.As(f.targetId,d);r.push(_)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(f,d){const p=Ve(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ae.forEach(d,(E=>ae.forEach(E.Es,(S=>p.persistence.referenceDelegate.addReference(_,E.targetId,S))).next((()=>ae.forEach(E.ds,(S=>p.persistence.referenceDelegate.removeReference(_,E.targetId,S)))))))))}catch(_){if(!nc(_))throw _;me(_T,"Failed to update sequence numbers: "+_)}for(const _ of d){const E=_.targetId;if(!_.fromCache){const S=p.Ms.get(E),A=S.snapshotVersion,x=S.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(E,x)}}})(i.localStore,r))}async function uj(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){me(xT,"User change. New user:",e.toKey());const i=await aN(n.localStore,e);n.currentUser=e,(function(r,l){r.mu.forEach((c=>{c.forEach((f=>{f.reject(new Te(ue.CANCELLED,l))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await dd(n,i.Ls)}}function cj(t,e){const n=Ve(t),i=n.Au.get(e);if(i&&i.hu)return Xe().add(i.key);{let s=Xe();const r=n.Iu.get(e);if(!r)return s;for(const l of r){const c=n.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function bN(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oj.bind(null,e),e.Pu.H_=YX.bind(null,e.eventManager),e.Pu.yu=KX.bind(null,e.eventManager),e}function fj(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aj.bind(null,e),e}class tm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dX(this.persistence,new uX,e.initialUser,this.serializer)}Cu(e){return new rN(yT.mi,this.serializer)}Du(e){return new _X}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tm.provider={build:()=>new tm};class dj extends tm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof Zp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JQ(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new rN((i=>Zp.mi(i,n)),this.serializer)}}class B_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uj.bind(null,this.syncEngine),await FX(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GX})()}createDatastore(e){const n=Pm(e.databaseInfo.databaseId),i=(function(r){return new bX(r)})(e.databaseInfo);return(function(r,l,c,f){return new RX(r,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,r,l,c){return new MX(i,s,r,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>lI(this.syncEngine,n,0)),(function(){return nI.v()?new nI:new TX})())}createSyncEngine(e,n){return(function(s,r,l,c,f,d,p){const _=new jX(s,r,l,c,f,d);return p&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const r=Ve(s);me(nl,"RemoteStore shutting down."),r.Ea.add(5),await fd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}B_.provider={build:()=>new B_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class pj{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=xn.UNAUTHENTICATED,this.clientId=sT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(async l=>{me(qr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(me(qr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=CT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Dv(t,e){t.asyncQueue.verifyOperationInProgress(),me(qr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await aN(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mj(t);me(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>sI(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>sI(e.remoteStore,s))),t._onlineComponents=e}async function mj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(qr,"Using user provided OfflineComponentProvider");try{await Dv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;zu("Error using user provided cache. Falling back to memory cache: "+n),await Dv(t,new tm)}}else me(qr,"Using default OfflineComponentProvider"),await Dv(t,new dj(void 0));return t._offlineComponents}async function CN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(qr,"Using user provided OnlineComponentProvider"),await cI(t,t._uninitializedComponentsProvider._online)):(me(qr,"Using default OnlineComponentProvider"),await cI(t,new B_))),t._onlineComponents}function gj(t){return CN(t).then((e=>e.syncEngine))}async function fI(t){const e=await CN(t),n=e.eventManager;return n.onListen=ZX.bind(null,e.syncEngine),n.onUnlisten=nj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ej.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ij.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="firestore.googleapis.com",hI=!0;class pI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xN,this.ssl=hI}else this.host=e.host,this.ssl=e.ssl??hI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YQ)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IT{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new vW;switch(i.type){case"firstParty":return new wW(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=dI.get(n);i&&(me("ComponentProvider","Removing Datastore"),dI.delete(n),i.terminate())})(this),Promise.resolve()}}function yj(t,e,n,i={}){var d;t=Dr(t,IT);const s=Xu(e),r=t._getSettings(),l={...r,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(AP(`https://${c}`),xP("Firestore",!0)),r.host!==xN&&r.host!==c&&zu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...r,host:c,ssl:s,emulatorOptions:i};if(!ja(f,l)&&(t._setSettings(f),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=xn.MOCK_USER;else{p=q$(i.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Te(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new xn(E)}t._authCredentials=new _W(new yD(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new km(this.firestore,e,this._query)}}class rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(ld(n,rn._jsonSchema))return new rn(e,i||null,new be(At.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:tn("string",rn._jsonSchemaVersion),referencePath:tn("string")};class Wf extends km{constructor(e,n,i){super(e,n,fT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new be(e))}withConverter(e){return new Wf(this.firestore,e,this._path)}}function mI(t,e,...n){if(t=zn(t),arguments.length===1&&(e=sT.newId()),RW("doc","path",e),t instanceof IT){const i=At.fromString(e,...n);return xR(i),new rn(t,null,new be(i))}{if(!(t instanceof rn||t instanceof Wf))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(At.fromString(e,...n));return xR(i),new rn(t.firestore,t instanceof Wf?t.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="AsyncQueue";class yI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uN(this,"async_queue_retry"),this._c=()=>{const i=Pv();i&&me(gI,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Pv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new $a;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nc(e))throw e;me(gI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Io("INTERNAL UNHANDLED ERROR: ",vI(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=bT.createAndSchedule(this,e,n,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&Re(47125,{Pc:vI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1})(t,["next","error","complete"])}class Qf extends IT{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new yI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yI(e),this._firestoreClient=void 0,await e}}}function vj(t,e){const n=typeof t=="object"?t:PP(),i=typeof t=="string"?t:Kp,s=Y0(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=B$("firestore");r&&yj(s,...r)}return s}function RN(t){if(t._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_j(t),t._firestoreClient}function _j(t){var i,s,r;const e=t._freezeSettings(),n=(function(c,f,d,p){return new BW(c,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,AN(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new pj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(Sn.fromBase64String(e))}catch(n){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Li(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ld(e,Li._jsonSchema))return Li.fromBase64String(e.bytes)}}Li._jsonSchemaVersion="firestore/bytes/1.0",Li._jsonSchema={type:tn("string",Li._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qs._jsonSchemaVersion}}static fromJSON(e){if(ld(e,qs._jsonSchema))return new qs(e.latitude,e.longitude)}}qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:tn("string",qs._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ld(e,Gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gs(e.vectorValues);throw new Te(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gs._jsonSchemaVersion="firestore/vectorValue/1.0",Gs._jsonSchema={type:tn("string",Gs._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=/^__.*__$/;class Ej{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ud(e,this.data,n,this.fieldTransforms)}}class IN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class MT{constructor(e,n,i,s,r,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new MT({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MN(this.Ac)&&Tj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Pm(e)}Cc(e,n,i,s=!1){return new MT({Ac:e,methodName:n,Dc:i,path:wn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PN(t){const e=t._freezeSettings(),n=Pm(t._databaseId);return new wj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sj(t,e,n,i,s,r={}){const l=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);DT("Data must be an object, but it was:",l,i);const c=DN(i,l);let f,d;if(r.merge)f=new hi(l.fieldMask),d=l.fieldTransforms;else if(r.mergeFields){const p=[];for(const _ of r.mergeFields){const E=F_(e,_,n);if(!l.contains(E))throw new Te(ue.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);kN(p,E)||p.push(E)}f=new hi(p),d=l.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=l.fieldTransforms;return new Ej(new ei(c),f,d)}class Om extends Lm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}class PT extends Lm{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Jf(e.serializer,FD(e.serializer,this.Fc));return new dQ(e.path,n)}isEqual(e){return e instanceof PT&&this.Fc===e.Fc}}function bj(t,e,n,i){const s=t.Cc(1,e,n);DT("Data must be an object, but it was:",s,i);const r=[],l=ei.empty();$r(i,((f,d)=>{const p=NT(e,f,n);d=zn(d);const _=s.yc(p);if(d instanceof Om)r.push(p);else{const E=Um(d,_);E!=null&&(r.push(p),l.set(p,E))}}));const c=new hi(r);return new IN(l,c,s.fieldTransforms)}function Cj(t,e,n,i,s,r){const l=t.Cc(1,e,n),c=[F_(e,i,n)],f=[s];if(r.length%2!=0)throw new Te(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<r.length;E+=2)c.push(F_(e,r[E])),f.push(r[E+1]);const d=[],p=ei.empty();for(let E=c.length-1;E>=0;--E)if(!kN(d,c[E])){const S=c[E];let A=f[E];A=zn(A);const x=l.yc(S);if(A instanceof Om)d.push(S);else{const R=Um(A,x);R!=null&&(d.push(S),p.set(S,R))}}const _=new hi(d);return new IN(p,_,l.fieldTransforms)}function Um(t,e){if(NN(t=zn(t)))return DT("Unsupported field value:",e,t),DN(t,e);if(t instanceof Lm)return(function(i,s){if(!MN(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const r=[];let l=0;for(const c of i){let f=Um(c,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),r.push(f),l++}return{arrayValue:{values:r}}})(t,e)}return(function(i,s){if((i=zn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FD(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=wt.fromDate(i);return{timestampValue:jp(s.serializer,r)}}if(i instanceof wt){const r=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jp(s.serializer,r)}}if(i instanceof qs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Li)return{bytesValue:jD(s.serializer,i._byteString)};if(i instanceof rn){const r=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(r))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:mT(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Gs)return(function(l,c){return{mapValue:{fields:{[AD]:{stringValue:xD},[Jp]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return dT(c.serializer,d)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${oT(i)}`)})(t,e)}function DN(t,e){const n={};return TD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(t,((i,s)=>{const r=Um(s,e.mc(i));r!=null&&(n[i]=r)})),{mapValue:{fields:n}}}function NN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof qs||t instanceof Li||t instanceof rn||t instanceof Lm||t instanceof Gs)}function DT(t,e,n){if(!NN(n)||!vD(n)){const i=oT(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function F_(t,e,n){if((e=zn(e))instanceof Vm)return e._internalPath;if(typeof e=="string")return NT(t,e);throw nm("Field path arguments must be of type string or ",t,!1,void 0,n)}const Aj=new RegExp("[~\\*/\\[\\]]");function NT(t,e,n){if(e.search(Aj)>=0)throw nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vm(...e.split("."))._internalPath}catch{throw nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nm(t,e,n,i,s){const r=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(r||l)&&(f+=" (found",r&&(f+=` in field ${i}`),l&&(f+=` in document ${s}`),f+=")"),new Te(ue.INVALID_ARGUMENT,c+t+f)}function kN(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(LN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xj extends VN{data(){return super.data()}}function LN(t,e){return typeof e=="string"?NT(t,e):e instanceof Vm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ij{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return $r(e,((s,r)=>{i[s]=this.convertValue(r,n)})),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[Jp].arrayValue)==null?void 0:s.values)==null?void 0:r.map((l=>Ft(l.doubleValue)));return new Gs(n)}convertGeoPoint(e){return new qs(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=bm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Gf(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=At.fromString(e);at(sN(i),9688,{name:e});const s=new Hf(i.get(1),i.get(3)),r=new be(i.popFirst(5));return s.isEqual(n)||Io(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class vf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ya extends VN{constructor(e,n,i,s,r,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(LN("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ya._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ya._jsonSchema={type:tn("string",Ya._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Ep extends Ya{data(e={}){return super.data(e)}}class Ru{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Ep(this._firestore,this._userDataWriter,i.key,i,new vf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new Ep(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>r||c.type!==3)).map((c=>{const f=new Ep(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:Pj(c.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ru._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Pj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}Ru._jsonSchemaVersion="firestore/querySnapshot/1.0",Ru._jsonSchema={type:tn("string",Ru._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class ON extends Ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Dj(t,e,n){t=Dr(t,rn);const i=Dr(t.firestore,Qf),s=Mj(t.converter,e);return UN(i,[Sj(PN(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Bs.none())])}function Nj(t,e,n,...i){t=Dr(t,rn);const s=Dr(t.firestore,Qf),r=PN(s);let l;return l=typeof(e=zn(e))=="string"||e instanceof Vm?Cj(r,"updateDoc",t._key,e,n,i):bj(r,"updateDoc",t._key,e),UN(s,[l.toMutation(t._key,Bs.exists(!0))])}function kj(t,...e){var f,d,p;t=zn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||_I(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_I(e[i])){const _=e[i];e[i]=(f=_.next)==null?void 0:f.bind(_),e[i+1]=(d=_.error)==null?void 0:d.bind(_),e[i+2]=(p=_.complete)==null?void 0:p.bind(_)}let r,l,c;if(t instanceof rn)l=Dr(t.firestore,Qf),c=fT(t._key.path),r={next:_=>{e[i]&&e[i](Vj(l,t,_))},error:e[i+1],complete:e[i+2]};else{const _=Dr(t,km);l=Dr(_.firestore,Qf),c=_._query;const E=new ON(l);r={next:S=>{e[i]&&e[i](new Ru(l,E,_,S))},error:e[i+1],complete:e[i+2]},Rj(t._query)}return(function(E,S,A,x){const R=new hj(x),V=new JX(S,R,A);return E.asyncQueue.enqueueAndForget((async()=>HX(await fI(E),V))),()=>{R.Nu(),E.asyncQueue.enqueueAndForget((async()=>$X(await fI(E),V)))}})(RN(l),c,s,r)}function UN(t,e){return(function(i,s){const r=new $a;return i.asyncQueue.enqueueAndForget((async()=>sj(await gj(i),s,r))),r.promise})(RN(t),e)}function Vj(t,e,n){const i=n.docs.get(e._key),s=new ON(t);return new Ya(t,s,e._key,i,new vf(n.hasPendingWrites,n.fromCache),e.converter)}function Lj(t){return new PT("increment",t)}(function(e,n=!0){(function(s){ec=s})(ju),Ou(new Za("firestore",((i,{instanceIdentifier:s,options:r})=>{const l=i.getProvider("app").getImmediate(),c=new Qf(new TW(i.getProvider("auth-internal")),new SW(l,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hf(d.options.projectId,p)})(l,s),l);return r={useFetchStreams:n,...r},c._setSettings(r),c}),"PUBLIC").setMultipleInstances(!0)),Mr(SR,bR,e),Mr(SR,bR,"esm2020")})();const Oj={apiKey:"AIzaSyCHl5aMnANhKjo37pH454t2-N1Fdyk3tBQ",authDomain:"modelapp-production.firebaseapp.com",projectId:"modelapp-production",storageBucket:"modelapp-production.firebasestorage.app",messagingSenderId:"477353084689",appId:"1:477353084689:web:60423cb47bf62cbdce2eb0",measurementId:"G-80E2T96V0Z"},zN=MP(Oj),Zl=gW(zN),TI=vj(zN),BN=ie.createContext(void 0),EI="users",Uj=({children:t})=>{const[e,n]=ie.useState(null),[i,s]=ie.useState(!0),[r,l]=ie.useState(null);ie.useEffect(()=>{let E=()=>{};const S=sJ(Zl,A=>{if(A){const x=mI(TI,EI,A.uid);E=kj(x,async R=>{if(s(!0),R.exists()){const V=R.data();n({uid:A.uid,name:V.name||A.displayName||"User",email:A.email||"",credits:parseInt(String(V.credits),10)||0,plan:V.plan||"free"})}else{const V={name:A.displayName||"User",email:A.email||"",credits:1,plan:"free",createdAt:new Date};await Dj(x,V),n({...V,uid:A.uid})}l(null),s(!1)},R=>{console.error("Firestore snapshot error:",R),l("Failed to sync user data."),s(!1)})}else E(),n(null),s(!1)});return()=>{S(),E()}},[]);const _={appUser:e,isAuthenticated:!!e,isLoading:i,error:r,signInWithGoogle:async()=>{s(!0),l(null);try{const E=new _o;await CJ(Zl,E)}catch(E){const S=E instanceof Error?E.message:"Authentication failed.";l(S),s(!1)}},logout:async()=>{await oJ(Zl)},spendCredit:async()=>{if(!e||e.credits<=0)throw new Error("No credits left.");const E=mI(TI,EI,e.uid);await Nj(E,{credits:Lj(-1)})},initiatePurchase:async E=>{if(!Zl.currentUser)throw l("You must be logged in to make a purchase."),new Error("User not authenticated.");s(!0);try{const S=await Zl.currentUser.getIdToken(!0),A=Zl.currentUser.uid,x="https://fitcheck-payment.koora-live.workers.dev/",R=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:E,token:S,uid:A})}),V=await R.json();if(R.ok&&V.redirect_url)window.location.href=V.redirect_url;else throw new Error(V.error||"Failed to create PayPal order.")}catch(S){const A=S instanceof Error?S.message:"An unknown error occurred.";console.error("Purchase initiation failed:",A),l(A)}finally{s(!1)}}};return P.jsx(BN.Provider,{value:_,children:t})},im=()=>{const t=ie.useContext(BN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},wI="https://storage.googleapis.com/gemini-95-icons/asr-tryon-model.png",zj="https://storage.googleapis.com/gemini-95-icons/asr-tryon.jpg",Bj=({onClose:t,onGoogleSignIn:e,onInitiatePurchase:n,isAuthenticated:i,credits:s,isLoading:r})=>P.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4",onClick:t,children:P.jsxs(Pn.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md",onClick:l=>l.stopPropagation(),children:[P.jsxs("h2",{className:"text-3xl font-serif font-bold text-gray-900 mb-4 flex items-center",children:[P.jsx(v4,{className:"w-6 h-6 mr-2 text-yellow-500"}),i?"Activate Your Session":"Start Your Free Trial"]}),i?P.jsxs(P.Fragment,{children:[P.jsxs("p",{className:"text-gray-600 mb-6",children:["You have ",P.jsxs("strong",{className:"text-gray-900",children:[s," credit(s)"]})," remaining. Create a model requires 1 credit."]}),P.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Get More Credits"}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("div",{className:"border border-indigo-200 bg-indigo-50 p-3 rounded-lg flex justify-between items-center",children:[P.jsxs("div",{children:[P.jsx("p",{className:"font-semibold text-indigo-700",children:"Basic Plan"}),P.jsx("p",{className:"text-sm text-indigo-600",children:"20 Credits - Great for starting!"})]}),P.jsx("button",{onClick:()=>n("basic"),disabled:r,className:"px-4 py-2 text-sm font-bold text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition disabled:opacity-50",children:r?"...":"$1.99"})]}),P.jsxs("div",{className:"border border-green-200 bg-green-50 p-3 rounded-lg flex justify-between items-center",children:[P.jsxs("div",{children:[P.jsx("p",{className:"font-semibold text-green-700",children:"Pro Plan"}),P.jsx("p",{className:"text-sm text-green-600",children:"50 Credits - Best Value!"})]}),P.jsx("button",{onClick:()=>n("pro"),disabled:r,className:"px-4 py-2 text-sm font-bold text-white bg-green-600 rounded-md hover:bg-green-700 transition disabled:opacity-50",children:r?"...":"$3.99"})]})]}),P.jsx("button",{onClick:t,className:"mt-6 w-full py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition",children:"Cancel"})]}):P.jsxs(P.Fragment,{children:[P.jsx("p",{className:"text-gray-600 mb-6",children:"Sign in with your Google account to get your **one-time free credit** and save your creations."}),P.jsxs("button",{onClick:e,disabled:r,className:"w-full relative flex items-center justify-center px-8 py-3 text-base font-semibold text-white bg-blue-600 rounded-md cursor-pointer group hover:bg-blue-700 transition-colors disabled:opacity-50",children:[P.jsx(g4,{className:"w-5 h-5 mr-2"}),r?"Signing In...":"Sign in with Google"]}),P.jsx("button",{onClick:t,className:"mt-3 w-full py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition",children:"Maybe Later (Use Sample Model)"})]})]})}),Fj=({onModelFinalized:t,onSampleModelSelect:e,onGetStarted:n})=>{const{appUser:i,isAuthenticated:s,signInWithGoogle:r,spendCredit:l,initiatePurchase:c}=im(),[f,d]=ie.useState(null),[p,_]=ie.useState(null),[E,S]=ie.useState(!1),[A,x]=ie.useState(null),[R,V]=ie.useState(!1),O=async()=>{try{S(!0),await r(),V(!1)}catch(D){x(Vp(D,"Failed to sign in with Google"))}finally{S(!1)}},F=ie.useCallback(async D=>{if(!D.type.startsWith("image/")){x("Please select an image file.");return}if(!i||i.credits<=0){x("You need at least 1 credit to generate a model."),V(!0);return}const M=new FileReader;M.onload=async k=>{var z;const U=(z=k.target)==null?void 0:z.result;d(U),S(!0),_(null),x(null);try{await l();const B=await I$(D);_(B)}catch(B){x(Vp(B,"Failed to create model")),d(null)}finally{S(!1)}},M.readAsDataURL(D)},[i,l]),H=()=>{if(s&&i&&i.credits>0){const D=document.createElement("input");D.type="file",D.accept="image/*",D.onchange=M=>{M.target.files&&M.target.files[0]&&F(M.target.files[0])},D.click()}else V(!0)},Y=()=>{d(null),_(null),S(!1),x(null)},Z={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}};return P.jsxs(P.Fragment,{children:[P.jsx(os,{mode:"wait",children:f?P.jsxs(Pn.div,{className:"w-full max-w-6xl mx-auto h-full flex flex-col md:flex-row items-center justify-center gap-8 md:gap-12",variants:Z,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.4,ease:"easeInOut"},children:[P.jsxs("div",{className:"md:w-1/2 flex-shrink-0 flex flex-col items-center md:items-start",children:[P.jsxs("div",{className:"text-center md:text-left",children:[P.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-gray-900 leading-tight",children:"The New You"}),P.jsx("p",{className:"mt-2 text-md text-gray-600",children:"Drag the slider to see your transformation."})]}),E&&P.jsxs("div",{className:"flex items-center gap-3 text-lg text-gray-700 font-serif mt-6",children:[P.jsx(_r,{}),P.jsx("span",{children:"Generating your model..."})]}),A&&P.jsxs("div",{className:"text-center md:text-left text-red-600 max-w-md mt-6",children:[P.jsx("p",{className:"font-semibold",children:"Generation Failed"}),P.jsx("p",{className:"text-sm mb-4",children:A}),P.jsx("button",{onClick:Y,className:"text-sm font-semibold text-gray-700 hover:underline",children:"Try Again"})]}),P.jsx(os,{children:p&&!E&&!A&&P.jsxs(Pn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.5},className:"flex flex-col sm:flex-row items-center gap-4 mt-8",children:[P.jsx("button",{onClick:Y,className:"w-full sm:w-auto px-6 py-3 text-base font-semibold text-gray-700 bg-gray-200 rounded-md cursor-pointer hover:bg-gray-300 transition-colors",children:"Use Different Photo"}),P.jsx("button",{onClick:()=>t(p),className:"w-full sm:w-auto relative inline-flex items-center justify-center px-8 py-3 text-base font-semibold text-white bg-gray-900 rounded-md cursor-pointer group hover:bg-gray-700 transition-colors",children:"Proceed to Styling →"})]})})]}),P.jsx("div",{className:"md:w-1/2 w-full flex items-center justify-center",children:P.jsx("div",{className:`relative rounded-[1.25rem] transition-all duration-700 ease-in-out ${E?"border border-gray-300 animate-pulse":"border-transparent"}`,children:P.jsx(IA,{firstImage:f,secondImage:p??f,slideMode:"drag",className:"w-[280px] h-[420px] sm:w-[320px] sm:h-[480px] lg:w-[400px] lg:h-[600px] rounded-2xl bg-gray-200"})})})]},"compare"):P.jsxs(Pn.div,{className:"w-full max-w-7xl mx-auto flex flex-col lg:flex-row items-center justify-center gap-8 lg:gap-12",variants:Z,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.4,ease:"easeInOut"},children:[P.jsx("div",{className:"lg:w-1/2 flex flex-col items-center lg:items-start text-center lg:text-left",children:P.jsxs("div",{className:"max-w-lg",children:[P.jsx("h1",{className:"text-5xl md:text-6xl font-serif font-bold text-gray-900 leading-tight",children:"Create Your Model for Any Look."}),P.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Ever wondered how an outfit would look on you? Stop guessing. Upload a photo or use our sample model to start styling. Our AI creates your personal model, ready to try on anything."}),P.jsx("hr",{className:"my-8 border-gray-200"}),P.jsxs("div",{className:"flex flex-col items-center lg:items-start w-full gap-3",children:[P.jsx("button",{onClick:H,className:"w-full sm:w-auto flex-grow relative flex items-center justify-center px-8 py-3 text-base font-semibold text-white bg-gray-900 rounded-md cursor-pointer group hover:bg-gray-700 transition-colors",disabled:E,children:s&&i&&i.credits>0?`Create Model (${i.credits} Left)`:"Get Started for Free"}),P.jsx("button",{onClick:()=>e(wI),className:"w-full sm:w-auto px-6 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-md cursor-pointer hover:bg-gray-200 transition-colors",children:"Use Sample Model"}),P.jsx("p",{className:"text-gray-500 text-sm",children:"Select a clear, full-body photo for best results."}),P.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"By uploading, you agree not to create harmful content. This service is for creative and responsible use only."}),A&&P.jsx("p",{className:"text-red-500 text-sm mt-2",children:A})]})]})}),P.jsx("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center",children:P.jsx(IA,{firstImage:zj,secondImage:wI,slideMode:"drag",className:"w-full max-w-sm aspect-[2/3] rounded-2xl bg-gray-200"})})]},"uploader")}),P.jsx(os,{children:R&&P.jsx(Bj,{onClose:()=>V(!1),onGoogleSignIn:O,onInitiatePurchase:c,isAuthenticated:s,credits:(i==null?void 0:i.credits)??0,isLoading:E})})]})},qj=({displayImageUrl:t,onStartOver:e,isLoading:n,loadingMessage:i,onSelectPose:s,poseInstructions:r,currentPoseIndex:l,availablePoseKeys:c,isShareable:f,onShare:d})=>{const[p,_]=ie.useState(!1),[E,S]=ie.useState("idle"),A=()=>{if(!t)return;const O=document.createElement("a");O.href=t,O.download=`virtual-try-on-${Date.now()}.png`,document.body.appendChild(O),O.click(),document.body.removeChild(O)},x=()=>{f&&(d(),S("copied"),setTimeout(()=>S("idle"),2e3))},R=()=>{s((l-1+r.length)%r.length)},V=()=>{s((l+1)%r.length)};return P.jsxs("div",{className:"w-full h-full flex items-center justify-center p-4 relative animate-zoom-in group",children:[P.jsxs("div",{className:"absolute top-4 left-4 right-4 z-30 flex justify-between items-start",children:[P.jsxs("button",{onClick:e,className:"flex items-center justify-center text-center bg-white/60 border border-gray-300/80 text-gray-700 font-semibold py-2 px-4 rounded-full transition-all duration-200 ease-in-out hover:bg-white hover:border-gray-400 active:scale-95 text-sm backdrop-blur-sm",children:[P.jsx(o4,{className:"w-4 h-4 mr-2"}),"Start Over"]}),t&&!n&&P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:"relative",title:f?"":"Sharing is only available for outfits created with the sample model.",children:P.jsxs("button",{onClick:x,disabled:!f||E==="copied",className:"flex items-center justify-center text-center bg-white/60 border border-gray-300/80 text-gray-700 font-semibold py-2 px-4 rounded-full transition-all duration-200 ease-in-out hover:bg-white hover:border-gray-400 active:scale-95 text-sm backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Share outfit",children:[E==="idle"?P.jsx(p4,{className:"w-4 h-4 mr-2"}):null,E==="copied"?"Copied!":"Share"]})}),P.jsxs("button",{onClick:A,className:"flex items-center justify-center text-center bg-white/60 border border-gray-300/80 text-gray-700 font-semibold py-2 px-4 rounded-full transition-all duration-200 ease-in-out hover:bg-white hover:border-gray-400 active:scale-95 text-sm backdrop-blur-sm","aria-label":"Download image",children:[P.jsx(h4,{className:"w-4 h-4 mr-2"}),"Download"]})]})]}),P.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[t?P.jsx("img",{src:t,alt:"Virtual try-on model",className:"max-w-full max-h-full object-contain transition-opacity duration-500 animate-fade-in rounded-lg"},t):P.jsxs("div",{className:"w-[400px] h-[600px] bg-gray-100 border border-gray-200 rounded-lg flex flex-col items-center justify-center",children:[P.jsx(_r,{}),P.jsx("p",{className:"text-md font-serif text-gray-600 mt-4",children:"Loading Model..."})]}),P.jsx(os,{children:n&&P.jsxs(Pn.div,{className:"absolute inset-0 bg-white/80 backdrop-blur-md flex flex-col items-center justify-center z-20 rounded-lg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[P.jsx(_r,{}),i&&P.jsx("p",{className:"text-lg font-serif text-gray-700 mt-4 text-center px-4",children:i})]})})]}),t&&!n&&P.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-30 opacity-0 group-hover:opacity-100 transition-opacity duration-300",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:[P.jsx(os,{children:p&&P.jsx(Pn.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"absolute bottom-full mb-3 w-64 bg-white/80 backdrop-blur-lg rounded-xl p-2 border border-gray-200/80",children:P.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map((O,F)=>P.jsx("button",{onClick:()=>s(F),disabled:n||F===l,className:"w-full text-left text-sm font-medium text-gray-800 p-2 rounded-md hover:bg-gray-200/70 disabled:opacity-50 disabled:bg-gray-200/70 disabled:font-bold disabled:cursor-not-allowed",children:O},O))})})}),P.jsxs("div",{className:"flex items-center justify-center gap-2 bg-white/60 backdrop-blur-md rounded-full p-2 border border-gray-300/50",children:[P.jsx("button",{onClick:R,"aria-label":"Previous pose",className:"p-2 rounded-full hover:bg-white/80 active:scale-90 transition-all disabled:opacity-50",disabled:n,children:P.jsx(l4,{className:"w-5 h-5 text-gray-800"})}),P.jsx("span",{className:"text-sm font-semibold text-gray-800 w-48 text-center truncate",title:r[l],children:r[l]}),P.jsx("button",{onClick:V,"aria-label":"Next pose",className:"p-2 rounded-full hover:bg-white/80 active:scale-90 transition-all disabled:opacity-50",disabled:n,children:P.jsx(u4,{className:"w-5 h-5 text-gray-800"})})]})]})]})},Gj=({onGarmentSelect:t,activeGarmentIds:e,isLoading:n,wardrobe:i,onRemoveItem:s})=>{const[r,l]=ie.useState(null),c=async d=>{if(!(n||e.includes(d.id))){l(null);try{const p=await qq(d.url,d.name);t(p,d)}catch(p){l("Failed to load wardrobe item."),console.error(p)}}},f=d=>{if(d.target.files&&d.target.files[0]){const p=d.target.files[0];if(!p.type.startsWith("image/")){l("Please select an image file.");return}const _={id:`custom-${Date.now()}`,name:p.name,url:URL.createObjectURL(p)};t(p,_)}};return P.jsxs("div",{className:"pt-6 border-t border-gray-400/50",children:[P.jsx("h2",{className:"text-xl font-serif tracking-wider text-gray-800 mb-3",children:"Wardrobe"}),P.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.map(d=>{const p=e.includes(d.id),_=d.id.startsWith("custom-");return P.jsxs("div",{className:"relative group",children:[P.jsxs("button",{onClick:()=>c(d),disabled:n||p,className:"w-full aspect-square border rounded-lg overflow-hidden transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-800 disabled:opacity-60 disabled:cursor-not-allowed","aria-label":`Select ${d.name}`,children:[P.jsx("img",{src:d.url,alt:d.name,className:"w-full h-full object-cover"}),P.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:P.jsx("p",{className:"text-white text-xs font-bold text-center p-1",children:d.name})}),p&&P.jsx("div",{className:"absolute inset-0 bg-gray-900/70 flex items-center justify-center",children:P.jsx(ap,{className:"w-8 h-8 text-white"})})]}),_&&!p&&P.jsx("button",{onClick:()=>s(d.id),disabled:n,className:"absolute -top-2 -right-2 z-10 w-6 h-6 bg-white rounded-full flex items-center justify-center text-gray-500 hover:text-red-600 hover:bg-red-50 border border-gray-300 transition-all opacity-0 group-hover:opacity-100 disabled:opacity-50","aria-label":`Delete ${d.name}`,children:P.jsx(t1,{className:"w-4 h-4"})})]},d.id)}),P.jsxs("label",{htmlFor:"custom-garment-upload",className:`relative aspect-square border-2 border-dashed rounded-lg flex flex-col items-center justify-center text-gray-500 transition-colors ${n?"cursor-not-allowed bg-gray-100":"hover:border-gray-400 hover:text-gray-600 cursor-pointer"}`,children:[P.jsx(s4,{className:"w-6 h-6 mb-1"}),P.jsx("span",{className:"text-xs text-center",children:"Upload"}),P.jsx("input",{id:"custom-garment-upload",type:"file",className:"hidden",accept:"image/png, image/jpeg, image/webp, image/avif, image/heic, image/heif",onChange:f,disabled:n})]})]}),i.length===0&&P.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"Your uploaded garments will appear here."}),r&&P.jsx("p",{className:"text-red-500 text-sm mt-4",children:r})]})},Hj=({outfitHistory:t,onRemoveLastGarment:e})=>P.jsxs("div",{className:"flex flex-col",children:[P.jsx("h2",{className:"text-xl font-serif tracking-wider text-gray-800 border-b border-gray-400/50 pb-2 mb-3",children:"Outfit Stack"}),P.jsxs("div",{className:"space-y-2",children:[t.map((n,i)=>{var s,r,l;return P.jsxs("div",{className:"flex items-center justify-between bg-white/50 p-2 rounded-lg animate-fade-in border border-gray-200/80",children:[P.jsxs("div",{className:"flex items-center overflow-hidden",children:[P.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 mr-3 text-xs font-bold text-gray-600 bg-gray-200 rounded-full",children:i+1}),n.garment&&P.jsx("img",{src:n.garment.url,alt:n.garment.name,className:"flex-shrink-0 w-12 h-12 object-cover rounded-md mr-3"}),P.jsx("span",{className:"font-semibold text-gray-800 truncate",title:(s=n.garment)==null?void 0:s.name,children:n.garment?n.garment.name:"Base Model"})]}),i>0&&i===t.length-1&&P.jsx("button",{onClick:e,className:"flex-shrink-0 text-gray-500 hover:text-red-600 transition-colors p-2 rounded-md hover:bg-red-50","aria-label":`Remove ${(r=n.garment)==null?void 0:r.name}`,children:P.jsx(a4,{className:"w-5 h-5"})})]},((l=n.garment)==null?void 0:l.id)||"base")}),t.length===1&&P.jsx("p",{className:"text-center text-sm text-gray-500 pt-4",children:"Your stacked items will appear here. Select an item from the wardrobe below."})]})]});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Nv=[{id:"gemini-sweat",name:"Gemini Sweat",url:"https://storage.googleapis.com/gemini-95-icons/try-on/gemini-sweat-2.png"},{id:"gemini-tee",name:"Gemini Tee",url:"https://storage.googleapis.com/gemini-95-icons/try-on/Gemini-tee.png"},{id:"blue-denim-jacket",name:"Blue Denim Jacket",url:"https://storage.googleapis.com/gemini-95-icons/try-on/blue-denim-jacket.png"},{id:"red-graphic-tee",name:"Red Graphic Tee",url:"https://storage.googleapis.com/gemini-95-icons/try-on/red-graphic-tee.png"},{id:"black-skinny-jeans",name:"Black Skinny Jeans",url:"https://storage.googleapis.com/gemini-95-icons/try-on/black-skinny-jeans.png"}],SI=["Remix idea: Generate a shareable lookbook.","Remix idea: Integrate an e-commerce API to find similar items.","Remix idea: Add accessories like hats, sunglasses, or bags.","Remix idea: Create a 'style score' for outfits.","Remix idea: Let users save their favorite outfits.","Remix idea: Generate different colorways for garments."],$j=({isOnDressingScreen:t=!1})=>{const[e,n]=ie.useState(0);return ie.useEffect(()=>{const i=setInterval(()=>{n(s=>(s+1)%SI.length)},4e3);return()=>clearInterval(i)},[]),P.jsx("footer",{className:`fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-200/60 p-3 z-50 ${t?"hidden sm:block":""}`,children:P.jsxs("div",{className:"mx-auto flex flex-col sm:flex-row items-center justify-between text-xs text-gray-600 max-w-7xl px-4",children:[P.jsxs("p",{children:["Created by"," ",P.jsx("a",{href:"https://www.instagram.com/koralive.football",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-gray-800 hover:underline",children:"@Demphil"})]}),P.jsx("div",{className:"h-4 mt-1 sm:mt-0 flex items-center overflow-hidden",children:P.jsx(os,{mode:"wait",children:P.jsx(Pn.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5,ease:"easeInOut"},className:"text-center sm:text-right",children:SI[e]},e)})})]})})},Yj=({user:t,onHistoryClick:e,onEarnCreditsClick:n,onUserMenuClick:i})=>{const{isAuthenticated:s,credits:r,appUser:l}=im();return!s||!l?null:(l.name.split(" ")[0],P.jsx("header",{className:"fixed top-0 left-0 right-0 z-10 bg-white/95 backdrop-blur-md border-b border-gray-200 py-2 px-4 shadow-sm",children:P.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[P.jsx("div",{className:"text-xl font-serif font-bold text-gray-900",children:"BeepCheck"}),P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsxs("div",{className:"flex items-center text-sm font-semibold text-gray-700 bg-gray-100 px-3 py-1.5 rounded-full shadow-inner",children:[P.jsx(m4,{className:"w-4 h-4 text-yellow-500 mr-2"}),r," Credits"]}),P.jsx("button",{onClick:n,className:"text-sm font-semibold text-white bg-green-500 px-3 py-1.5 rounded-full hover:bg-green-600 transition-colors",children:"+ Earn"}),P.jsx("button",{onClick:i,className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"User Menu",children:P.jsx(n1,{className:"w-6 h-6 text-gray-700"})})]})]})}))},eu=["Full frontal view, hands on hips","Slightly turned, 3/4 view","Side profile view","Jumping in the air, mid-action shot","Walking towards camera","Leaning against a wall"],Kj=t=>{const[e,n]=ie.useState(()=>window.matchMedia(t).matches);return ie.useEffect(()=>{const i=window.matchMedia(t),s=r=>n(r.matches);return i.addEventListener("change",s),i.matches!==e&&n(i.matches),()=>{i.removeEventListener("change",s)}},[t,e]),e},Jj=()=>{const{appUser:t,isAuthenticated:e,isLoading:n,error:i,spendCredit:s,signInWithGoogle:r,logout:l,initiatePurchase:c}=im(),[f,d]=ie.useState("start"),[p,_]=ie.useState(null),[E,S]=ie.useState([]),[A,x]=ie.useState(0),[R,V]=ie.useState(!1),[O,F]=ie.useState(""),[H,Y]=ie.useState(null),[Z,D]=ie.useState(0),[M,k]=ie.useState(!1),[U,z]=ie.useState(Nv),[B,L]=ie.useState(!1);Kj("(max-width: 767px)");const[Ae,Se]=ie.useState(null),j=ie.useMemo(()=>E.slice(0,A+1),[E,A]),le=ie.useMemo(()=>j.slice(1).map(ve=>{var Be;return(Be=ve.garment)==null?void 0:Be.id}).filter(Boolean),[j]),he=ie.useMemo(()=>{if(E.length===0)return p;const ve=E[A];if(!ve)return p;const Be=eu[Z];return ve.poseImages[Be]??Object.values(ve.poseImages)[0]},[E,A,Z,p]),Me=ie.useMemo(()=>{if(E.length===0)return[];const ve=E[A];return ve?Object.keys(ve.poseImages):[]},[E,A]);ie.useEffect(()=>{!n&&f==="start"&&!e&&p&&Ne()},[e,n,f,p]);const qe=(ve,Be)=>{console.log(`[Transaction] ${ve}: ${Be}`)},G=ve=>async(...Be)=>{var et;if((t==null?void 0:t.plan)==="premium")return ve(...Be);if(!e){await r();return}if(t&&t.credits>0)try{return await s(),qe(`Generation: ${((et=Be[1])==null?void 0:et.name)||"Pose Change"}`,-1),ve(...Be)}catch{Se("earnCredits");return}else{Se("earnCredits");return}},oe=async()=>{Se(null);try{await l()}catch{Y("Failed to log out.")}},de=ve=>{_(ve),S([{garment:null,poseImages:{[eu[0]]:ve}}]),x(0),L(!1),d("ready")},pe=ve=>{_(ve),S([{garment:null,poseImages:{[eu[0]]:ve}}]),x(0),L(!0),d("ready")},Ie=()=>{const ve=document.createElement("input");ve.type="file",ve.accept="image/*",ve.onchange=Be=>{const et=Be.target;et.files&&et.files[0]&&de(URL.createObjectURL(et.files[0]))},ve.click()},Ne=()=>{if(d("start"),_(null),S([]),x(0),V(!1),F(""),Y(null),D(0),k(!1),z(Nv),L(!1),window.history.pushState){const ve=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.pushState({path:ve},"",ve)}},$e=ie.useCallback(async(ve,Be)=>{var Fe;if(!he||R)return;const et=E[A+1];if(et&&((Fe=et.garment)==null?void 0:Fe.id)===Be.id){x(Gt=>Gt+1),D(0);return}Y(null),V(!0),F(`Adding ${Be.name}...`);try{const Gt=await M$(he,ve),_i={garment:Be,poseImages:{[eu[0]]:Gt}};S(Bn=>[...Bn.slice(0,A+1),_i]),x(Bn=>Bn+1),D(0)}catch(Gt){Y(Vp(Gt,"Failed to apply garment"))}finally{V(!1),F("")}},[he,R,E,A]),kt=G($e),yt=()=>{A>0&&(x(ve=>ve-1),D(0))},Qs=ie.useCallback(async(ve,Be=!1,et=A,Fe=E)=>{if(R||Fe.length===0||!Be&&ve===Z)return;const Gt=eu[ve],_i=Fe[et];if(_i.poseImages[Gt]){D(ve);return}const Bn=Object.values(_i.poseImages)[0];if(!Bn)return;Y(null),V(!0),F("Changing pose...");const fs=Z;D(ve);try{const Qr=await P$(Bn,Gt);S(ll=>{const Lo=[...ll];return Lo[et]&&(Lo[et].poseImages[Gt]=Qr),Lo})}catch(Qr){Y(Vp(Qr,"Failed to change pose")),D(fs)}finally{V(!1),F("")}},[Z,E,R,A]),No=G(Qs),ko=ie.useCallback(()=>{if(B)try{const Be=btoa(JSON.stringify({m:p,g:le,p:Z})),et=`${window.location.origin}${window.location.pathname}?share=${Be}`,Fe=document.createElement("textarea");Fe.value=et,document.body.appendChild(Fe),Fe.select(),document.execCommand("copy"),document.body.removeChild(Fe),Y("Share link copied to clipboard!"),setTimeout(()=>Y(null),3e3)}catch{Y("Could not create share link.")}},[B,p,le,Z]),Vo=ie.useCallback(ve=>{if(!Nv.some(Be=>Be.id===ve)){if(E.some(Be=>{var et;return((et=Be.garment)==null?void 0:et.id)===ve})){Y("Cannot delete an item that is part of the current outfit history. Please 'Start Over' to delete this item."),setTimeout(()=>Y(null),5e3);return}window.confirm("Are you sure you want to permanently delete this item? This action cannot be undone.")&&z(Be=>{const et=Be.find(Fe=>Fe.id===ve);return et!=null&&et.url.startsWith("blob:")&&URL.revokeObjectURL(et.url),Be.filter(Fe=>Fe.id!==ve)})}},[E]),ti={initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15}},Kr=()=>{if(n)return P.jsxs("div",{className:"w-screen h-screen flex flex-col items-center justify-center bg-gray-50 text-center",children:[P.jsx(_r,{}),P.jsx("p",{className:"text-lg font-serif text-gray-700 mt-4 px-4",children:"Loading your session..."}),i&&P.jsx("p",{className:"text-red-500 mt-2",children:i})]});switch(f){case"start":return P.jsx(Pn.div,{className:"w-screen min-h-screen flex items-start sm:items-center justify-center bg-gray-50 p-4 pb-20",variants:ti,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.5,ease:"easeInOut"},children:P.jsx(Fj,{onModelFinalized:de,onSampleModelSelect:pe,onGetStarted:e?Ie:r})},"start-screen");case"recreating":return P.jsxs("div",{className:"w-screen h-screen flex flex-col items-center justify-center bg-white text-center",children:[P.jsx(_r,{}),P.jsx("p",{className:"text-lg font-serif text-gray-700 mt-4 px-4",children:O}),H&&P.jsx("p",{className:"text-red-500 mt-2",children:H})]});case"ready":return P.jsxs(Pn.div,{className:"relative flex flex-col h-screen bg-white overflow-hidden",variants:ti,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.5,ease:"easeInOut"},children:[P.jsx(Yj,{user:t?{name:t.name,credits:t.credits,isAuthenticated:!0,plan:t.plan,generationsUsedThisSession:0,transactionHistory:[]}:{name:"Guest",credits:0,isAuthenticated:!1,plan:"free",generationsUsedThisSession:0,transactionHistory:[]},onHistoryClick:()=>Se("history"),onEarnCreditsClick:()=>Se("earnCredits"),onUserMenuClick:e?()=>Se("userMenu"):r}),P.jsxs("main",{className:"flex-grow relative flex flex-col md:flex-row overflow-hidden pt-14",children:[P.jsx("div",{className:"w-full h-full flex-grow flex items-center justify-center bg-white pb-16 relative",children:P.jsx(qj,{displayImageUrl:he,onStartOver:Ne,isLoading:R,loadingMessage:O,onSelectPose:No,poseInstructions:eu,currentPoseIndex:Z,availablePoseKeys:Me,isShareable:B,onShare:ko})}),P.jsxs("aside",{className:`absolute md:relative md:flex-shrink-0 bottom-0 right-0 h-auto md:h-full w-full md:w-1/3 md:max-w-sm bg-white/80 backdrop-blur-md flex flex-col border-t md:border-t-0 md:border-l border-gray-200/60 transition-transform duration-500 ease-in-out ${M?"translate-y-[calc(100%-4.5rem)]":"translate-y-0"} md:translate-y-0`,style:{transitionProperty:"transform"},children:[P.jsx("button",{onClick:()=>k(!M),className:"md:hidden w-full h-8 flex items-center justify-center bg-gray-100/50","aria-label":M?"Expand panel":"Collapse panel",children:M?P.jsx(f4,{className:"w-6 h-6 text-gray-500"}):P.jsx(d4,{className:"w-6 h-6 text-gray-500"})}),P.jsxs("div",{className:"p-4 md:p-6 pb-20 overflow-y-auto flex-grow flex flex-col gap-8",children:[H&&P.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md",role:"alert",children:[P.jsx("p",{className:"font-bold",children:"Error"}),P.jsx("p",{children:H})]}),P.jsx(Hj,{outfitHistory:j,onRemoveLastGarment:yt}),P.jsx(Gj,{onGarmentSelect:kt,activeGarmentIds:j.map(ve=>{var Be;return(Be=ve.garment)==null?void 0:Be.id}).filter(Boolean),isLoading:R,wardrobe:U,onRemoveItem:Vo})]})]})]})]},"main-app")}},vi=({children:ve,onClose:Be})=>P.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Be,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:P.jsxs(Pn.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},onClick:et=>et.stopPropagation(),className:"relative bg-white rounded-2xl w-full max-w-md flex flex-col shadow-xl",children:[ve,P.jsx("button",{onClick:Be,className:"absolute top-3 right-3 p-1 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-800",children:P.jsx(t1,{className:"w-6 h-6"})})]})}),Jr=()=>P.jsx(vi,{onClose:()=>Se(null),children:P.jsxs("div",{className:"p-8",children:[P.jsx("h2",{className:"text-3xl font-serif tracking-wider text-gray-800 mb-2 text-center",children:"Out of Credits!"}),P.jsxs("p",{className:"text-gray-600 mb-6 text-center",children:["Your current credits: ",P.jsx("strong",{className:"text-gray-900",children:(t==null?void 0:t.credits)??0}),". Please purchase or earn more."]}),P.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-6 rounded-lg",children:[P.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Premium Plan"}),P.jsx("p",{className:"text-gray-600 mt-1",children:"Get unlimited generations, high-resolution exports, and priority support."}),P.jsxs("ul",{className:"mt-4 space-y-2 text-gray-700",children:[P.jsxs("li",{className:"flex items-center",children:[P.jsx(ap,{className:"w-5 h-5 text-green-500 mr-2"})," Unlimited Generations"]}),P.jsxs("li",{className:"flex items-center",children:[P.jsx(ap,{className:"w-5 h-5 text-green-500 mr-2"})," Faster Processing"]}),P.jsxs("li",{className:"flex items-center",children:[P.jsx(ap,{className:"w-5 h-5 text-green-500 mr-2"})," Save Looks to Your Profile"]})]}),P.jsx("button",{onClick:()=>Se("earnCredits"),className:"mt-6 w-full text-center bg-gray-900 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 hover:bg-gray-700",children:"Buy Credits Now"})]})]})}),Wr=()=>{const[ve,Be]=ie.useState(!1),{initiatePurchase:et,isLoading:Fe,error:Gt}=im(),_i=async()=>{if(!ve){Be(!0);try{await new Promise(Bn=>setTimeout(Bn,3e3)),qe("Watched Ad (Simulation)",1)}catch{Y("Failed to add credit after ad. Try again.")}finally{Be(!1)}}};return P.jsx(vi,{onClose:()=>Se(null),children:P.jsxs("div",{className:"p-8",children:[P.jsx("h2",{className:"text-3xl font-serif tracking-wider text-gray-800 mb-2 text-center",children:"Get More Credits"}),P.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Watch an ad for a free credit or purchase a bundle."}),P.jsxs("div",{className:"space-y-4",children:[P.jsx("button",{onClick:_i,disabled:ve,className:"w-full text-center bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 hover:bg-blue-500 flex items-center justify-center disabled:bg-blue-300",children:ve?P.jsx(_r,{}):P.jsxs(P.Fragment,{children:[P.jsx(c4,{className:"w-5 h-5 mr-2"})," Watch Ad (Earn 1 Credit)"]})}),Gt&&P.jsx("p",{className:"text-red-500 text-sm mt-2 text-center",children:Gt}),P.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.jsxs("button",{onClick:()=>et("basic"),disabled:Fe,className:"text-center bg-gray-200 text-gray-700 font-semibold py-3 px-4 rounded-lg transition-colors duration-200 hover:bg-gray-300 relative",children:[Fe?P.jsx(_r,{className:"absolute inset-0 m-auto"}):null,P.jsx("p",{className:`font-bold text-lg ${Fe?"opacity-0":""}`,children:"20 Credits"}),P.jsx("p",{className:`text-sm ${Fe?"opacity-0":""}`,children:"$5.00"})]}),P.jsxs("button",{onClick:()=>et("pro"),disabled:Fe,className:"text-center bg-gray-200 text-gray-700 font-semibold py-3 px-4 rounded-lg transition-colors duration-200 hover:bg-gray-300 relative",children:[Fe?P.jsx(_r,{className:"absolute inset-0 m-auto"}):null,P.jsx("p",{className:`font-bold text-lg ${Fe?"opacity-0":""}`,children:"50 Credits"}),P.jsx("p",{className:`text-sm ${Fe?"opacity-0":""}`,children:"$10.00"})]})]})]})]})})},It=()=>P.jsx(vi,{onClose:()=>Se(null),children:P.jsxs("div",{className:"p-6",children:[P.jsx("h2",{className:"text-2xl font-serif tracking-wider text-gray-800 mb-4 border-b pb-2",children:"Transaction History"}),P.jsx("p",{className:"text-center text-gray-500 py-8",children:"Transaction history is currently managed by Firestore. Please implement a Firestore listener here."})]})}),Vt=()=>P.jsx(vi,{onClose:()=>Se(null),children:P.jsxs("div",{className:"p-4 w-full",children:[P.jsx("h3",{className:"text-xl font-serif font-bold text-gray-800 border-b pb-2 mb-4",children:"Account"}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs("button",{onClick:()=>Se("history"),className:"w-full flex items-center px-4 py-3 bg-gray-50 rounded-lg text-gray-700 font-semibold hover:bg-gray-100 transition-colors",children:[P.jsx(n1,{className:"w-5 h-5 mr-3"})," View History"]}),P.jsxs("button",{onClick:()=>Se("earnCredits"),className:"w-full flex items-center px-4 py-3 bg-gray-50 rounded-lg text-gray-700 font-semibold hover:bg-gray-100 transition-colors",children:[P.jsx(y4,{className:"w-5 h-5 mr-3"})," Earn / Buy Credits"]}),P.jsx("hr",{className:"my-2 border-gray-200"}),P.jsxs("button",{onClick:oe,className:"w-full flex items-center px-4 py-3 bg-red-500 rounded-lg text-white font-bold hover:bg-red-600 transition-colors",children:[P.jsx(_4,{className:"w-5 h-5 mr-3"})," Sign Out"]})]})]})});return P.jsxs("div",{className:"font-sans",children:[P.jsx(os,{mode:"wait",children:Kr()}),P.jsxs(os,{children:[Ae==="paywall"&&P.jsx(Jr,{}),Ae==="earnCredits"&&P.jsx(Wr,{}),Ae==="history"&&P.jsx(It,{}),Ae==="userMenu"&&P.jsx(Vt,{})]}),P.jsx($j,{isOnDressingScreen:f==="ready"})]})},FN=document.getElementById("root");if(!FN)throw new Error("Could not find root element to mount to");const Wj=R2.createRoot(FN);Wj.render(P.jsx(CI.StrictMode,{children:P.jsx(Uj,{children:P.jsx(Jj,{})})}));
